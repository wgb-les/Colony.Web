function validate(){var a=$("[data-password=password]"),b=$("[data-password=confirm]"),c=!1;return a.val()?$('[data-errormessage="password"]').addClass("hide"):($('[data-errormessage="password"]').removeClass("hide"),$('[data-errormessage="match"]').addClass("hide"),c=!0),b.val()?$('[data-errormessage="confirm"]').addClass("hide"):($('[data-errormessage="confirm"]').removeClass("hide"),$('[data-errormessage="match"]').addClass("hide"),c=!0),b.val()!==a.val()&&!1===c?($('[data-errormessage="match"]').removeClass("hide"),c=!0):$('[data-errormessage="match"]').addClass("hide"),!c}function initializeDraggables(){0==$("#draggables").length&&$("body").prepend('<div id="draggables"></div>'),Redant.util.browser.isMobile()||$("*[data-productcode], *[data-imageassetid], *[data-imageurl]").not(".no-drag, .scrapAdd").draggable({cursor:"move",revert:"invalid",helper:function(){return $copy=$(this).clone(),$copy},appendTo:"#draggables",scroll:!1,distance:30,zIndex:999999,start:function(a,b){b.helper.css("width","123px"),b.helper.css("height","123px")}}).disableSelection()}function initializeShareDialog(){$("#share").detach().appendTo($("#content"))}function megaDropdown(){var a=$(".has-mega-dropdown"),b=0;a.each(function(){var c=this,d=$(this),e=$("body");$(".mega-dropdown",d);activeClass="mega-dropdown-active",c.toggleOverlay=function(a){var b=".mega-dropdown-overlay";"show"===a?$(b).addClass(activeClass):"hide"===a&&$(b).removeClass(activeClass)},c.addOverlay=function(){0===$(".mega-dropdown-overlay").length&&e.append('<div class="mega-dropdown-overlay"></div>')},c.bindUI=function(){function e(){0!=b&&clearTimeout(b)}if(Modernizr.touch){$("a",d).first().on("click",function(b){if(!$(this).parent().hasClass(activeClass))return b.preventDefault(),a.removeClass(activeClass),$(this).parent().addClass(activeClass),c.toggleOverlay("show"),!1});var f=function(a){var b=$(".mega-dropdown-active .mega-dropdown");b.is(a.target)||0!==b.has(a.target).length||(b.parent().removeClass(activeClass),c.toggleOverlay("hide"))};$("body").on("click",f),$(".mega-dropdown-overlay").on("click",f)}else d.on("mouseenter",function(){var d=$(this);e(),b=setTimeout(function(){a.removeClass(activeClass),d.addClass(activeClass),c.toggleOverlay("show")},150)}),d.on("mouseleave",function(){e(),b=setTimeout(function(){b=0,a.removeClass(activeClass),c.toggleOverlay("hide")},350)})},c.init=function(){c.bindUI(),c.addOverlay()},c.init()})}function initializeDraggables(){0==$("#draggables").length&&$("body").prepend('<div id="draggables"></div>'),Redant.util.browser.isMobile()||$("*[data-productcode], *[data-imageassetid], *[data-imageurl]").not(".no-drag, .scrapAdd").draggable({cursor:"move",revert:"invalid",helper:function(){return $copy=$(this).clone(),$copy},appendTo:"#draggables",scroll:!1,distance:30,zIndex:999999,start:function(a,b){b.helper.css("width","123px"),b.helper.css("height","123px")}}).disableSelection()}function initializeShareDialog(){$("#share").detach().appendTo($("#content"))}function megaDropdown(){var a=$(".has-mega-dropdown"),b=0;a.each(function(){var c=this,d=$(this),e=$("body"),f=($(".mega-dropdown",d),'<div class="mega-dropdown-overlay"></div>');activeClass="mega-dropdown-active",c.toggleOverlay=function(a){var b=".mega-dropdown-overlay";"show"===a?$(b).addClass(activeClass):"hide"===a&&$(b).removeClass(activeClass)},c.addOverlay=function(){0===$(".mega-dropdown-overlay").length&&e.append(f)},c.bindUI=function(){function e(){0!=b&&clearTimeout(b)}if(Modernizr.touch){$("a",d).first().on("click",function(b){if(!$(this).parent().hasClass(activeClass))return b.preventDefault(),a.removeClass(activeClass),$(this).parent().addClass(activeClass),c.toggleOverlay("show"),!1});var f=function(a){var b=$(".mega-dropdown-active .mega-dropdown");b.is(a.target)||0!==b.has(a.target).length||(b.parent().removeClass(activeClass),c.toggleOverlay("hide"))};$("body").on("click",f),$(".mega-dropdown-overlay").on("click",f)}else d.on("mouseenter",function(){var d=$(this);e(),b=setTimeout(function(){a.removeClass(activeClass),d.addClass(activeClass),c.toggleOverlay("show")},150)}),d.on("mouseleave",function(){e(),b=setTimeout(function(){b=0,a.removeClass(activeClass),c.toggleOverlay("hide")},350)})},c.init=function(){c.bindUI(),c.addOverlay()},c.init()})}function WalkerGreenbank(a,b,c,d,e){function m(a){var a=c(a);a.each(function(){function e(){a.wrap('<div class="fixed-element-wrap" />').parent().css("height",naturalHeight)}function f(){naturalHeight=a.outerHeight(!0),a.parent().css("height",naturalHeight)}var a=c(this),b=c(window),d=a.offset().top;naturalHeight=a.outerHeight(!0),headerHeight=c("#header").outerHeight(),e(),b.on("resize",function(){f()}),b.scroll(function(){b.scrollTop()>d?a.addClass("fixed"):(a.removeClass("fixed"),f())})})}function n(){el=c("#container input, #container select, #container textarea"),el.focus(function(){c("#header").css({position:"absolute",top:"0px"}),c("#footer").css({position:"absolute",bottom:"0px"}),c("#corporateInfo").css({display:"none"})}),el.blur(function(){c("#header").css({position:"",top:""}),c("#footer, #corporateInfo").css({position:"",bottom:"",display:""})})}function o(){var a=c("#footer").outerHeight()+60;c("#container").find("input, select, textarea").focus(function(){var b=c(this).offset().top+c(this).height(),d=c(window).scrollTop(),e=d+c(window).height();b+a>e&&c("html, body").animate({scrollTop:d+a},300)})}function p(a){var b=c(a);c(".inspirationCategories .item").removeClass("selected"),b.parent().addClass("selected"),b.parent().hasClass("category")&&event.preventDefault(),"Style"==b.find(".itemTitle").text()&&(c("#byRoom").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byColour").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byStyle").animate({height:c("#byStyle").find("section").outerHeight()},400,function(){})),"Room"==b.find(".itemTitle").text()&&(c("#byStyle").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byColour").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byRoom").animate({height:c("#byRoom").find("section").outerHeight()},400,function(){})),"Colour"==b.find(".itemTitle").text()&&(c("#byStyle").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byRoom").animate({height:0,avoidCSSTransitions:!0},400,function(){}),c("#byColour").animate({height:c("#byColour").find("section").outerHeight()},400,function(){}))}var f,g,h,i,j,k=!1,l=!1;d.util.loadScript("/_js/shared/faq.js"),d.util.browser.isIOS()?c(document).ready(function(){c("input[type=checkbox]").on("change",function(a){c("label[for='"+c(this).attr("id")+"']").removeClass("selected"),1==c(this).prop("checked")&&c("label[for='"+c(this).attr("id")+"']").addClass("selected")}),c("html").addClass("mac-ios")}):-1!=navigator.userAgent.toLowerCase().indexOf("webkit")&&navigator.vendor.toLowerCase().indexOf("apple")>=0&&c("input[type=checkbox]").on("change",function(a){c("label[for='"+c(this).attr("id")+"']").removeClass("selected"),1==c(this).prop("checked")&&c("label[for='"+c(this).attr("id")+"']").addClass("selected")}),d.util.browser.isMobile()||window.addEventListener&&window.addEventListener("orientationchange",function(){var b=c("#siteLinks ul, #nav ul, .footerToggles.long");if(0===orientation||180===orientation){c(".productList").show();var d=c(".selectedItemContainer").height();c(".selectedItemContainer").css("height",d+200),b.is(":visible")&&b.hide()}else c(".selectedItemContainer").css("height","auto!important"),b.is(":visible")||b.show();c(".canvas_container").length>0&&requestTimeout(function(){var a=c(".canvas_container").width();c(".canvas_container, .caroufredsel_wrapper").height(a)},100)}),c(window).load(function(){var a=c(".productCollections").find(" > .item img");a.css("height",.6714286*a.outerWidth());var b=c("#inspirationalImages").find(".inspirationCategories .category img.thumb");b.css("height",.6714286*b.outerWidth()),setCarousels()}),function(){var e,f,b=".js-imageswap",d=".js-imageswap-main";c(document).on("click",".js-imageswap-gallery a",function(a){a.preventDefault(),e=c("img",this).attr("src"),currentImg=c(this).closest(c(b)).find(c(d)),f=currentImg.attr("src"),c("img",this).attr("src",f),currentImg.attr("src",e)})}(),c(document).ready(function(){function e(){return c(window).outerHeight()-(c("#header").outerHeight()+c("#footer").outerHeight())}function q(){var a=c("#header").outerHeight(),b=c("#footer").outerHeight();c("#externalSiteContainer").css({height:c(document).height()-(a+b)+"px"})}function r(a){var b=c(window),d=b.outerHeight();a.css({"max-height":d-100}),b.resize(function(){var c=b.outerHeight();a.css({"max-height":c-100})})}if(m(".fixed-on-scroll"),c(".more-care-info").click(function(){c(".care-info").toggle();var a=c(this);return c(".care-info").is(":visible")?a.html('<span class="icon icon-angle-up"></span>Hide Key'):a.html('<span class="icon icon-angle-down"></span>Show Key'),!1}),c(".toggle-categories").click(function(){c("#category-tabs").toggle(),c(".toggle-categories-space").toggle()}),d.util.browser.isMobile()||d.util.browser.isTablet()?c(".imageCarousel .items").trigger("stop",!0):c(".scroll-pane").remove(),d.util.browser.isIOS()&&(n(),d.util.browser.isIpad?c("#nav .toggle").addClass("ipad_hover"):c(".searchSite").mouseover(function(){c(".searchPanel").is(":visible")||c(this).find(".tooltip, .arrow").fadeIn()}).mouseout(function(){c(this).find(".tooltip, .arrow").fadeOut()})),jQuery.fn.extend({toggleText:function(a,b){var c=!1,d=this;return this.click(function(){c?(d.text(a),c=!1):(d.text(b),c=!0)}),this}}),c(document.body).on("click",".more-info",function(a){return a.preventDefault(),c(".eatra-info").toggle(),!1}),c(".more-info").toggleText("More Information","Less Information"),jQuery(window).scroll(function(){k||(k=!0,jQuery(this).scrollTop()>500?jQuery(".back-to-top").css("bottom","42px"):jQuery(".back-to-top").css("bottom","0px"),jQuery(this).scrollTop()>100&&c(".scrollDownAnt").hide(),requestTimeout(function(){k=!1},500))}),c(".back-to-top").click(function(){return c(document).animate({scrollTop:0},600),!1}),(d.util.browser.isMobile()||d.util.browser.isTablet())&&c(".tap-to-zoom").show(),c(document.body).on("click touchstart",".tap-to-zoom",function(a){var b=c(".imageCarousel"),d=b.find(".items");"Enable Zoom"==c(this).text()?(c(".zoom-helper").fadeIn(500),requestTimeout(function(){c(".zoom-helper").fadeOut(500)},2e3),c(this).text("Disable Zoom"),c(".scroll-pane").remove(),d.trigger("stop",!1)):(c(this).text("Enable Zoom"),b.prepend('<div class="scroll-pane" style="display:none;"></div>'),c(".imageCarousel .scroll-pane").show(),d.trigger("play",!0))}),c(document.body).on("click",".carousel-play-pause",function(a){!0===l?(c(this).html('<span class="icon icon-play"></span>'),pauseCollection(),l=!1):(c(this).html('<span class="icon icon-pause"></span>'),collectionRotate(),l=!0)}),c(document.body).on("click touchstart",".imageCarousel .bullets .icon-play",function(a){a.preventDefault();var b=c(a.currentTarget);return b.hasClass("icon-pause")?(c(".imageCarousel .items").trigger("pause",!1),b.removeClass("icon-pause")):(c(".imageCarousel .items").trigger("play",!0),b.addClass("icon-pause")),!1}),c(".searchPanel, .bottomMenu").mouseenter(function(){preventOpen=!0}).mouseleave(function(){preventOpen=!1}),o(),c(".miniBasket .items, .scrapBookAdd .inner").niceScroll({}),c("input, textarea").placeholder(),c(".content-furnitureAccordion .dimensionsSpecifications .item").hover(function(){c("#dimensionsSpecificationsImage img").attr("src",c(this).data("large-image"))},function(){}),document.location.hash.indexOf("by")>0){p(c('.inspirationCategories.productCollections.collectionsPreview a.item[href="'+document.location.hash+'"]'))}c(document.body).on("click",".inspirationCategories.productCollections.collectionsPreview a.item",function(a){return document.location.hash="by"+c(this).find(".itemTitle").text(),p(this),!1}),f=new FormElement({type:"ListItem",elements:c(".tagbuilder")}),g=new FormElement({type:"MaxLength",elements:c(".wordCount")}),h=new FormElement({type:"Spinner",elements:c(".spinner")}),i=new FormElement({type:"SliderSingle",elements:c(".slider.single")}),j=new FormElement({type:"SliderRange",elements:c(".slider.range")}),c(".datepicker input").each(function(){c(this).datepicker({dateFormat:"dd/mm/yy",showOn:"both",buttonText:"Choose"})}),c(".dateRange").each(function(){c(".from input").datepicker({dateFormat:"dd/mm/yy",showOn:"both",buttonText:"Choose",onClose:function(a){c(".to input").datepicker("option","minDate",a)}}),c(".to input").datepicker({dateFormat:"dd/mm/yy",showOn:"both",buttonText:"Choose",onClose:function(a){c(".from input").datepicker("option","maxDate",a)}})}),c(".autocomplete input").autocomplete({source:"/shops/WgShop/PredictiveSearchFrontend/",select:function(a,b){b.item.url&&(a.preventDefault(),window.location=b.item.url)}}),c(".footerToggles.long li a").bind("click",function(){c(".footerToggles.long li a.highlightedMenu").removeClass("highlightedMenu"),c(this).addClass("highlightedMenu")}),c(".short li a").bind("click",function(){return c(".short li a").removeClass("selected"),c(this).addClass("selected"),c(".footerToggles.long").hide(),c(window).width()<769&&c(".footerToggles.short").hide(),!1}),c(".tagpickerSearch").each(function(){field=c(this);var a=c(this).closest("form")[0],b=!0;"allownew=false"==field.attr("rel")&&(b=!1);var e={width:"100%",json_url:"/shops/WgShop/PredictiveSearchFrontend/",complete_text:"Search for tags or enter your own...",bricket:!1,onselect:function(){ajaxSearch(),c(".postbackSearch").length>0&&c(a).submit()},oncreate:function(){},onremove:function(b){c("#"+b._id).prop("selected",!1),ajaxSearch(),c(".postbackSearch").length>0&&c(a).submit()}};b&&(e.newel=!0),c("select",field).fcbkcomplete(e)}),c("#nav .toggle").bind("click",function(){return c("#nav ul").toggle(),c("#siteLinks ul").hide(),c("#footer ul").hide(),!1}),c("#siteLinks .toggle").bind("click",function(){return c("#siteLinks ul").toggle(),c("#nav ul").hide(),c("#footer ul").hide(),!1}),c("#footer .toggle").bind("click",function(){return c("#footer ul").toggle(),c("#nav ul").hide(),c("#siteLinks ul").hide(),c(".long").hide(),!1});new c.accordion(c(".furnitureAccordion"),{openFirst:!0,closeOthers:!1,accordionType:"adv",trigger:".toggle-furnitureAccordion",element:".content-furnitureAccordion",container:".boxSection"});c(".content-furnitureAccordion").show(),c("#brochure").length>0&&(document.ontouchmove=function(a){a.preventDefault()},c("#brochure").turn({display:"double",acceleration:!0,gradients:!0,elevation:50,height:e(),when:{turned:function(a,b){}}}),c(window).resize(function(a){c("#brochure").turn("size",c(window).width(),e())}),c(window).bind("keydown",function(a){37==a.keyCode?c("#brochure").turn("previous"):39==a.keyCode&&c("#brochure").turn("next")})),c("#externalSiteContainer").length>0&&(c(window).resize(function(a){q()}),q()),c(".quickPurchase .cuttingType input[type='radio']").click(function(){c(this).parents(".cuttingType").find("label").removeClass("selected"),c(this).parent().addClass("selected")}),c(".toggleFilters").click(function(a){c(".filterAccordion").toggle()}),c(".filterUpdate .button").click(function(a){c("#productFilters").foundation("reveal","close"),a.preventDefault()}),c(".imageMiniBasket .items").hide(),c(".basketMessage a").click(function(a){c(this).parents(".basketMessage").toggleClass("expanded"),c(this).parents(".basketMessage").siblings(".items").toggle(),a.preventDefault()}),c(".inspirationHeader .infoContainer").hide(),c(".inspirationHeader .toggle").click(function(a){c(this).toggleClass("expanded"),c(this).parents(".inspirationHeader").find(".infoContainer").slideToggle(),a.preventDefault()}),c(".inspirationImages").magnificPopup({delegate:"a",type:"inline",tLoading:"Loading image...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,preload:[0,1]},callbacks:{open:function(){var a=c.magnificPopup.instance;a.contentContainer.addClass("hotspot-popup-content"),r(a.contentContainer.find(".hotspot-image"))},change:function(){r(this.content.find(".hotspot-image"))}}}),c(".inspirationProducts .productList .item a").click(function(a){return a.preventDefault(),c(".imageCarousel .items").trigger("slideTo",c("#zoom"+c(this).data("imageassetid")).parent()),c(this).parents(".items").children(".item").removeClass("selected"),c(this).parent().addClass("selected"),!1}),c(".siteMessage [data-message-no]").click(function(a){c.cookie("siteMessageRedirect",!1,{expires:30,path:"/"}),el=c(this).parents(".siteMessage"),el.animate({bottom:"-"+(el.outerHeight()+30)},500,"easeInBack"),a.preventDefault()}),requestTimeout(function(){c(".zoomContainer").hide(),c(".zoomContainer").first().show()},10)})}function clearCanvasGrid(a){setTimeout(function(){var b=null,c=null;b=currentCanvas.context,null==b&&(c=document.getElementById(a),b=c.getContext("2d")),b.clearRect(0,0,b.canvas.width,b.canvas.height),b=null,c=null},500)}function highlight(a){if(a.find(".hotspots").length>0?$(".info-text span").fadeIn():$(".info-text span").fadeOut(),!Redant.util.browser.isMobile()&&!Redant.util.browser.isTablet())return void $(".currentSlide").find(".canvas_container").remove();a.addClass("currentSlide"),setTimeout(function(){if($(".canvasZoom").length>0){$(".canvasZoom").css({"z-index":"7"});var a=$(".currentSlide").find(".canvasZoom"),b=$(".currentSlide").find(".canvas_container").data("img");currentCanvas=new ImgTouchCanvas({canvas:a[0],path:b}),(Redant.util.browser.isMobile()||Redant.util.browser.isTablet())&&$(".mainZoom").hide()}},100)}function unhighlight(a){if(a.css("opacity","1"),0!=$(".currentSlide").length&&(Redant.util.browser.isMobile()||Redant.util.browser.isTablet())){clearCanvasGrid($(".currentSlide").find(".canvasZoom").attr("id")),$(".currentSlide").removeClass("currentSlide")}}function setCarousels(){$(".hotspotTarget").each(function(){$(this).qtip({position:{my:"left center",at:"right center",viewport:!0,adjust:{method:"flipinvert",x:5}},style:{classes:"hotspotProduct",tip:{width:10,height:8}},show:{event:"mouseenter",solo:!0,delay:0,effect:function(){$(this).fadeTo(200,1)}},hide:{event:"mouseleave",delay:300,fixed:!0,effect:function(){$(this).fadeTo(400,0,function(){$(this).hide()})}},content:{text:$(this).next(".hotspotItem")},events:{visible:function(){$.setDisabledByDefault(!0)},hidden:function(){$.setDisabledByDefault(!1)}}})}),$(".imageCarousel .items li:first-child").find(".hotspots").length>0&&$(".info-text span").fadeIn(),$(".collectionShots .imageCarousel").find("ul.items").find(" > li > img").css({height:(.67133*$(".collectionShots .imageCarousel").width()).toString()+"px",width:$(".collectionShots .imageCarousel").width()+"px"}),$(".inspirationCarousel .imageCarousel").find("ul.items").find(" > li > img").css({height:(.67133*$(".inspirationCarousel .imageCarousel").width()).toString()+"px",width:$(".inspirationCarousel .imageCarousel").width()+"px"}),$(".imageCarousel:not(.productDetailsCarousel) .items").carouFredSel({responsive:"true",width:"715px",height:"480px",items:1,queue:!0,scroll:{easing:"easeInOutSine",onBefore:function(a){unhighlight(a.items.old),$(this).trigger("currentPosition",function(a){var b=a++;b=a++,$(".galleryToggles li a").length>0&&($(".zoomContainer").hide(),$(".zoomContainer:nth-child("+parseInt(b)+")").show()),$(".inspirationProducts .productList .item").length>0&&($(".inspirationProducts .productList .item").removeClass("selected"),$(".inspirationProducts .productList .item:nth-child("+parseInt(b)+")").addClass("selected"))}),$.setDisabledByDefault(!0)},onAfter:function(a){highlight(a.items.visible),$.setDisabledByDefault(!1)}},auto:!0,prev:{button:".imageCarousel .prev",key:"left"},next:{button:".imageCarousel .next",key:"right"},items:{height:"480px"},pagination:{container:".imageCarousel .bullets ul",anchorBuilder:function(a,b){return'<li><a href="#'+a+'"><span>Slide '+a+"</span></a></li>"}},onCreate:function(){if($(this).parents(".carousel").find(".bullets").show(),$(this).parents(".carousel").hasClass("furnitureCarousel"))$(".canvas_container, .caroufredsel_wrapper, .zoomWindow").height(439..toString()+"px");else{var a=$(".canvas_container").width();$(".canvas_container, .caroufredsel_wrapper").height(a)}(Redant.util.browser.isMobile()||Redant.util.browser.isTablet())&&highlight($(".items li").first())}}).mouseover(function(){$(".imageCarousel .items").trigger("stop",!1),$(".icon-pause").removeClass("icon-pause")}).mouseout(function(){$(".imageCarousel .items").trigger("play",!0),$(".icon-play").removeClass("icon-pause").addClass("icon-pause")}).click(function(a){return a.preventDefault(),!1}),$(".imageCarousel.productDetailsCarousel .items").carouFredSel({responsive:"true",width:"715px",height:"480px",items:1,queue:!0,scroll:{easing:"easeInOutSine",onBefore:function(a){unhighlight(a.items.old),$(this).trigger("currentPosition",function(a){var b=a++;b=a++,console.log(a,b),$(".galleryToggles li a").length>0&&($(".zoomWindow").hide(),$(".zoomWindow:eq("+parseInt(b)+")").show()),$(".inspirationProducts .productList .item").length>0&&($(".inspirationProducts .productList .item").removeClass("selected"),$(".inspirationProducts .productList .item:nth-child("+parseInt(b)+")").addClass("selected"))}),$.removeData(a.items.old.children("img"),"elevateZoom"),$(".zoomContainer").remove(),$.setDisabledByDefault(!0)},onAfter:function(a){highlight(a.items.visible);var d=$(".carousel img");d.length>0&&!Redant.util.browser.isTablet()&&!Redant.util.browser.isMobile()&&setTimeout(function(){d.height(),d.width(),matchMedia("only screen and (max-width: 48em)").matches?a.items.visible.children("img").elevateZoom({responsive:!0,gallery:"galleryToggles",galleryActiveClass:"selected",zoomType:"inner"}):a.items.visible.children("img").elevateZoom({responsive:!0,gallery:"galleryToggles",galleryActiveClass:"selected",borderSize:0,lensOpacity:.2,zoomWindowOffetx:1,zoomWindowWidth:557,zoomWindowHeight:d.height()})},500),$.setDisabledByDefault(!1)}},auto:!1,prev:{button:".imageCarousel .prev",key:"left"},next:{button:".imageCarousel .next",key:"right"},items:{height:"480px"},pagination:{container:".imageCarousel .bullets ul",anchorBuilder:function(a,b){return'<li><a href="#'+a+'"><span>Slide '+a+"</span></a></li>"}},onCreate:function(){if($(this).parents(".carousel").find(".bullets").show(),$(this).parents(".carousel").hasClass("furnitureCarousel"))$(".canvas_container, .caroufredsel_wrapper, .zoomWindow").height(439..toString()+"px");else{var a=$(".canvas_container").width();$(".canvas_container, .caroufredsel_wrapper").height(a)}if(!Redant.util.browser.isMobile()&&!Redant.util.browser.isTablet()){$(".canvas_container").remove();var d=$(".carousel img");return void(d.length>0&&!Redant.util.browser.isTablet()&&!Redant.util.browser.isMobile()&&setTimeout(function(){d.height(),d.width();matchMedia("only screen and (max-width: 48em)").matches?$(".items li").first().children("img").elevateZoom({responsive:!0,gallery:"galleryToggles",galleryActiveClass:"selected",zoomType:"inner"}):$(".items li").first().children("img").elevateZoom({responsive:!0,gallery:"galleryToggles",galleryActiveClass:"selected",borderSize:0,lensOpacity:.2,zoomWindowOffetx:1,zoomWindowWidth:557,zoomWindowHeight:d.height()})},500))}highlight($(".items li").first())}}).click(function(a){return a.preventDefault(),!1}),$(".productCarousel .items").carouFredSel({infinite:!1,circular:!1,align:"left",width:"100%",height:"206px",queue:!0,scroll:{easing:"easeInOutSine",onBefore:function(){var a=$(this).parents(".carousel");a.parents(".shopExtraProducts").find(".prev.right.icon-angle-left").removeClass("disabled"),a.parents(".shopExtraProducts").find(".next.right.icon-angle-right").removeClass("disabled");var b=a.find(".bullets li").length,c=null;$(this).trigger("currentPage",function(a){c=a}),0==c&&a.parents(".shopExtraProducts").find(".prev.right.icon-angle-left").addClass("disabled"),(c+1==b||a.find(".item").length<3)&&a.parents(".shopExtraProducts").find(".next.right.icon-angle-right").addClass("disabled"),$.setDisabledByDefault(!0)},onAfter:function(){$.setDisabledByDefault(!1)}},auto:!1,prev:{button:function(){return $(this).parent().siblings(".prev")}},next:{button:function(){return $(this).parent().siblings(".next")}},pagination:{container:function(){return $(this).parent().siblings(".bullets").children("ul")},anchorBuilder:function(a,b){return'<li><a href="#'+a+'"><span>Slide '+a+"</span></a></li>"}},swipe:!0,onCreate:function(){$(this).parents(".carousel").find(".bullets").show();var a=null,b=$(this).parents(".carousel"),c=b.find(".bullets li").length;$(this).trigger("currentPage",function(b){a=b}),0==a&&b.parents(".shopExtraProducts").find(".prev.right.icon-angle-left").addClass("disabled"),(a+1==c||b.find(".item").length<=3)&&b.parents(".shopExtraProducts").find(".next.right.icon-angle-right").addClass("disabled")}}),Redant.util.browser.isMobile()&&$(".imageCarousel .items").trigger("stop",!0),$(".next.right.icon-angle-right").click(function(a){return a.preventDefault(),$(this).parent().parent().find(".items").trigger("next"),!1}),$(".prev.right.icon-angle-left").click(function(a){return a.preventDefault(),$(this).parent().parent().find(".items").trigger("prev"),!1}),$(".globalNavItem").not(".active").click(function(a){$(this).children(".leavingSite").fadeIn(),$(".leavingSite-bg").fadeIn()}),$(".closeLeavingBox, .closeBox").click(function(a){return $(".leavingSite").fadeOut(),$(".leavingSite-bg").fadeOut(),!1})}function resetMenu(){$(".searchPanel").fadeOut(function(){$(".searchSite").animate({bottom:"10px"},100,function(){})}),$(".bottomMenu").slideUp(),$("#footer").animate({bottom:"0px",avoidCSSTransitions:!0},500,function(){}),$("#corporateInfo").animate({bottom:"-60px",avoidCSSTransitions:!0},500,function(){}),$(".corporateToggle").find(".icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-up"),$("#collections, #container").show(),Wg.Stockists&&Wg.Stockists.hideStockists()}function setScrapbookItem(a,b){b.scrapbookItemId=parseInt(a.data("scrapbookitemid"));var c=parseInt(a.data("skuid")||b.skuId);b.skuId=c,b.description=a.data("description")||b.description;var d=parseInt(a.data("imageassetid")||parseInt(a.attr("data-imageassetid"))||b.imageAssetId);b.imageAssetId=d;var e=parseInt(a.css("z-index"));b.zIndex=e;var f,g,h,i;a.hasClass("deleted")?(f=null,g=null,h=null,i=null,b.isOnCanvas=!1):(f=parseInt(a.css("top")),g=parseInt(a.css("left")),h=parseInt($(".ui-wrapper",a).height()),i=parseInt($(".ui-wrapper",a).width()),b.isOnCanvas=!0),b.top=f,b.left=g,b.height=h,b.width=i;var j=getAngle($(".ui-wrapper",a));b.rotation=j,b.scrapbookId=$("#ScrapbookId").val();var k=$("#scrapBook .added .scrapInner img");return b.img=k.attr("src"),b}function pushToServer(a,b,c,d){var e=Redant.util.ajaxLoader();$("body").append(e),e.css({"z-index":"9999",bottom:"40px"}),e.show(),$(".save-scrapbook").text("Saving!"),scrapbookSaveXhr=$.ajax({url:a,data:b,type:"POST",async:c,contentType:"application/json",success:function(a){d&&d(a),requestTimeout(function(){$(".save-scrapbook").text("Saved!")},1300),requestTimeout(function(){$(".save-scrapbook").text("Save")},3e3),e.fadeOut(),e.remove()}})}function createScrapbook(){var a=JSON.stringify(scrapbook);pushToServer("/scrapbook/moodboards/createscrapbookdata",a,!1,function(a){refreshFields(a)})}function updateScrapbook(){var a=JSON.stringify(scrapbook);pushToServer("/scrapbook/moodboards/updatescrapbookdata",a,!1,function(a){refreshFields(a)})}function refreshFields(a){$("#ScrapbookId").val(a.id),scrapbook.id=a.id,scrapbook.name=a.name,document.title="Moodboard - "+(scrapbook.name||"New Moodboard"),$(".breadcrumb li").last().text(scrapbook.name||"New Moodboard"),$("#share form").attr("action","/Sharing/Share/SendToAFriend?shareUrl="+encodeURIComponent(a.shareUrl)),$(".shareOptions .twitter").attr("href",a.twitterUrl),$(".shareOptions .facebook").attr("href",a.facebookUrl),$(".shareOptions .pinterest, .scrapControls #pinterestShare").attr("href",a.pinterestUrl),$("#shareButton").show().css("display","")}function addScrapbookItem(a,b){0==scrapbook.id&&createScrapbook(),scrapbookItem=new Scrap,setScrapbookItem(a,scrapbookItem);var c=JSON.stringify(scrapbookItem);pushToServer("/scrapbook/moodboards/additem",c,!0,function(c){scrapbook.items.push(new Scrap(c));var d=c.scrapbookItemId;a.data("scrapbookitemid",d).attr("id","scrapbookItem_"+d),a.attr("data-scrapbookitemid",d),$('div[id^="scrapbookItemInner_"]',a).attr("id","scrapbookItemInner_"+d),b&&b(),refreshScrapbookList(),getProducts()})}function saveScrapbookItem(a,b){var c=$(a).data("scrapbookitemid");if(""==c||null==c||"undefined"==c)return addScrapbookItem(a,b);var d=getScapbookItem(c);if(null!=d){setScrapbookItem(a,d);var e=JSON.stringify(d);scrapbookSaveXhr=pushToServer("/scrapbook/moodboards/updateitem",e,!0,function(a){b&&b();for(var c in scrapbook.items)if(scrapbook.items[c].scrapbookItemId==a.scrapbookItemId){scrapbook.items[c]=a;break}refreshScrapbookList(),getProducts()})}}function getScapbookItem(a){var b=a;if(null==b){var c=$("#scrapBook .scrap.selected");b=c.data("scrapbookitemid")}b=parseInt(b);var d=scrapbook.items.filter(function(a){return a.scrapbookItemId==b});return 0==d.length?null:d[0]}function initialize(){if(!isMoving){if(scrapbook.items.length>0){var a=_.template($("script.scrapbookTemplate").html());$("#scrapBook").html(a({scrapbookItems:scrapbook.items})),$(selectedItem).trigger("mousedown"),$.each(scrapbook.items,function(){this.isOnCanvas&&$("#scrapControls").fadeIn(300)})}initializeScrapbookDraggables(),$("#scrapBook .scrap").each(function(){var a=$(this),c=($(this).find(".scrapInner"),$(this).find(".scrapInner img")),d=a.data("scrapbookitemid"),e=getScapbookItem(d),f=null!=e?e.rotation:0;c.resizable({aspectRatio:!0,handles:"se",minHeight:120,minWidth:120,resize:function(a,b){0==touch&&$(this).css({top:parseInt(b.position.top,10)+(b.originalSize.height-b.size.height)/2,left:parseInt(b.position.left,10)+(b.originalSize.width-b.size.width)/2})},stop:function(a,b){saveScrapbookItem($(b.helper).closest("div.scrap"))}}),a.draggable({revert:!1,containment:$("#scrapBook"),start:function(){console.log("dragging"),$("body").bind("touchmove",function(a){a.preventDefault()})},stop:function(a,b){saveScrapbookItem(b.helper),$("body").unbind("touchmove")}}),c.parent().rotatable({mtx:getMatrix(-f)})}),$("#scrapBook").droppable({accept:function(a){if(a.hasClass("scrapAdd")||"bar"==a.attr("id"))return!0},drop:handleMoodboardDrop}),$(".scrap:not('.added')").draggable("disable"),$(".productList.scrapBookList .item.greyOut").draggable("disable"),selectedItem&&setSelectedScrap(selectedItem)}}function initializeScrapbookDraggables(){0==$("#draggables").length&&$("body").prepend('<div id="draggables"></div>'),$(".scrapBookList.scrapBookList .item").draggable({appendTo:"#draggables",helper:function(){return $copy=$(this).clone(),$copy},cursor:"move",revert:"invalid",zIndex:999999999,start:function(a,b){b.helper.css("width","200px"),b.helper.css("height","200px"),b.helper.find("ul").remove(),b.helper.find("h3").remove(),b.helper.find("div.actions").remove()}})}function handleMoodboardDrop(a,b){var c=b.draggable.clone(),d=$("#scrapBook"),e=$(d).find(".scrap").length,f=c.data("scrapbookitemid"),g=c.data("skuid"),h=c.data("imageassetid"),i=c.find("h3").text();c.find("ul").remove(),c.find("h3").remove(),c.removeClass("scrapAdd"),$("#scrapbookItem_"+f).remove();var j=c.find("img").css({height:200,width:200,margin:0,resize:"none",position:"static",zoom:1,display:"block"}),k=$(j).data("image-zoom");null!=k&&j.attr("src",k),j.addClass("ui-resizable");var l=_.template($("script.scrapbookTemplate").html()),m=[],n=new Scrap;n.height=200,n.width=200,n.left=b.offset.left-70,n.top=b.offset.top-164,n.scrapbookItemId=f,n.skuId=g,n.imageAssetId=h,n.zIndex=e,n.imageUrl=j.attr("src"),n.description=i,m.push(n);var o=$(l({scrapbookItems:m})),p=o,r=($(".scrapInner",o),$(".scrapInner img, .scrapInner span, .scrapInner a",o));r.resizable({aspectRatio:!0,handles:"se",minHeight:120,minWidth:120,resize:function(a,b){0==touch&&$(this).css({top:parseInt(b.position.top,10)+(b.originalSize.height-b.size.height)/2,left:parseInt(b.position.left,10)+(b.originalSize.width-b.size.width)/2})},stop:function(a,b){saveScrapbookItem($(b.helper).closest("div.scrap"))}}),p.draggable({revert:!1,containment:$("#scrapBook")}),r.parent().rotatable(),saveScrapbookItem(o,function(){$("#scrapBook").append(o),$("#scrapControls").fadeIn(300),setSelectedScrap(o),$(".scrapBoobWelcome").fadeOut(400,function(){$(this).remove()})})}function getProducts(){var b=$("#ScrapbookId").val();return null==b&&(b=0),$.ajax({url:"/scrapbook/moodboards/products",data:{scrapbookId:b},cache:!1,success:function(a){$("#productsListContainer").html(a),null!=a&&""!=a&&$("a.sample").show()}})}function getScrapbook(){var b=$("#ScrapbookId").val()||0;if(null!=b&&0!=b)return $.ajax({url:"/scrapbook/moodboards/scrapbookdata",data:{scrapbookId:b},cache:!1,success:function(a){scrapbook=new Scrapbook(a),initialize()}})}function refreshScrapbookList(){var b=$("#ScrapbookId").val()||0;if(null!=b&&0!=b)return $.ajax({url:"/scrapbook/moodboards/scrapbookitemslist",data:{scrapbookId:b},cache:!1,success:function(a){$("#itemsInScrapbook").replaceWith(a),setCarousels(),initializeScrapbookDraggables()}})}function getAngle(a){var b=a.css("-webkit-transform")||a.css("-moz-transform")||a.css("-ms-transform")||a.css("-o-transform")||a.css("transform")||null;if(b){var c=b.split("(")[1].split(")")[0].split(","),d=c[0],e=c[1];c[2],c[3],Math.sqrt(d*d+e*e);return Math.round(Math.atan2(e,d)*(180/Math.PI))}return 0}function degToRad(a){return a*(Math.PI/180)}function radToDeg(a){return a*(180/Math.PI)}function getMatrix(a){var b=Math.cos(degToRad(-a)),c=Math.sin(degToRad(-a));return[b,c,-c,b]}function setSelectedScrap(a){$("#scrapBook .scrap").removeClass("selected");var b=$(a).data("scrapbookitemid");selectedItem=$('.scrap[data-scrapbookitemid="'+b+'"]'),$(selectedItem).addClass("selected"),$(selectedItem).addClass("border-dashed"),$(".selected .ui-resizable-handle, .selected .rotatable-handle").fadeIn()}function setScrapbookItem(a,b){var c,d,e,f,g,h,i,j,k;return b.scrapbookItemId=parseInt(a.data("scrapbookitemid")),c=parseInt(a.data("skuid")||b.skuId),b.skuId=c,b.description=a.data("description")||b.description,d=parseInt(a.data("imageassetid")||parseInt(a.attr("data-imageassetid"))||b.imageAssetId),b.imageAssetId=d,e=parseInt(a.css("z-index")),b.zIndex=e,a.hasClass("deleted")?(f=null,g=null,h=null,i=null,b.isOnCanvas=!1):(f=parseInt(a.css("top")),g=parseInt(a.css("left")),h=parseInt($(".ui-wrapper",a).height()),i=parseInt($(".ui-wrapper",a).width()),b.isOnCanvas=!0),b.top=f,b.left=g,b.height=h,b.width=i,j=getAngle($(".ui-wrapper",a)),b.rotation=j,b.scrapbookId=$("#ScrapbookId").val(),k=$("#scrapBook .added .scrapInner img"),b.img=k.attr("src"),b}function pushToServer(a,b,c,d){var e=Redant.util.ajaxLoader();$("body").append(e),e.css({"z-index":"9999",bottom:"40px"}),e.show(),$(".save-scrapbook").text("Saving!"),scrapbookSaveXhr=$.ajax({url:a,data:b,type:"POST",async:c,contentType:"application/json",success:function(a){d&&d(a),requestTimeout(function(){$(".save-scrapbook").text("Saved!")},1300),requestTimeout(function(){$(".save-scrapbook").text("Save")},3e3),e.fadeOut(),e.remove()}})}function createScrapbook(){var a=JSON.stringify(scrapbook);pushToServer("/scrapbook/moodboards/createscrapbookdata",a,!1,function(a){refreshFields(a)})}function updateScrapbook(){var a=JSON.stringify(scrapbook);pushToServer("/scrapbook/moodboards/updatescrapbookdata",a,!1,function(a){refreshFields(a)})}function refreshFields(a){$("#ScrapbookId").val(a.id),scrapbook.id=a.id,scrapbook.name=a.name,document.title="Moodboard - "+(scrapbook.name||"New Moodboard"),$(".breadcrumb li").last().text(scrapbook.name||"New Moodboard"),$("#share form").attr("action","/Sharing/Share/SendToAFriend?shareUrl="+encodeURIComponent(a.shareUrl)),$(".shareOptions .twitter").attr("href",a.twitterUrl),$(".shareOptions .facebook").attr("href",a.facebookUrl),$(".shareOptions .pinterest, .scrapControls #pinterestShare").attr("href",a.pinterestUrl),$("#shareButton").show().css("display","")}function addScrapbookItem(a,b){0==scrapbook.id&&createScrapbook(),scrapbookItem=new Scrap,setScrapbookItem(a,scrapbookItem);var c=JSON.stringify(scrapbookItem);pushToServer("/scrapbook/moodboards/additem",c,!0,function(c){scrapbook.items.push(new Scrap(c));var d=c.scrapbookItemId;a.data("scrapbookitemid",d).attr("id","scrapbookItem_"+d),a.attr("data-scrapbookitemid",d),$('div[id^="scrapbookItemInner_"]',a).attr("id","scrapbookItemInner_"+d),b&&b(),refreshScrapbookList(),getProducts()})}function saveScrapbookItem(a,b){var d,e,f,c=$(a).data("scrapbookitemid");if(""==c||null==c||"undefined"==c)return addScrapbookItem(a,b);null!=(d=getScapbookItem(c))&&(setScrapbookItem(a,d),e=JSON.stringify(d),f="/scrapbook/moodboards/updateitem",scrapbookSaveXhr=pushToServer(f,e,!0,function(a){b&&b();for(var c in scrapbook.items)if(scrapbook.items[c].scrapbookItemId==a.scrapbookItemId){scrapbook.items[c]=a;break}refreshScrapbookList(),getProducts()}))}function getScapbookItem(a){var c,d,b=a;return null==b&&(c=$("#scrapBook .scrap.selected"),b=c.data("scrapbookitemid")),b=parseInt(b),d=scrapbook.items.filter(function(a){return a.scrapbookItemId==b}),0==d.length?null:d[0]}function initialize(){if(!isMoving){if(scrapbook.items.length>0){var a=_.template($("script.scrapbookTemplate").html());$("#scrapBook").html(a({scrapbookItems:scrapbook.items})),$(selectedItem).trigger("mousedown"),$.each(scrapbook.items,function(){this.isOnCanvas&&$("#scrapControls").fadeIn(300)})}initializeScrapbookDraggables(),$("#scrapBook .scrap").each(function(){var a=$(this),c=($(this).find(".scrapInner"),$(this).find(".scrapInner img")),d=a.data("scrapbookitemid"),e=getScapbookItem(d),f=null!=e?e.rotation:0;c.resizable({aspectRatio:!0,handles:"se",minHeight:120,minWidth:120,resize:function(a,b){0==touch&&$(this).css({top:parseInt(b.position.top,10)+(b.originalSize.height-b.size.height)/2,left:parseInt(b.position.left,10)+(b.originalSize.width-b.size.width)/2})},stop:function(a,b){saveScrapbookItem($(b.helper).closest("div.scrap"))}}),a.draggable({revert:!1,containment:$("#scrapBook"),start:function(){console.log("dragging"),$("body").bind("touchmove",function(a){a.preventDefault()})},stop:function(a,b){saveScrapbookItem(b.helper),$("body").unbind("touchmove")}}),c.parent().rotatable({mtx:getMatrix(-f)})}),$("#scrapBook").droppable({accept:function(a){if(a.hasClass("scrapAdd")||"bar"==a.attr("id"))return!0},drop:handleMoodboardDrop}),$(".scrap:not('.added')").draggable("disable"),$(".productList.scrapBookList .item.greyOut").draggable("disable"),selectedItem&&setSelectedScrap(selectedItem)}}function initializeScrapbookDraggables(){0==$("#draggables").length&&$("body").prepend('<div id="draggables"></div>'),$(".scrapBookList.scrapBookList .item").draggable({appendTo:"#draggables",helper:function(){return $copy=$(this).clone()},cursor:"move",revert:"invalid",zIndex:999999999,start:function(a,b){b.helper.css("width","200px"),b.helper.css("height","200px"),b.helper.find("ul").remove(),b.helper.find("h3").remove(),b.helper.find("div.actions").remove()}})}function handleMoodboardDrop(a,b){var j,k,c=b.draggable.clone(),d=$("#scrapBook"),e=$(d).find(".scrap").length,f=c.data("scrapbookitemid"),g=c.data("skuid"),h=c.data("imageassetid"),i=c.find("h3").text();c.find("ul").remove(),c.find("h3").remove(),c.removeClass("scrapAdd"),$("#scrapbookItem_"+f).remove(),j=c.find("img").css({height:200,width:200,margin:0,resize:"none",position:"static",zoom:1,display:"block"}),k=$(j).data("image-zoom"),null!=k&&j.attr("src",k),j.addClass("ui-resizable");var l=_.template($("script.scrapbookTemplate").html()),m=[],n=new Scrap;n.height=200,n.width=200,n.left=b.offset.left-70,n.top=b.offset.top-164,n.scrapbookItemId=f,n.skuId=g,n.imageAssetId=h,n.zIndex=e,n.imageUrl=j.attr("src"),n.description=i,m.push(n);var o=$(l({scrapbookItems:m})),p=o,r=($(".scrapInner",o),$(".scrapInner img, .scrapInner span, .scrapInner a",o));r.resizable({aspectRatio:!0,handles:"se",minHeight:120,minWidth:120,resize:function(a,b){0==touch&&$(this).css({top:parseInt(b.position.top,10)+(b.originalSize.height-b.size.height)/2,left:parseInt(b.position.left,10)+(b.originalSize.width-b.size.width)/2})},stop:function(a,b){saveScrapbookItem($(b.helper).closest("div.scrap"))}}),p.draggable({revert:!1,containment:$("#scrapBook")}),r.parent().rotatable(),saveScrapbookItem(o,function(){$("#scrapBook").append(o),$("#scrapControls").fadeIn(300),setSelectedScrap(o),$(".scrapBoobWelcome").fadeOut(400,function(){$(this).remove()})})}function getProducts(){var a=$("#ScrapbookId").val();return null==a&&(a=0),$.ajax({url:"/scrapbook/moodboards/products",data:{scrapbookId:a},cache:!1,success:function(a){$("#productsListContainer").html(a),null!=a&&""!=a&&$("a.sample").show()}})}function getScrapbook(){var a=$("#ScrapbookId").val()||0;if(null!=a&&0!=a)return $.ajax({url:"/scrapbook/moodboards/scrapbookdata",data:{scrapbookId:a},cache:!1,success:function(a){scrapbook=new Scrapbook(a),initialize()}})}function refreshScrapbookList(){var a=$("#ScrapbookId").val()||0;if(null!=a&&0!=a)return $.ajax({url:"/scrapbook/moodboards/scrapbookitemslist",data:{scrapbookId:a},cache:!1,success:function(a){$("#itemsInScrapbook").replaceWith(a),setCarousels(),initializeScrapbookDraggables()}})}function getAngle(a){var b=a.css("-webkit-transform")||a.css("-moz-transform")||a.css("-ms-transform")||a.css("-o-transform")||a.css("transform")||null;if(b){var c=b.split("(")[1].split(")")[0].split(","),d=c[0],e=c[1];c[2],c[3],Math.sqrt(d*d+e*e);return Math.round(Math.atan2(e,d)*(180/Math.PI))}return 0}function degToRad(a){return a*(Math.PI/180)}function radToDeg(a){return a*(180/Math.PI)}function getMatrix(a){var b=Math.cos(degToRad(-a)),c=Math.sin(degToRad(-a));return[b,c,-c,b]}function setSelectedScrap(a){$("#scrapBook .scrap").removeClass("selected");var b=$(a).data("scrapbookitemid");selectedItem=$('.scrap[data-scrapbookitemid="'+b+'"]'),$(selectedItem).addClass("selected"),$(selectedItem).addClass("border-dashed"),$(".selected .ui-resizable-handle, .selected .rotatable-handle").fadeIn()}function bindSearchCriteria(a,b){filterForm.on("click",a,function(){var a=$(this).attr("for");return toggleCheckbox($("#"+a)),$(this).toggleClass("selected"),ajaxSearch(),toggleClear(b),!1})}function toggleClear(a){$(a+" input:checked").length>0?(console.log($(a+" input:checked")),$(a+" .clearFilter").show()):$(a+" .clearFilter").hide()}function toggleClearText(a){return $(a).val(""),ajaxSearch(),!1}function clearSelectedCheck(a){return $(a+" label.selected").each(function(){$(this).toggleClass("selected")}),$(a+" input:checked").each(function(){$(this).prop("checked",!1)}),$(a).find(".selectedAll").removeClass("selectedAll"),toggleClear(a),ajaxSearch(),!1}function ajaxSearch(a,b){if(void 0===a&&(a=1),!isSearching){var c=$("#searchProducts, #searchPaint"),d=Redant.util.ajaxLoader();if(c.length>0){var e=c.attr("id");$("body").append(d),$(".actionLoader").animate({bottom:"40px",avoidCSSTransitions:!0},300);var f="/shops/paint/?Page="+a;if("searchProducts"==e)var f="/shops/search/?Page="+a;$.ajax({type:"POST",url:f,data:$(c).serialize(),error:function(a){isSearching=!1,$(".actionLoader").animate({bottom:"-12px",avoidCSSTransitions:!0},300)},success:function(b){if($(".productList").siblings(".alertInfo").remove(),b.length>0){1==a?$(b).hasClass("alertInfo")?$(".productList").empty().before(b):$(".productList").empty().append(b):$(b).hasClass("alertInfo")||$(".productList").append(b);var c=$('#searchProducts [name="keywords"]').val();$(".tabs ul li a").each(function(a,b){this.href;this.href=Redant.util.setQuerystring(this.href,"keywords",c)}),initializeDraggables()}toggleClear(".filterColours"),toggleClear(".filterMartindale"),toggleClear(".filterBrands"),toggleClear(".filterEndUse"),toggleClear(".filterType"),toggleClear(".filterProductGroup"),toggleClear(".filterFlameRetardant"),isSearching=!1,$(".actionLoader").animate({bottom:"-20px",avoidCSSTransitions:!0},300)}})}}}function toggleCheckbox(a){$(a).prop("checked",!$(a).prop("checked"))}function getQuickShop(a){var b="/shops/wgshopsearch/ShopTheLook/?products="+a,c=this;this.ajaxReference=$.ajax({url:b,type:"POST",data:this.query,responseType:"json",complete:function(){c.ajaxReference=null},error:function(a){alert(a.status)},success:function(a){c.renderQuickShop(a)}})}function renderQuickShop(a){if(a?this.dataLastLoaded=a:a=this.dataLastLoaded,a){$("#ModalHolder").replaceWith(a);var c=document.getElementById("sl-modal");$("#sl-modal").show(),$(".sl-trigger-modal").click(function(){$("#sl-modal").show()}),$(".sl-close").click(function(){$("#sl-modal").hide()}),window.onclick=function(a){a.target==c&&(c.style.display="none")}}}function getEmbedScriptPath(a){for(var b=document.getElementsByTagName("script"),c="",d="",e=0;e<b.length;e++)b[e].src.match(a)&&(c=b[e].src);return""!=c&&(d="/"),c.split("?")[0].split("/").slice(0,-1).join("/")+d}function createStoryJS(a,b){function c(){LoadLib.js(v.js,d)}function d(){t.js=!0,"en"!=v.lang?LazyLoad.js(u.locale,e):t.language=!0,i()}function e(){t.language=!0,i()}function f(){t.css=!0,i()}function g(){t.font.css=!0,i()}function h(){t.font.js=!0,i()}function i(){t.checks>40||(t.checks++,t.js&&t.css&&t.font.css&&t.font.js&&t.language?t.finished||(t.finished=!0,k()):t.timeout=setTimeout("onloaded_check_again();",250))}function j(){var a="storyjs-embed";m=document.createElement("div"),n=""!=v.embed_id?document.getElementById(v.embed_id):document.getElementById("timeline-embed"),n.appendChild(m),m.setAttribute("id",v.id),v.width.toString().match("%")?n.style.width=v.width.split("%")[0]+"%":(v.width=v.width-2,n.style.width=v.width+"px"),v.height.toString().match("%")?(n.style.height=v.height,a+=" full-embed",n.style.height=v.height.split("%")[0]+"%"):v.width.toString().match("%")?(a+=" full-embed",v.height=v.height-16,n.style.height=v.height+"px"):(a+=" sized-embed",v.height=v.height-16,n.style.height=v.height+"px"),n.setAttribute("class",a),n.setAttribute("className",a),m.style.position="relative"}function k(){VMM.debug=v.debug,l=new VMM.Timeline(v.id),l.init(v),p&&VMM.bindEvent(global,onHeadline,"HEADLINE")}var l,m,n,o,p=!1,q="2.24",r="1.7.1",t={timeout:"",checks:0,finished:!1,js:!1,css:!1,jquery:!1,has_jquery:!1,language:!1,font:{css:!1,js:!1}},u={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",locale:embed_path+"js/locale/",jquery:"http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",font:{google:!1,css:embed_path+"css/themes/font/",js:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},v={version:q,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",css:u.css+"timeline.css?"+q,js:"",api_keys:{google:"",flickr:"",twitter:""},gmap_key:""},w=[{name:"Merriweather-NewsCycle",google:["News+Cycle:400,700:latin","Merriweather:400,700,900:latin"]},{name:"NewsCycle-Merriweather",google:["News+Cycle:400,700:latin","Merriweather:300,400,700:latin"]},{name:"PoiretOne-Molengo",google:["Poiret+One::latin","Molengo::latin"]},{name:"Arvo-PTSans",google:["Arvo:400,700,400italic:latin","PT+Sans:400,700,400italic:latin"]},{name:"PTSerif-PTSans",google:["PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"PT",google:["PT+Sans+Narrow:400,700:latin","PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"DroidSerif-DroidSans",google:["Droid+Sans:400,700:latin","Droid+Serif:400,700,400italic:latin"]},{name:"Lekton-Molengo",google:["Lekton:400,700,400italic:latin","Molengo::latin"]},{name:"NixieOne-Ledger",google:["Nixie+One::latin","Ledger::latin"]},{name:"AbrilFatface-Average",google:["Average::latin","Abril+Fatface::latin"]},{name:"PlayfairDisplay-Muli",google:["Playfair+Display:400,400italic:latin","Muli:300,400,300italic,400italic:latin"]},{name:"Rancho-Gudea",google:["Rancho::latin","Gudea:400,700,400italic:latin"]},{name:"Bevan-PotanoSans",google:["Bevan::latin","Pontano+Sans::latin"]},{name:"BreeSerif-OpenSans",google:["Bree+Serif::latin","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800:latin"]},{name:"SansitaOne-Kameron",google:["Sansita+One::latin","Kameron:400,700:latin"]},{name:"Lora-Istok",google:["Lora:400,700,400italic,700italic:latin","Istok+Web:400,700,400italic,700italic:latin"]},{name:"Pacifico-Arimo",google:["Pacifico::latin","Arimo:400,700,400italic,700italic:latin"]}];if("object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(v[o]=a[o]);if(void 0!==b&&(v.source=b),"object"==typeof url_config&&(p=!0,v.source.match("docs.google.com")||v.source.match("json")||v.source.match("storify")||(v.source="https://docs.google.com/spreadsheet/pub?key="+v.source+"&output=html")),v.js.match("locale")&&(v.lang=v.js.split("locale/")[1].replace(".js",""),v.js=u.js+"/shared/timeline.js?"+q),v.js.match("/")||(v.css=u.css+v.type+".css?"+q,v.js=u.js+v.type,v.debug?v.js+=".js?"+q:v.js+="-min.js?"+q,v.id="storyjs-"+v.type),v.lang.match("/")?u.locale=v.lang:u.locale=u.locale+v.lang+".js?"+q,j(),LoadLib.css(v.css,f),"default"==v.font)t.font.js=!0,t.font.css=!0;else{var x;v.font.match("/")?(x=v.font.split(".css")[0].split("/"),u.font.name=x[x.length-1],u.font.css=v.font):(u.font.name=v.font,u.font.css=u.font.css+v.font+".css?"+q),LoadLib.css(u.font.css,g);for(var y=0;y<w.length;y++)u.font.name==w[y].name&&(u.font.google=!0,WebFontConfig={google:{families:w[y].google}});u.font.google?LoadLib.js(u.font.js,h):t.font.js=!0}try{if(t.has_jquery=jQuery,t.has_jquery=!0,t.has_jquery){parseFloat(jQuery.fn.jquery)<parseFloat(r)?t.jquery=!1:t.jquery=!0}}catch(a){t.jquery=!1}t.jquery?c():LoadLib.js(u.jquery,c),this.onloaded_check_again=function(){i()}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function closeIframeWindow(){$("#popup").foundation("reveal","close"),popup=!1}function closeIframeWindow(){$("#popup").foundation("reveal","close"),popup=!1}function saveScrapbook(){console.log("Save"),$(".scrapBoobWelcome").fadeOut(400,function(){$(this).remove()})}$(document).ready(function(){$("[data-password=submit]").on("click",validate)}),$(document).ready(function(){function a(){var a=0;$("input[data-delivery-price]").filter(":checked").each(function(){a+=Number($(this).attr("data-delivery-price"))}),$("[data-delivery-total]").text(a.toFixed(2)),a>0?($("[data-delivery-display-free]").addClass("hide"),$("[data-delivery-display]").removeClass("hide")):($("[data-delivery-display-free]").removeClass("hide"),$("[data-delivery-display]").addClass("hide"));var b=Number($("[data-delivery-subtotal]").text())+Number($("[data-delivery-total]").text());$("[data-delivery-grandtotal]").text(b.toFixed(2))}$("[data-showaddress]").on("click",function(){if($("[data-button]").val("Add address"),"true"===$(this).attr("data-showaddress")){$("div[data-newaddress]").show();var a=$(this).attr("data-showaddress-title");return $("[data-editaddress-title]").text(a),location.hash="#addressbox",!1}return $("div[data-newaddress]").hide(),location.hash="",!1}),$("[data-editaddressid]").on("click",function(){$(this).attr("data-editaddressid");return $('input[name="Address.AddressId"]').val($(this).attr("data-editaddressid")),$("[data-editaddressfield]",$(this).parent().parent()).each(function(){var a=$(this).attr("data-editaddressfield");$('[name="'+a+'"]').val($(this).text())}),$("[data-button]").val("Update address"),!1}),$(".validation-summary-errors").size()>0&&$("div[data-newaddress]").show(),a(),$("[data-delivery-price]").on("click",function(){a()})}),$(document).ready(function(){$(this).is(":checked")?$("[data-password-visible]").show().attr("data-password-visible","true"):$("[data-password-visible]").hide().attr("data-password-visible","false"),$("[data-delivery-display]").removeClass("hide"),$("input[type=submit]").on("click",function(){if($("#GuestRegister").is(":checked")&&!validate())return!1}),$("#GuestRegister").on("click",function(){$(this).is(":checked")?$("[data-password-visible]").show().attr("data-password-visible","true"):$("[data-password-visible]").hide().attr("data-password-visible","false")}),"0.00"===$("span[data-delivery-total]").text()&&($("div[data-delivery-display]").addClass("hide"),$("div[data-delivery-display-free]").removeClass("hide"))}),$(document).ready(function(){$("[data-delivery-total]").text()>0?($("[data-delivery-display-free]").addClass("hide"),$("[data-delivery-display]").removeClass("hide")):($("[data-delivery-display-free]").removeClass("hide"),$("[data-delivery-display]").addClass("hide")),$("[data-input=address]").on("click",function(){"same"===$(this).val()?$("fieldset",$("div[data-content=billing-address]")).addClass("hide"):$("fieldset",$("div[data-content=billing-address]")).removeClass("hide")}),$("li[data-tab]").on("click",function(){var a=$(this).attr("data-tab");return $("li[data-tab]").removeClass("is-active"),$(this).addClass("is-active"),$("a[data-tab]").attr("aria-selected","false"),$("a",$(this)).attr("aria-selected","true"),$("[data-panel]").removeClass("is-active").attr("aria-hidden","true"),$("[data-panel="+a+"]").addClass("is-active").attr("aria-hidden","false"),!1})}),$(document).ready(function(){$("[data-summarytab]").on("click",function(){var a=$(this).attr("data-summarytab");return $("[data-summarypanel]").removeClass("is-active").attr("aria-hidden","true"),$("[data-summarypanel="+a+"]").addClass("is-active").attr("aria-hidden","false"),$("li").removeClass("is-active"),$(this).parent().addClass("is-active"),$("a[data-summarytab]").attr("aria-selected","false"),$(this).attr("aria-selected","true"),!1})}),$cookie=function(){function a(a,b,c,d){var e=new Date,f=";path=";"string"==typeof c&&(d=c,c=void 0),e.setDate(e.getDate()+c);var g=escape(b)+(null==c?"":"; expires="+e.toUTCString());void 0==d&&(d="/"),document.cookie=a+"="+g+f+d}function b(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),(c=c.replace(/^\s+|\s+$/g,""))==a)return unescape(d)}function c(b){a(b,"",-1)}function d(a){return void 0!==b(a)}return{get:b,set:a,remove:c,exists:d}}(),_.templateSettings.variable="rc",window.Wg=window.Wg||{},Wg.Common=Wg.Common||function(){var a=!1,b=function(a){a.draggable=!1,a.onmousedown=function(a){return a.preventDefault(),!1},a.ondragstart=function(a){return a.preventDefault(),!1}},d=function(){if(window.location.href.toLowerCase().indexOf("checkout")>0&&-1==window.location.href.toLowerCase().indexOf("b2bcheckout"))if($(".alertInfo.error:visible").length>0)$("html, body").animate({scrollTop:$(".alertInfo.error").first().position().top-$("#header").outerHeight()},1e3);else{var a=Redant.util.getQuerystring("edit");if(null!==a&&""!==a&&void 0!==a||(a=$(".loginRegister").length>0?"loginRegister":"aboutYou"),void 0!==$("#"+a).position()&&$("html, body").animate({scrollTop:$("#"+a).position().top-$("#header").outerHeight()},1e3),"delivery"==a){var b=$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio:checked"),c=$(b).val();2==c&&setTimeout(toggleStockists(),1e3)}}},e=function(){window.location.href.toLowerCase().indexOf("shop")>0&&window.location.href.toLowerCase().indexOf("?show")>0&&$("html, body").stop(!0,!0).animate({scrollTop:$("#productsViewTab").position().top-$("#header").outerHeight()},1e3)},f=function(){var a=$("body .notification");a.remove(),a=$('<div class="notification"><h2>Item Added to Scrapbook</h2></div>').prependTo("body"),a.animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){a.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20},g=function(){return $(document).width()<=768&&$(".scrapBookAdd").css("left","20%"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn("fast",function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},h=function(a){return $(".scrapBookAdd").css("margin-top",$(a).offset().top-120+"px"),$(".scrapBookAdd").css("left",$(a).offset().left-60+"px"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn(300,function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},j=null,k=null,l=window.getMiniBasket=function(b){var c=$("#SiteKey").val();if(a&&(!b||!b.force))return k;if(j)return j;var d=function(b){$("li.basket .miniBasket").remove(),$("li.basket").append(b);new FormElement({type:"Spinner",elements:$("li.basket .spinner")});a=!0,$(".miniBasket .items").niceScroll({}),$(".more-info").toggleText("More Information","Less Information")},e=$.ajax({url:"/actionuri/ShopPurchase/Basket/MiniBasket/",cache:!1,success:function(a){k=a,j===e&&(j=null),"Wg"!==c&&d(a)}});return j=e,e},n=function(){var a=$("#SiteKey").val(),b="";"Zoffany"===a&&(b+=" dark");new QuickView($(document.body).not(".shopPaint").find(".productCollections:not(.no-quick-view)"),"collection",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader()),new QuickView($(document.body).not(".searchTemplate, .productPage, .scrapBook").find(".productList:not(.no-quick-view)"),"product",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader())},o=function(a,c){a.stopPropagation();var d=c.draggable.data("productcode"),g=(c.draggable.data("skuid"),c.draggable.data("imageassetid")),h=c.draggable.data("productname"),i=$("#studio ul");c.draggable.draggable("option","revert",!1);var j=c.draggable.offset(),k=i.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first(),l=c.draggable.offset(),m=null,n=null;return m=j.left>l.left?j.left-l.left:-(l.left-j.left),n=j.top>l.top?j.top-l.top:-(l.top-j.top),c.draggable.animate({left:"+="+m,top:"+="+n},0),c.draggable.draggable("option","revert",!0),$.post("/scrapbook/scraps/savescrap",{productCode:d,imageAssetId:g,name:h},function(a){k.replaceWith(a),f(),$(".scroller img, .scroller .scrapItem a").each(function(a,c){b(this)}),$(document).trigger("productdragstop")}),!1},p=function(){$(document.body).on("click touchstart",".fader,.scrapBookAdd .close-reveal-modal",function(a){return a.preventDefault(),$(".scrapBookAdd").fadeOut("fast",function(){$(".fader").fadeOut()}),!1}),$(document.body).on("click",".addToScrapbookPopup",function(a){return g()}),$(document.body).on("click",".addToScrapbookPopupPaint",function(a){return h($(this))}),$(document.body).on("click",".scrapBookAdd .inner ul li a",function(a){if($(this).not(".block")){a.preventDefault();return q($("a.scrapbook"),$(this).data("scrapbook-id"),function(a){$(".scrapBookAdd .inner").fadeOut(200,function(){a.success?$(".scrapBookAdd").append("<p style='display:none;'>Added to your moodboard</p>"):$(".scrapBookAdd").append("<p style='display:none;'>Sorry, we have been unable to add this item to your moodboard</p>"),$(".scrapBookAdd p").fadeIn(),setTimeout(function(){$(".scrapBookAdd p").fadeOut(200,function(){$(".scrapBookAdd p").remove(),$(".scrapBookAdd .inner").fadeIn()})},1e3)})}),!1}}),$(".addSrapbookButton").click(function(a){a.preventDefault();var b=$(".scrapBookAdd .inner #Name").val().trim();$(".scrapBookAdd .inner .error").remove(),null!=b&&""!=b?$.post("/scrapbook/moodboards/addscrapbook",{scrapbookName:b},function(a){a.success&&($(".scrapBookAdd .inner #Name").val(""),$('<li><a href="#" data-scrapbook-id="'+a.id+'">'+a.name+"</a></li>").prependTo($(".scrapBookAdd .inner ul")))}):$('<div class="alertInfo error">Please enter a name.</div>').prependTo(".scrapBookAdd .inner").fadeIn()}),$(".scrapBookAdd .inner #Name").on("keydown",function(){$(".scrapBookAdd .inner .alertInfo").fadeOut().remove()})},q=function(a,b,c){var d=a,e=$(d).data("productcode"),h=($(d).data("skuid"),$(d).data("productimage"),$(d).data("productname")),i=$(d).data("imageassetid"),j=$("#studio ul"),k=j.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();$.post("/scrapbook/moodboards/savetoscrapbook",{productCodes:e,scrapbookId:b,imageAssetId:i,name:h},function(a){a.success&&0!=a.studioItemId&&$.get("/scrapbook/scraps/getstudioitem",{studioItemId:a.studioItemId},function(a){k.replaceWith(a)}),c&&c(a)})},r=function(){if(!Redant.util.browser.isMobile()&&!Redant.util.browser.isTablet()){var b=$("#SiteKey").val();window.location.href.indexOf("checkout")<0&&$(".basket").hoverIntent({over:function(c){if(a)return void $(".miniBasket").stop().fadeIn("fast");var d="";"Zoffany"===b&&(d+=" dark"),$('<div class="miniBasket b2c"><div class="ajaxLoader'+d+'"></div></div>').appendTo($("li.basket")),getMiniBasket().then(function(){$(".miniBasket").stop().fadeIn("fast"),$(".field.spinner").forceNumeric()})},timeout:500,out:function(b){var c=$(".miniBasket");c.stop().fadeOut("fast",function(){a||c.remove()})}})}},s=function(){$.ajax({url:"/basket/minibasketparital",cache:!1,success:function(a){$(".wgBasket-count").replaceWith(a),"Wg"!==$("#SiteKey").val()&&r()}})};return{init:function(){if($(window).load(function(){$(document).on("quickview:expanded productdragstop",function(){setTimeout(function(){var a=$(".selectedItemContainer .selectedItem").outerHeight();$(".selectedItemContainer").css("height",a)},1e3)}),$(document).trigger("priceupdate"),Wg.Menus.init()}),$(document).ready(function(){if($("#paintSurface").length>0){var c=$("#paintFinish").children();$("#paintSurface").on("change",function(a){var b=$(this),d=b.val(),e=$(".paintFinishWrapper"),f=$("#paintFinish");if(f.val(""),e.addClass("hide"),resetProductOptions(),$(".product-option").hide(),""!=d){f.children().remove();var g=d.split("-");$.each(c,function(){var a=$(this).attr("value");(""==a||$.inArray(a,g))&&f.append(this)}),f.val(""),e.removeClass("hide")}calculateProductOptionTotals()}),$("#paintFinish").on("change",function(){$(".product-option").hide();var a=$(this),b=a.val();if(resetProductOptions(),""!=b){var c=$(".product-option[data-product-option="+b+"]"),d=$(".product-summary");c.length>0?(1==c.length&&($(c[0]).find(".js-spinner-split").val("1"),$(".products-summary-action .button").removeClass("disabled")),c.show(),d.removeClass("hide")):$(".product-option.no-products").show()}calculateProductOptionTotals()})}$(".product-option").length>0&&($(".ui-spinner-button").on("click",function(){var a=$(this).parent(),b=$(".ui-spinner-input",a),c=b.val();calculateProductOptionTotals(c),toggleActiveState(b[0])}),toggleActiveState=function(a){var b=a.value,c=$(a);b>0?c.parents(".product-option").addClass("active"):c.parents(".product-option").removeClass("active"),0==$(".product-option.active").length?$(".products-summary-action .button").addClass("disabled"):$(".products-summary-action .button").removeClass("disabled")},resetProductOptions=function(){$(".js-spinner-split").spinner("value",0),$(".products-summary-action .button").addClass("disabled"),$(".product-option").removeClass("active"),$(".product-summary").addClass("hide")},calculateProductOptionTotals=function(){var a=0,b=0,c=$('.product-option:visible:not(".product-option-heading")'),d="/basket/action/?command=addmultiple&redirectUrl="+escape(window.location.href),e="";$.each(c,function(){var d=$(this),f=d.data("producti-option-skuid"),g=parseFloat(d.data("product-option-price")||0),h=parseFloat($(".js-spinner-split",d).val()||0);h>0&&(e=e+f+":"+h+","),b+=h,a+=h*g}),e=e.substring(0,e.length-1),d=Redant.util.setQuerystring(d,"itemsToAdd",e);var f=b+(1==b?" item":" items")+" selected";$(".product-totals-count").text(f),$("#totalProductOptionsCost").text(a.toFixed(2)),$(".products-summary-action .button").attr("href",d)}),classToggle.toggleOnEvent("click",".js-mobile-nav-toggle","href","mobile-nav-open",!0,!0),globalBrands.init(),$(".has-mega-dropdown").length&&megaDropdown(),$("#RememberMe").on("click",function(){var a=$(this).prop("checked");$(this).siblings('input[type="hidden"]').val(a)}),$.validator.methods.date=function(a,b){return!0},$(".lazy").showImageInViewport(),$("#timeTravelNotice").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),$("#timeTravelNoticeClose").click(function(){$("#timeTravelNotice").animate({right:"-320px",avoidCSSTransitions:!0},500,function(){})}),$(".field.spinner input").forceNumeric(),jQuery.fx.interval=20,n(),"Wg"!==$("#SiteKey").val()&&r(),$(document.body).on("click","#miniBasketUpdate, #miniBasketCheckout",function(b){var c=this,d=$(".miniBasket.b2c form"),e=0;if($(".items .spinner",d).each(function(){var a=$("input",$(this)),b=$('input[type="hidden"]',$(this)),c=parseInt(a.val());b.val(c),e+=c}),$(".global-util-count").text("("+e+")"),d.length>0){var f=$(d)[0].action;f+="&command="+$(c).val(),$.post(f,$(d).serialize(),function(b){if(window.location.href.indexOf("basket")>-1)location.reload();else{$("nav#siteLinks li.basket a").html("<span>Basket ("+b.basketQuantity+")</span>"),a=!1;var d=$("#basketMessage");d.removeClass("confirmation"),d.removeClass("error"),$(".miniBasket").fadeIn("fast",function(){if(1==b.success){if(d.addClass("confirmation"),d.text("Your basket has been updated"),"GoToCheckout"==$(c).val())return void window.location.replace(b.url)}else{d.addClass("error");var a=[];$.each(b.errors,function(b,c){a.push(c.Message)}),d.html(a.join("<br/><br/>"))}d.fadeIn("slow",function(){setTimeout(function(){d.fadeOut("slow")},5e3)})})}})}return!1}),$(".furnitureItemImages").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}}),$(".collectionCategory > .item a.furnitureType").click(function(a){a.preventDefault(),$(".collectionCategory > .item a.furnitureType").parent().removeClass("selected"),$(this).parent().addClass("selected");var b=$(this).data("furniture-type");return $.get("/furniture/furniture/collections/?type="+b,function(a){$("#collectionListWrapper").html(a),$("#collectionListWrapper .greyOut a").attr("href","javascript:void(0)")}),!1}),$("#footer, .bottomMenu#studio").droppable({accept:"*[data-productcode], *[data-imageassetid], *[data-imageurl]",hoverClass:"add-to-scrapbook-hover",drop:o,tolerance:"touch",greedy:!0}),$("a[data-attribute-name]").on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-attribute-name"),d=b.attr("data-attribute-id"),e=b.attr("data-attribute-option-id");return $("#"+c+"_"+e).val(d+"-"+e),!1}),$("a[data-colour-code]").on("click",function(a){a.preventDefault();var c=[];return $("a[data-colour-code]").each(function(a,b){var d=$(b);d.hasClass("selected")&&c.push(d.attr("data-colour-code"))}),$("#SelectedColours").val(c.join(",")),!1}),$(document.body).on("click",".addToBasket",function(a){if(a.preventDefault(),a.stopPropagation(),$(this).hasClass("disabled"))return!1;var b=Redant.util.ajaxLoader();$("body").append(b),b.css({"z-index":"9999",bottom:"40px"}),b.show();var c=$(this).parents(".scroller");return c.length>0&&c.click(),$.ajax({url:$(this).attr("href").replace(/quantity=[0-9]*/,"quantity="+$(".ui-spinner-input",".product-option").val()),method:"GET",cache:!1,success:function(a){if(window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)location.reload();else{var c=$("body .notification");if(c.remove(),b.fadeOut(),b.remove(),"Successful"===a.Status){var d="";a.BasketWarnings.length>0&&(d="<p>",$.each(a.BasketWarnings,function(a,b){d+=b.Message+"<br><br>"}),d+="</p>"),c=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2>'+d+"</div>").prependTo("body"),s()}else{var e=[];$.each(a.BasketErrors,function(a,b){e.push(b.Message)}),c=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;'+e.join("<br/><br/>")+"</h2></div>").prependTo("body")}c.animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){c.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}),!1}),$(document.body).on("click",".miniBasket.b2c a.remove",function(b){b.preventDefault();var c=$(this),d=c.parent(),e=d.children("legend").text();if(!d.hasClass("delete-inprogress")){var f=1*d.find("input.ui-spinner-input").val(),g=$(".global-util-count").text();g=1*g.substring(1,g.length-1),g-=f,g<0&&(g=0),$(".global-util-count").text("("+g+")"),d.addClass("delete-inprogress"),$.get(this.href,function(b){window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1?location.reload():(a=!1,l().then(function(){$(".miniBasket").fadeIn("fast",function(){"Successful"==b.Status&&($("#basketMessage").addClass("confirmation"),$("#basketMessage").text(e+" has been removed from the basket."))})}))})}}),$(document.body).on("click",".deleteScrap",function(a){a.preventDefault();var b=$(this),c=b.parent();return $.post(b.attr("href"),function(a){a.Success&&c.closest(".scrapItem").fadeOut(300)}),!1}),$("a[data-tab-content-id]").on("click",function(a){a.preventDefault();var b=$("a[data-tab-content-id].selected"),c=b.data("tab-content-id"),d=$("#"+c);b.removeClass("selected"),d.removeClass("active");var e=$(this),f=e.data("tab-content-id"),g=$("#"+f);return e.addClass("selected"),g.addClass("active"),!1}),$("#postNewComment").submit(function(a){a.preventDefault();var b=this;return $("#postCommentError, #postCommentSuccess").hide(),$("#recaptchaError").remove(),$.post(this.action,$(this).serialize(),function(a){!0===a.success?($(b).find("input[type=text], textarea").val(""),$("#postCommentSuccess").fadeIn(1e3),setTimeout(function(){$("#postCommentSuccess").fadeOut(400)},6e3)):(a.modelState[""]&&"incorrect-captcha-sol"===a.modelState[""][0]&&$("#recaptcha_area").before('<div id="recaptchaError" class="alertInfo error"> Please ensure you enter the characters exactly as they appear in the box below</div>'),$("#postCommentError").fadeIn(1e3),Recaptcha.reload())}),!1}),$(document.body).on("click","#comments .pagination .pageNumbers li a",function(a){a.preventDefault();var b=this;return $.get(this.href,function(a){$(b).find("input[type=text], textarea").val(""),$("#articleComments").replaceWith(a)}),!1}),$("#enquiryForm form").submit(function(a){if($.validator.unobtrusive.parse($(this)),a.preventDefault(),$(this).valid()){$(this).serialize(),$(this).parent().slideUp("fast",function(){$("html, body").animate({scrollTop:$(".ajaxLoader").position().top-$("#header").outerHeight()},1e3),$(".ajaxLoader").parent().slideDown("fast")});var c=this;return $.post(this.action,$(this).serialize(),function(a){$(c).find("input[type=text], textarea").val(""),$(c).find("select").find("option:first-child").prop("selectedIndex",0),$("#enquiryFormThankYou").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}).error(function(){setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}),!1}}),$(document.body).on("submit","#sendToAFriend",function(a){if($.validator.unobtrusive.parse($("#sendToAFriend")),a.preventDefault(),$(this).valid()){var b=$(this).serialize();$(this).parent().slideUp("fast",function(){$(".ajaxLoader").parent().slideDown("fast")}),$("#sendToAFriend *").attr("disabled","disabled"),$("#sendToAFriend").css("opacity","0.2");var c=this;return $.post(this.action,b,function(a){$("body #sendToAFriendSubmitted").remove(),$('<section id="sendToAFriendSubmitted" class="reveal-modal medium">\t\t\t\t\t\t\t\t <div class="bd-reveal-modal">\t\t\t\t\t\t\t\t\t<h2>Thank you</h2>\t\t\t\t\t\t\t\t\t<p>Your email has been sent.</p>\t\t\t\t\t\t\t\t\t<a class="close-reveal-modal icon-remove"><span>Close</span></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</section>').prependTo("body")}).done(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),$(c).find("input[type=text], textarea").val(""),$("#sendToAFriendSubmitted").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}).error(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}),!1}}),$(document.body).on("click","#asSeenInSamples .productList .item, #inspirationSamples .productList .item",function(a){return a.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}),$(document.body).on("click","#asSeenInSamples #selectAllProducts",function(a){$("#asSeenInSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#basketErrors").hide())})}),$("#asSeenInSamples .productList .item.selected").each(function(a){skus.push($(this).data("skuid"))}),$(document.body).on("click","#asSeenInSamples .AddToBasket",function(a){var b=[];if(0==$("#asSeenInSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#asSeenInSamples .productList .item.selected").each(function(a){b.push($(this).data("skuid"))}),b.length>0){var c="/basket/action/?command=add&skuid="+b.join(",");$.get(c,function(a){if($("body .notification").remove(),"Successful"===a.Status){var b="";a.BasketWarnings.length>0&&(b="<p>",$.each(a.BasketWarnings,function(a,c){b+=c.Message+"<br><br>"}),b+="</p>"),$("#asSeenInSamples").foundation("reveal","close"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+b+"</div>").prependTo("body"),$.get("/asseenin/asseenin/relatedproducts/",{itemId:$("#AsSeenInItemId").val()},function(a){$("#productsListContainer").html(a)})}else{var c=[];$.each(a.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),$(document.body).on("click","a.button.sample",function(a){a.preventDefault(),$("#inspirationSamples").foundation("reveal","open")}),$(document.body).on("click","#inspirationSamples #selectAllProducts",function(a){$("#inspirationSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}),$(document.body).on("click","#inspirationSamples .AddToBasket",function(a){var b=[];if($("#basketErrors").hide(),0==$("#inspirationSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#inspirationSamples .productList .item.selected").each(function(a){b.push($(this).data("skuid"))}),b.length>0){var c="/basket/action/?command=add&sample=True&skuid="+b.join(",");$.get(c,function(a){if($("body .notification").remove(),"Successful"===a.Status){var b="";a.BasketWarnings.length>0&&(b="<p>",$.each(a.BasketWarnings,function(a,c){b+=c.Message+"<br><br>"}),b+="</p>"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+b+"</div>").prependTo("body"),$("#inspirationSamples").foundation("reveal","close"),$.get("/inspirations/relatedproducts/",{inspirationId:$("#InspirationID").val()},function(a){$("#productsListContainer").html(a)})}else{var c=[];$.each(a.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),p(),$(document.body).on("click",".print",function(a){$(".reveal-modal").foundation("reveal","close"),a.preventDefault(),window.print()}),$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio").click(function(a){var b=$(this).val();1==b?$("#delivery fieldset#stockist").fadeOut(300,function(){$("#whereToBuy").is(":visible")&&toggleStockists(),$("#delivery fieldset#address").fadeIn(300)}):2==b&&$("#delivery fieldset#address").fadeOut(300,function(){$("#delivery fieldset#stockist").fadeIn(300),""==$("#SelectedStockistId").val()&&toggleStockists()})}),$("#orderHistorySearch").submit(function(a){var b=$("#SiteKey").val(),c="";"Zoffany"==b&&(c+=" dark");var d=$('<div class="loading-container"><h2>Searching, please wait...</h2><div class="ajaxLoader'+c+'"></div></div>').html();return $("#orderListWrapper").html(d),$.get("/account/manage/orderlist",$(this).serialize(),function(a){$("#orderListWrapper").html(a)}),!1}),d(),e(),$(".scroller img, .scroller .scrapItem a, .scroller img, .scroller .details a").each(function(a,c){b(this)}),$("#PerPage").on("change",function(a){var b=window.location.href;b=Redant.util.setQuerystring(b,"page","1"),b=Redant.util.setQuerystring(b,"perpage",$(this).val()),window.location.replace(b)}),$("#loginRegister form, #aboutYouForm, #deliveryForm, form#checkoutpayment").on("submit",function(a){var b=$("#AboutYou_AcceptTermsAndConditions").prop("checked");$("<input />").attr("type","hidden").attr("name","AboutYou_AcceptTermsAndConditions").attr("value",b).appendTo($(this))}),$(document.body).on("click",".button.pinterest, a.pinterest",function(a){if($("#pinterestImages").length>0)return $("#pinterestImages img").each(function(){$(this).attr("src",$(this).data("src")),$(this).fadeIn("fast")}),$("#pinterestImages").foundation("reveal","open"),!1}).on("click",".button.scrapbook",function(a){a.preventDefault(),a.stopPropagation();var c=$(this),d=c.data("productcode"),g=(c.data("skuid"),c.data("imageassetid")),h=c.data("productname"),i=$("#studio ul"),j=i.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();return $.post("/scrapbook/scraps/savescrap",{productCode:d,imageAssetId:g,name:h},function(a){j.replaceWith(a),$(".scroller img, .scroller .scrapItem a").each(function(a,c){b(this)}),$(document).trigger("productdragstop"),f()}),!1}),$(document.body).on("click","#selectCountry .country-list a",function(a){var b=$(this);return $.ajax({cache:!1,url:b.attr("href"),success:function(a){if(window.location.href.indexOf("shop")>-1||window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)$cookie.set("changedCountry",JSON.stringify(a)),window.location.href=a.returnUrl;else if(a.currencyRegion){$("a[data-reveal-id=selectCountry] img").attr("src",a.currencyRegion.FlagImageUrl).attr("alt",a.currencyRegion.Name);var b=$("body .notification");b.remove(),b="United Kingdom"!=a.currencyRegion.Name?$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+a.currencyRegion.Name+" will be billed in "+a.currencyRegion.Currency.Name+"</p><p>We currently do not deliver to this region.</p></div>").prependTo("body"):$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+a.currencyRegion.Name+" will be billed in "+a.currencyRegion.Currency.Name+"</p></div>").prependTo("body"),b.stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){b.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}$("#selectCountry").foundation("reveal","close")}}),!1})}),$cookie.get("changedCountry")){var c=JSON.parse($cookie.get("changedCountry"));$cookie.remove("changedCountry");var g=$("body .notification");g.remove(),"GBR"!=Model.RegionInfo.ThreeLetterISORegionName&&(g=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+c.currencyRegion.Name+" will be billed in "+c.currencyRegion.Currency.Name+"</p></div>").prependTo("body")),g.stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){g.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}}(),Wg.Common.init();var classToggle={};classToggle={toggleOnEvent:function(a,b,c,d,e,f){if($(b).length>0){var h,g={};$(b).on(a,function(i){i.preventDefault(),h="href"===c?$($(this).attr("href")):$(c),h.toggleClass(d),e&&$(this).toggleClass(d),"click"===a&&1==f&&(g={trigger:b,targetEl:h,newclass:d},$(document).on("click",g,classToggle.offTriggerListener))})}},offTriggerListener:function(a){if(!$(a.target).closest(a.data.trigger).length&&!$(a.target).closest(a.data.targetEl).length){var b=a.data.newclass;$(a.data.trigger).removeClass(b),$(a.data.targetEl).removeClass(b),$(document).off("click",classToggle.offTriggerListener)}}},function(a,b){a(function(){if(b.touch){a("body").on("click",".has-dropdown>a",function(b){var c=a(this).parent();c.hasClass("touch-hover")?(c.removeClass("touch-hover"),a(".global-nav-dropdown",c).hide(),b.stopImmediatePropagation()):(c.addClass("touch-hover"),a(".global-nav-dropdown",c).show(),b.preventDefault(),b.stopImmediatePropagation())});var c=function(b){var c=a(".global-nav-dropdown"),d=a(".has-dropdown > a");(!c.is(b.target)&&0===c.has(b.target).length||!d.is(b.target)&&0===d.has(b.target).length)&&(c.parent().removeClass("touch-hover"),c.hide())};a("body").on("click",c)}})}(jQuery,Modernizr);var globalBrands={el:{container:$(".global-brands"),showBrands:$(".js-global-brands-show"),hideBrands:$(".js-global-brands-hide"),items:$("li",".global-brands-list"),openClass:"brands-open"},toggleState:function(a){var b=this,c=b.el;$(c.items).not(".active").stop().animate({width:"toggle",opacity:"toggle",avoidCSSTransitions:!0},{duration:500}),"hide"===a?(c.showBrands.show(),c.hideBrands.hide(),c.container.removeClass(c.openClass)):"show"===a&&(c.showBrands.hide(),c.hideBrands.show(),c.container.addClass(c.openClass))},bindUI:function(){var a=this,b=a.el;b.showBrands.on("click",function(b){b.preventDefault(),a.toggleState("show")}),b.hideBrands.on("click",function(b){b.preventDefault(),a.toggleState("hide")})},init:function(){this.bindUI()}};$.ui.autocomplete.prototype._renderItem=function(a,b){var c=this.term.split(" ").join("|"),d=new RegExp("("+c+")","gi"),e=b.label.replace(d,"<strong>$1</strong>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+e+"</a>").appendTo(a)},jQuery.validator.unobtrusive.adapters.add("brequired",function(a){"INPUT"==a.element.tagName.toUpperCase()&&"CHECKBOX"==a.element.type.toUpperCase()&&(a.rules.required=!0,a.message&&(a.messages.required=a.message))}),jQuery.validator.addMethod("mustbetrue",function(a,b,c){return b.checked}),jQuery.validator.unobtrusive.adapters.addBool("mustbetrue"),$(document).ready(function(){}),_.templateSettings.variable="rc",window.Wg=window.Wg||{},Wg.Common=Wg.Common||function(){var a=!1,b=function(a){a.draggable=!1,a.onmousedown=function(a){return a.preventDefault(),!1},a.ondragstart=function(a){return a.preventDefault(),!1}},c=function(){if(window.location.href.toLowerCase().indexOf("checkout")>0&&-1==window.location.href.toLowerCase().indexOf("b2bcheckout"))if($(".alertInfo.error:visible").length>0)$("html, body").animate({scrollTop:$(".alertInfo.error").first().position().top-$("#header").outerHeight()},1e3);else{var a=Redant.util.getQuerystring("edit");if(null!==a&&""!==a&&void 0!==a||(a=$(".loginRegister").length>0?"loginRegister":"aboutYou"),void 0!==$("#"+a).position()&&$("html, body").animate({scrollTop:$("#"+a).position().top-$("#header").outerHeight()},1e3),"delivery"==a){var b=$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio:checked"),c=$(b).val();2==c&&setTimeout(toggleStockists(),1e3)}}},d=function(){window.location.href.toLowerCase().indexOf("shop")>0&&window.location.href.toLowerCase().indexOf("?show")>0&&$("html, body").stop(!0,!0).animate({scrollTop:$("#productsViewTab").position().top-$("#header").outerHeight()},1e3)},e=function(){var a=$("body .notification");a.remove(),a=$('<div class="notification"><h2>Item Added to Scrapbook</h2></div>').prependTo("body"),a.animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){a.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20},f=function(){return $(document).width()<=768&&$(".scrapBookAdd").css("left","20%"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn("fast",function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},g=function(a){return $(".scrapBookAdd").css("margin-top",$(a).offset().top-120+"px"),$(".scrapBookAdd").css("left",$(a).offset().left-60+"px"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn(300,function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},h=null,i=null,j=window.getMiniBasket=function(b){var c=$("#SiteKey").val();if(a&&(!b||!b.force))return i;if(h)return h;var d=function(b){$("li.basket .miniBasket").remove(),$("li.basket").append(b),new FormElement({type:"Spinner",elements:$("li.basket .spinner")}),a=!0,$(".miniBasket .items").niceScroll({}),$(".more-info").toggleText("More Information","Less Information")},e=$.ajax({url:"/actionuri/ShopPurchase/Basket/MiniBasket/",cache:!1,success:function(a){i=a,h===e&&(h=null),"Wg"!==c&&d(a)}});return h=e,e},k=function(){var b="";"Zoffany"===$("#SiteKey").val()&&(b+=" dark"),new QuickView($(document.body).not(".shopPaint").find(".productCollections:not(.no-quick-view)"),"collection",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader()),new QuickView($(document.body).not(".searchTemplate, .productPage, .scrapBook").find(".productList:not(.no-quick-view)"),"product",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader())},l=function(a,c){a.stopPropagation();var d=c.draggable.data("productcode"),f=(c.draggable.data("skuid"),c.draggable.data("imageassetid")),g=c.draggable.data("productname"),h=$("#studio ul");c.draggable.draggable("option","revert",!1);var i=c.draggable.offset(),j=h.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first(),k=c.draggable.offset(),l=null,m=null;return l=i.left>k.left?i.left-k.left:-(k.left-i.left),m=i.top>k.top?i.top-k.top:-(k.top-i.top),c.draggable.animate({left:"+="+l,top:"+="+m},0),c.draggable.draggable("option","revert",!0),$.post("/scrapbook/scraps/savescrap",{productCode:d,imageAssetId:f,name:g},function(a){j.replaceWith(a),e(),$(".scroller img, .scroller .scrapItem a").each(function(a,c){b(this)}),$(document).trigger("productdragstop")}),!1},m=function(){$(document.body).on("click touchstart",".fader,.scrapBookAdd .close-reveal-modal",function(a){return a.preventDefault(),$(".scrapBookAdd").fadeOut("fast",function(){$(".fader").fadeOut()}),!1}),$(document.body).on("click",".addToScrapbookPopup",function(a){return f()}),$(document.body).on("click",".addToScrapbookPopupPaint",function(a){return g($(this))}),$(document.body).on("click",".scrapBookAdd .inner ul li a",function(a){if($(this).not(".block"))return a.preventDefault(),n($("a.scrapbook"),$(this).data("scrapbook-id"),function(a){$(".scrapBookAdd .inner").fadeOut(200,function(){a.success?$(".scrapBookAdd").append("<p style='display:none;'>Added to your moodboard</p>"):$(".scrapBookAdd").append("<p style='display:none;'>Sorry, we have been unable to add this item to your moodboard</p>"),$(".scrapBookAdd p").fadeIn(),setTimeout(function(){$(".scrapBookAdd p").fadeOut(200,function(){$(".scrapBookAdd p").remove(),$(".scrapBookAdd .inner").fadeIn()})},1e3)})}),!1}),$(".addSrapbookButton").click(function(a){a.preventDefault();var b=$(".scrapBookAdd .inner #Name").val().trim();$(".scrapBookAdd .inner .error").remove(),null!=b&&""!=b?$.post("/scrapbook/moodboards/addscrapbook",{scrapbookName:b},function(a){a.success&&($(".scrapBookAdd .inner #Name").val(""),$('<li><a href="#" data-scrapbook-id="'+a.id+'">'+a.name+"</a></li>").prependTo($(".scrapBookAdd .inner ul")))}):$('<div class="alertInfo error">Please enter a name.</div>').prependTo(".scrapBookAdd .inner").fadeIn()}),$(".scrapBookAdd .inner #Name").on("keydown",function(){$(".scrapBookAdd .inner .alertInfo").fadeOut().remove()})},n=function(a,b,c){var d=a,e=$(d).data("productcode"),f=($(d).data("skuid"),$(d).data("productimage"),$(d).data("productname")),g=$(d).data("imageassetid"),h=$("#studio ul"),i=h.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();$.post("/scrapbook/moodboards/savetoscrapbook",{productCodes:e,scrapbookId:b,imageAssetId:g,name:f},function(a){a.success&&0!=a.studioItemId&&$.get("/scrapbook/scraps/getstudioitem",{studioItemId:a.studioItemId},function(a){i.replaceWith(a)}),c&&c(a)})},o=function(){if(!Redant.util.browser.isMobile()&&!Redant.util.browser.isTablet()){var b=$("#SiteKey").val();window.location.href.indexOf("checkout")<0&&$(".basket").hoverIntent({over:function(c){if(a)return void $(".miniBasket").stop().fadeIn("fast");var d="";"Zoffany"===b&&(d+=" dark"),$('<div class="miniBasket b2c"><div class="ajaxLoader'+d+'"></div></div>').appendTo($("li.basket")),getMiniBasket().then(function(){$(".miniBasket").stop().fadeIn("fast"),$(".field.spinner").forceNumeric()})},timeout:500,out:function(b){var c=$(".miniBasket");c.stop().fadeOut("fast",function(){a||c.remove()})}})}},p=function(){$.ajax({url:"/basket/minibasketparital",cache:!1,success:function(a){$(".wgBasket-count").replaceWith(a),"Wg"!==$("#SiteKey").val()&&o()}})};return{init:function(){if($(window).load(function(){$(document).on("quickview:expanded productdragstop",function(){setTimeout(function(){var a=$(".selectedItemContainer .selectedItem").outerHeight();$(".selectedItemContainer").css("height",a)},1e3)}),$(document).trigger("priceupdate"),Wg.Menus.init()}),$(document).ready(function(){if($("#paintSurface").length>0){var f=$("#paintFinish").children();$("#paintSurface").on("change",function(a){var b=$(this),c=b.val(),d=$(".paintFinishWrapper"),e=$("#paintFinish");if(e.val(""),d.addClass("hide"),resetProductOptions(),$(".product-option").hide(),""!=c){e.children().remove();var g=c.split("-");$.each(f,function(){var a=$(this).attr("value");(""==a||$.inArray(a,g))&&e.append(this)}),e.val(""),d.removeClass("hide")}calculateProductOptionTotals()}),$("#paintFinish").on("change",function(){$(".product-option").hide();var a=$(this),b=a.val();if(resetProductOptions(),""!=b){var c=$(".product-option[data-product-option="+b+"]"),d=$(".product-summary");c.length>0?(1==c.length&&($(c[0]).find(".js-spinner-split").val("1"),$(".products-summary-action .button").removeClass("disabled")),c.show(),d.removeClass("hide")):$(".product-option.no-products").show()}calculateProductOptionTotals()})}$(".product-option").length>0&&($(".ui-spinner-button").on("click",function(){var a=$(this).parent(),b=$(".ui-spinner-input",a),c=b.val();calculateProductOptionTotals(c),toggleActiveState(b[0])}),toggleActiveState=function(a){var b=a.value,c=$(a);b>0?c.parents(".product-option").addClass("active"):c.parents(".product-option").removeClass("active"),0==$(".product-option.active").length?$(".products-summary-action .button").addClass("disabled"):$(".products-summary-action .button").removeClass("disabled")},resetProductOptions=function(){$(".js-spinner-split").spinner("value",0),$(".products-summary-action .button").addClass("disabled"),$(".product-option").removeClass("active"),$(".product-summary").addClass("hide")},calculateProductOptionTotals=function(){var a=0,b=0,c=$('.product-option:visible:not(".product-option-heading")'),d="/basket/action/?command=addmultiple&redirectUrl="+escape(window.location.href),e="";$.each(c,function(){var c=$(this),d=c.data("producti-option-skuid"),f=parseFloat(c.data("product-option-price")||0),g=parseFloat($(".js-spinner-split",c).val()||0);g>0&&(e=e+d+":"+g+","),b+=g,a+=g*f}),e=e.substring(0,e.length-1),d=Redant.util.setQuerystring(d,"itemsToAdd",e);var f=b+(1==b?" item":" items")+" selected";$(".product-totals-count").text(f),$("#totalProductOptionsCost").text(a.toFixed(2)),$(".products-summary-action .button").attr("href",d)}),classToggle.toggleOnEvent("click",".js-mobile-nav-toggle","href","mobile-nav-open",!0,!0),globalBrands.init(),$(".has-mega-dropdown").length&&megaDropdown(),$("#RememberMe").on("click",function(){var a=$(this).prop("checked");$(this).siblings('input[type="hidden"]').val(a)}),$.validator.methods.date=function(a,b){return!0},$(".lazy").showImageInViewport(),$("#timeTravelNotice").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),$("#timeTravelNoticeClose").click(function(){$("#timeTravelNotice").animate({right:"-320px",avoidCSSTransitions:!0},500,function(){})}),$(".field.spinner input").forceNumeric(),jQuery.fx.interval=20,k(),"Wg"!==$("#SiteKey").val()&&o(),$(document.body).on("click","#miniBasketUpdate, #miniBasketCheckout",function(b){var c=this,d=$(".miniBasket.b2c form"),e=0;if($(".items .spinner",d).each(function(){var a=$("input",$(this)),b=$('input[type="hidden"]',$(this)),c=parseInt(a.val());b.val(c),e+=c}),$(".global-util-count").text("("+e+")"),d.length>0){var f=$(d)[0].action;f+="&command="+$(c).val(),$.post(f,$(d).serialize(),function(b){if(window.location.href.indexOf("basket")>-1)location.reload();else{$("nav#siteLinks li.basket a").html("<span>Basket ("+b.basketQuantity+")</span>"),a=!1;var d=$("#basketMessage");d.removeClass("confirmation"),d.removeClass("error"),$(".miniBasket").fadeIn("fast",function(){if(1==b.success){if(d.addClass("confirmation"),d.text("Your basket has been updated"),"GoToCheckout"==$(c).val())return void window.location.replace(b.url)}else{d.addClass("error");var a=[];$.each(b.errors,function(b,c){a.push(c.Message)}),d.html(a.join("<br/><br/>"))}d.fadeIn("slow",function(){setTimeout(function(){d.fadeOut("slow")},5e3)})})}})}return!1}),$(".furnitureItemImages").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}}),$(".collectionCategory > .item a.furnitureType").click(function(a){a.preventDefault(),$(".collectionCategory > .item a.furnitureType").parent().removeClass("selected"),$(this).parent().addClass("selected");var b=$(this).data("furniture-type");return $.get("/furniture/furniture/collections/?type="+b,function(a){$("#collectionListWrapper").html(a),$("#collectionListWrapper .greyOut a").attr("href","javascript:void(0)")}),!1}),$("#footer, .bottomMenu#studio").droppable({accept:"*[data-productcode], *[data-imageassetid], *[data-imageurl]",hoverClass:"add-to-scrapbook-hover",drop:l,tolerance:"touch",greedy:!0}),$("a[data-attribute-name]").on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-attribute-name"),d=b.attr("data-attribute-id"),e=b.attr("data-attribute-option-id");return $("#"+c+"_"+e).val(d+"-"+e),!1}),$("a[data-colour-code]").on("click",function(a){a.preventDefault();var b=[];return $("a[data-colour-code]").each(function(a,c){var d=$(c);d.hasClass("selected")&&b.push(d.attr("data-colour-code"))}),$("#SelectedColours").val(b.join(",")),!1}),$(document.body).on("click",".addToBasket",function(a){if(a.preventDefault(),a.stopPropagation(),$(this).hasClass("disabled"))return!1;var b=Redant.util.ajaxLoader();$("body").append(b),b.css({"z-index":"9999",bottom:"40px"}),b.show();var c=$(this).parents(".scroller");return c.length>0&&c.click(),$.ajax({url:$(this).attr("href").replace(/quantity=[0-9]*/,"quantity="+$(".ui-spinner-input",".product-option").val()),method:"GET",cache:!1,success:function(a){if(window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)location.reload();else{var c=$("body .notification");if(c.remove(),b.fadeOut(),b.remove(),"Successful"===a.Status){var d="";a.BasketWarnings.length>0&&(d="<p>",$.each(a.BasketWarnings,function(a,b){d+=b.Message+"<br><br>"}),d+="</p>"),c=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2>'+d+"</div>").prependTo("body"),p()}else{var e=[];$.each(a.BasketErrors,function(a,b){e.push(b.Message)}),c=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;'+e.join("<br/><br/>")+"</h2></div>").prependTo("body")}c.animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){c.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}),!1}),$(document.body).on("click",".miniBasket.b2c a.remove",function(b){b.preventDefault();var c=$(this),d=c.parent(),e=d.children("legend").text();if(!d.hasClass("delete-inprogress")){var f=1*d.find("input.ui-spinner-input").val(),g=$(".global-util-count").text();g=1*g.substring(1,g.length-1),g-=f,g<0&&(g=0),$(".global-util-count").text("("+g+")"),d.addClass("delete-inprogress"),$.get(this.href,function(b){window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1?location.reload():(a=!1,j().then(function(){$(".miniBasket").fadeIn("fast",function(){"Successful"==b.Status&&($("#basketMessage").addClass("confirmation"),$("#basketMessage").text(e+" has been removed from the basket."))})}))})}}),$(document.body).on("click",".deleteScrap",function(a){a.preventDefault();var b=$(this),c=b.parent();return $.post(b.attr("href"),function(a){a.Success&&c.closest(".scrapItem").fadeOut(300)}),!1}),$("a[data-tab-content-id]").on("click",function(a){a.preventDefault();var b=$("a[data-tab-content-id].selected"),c=b.data("tab-content-id"),d=$("#"+c);b.removeClass("selected"),d.removeClass("active");var e=$(this),f=e.data("tab-content-id"),g=$("#"+f);return e.addClass("selected"),g.addClass("active"),!1}),$("#postNewComment").submit(function(a){a.preventDefault();var b=this;return $("#postCommentError, #postCommentSuccess").hide(),$("#recaptchaError").remove(),$.post(this.action,$(this).serialize(),function(a){!0===a.success?($(b).find("input[type=text], textarea").val(""),$("#postCommentSuccess").fadeIn(1e3),setTimeout(function(){$("#postCommentSuccess").fadeOut(400)},6e3)):(a.modelState[""]&&"incorrect-captcha-sol"===a.modelState[""][0]&&$("#recaptcha_area").before('<div id="recaptchaError" class="alertInfo error"> Please ensure you enter the characters exactly as they appear in the box below</div>'),$("#postCommentError").fadeIn(1e3),Recaptcha.reload())}),!1}),$(document.body).on("click","#comments .pagination .pageNumbers li a",function(a){a.preventDefault();var b=this;return $.get(this.href,function(a){$(b).find("input[type=text], textarea").val(""),$("#articleComments").replaceWith(a)}),!1}),$("#enquiryForm form").submit(function(a){if($.validator.unobtrusive.parse($(this)),a.preventDefault(),$(this).valid()){$(this).serialize(),$(this).parent().slideUp("fast",function(){$("html, body").animate({scrollTop:$(".ajaxLoader").position().top-$("#header").outerHeight()},1e3),$(".ajaxLoader").parent().slideDown("fast")});var b=this;return $.post(this.action,$(this).serialize(),function(a){$(b).find("input[type=text], textarea").val(""),$(b).find("select").find("option:first-child").prop("selectedIndex",0),$("#enquiryFormThankYou").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(b).parent().show()},1e3)}).error(function(){setTimeout(function(){$(".ajaxLoader").parent().hide(),$(b).parent().show()},1e3)}),!1}}),$(document.body).on("submit","#sendToAFriend",function(a){if($.validator.unobtrusive.parse($("#sendToAFriend")),a.preventDefault(),$(this).valid()){var b=$(this).serialize();$(this).parent().slideUp("fast",function(){$(".ajaxLoader").parent().slideDown("fast")}),$("#sendToAFriend *").attr("disabled","disabled"),$("#sendToAFriend").css("opacity","0.2");var c=this;return $.post(this.action,b,function(a){$("body #sendToAFriendSubmitted").remove(),$('<section id="sendToAFriendSubmitted" class="reveal-modal medium">\t\t\t\t\t\t\t\t <div class="bd-reveal-modal">\t\t\t\t\t\t\t\t\t<h2>Thank you</h2>\t\t\t\t\t\t\t\t\t<p>Your email has been sent.</p>\t\t\t\t\t\t\t\t\t<a class="close-reveal-modal icon-remove"><span>Close</span></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</section>').prependTo("body")}).done(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),$(c).find("input[type=text], textarea").val(""),$("#sendToAFriendSubmitted").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}).error(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(c).parent().show()},1e3)}),!1}}),$(document.body).on("click","#asSeenInSamples .productList .item, #inspirationSamples .productList .item",function(a){return a.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}),$(document.body).on("click","#asSeenInSamples #selectAllProducts",function(a){$("#asSeenInSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#basketErrors").hide())})}),$("#asSeenInSamples .productList .item.selected").each(function(a){skus.push($(this).data("skuid"))}),$(document.body).on("click","#asSeenInSamples .AddToBasket",function(a){var b=[];if(0==$("#asSeenInSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#asSeenInSamples .productList .item.selected").each(function(a){b.push($(this).data("skuid"))}),b.length>0){var c="/basket/action/?command=add&skuid="+b.join(",");$.get(c,function(a){if($("body .notification").remove(),"Successful"===a.Status){var b="";a.BasketWarnings.length>0&&(b="<p>",$.each(a.BasketWarnings,function(a,c){b+=c.Message+"<br><br>"}),b+="</p>"),$("#asSeenInSamples").foundation("reveal","close"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+b+"</div>").prependTo("body"),$.get("/asseenin/asseenin/relatedproducts/",{itemId:$("#AsSeenInItemId").val()},function(a){$("#productsListContainer").html(a)})}else{var c=[];$.each(a.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),$(document.body).on("click","a.button.sample",function(a){a.preventDefault(),$("#inspirationSamples").foundation("reveal","open")}),$(document.body).on("click","#inspirationSamples #selectAllProducts",function(a){$("#inspirationSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}),$(document.body).on("click","#inspirationSamples .AddToBasket",function(a){var b=[];if($("#basketErrors").hide(),0==$("#inspirationSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#inspirationSamples .productList .item.selected").each(function(a){b.push($(this).data("skuid"))}),b.length>0){var c="/basket/action/?command=add&sample=True&skuid="+b.join(",");$.get(c,function(a){if($("body .notification").remove(),"Successful"===a.Status){var b="";a.BasketWarnings.length>0&&(b="<p>",$.each(a.BasketWarnings,function(a,c){b+=c.Message+"<br><br>"}),b+="</p>"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+b+"</div>").prependTo("body"),$("#inspirationSamples").foundation("reveal","close"),$.get("/inspirations/relatedproducts/",{inspirationId:$("#InspirationID").val()},function(a){$("#productsListContainer").html(a)})}else{var c=[];$.each(a.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),m(),$(document.body).on("click",".print",function(a){$(".reveal-modal").foundation("reveal","close"),a.preventDefault(),window.print()}),$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio").click(function(a){var b=$(this).val();1==b?$("#delivery fieldset#stockist").fadeOut(300,function(){$("#whereToBuy").is(":visible")&&toggleStockists(),$("#delivery fieldset#address").fadeIn(300)}):2==b&&$("#delivery fieldset#address").fadeOut(300,function(){$("#delivery fieldset#stockist").fadeIn(300),""==$("#SelectedStockistId").val()&&toggleStockists()})}),$("#orderHistorySearch").submit(function(a){var b=$("#SiteKey").val(),c="";"Zoffany"==b&&(c+=" dark");var d=$('<div class="loading-container"><h2>Searching, please wait...</h2><div class="ajaxLoader'+c+'"></div></div>').html();return $("#orderListWrapper").html(d),$.get("/account/manage/orderlist",$(this).serialize(),function(a){$("#orderListWrapper").html(a)}),!1}),c(),d(),$(".scroller img, .scroller .scrapItem a, .scroller img, .scroller .details a").each(function(a,c){b(this)}),$("#PerPage").on("change",function(a){var b=window.location.href;b=Redant.util.setQuerystring(b,"page","1"),b=Redant.util.setQuerystring(b,"perpage",$(this).val()),window.location.replace(b)}),$("#loginRegister form, #aboutYouForm, #deliveryForm, form#checkoutpayment").on("submit",function(a){var b=$("#AboutYou_AcceptTermsAndConditions").prop("checked");$("<input />").attr("type","hidden").attr("name","AboutYou_AcceptTermsAndConditions").attr("value",b).appendTo($(this))}),$(document.body).on("click",".button.pinterest, a.pinterest",function(a){if($("#pinterestImages").length>0)return $("#pinterestImages img").each(function(){$(this).attr("src",$(this).data("src")),$(this).fadeIn("fast")}),$("#pinterestImages").foundation("reveal","open"),!1}).on("click",".button.scrapbook",function(a){a.preventDefault(),a.stopPropagation();var c=$(this),d=c.data("productcode"),f=(c.data("skuid"),c.data("imageassetid")),g=c.data("productname"),h=$("#studio ul"),i=h.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();return $.post("/scrapbook/scraps/savescrap",{productCode:d,imageAssetId:f,name:g},function(a){i.replaceWith(a),$(".scroller img, .scroller .scrapItem a").each(function(a,c){b(this)}),$(document).trigger("productdragstop"),e()}),!1}),$(document.body).on("click","#selectCountry .country-list a",function(a){var b=$(this);return $.ajax({cache:!1,url:b.attr("href"),success:function(a){if(window.location.href.indexOf("shop")>-1||window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)$cookie.set("changedCountry",JSON.stringify(a)),window.location.href=a.returnUrl;else if(a.currencyRegion){$("a[data-reveal-id=selectCountry] img").attr("src",a.currencyRegion.FlagImageUrl).attr("alt",a.currencyRegion.Name);var b=$("body .notification");b.remove(),b="United Kingdom"!=a.currencyRegion.Name?$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+a.currencyRegion.Name+" will be billed in "+a.currencyRegion.Currency.Name+"</p><p>We currently do not deliver to this region.</p></div>").prependTo("body"):$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+a.currencyRegion.Name+" will be billed in "+a.currencyRegion.Currency.Name+"</p></div>").prependTo("body"),b.stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){b.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}$("#selectCountry").foundation("reveal","close")}}),!1})}),$cookie.get("changedCountry")){var f=JSON.parse($cookie.get("changedCountry"));$cookie.remove("changedCountry");var g=$("body .notification");g.remove(),"GBR"!=Model.RegionInfo.ThreeLetterISORegionName&&(g=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+f.currencyRegion.Name+" will be billed in "+f.currencyRegion.Currency.Name+"</p></div>").prependTo("body")),g.stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){g.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}}(),Wg.Common.init();var classToggle={};classToggle={toggleOnEvent:function(a,b,c,d,e,f){if($(b).length>0){var g,h={};$(b).on(a,function(i){i.preventDefault(),g="href"===c?$($(this).attr("href")):$(c),g.toggleClass(d),e&&$(this).toggleClass(d),"click"===a&&1==f&&(h={trigger:b,targetEl:g,newclass:d},$(document).on("click",h,classToggle.offTriggerListener))})}},offTriggerListener:function(a){if(!$(a.target).closest(a.data.trigger).length&&!$(a.target).closest(a.data.targetEl).length){var b=a.data.newclass;$(a.data.trigger).removeClass(b),$(a.data.targetEl).removeClass(b),$(document).off("click",classToggle.offTriggerListener)}}},function(a,b){a(function(){if(b.touch){a("body").on("click",".has-dropdown>a",function(b){var c=a(this).parent();c.hasClass("touch-hover")?(c.removeClass("touch-hover"),a(".global-nav-dropdown",c).hide(),b.stopImmediatePropagation()):(c.addClass("touch-hover"),a(".global-nav-dropdown",c).show(),b.preventDefault(),b.stopImmediatePropagation())});var c=function(b){var c=a(".global-nav-dropdown"),d=a(".has-dropdown > a");(!c.is(b.target)&&0===c.has(b.target).length||!d.is(b.target)&&0===d.has(b.target).length)&&(c.parent().removeClass("touch-hover"),c.hide())};a("body").on("click",c)}})}(jQuery,Modernizr);var globalBrands={el:{container:$(".global-brands"),showBrands:$(".js-global-brands-show"),hideBrands:$(".js-global-brands-hide"),items:$("li",".global-brands-list"),openClass:"brands-open"},toggleState:function(a){var b=this,c=b.el;$(c.items).not(".active").stop().animate({width:"toggle",opacity:"toggle",avoidCSSTransitions:!0},{duration:500}),"hide"===a?(c.showBrands.show(),c.hideBrands.hide(),c.container.removeClass(c.openClass)):"show"===a&&(c.showBrands.hide(),c.hideBrands.show(),c.container.addClass(c.openClass))},bindUI:function(){var a=this,b=a.el;b.showBrands.on("click",function(b){b.preventDefault(),a.toggleState("show")}),b.hideBrands.on("click",function(b){b.preventDefault(),a.toggleState("hide")})},init:function(){this.bindUI()}};$.ui.autocomplete.prototype._renderItem=function(a,b){var c=this.term.split(" ").join("|"),d=new RegExp("("+c+")","gi"),e=b.label.replace(d,"<strong>$1</strong>");return $("<li></li>").data("item.autocomplete",b).append("<a>"+e+"</a>").appendTo(a)},jQuery.validator.unobtrusive.adapters.add("brequired",function(a){"INPUT"==a.element.tagName.toUpperCase()&&"CHECKBOX"==a.element.type.toUpperCase()&&(a.rules.required=!0,a.message&&(a.messages.required=a.message))}),jQuery.validator.addMethod("mustbetrue",function(a,b,c){return b.checked}),jQuery.validator.unobtrusive.adapters.addBool("mustbetrue"),$(document).ready(function(){}),function(){if(8===function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}()){var b=document.createEventObject().constructor.prototype;Object.defineProperty(b,"bubbles",{get:function(){for(var a=["select","scroll","click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","wheel","textinput","keydown","keypress","keyup"],b=this.type,c=0,d=a.length;c<d;c++)if(b===a[c])return!0;return!1}}),Object.defineProperty(b,"defaultPrevented",{get:function(){var b,a=this.returnValue;return!(a===b||a)}}),Object.defineProperty(b,"relatedTarget",{get:function(){var a=this.type;return"mouseover"===a||"mouseout"===a?"mouseover"===a?this.fromElement:this.toElement:null}}),Object.defineProperty(b,"target",{get:function(){return this.srcElement}}),b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0};var c=function(a){return"function"!=typeof a&&"function"==typeof a.handleEvent},d="__eventShim__",e=function(a,b,e){var f=b;c(b)&&("function"!=typeof b[d]&&(b[d]=function(a){b.handleEvent(a)}),f=b[d]),this.attachEvent("on"+a,f)},f=function(a,b,e){var f=b;c(b)&&(f=b[d]),this.detachEvent("on"+a,f)};HTMLDocument.prototype.addEventListener=e,HTMLDocument.prototype.removeEventListener=f,Element.prototype.addEventListener=e,Element.prototype.removeEventListener=f,window.addEventListener=e,window.removeEventListener=f}}(),window.Wg=window.Wg||{},Wg.Faqs=Wg.Faqs||function(){function b(b){return null!=a?a:$.ajax({url:"/_js/template/"+b+".html",type:"GET",dataType:"html"})}function c(){var a=$(".faqAccordion > li"),b=$(".search-faqs").find("input[name=flameRetardant_filterCategory]:checked").map(function(a,b){return $(this).val()}),c=$(".search-faqs").find("input[name=flameRetardant_filterCountry]:checked").map(function(a,b){return $(this).val()});a.show();for(var d=0;d<a.length;d++){var g=$(a[d]);(g.text()||"").toLowerCase().indexOf((f.searchParams.keywords||"").toLowerCase())<0&&g.hide();for(var h=0;h<b.length;h++)1!=g.find("article").data(b[h])&&g.hide();for(var h=0;h<c.length;h++)1!=g.find("article").data(c[h])&&g.hide()}e(!1,b,c)}function e(a,c,d){b("faq-filter").done(function(b){var e=_.template(b),g=$(".leftCol .filterAccordion.faqFilterAccordion .expanded").map(function(a){return"#"+this.id});$(".leftCol .filterAccordion.faqFilterAccordion .toggle-filterAccordion").each(function(a,b){$(this).unbind("click")});var h=e({filters:c||{},countryFilters:d||{},reRenderKeywords:a,searchParams:f.searchParams,faqs:$(".faqAccordion article:visible").map(function(a){return $(this).data()})}),i=$("#faqSearchForm"),j=$(":focus").attr("id");i.find(".faq-categories, .filterCountry").remove(),a?(i.find(".filterTags").remove(),i.prepend(h)):i.find(".filterTags").after(h),$("#"+j).focus();new $.accordion($(".leftCol .filterAccordion.faqFilterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){}});$($.makeArray(g).join()).children("a").click(),$("#byKeyword").addClass("expanded"),$("#byKeyword").next(".content-filterAccordion").show(),$("#byType").addClass("expanded"),$("#byType").next(".content-filterAccordion").show(),$("#byRegion").addClass("expanded"),$("#byRegion").next(".content-filterAccordion").show()})}var a=null,f={searchParams:{},init:function(){$(document).ready(function(){new $.accordion($(".faqAccordion"),{closeOthers:!1,openFirst:!0,onInit:function(a){$(".button.expand-all").length&&$(".button.close-all").length&&$(".faqAccordion").length&&($(".expand-all").click(function(a){return a.preventDefault(),$(".faqAccordion .details").each(function(a,b){$(this).closest("article").children(".details").stop().slideDown(),$(this).parent().addClass(".expanded")}),!1}),$(".close-all").click(function(a){return a.preventDefault(),$(".faqAccordion .details").each(function(a,b){$(this).closest("article").children(".details").stop().slideUp(),$(this).parent().removeClass(".expanded")}),!1}))}});$("body").on("keydown","#faqFilterSearch",function(a){if(13==a.keyCode)return a.preventDefault(),!1}),$("body").on("keyup","#faqFilterSearch",function(){f.searchParams.keywords=$(this).val(),c()}),$("body").on("change",".faq-categories input:checkbox,.filterCountry input:checkbox",function(){c()}),e(!0)})}};return f}(),Wg.Faqs.init(),window.Wg=window.Wg||{},Wg.Faqs=Wg.Faqs||function(){function a(a){return null!=d?d:$.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})}function b(){var f,g,h,a=$(".faqAccordion>li"),b=$(".search-faqs").find("input[name=flameRetardant_filterCategory]:checked").map(function(){return $(this).val()}),d=$(".search-faqs").find("input[name=flameRetardant_filterCountry]:checked").map(function(){return $(this).val()});for(a.show(),f=0;f<a.length;f++){for(g=$(a[f]),(g.text()||"").toLowerCase().indexOf((e.searchParams.keywords||"").toLowerCase())<0&&g.hide(),h=0;h<b.length;h++)1!=g.find("article").data(b[h])&&g.hide();for(h=0;h<d.length;h++)1!=g.find("article").data(d[h])&&g.hide()}c(!1,b,d)}function c(b,c,d){a("faq-filter").done(function(a){var h,i,k,f=_.template(a),g=$(".leftCol .filterAccordion.faqFilterAccordion .expanded").map(function(){return"#"+this.id});$(".leftCol .filterAccordion.faqFilterAccordion .toggle-filterAccordion").each(function(){$(this).unbind("click")}),h=f({filters:c||{},countryFilters:d||{},reRenderKeywords:b,searchParams:e.searchParams,faqs:$(".faqAccordion article:visible").map(function(){return $(this).data()})}),i=$("#faqSearchForm"),i.find(".faq-categories,.filterCountry").remove(),b?(i.find(".filterTags").remove(),i.prepend(h)):i.find(".filterTags").after(h),new $.accordion($(".leftCol .filterAccordion.faqFilterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(){}}),k=$($.makeArray(g).join()),k.children("a").click(),$("#byKeyword").addClass("expanded"),$("#byKeyword").next(".content-filterAccordion").show(),$("#byType").addClass("expanded"),$("#byType").next(".content-filterAccordion").show(),$("#byRegion").addClass("expanded"),$("#byRegion").next(".content-filterAccordion").show()})}var d=null,e={searchParams:{},init:function(){$(document).ready(function(){new $.accordion($(".faqAccordion"),{closeOthers:!1,openFirst:!0,onInit:function(){$(".button.expand-all").length&&$(".button.close-all").length&&$(".faqAccordion").length&&($(".expand-all").click(function(a){return a.preventDefault(),$(".faqAccordion .details").each(function(){$(this).closest("article").children(".details").stop().slideDown(),$(this).parent().addClass(".expanded")}),!1}),$(".close-all").click(function(a){return a.preventDefault(),$(".faqAccordion .details").each(function(){$(this).closest("article").children(".details").stop().slideUp(),$(this).parent().removeClass(".expanded")}),!1}))}});$("body").on("keydown","#faqFilterSearch",function(a){if(13==a.keyCode)return a.preventDefault(),!1}),$("body").on("keyup","#faqFilterSearch",function(){e.searchParams.keywords=$(this).val(),b()}),$("body").on("change",".faq-categories input:checkbox,.filterCountry input:checkbox",function(){b()}),$(".faq-contact-button").on("click",".button",function(a){return a.preventDefault(),!1}).hoverIntent(function(){$(this).find(".faq-contact-content").slideToggle()}),c(!0)})}};return e}(),Wg.Faqs.init(),function(){"use strict";function a(b,d){function f(a,b){return function(){return a.apply(b,arguments)}}var e;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;i<j;i++)h[g[i]]=f(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(e=b.onclick,b.addEventListener("click",function(a){e(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(!(b=a.fastClickScrollParent)||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c},a.prototype.onTouchMove=function(a){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0)},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(h=k.tagName.toLowerCase())){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return!(!d||e||!(i=k.fastClickScrollParent)||i.fastClickLastScrollTop===i.scrollTop)||(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return!this.targetElement||(!!a.forwardedTouchEvent||(!a.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1))))},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail||(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e;if(void 0===window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(b=document.querySelector("meta[name=viewport]"))&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===a.style.touchAction||"manipulation"===a.style.touchAction))},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),jQuery.fn.forceNumeric=function(){return this.each(function(){console.log(this),$(this).on("keydown",function(a){var b=a.charCode||a.keyCode;return 8==b||37==b||39==b||b>=48&&b<=57||b>=96&&b<=105}),$(this).on("change",function(a){null!=this.value&&(this.value=this.value.replace(/[^0-9]+/g,""),this.value<1&&(this.value=0))})})},Object.getPrototypeOf||(Object.getPrototypeOf=function(a){if(a!==Object(a))throw TypeError("Object.getPrototypeOf called on non-object");return a.__proto__||a.constructor.prototype||Object.prototype}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(a){if(a!==Object(a))throw TypeError("Object.getOwnPropertyNames called on non-object");var c,b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),"function"!=typeof Object.create&&(Object.create=function(a,b){function c(){}if("object"!=typeof a)throw TypeError();c.prototype=a;var d=new c;if(a&&(d.constructor=c),void 0!==b){if(b!==Object(b))throw TypeError();Object.defineProperties(d,b)}return d}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}()){var a=Object.defineProperty;Object.defineProperty=function(b,c,d){if(a)try{return a(b,c,d)}catch(a){}if(b!==Object(b))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in d&&Object.prototype.__defineGetter__.call(b,c,d.get),Object.prototype.__defineSetter__&&"set"in d&&Object.prototype.__defineSetter__.call(b,c,d.set),"value"in d&&(b[c]=d.value),b}}}(),"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(a,b){if(a!==Object(a))throw TypeError("Object.defineProperties called on non-object");var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&Object.defineProperty(a,c,b[c]);return a}),Object.keys||(Object.keys=function(a){if(a!==Object(a))throw TypeError("Object.keys called on non-object");var c,b=[];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),Function.prototype.bind||(Function.prototype.bind=function(a){function f(){}if("function"!=typeof this)throw TypeError("Bind must be called on a function");var b=[].slice,c=b.call(arguments,1),d=this,e=function(){return d.apply(this instanceof f?this:a,c.concat(b.call(arguments)))};return f.prototype=d.prototype,e.prototype=new f,e}),Array.isArray=Array.isArray||function(a){return Boolean(a&&"[object Array]"===Object.prototype.toString.call(Object(a)))},Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),isNaN(d)?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d))));for(var e=d>=0?Math.min(d,c-1):c-Math.abs(d);e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.every||(Array.prototype.every=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var e,d=arguments[1];for(e=0;e<c;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var e,d=arguments[1];for(e=0;e<c;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var e,d=arguments[1];for(e=0;e<c;e++)e in b&&a.call(d,b[e],e,b)}),Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var d=[];d.length=c;var f,e=arguments[1];for(f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.prototype.filter||(Array.prototype.filter=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();var f,d=[],e=arguments[1];for(f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,d=0;if(arguments.length>=2)e=arguments[1];else for(;;){if(d in b){e=b[d++];break}if(++d>=c)throw TypeError()}for(;d<c;)d in b&&(e=a.call(void 0,e,b[d],d,b)),d++;return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){if(void 0===this||null===this)throw TypeError();var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,d=c-1;if(arguments.length>=2)e=arguments[1];else for(;;){if(d in this){e=this[d--];break}if(--d<0)throw TypeError()}for(;d>=0;)d in b&&(e=a.call(void 0,e,b[d],d,b)),d--;return e}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),Date.now||(Date.now=function(){return Number(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function a(a){return("00"+a).slice(-2)}function b(a){return("000"+a).slice(-3)}return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+b(this.getUTCMilliseconds())+"Z"}),function(a){if("function"==typeof define&&define.amd){var b="[history"+(new Date).getTime()+"]",c=requirejs.onError;a.toString=function(){return b},requirejs.onError=function(a){-1===a.message.indexOf(b)&&c.call(requirejs,a)},define([],a)}if("object"!=typeof exports||"undefined"==typeof module)return a();module.exports=a()}(function(){function K(){}function L(a,c,d){var e=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/;if(null==a||""===a||c)a=c?a:f.href,k&&!d||(a=a.replace(/^[^#]*/,"")||"#",a=f.protocol.replace(/:.*$|$/,":")+"//"+f.host+v.basepath+a.replace(new RegExp("^#[/]?(?:"+v.type+")?"),""));else{var g=L(),h=b.getElementsByTagName("base")[0];!d&&h&&h.getAttribute("href")&&(h.href=h.href,g=L(h.href,null,!0));var i=g._pathname,j=g._protocol;a=""+a,a=/^(?:\w+\:)?\/\//.test(a)?0===a.indexOf("/")?j+a:a:j+"//"+g._host+(0===a.indexOf("/")?a:0===a.indexOf("?")?i+a:0===a.indexOf("#")?i+g._search+a:i.replace(/[^\/]+$/g,"")+a)}x.href=a;var l=e.exec(x.href),m=l[2]+(l[3]?":"+l[3]:""),n=l[4]||"/",o=l[5]||"",p="#"===l[6]?"":l[6]||"",q=n+o+p,r=n.replace(new RegExp("^"+v.basepath,"i"),v.type)+o;return{_href:l[1]+"//"+m+q,_protocol:l[1],_host:m,_hostname:l[2],_port:l[3]||"",_pathname:n,_search:o,_hash:p,_relative:q,_nohash:r,_special:r+p}}function M(){var c;try{c=a.sessionStorage,c.setItem(w+"t","1"),c.removeItem(w+"t")}catch(a){c={getItem:function(a){var c=b.cookie.split(a+"=");return c.length>1&&c.pop().split(";").shift()||"null"},setItem:function(a,c){var d={};(d[f.href]=h.state)&&(b.cookie=a+"="+e.stringify(d))}}}try{D=e.parse(c.getItem(w))||{}}catch(a){D={}}s(o+"unload",function(){c.setItem(w,e.stringify(D))},!1)}function N(b,c,e,f){var g=0;e||(e={set:K},g=1);var h=!e.set,i=!e.get,j={configurable:!0,set:function(){h=1},get:function(){i=1}};try{m(b,c,j),b[c]=b[c],m(b,c,e)}catch(a){}if(!(h&&i||(b.__defineGetter__&&(b.__defineGetter__(c,j.get),b.__defineSetter__(c,j.set),b[c]=b[c],e.get&&b.__defineGetter__(c,e.get),e.set&&b.__defineSetter__(c,e.set)),h&&i))){if(g)return!1;if(b===a){try{var k=b[c];b[c]=null}catch(a){}if("execScript"in a)a.execScript("Public "+c,"VBScript"),a.execScript("var "+c+";","JavaScript");else try{m(b,c,{value:K})}catch(a){"onpopstate"===c&&(s("popstate",e=function(){t("popstate",e,!1);var a=b.onpopstate;b.onpopstate=null,setTimeout(function(){b.onpopstate=a},1)},!1),A=0)}b[c]=k}else try{try{var l=d.create(b);m(d.getPrototypeOf(l)===b?l:b,c,e);for(var n in b)"function"==typeof b[n]&&(l[n]=b[n].bind(b));try{f.call(l,l,b)}catch(a){}b=l}catch(a){m(b.constructor.prototype,c,e)}}catch(a){return!1}}return b}function O(a,b,c){return c=c||{},a=a===J?f:a,c.set=c.set||function(c){a[b]=c},c.get=c.get||function(){return a[b]},c}function P(a,b,c){a in E?E[a].push(b):arguments.length>3?s(a,b,c,arguments[3]):s(a,b,c)}function Q(a,b,c){var d=E[a];if(d){for(var e=d.length;e--;)if(d[e]===b){d.splice(e,1);break}}else t(a,b,c)}function R(b,c){var d=(""+("string"==typeof b?b:b.type)).replace(/^on/,""),e=E[d];if(e){if(c="string"==typeof b?c:b,null==c.target)for(var f=["target","currentTarget","srcElement","type"];b=f.pop();)c=N(c,b,{get:"type"===b?function(){return d}:function(){return a}});A&&(("popstate"===d?a.onpopstate:a.onhashchange)||K).call(a,c);for(var g=0,h=e.length;g<h;g++)e[g].call(a,c);return!0}return u(b,c)}function S(){var a=b.createEvent?b.createEvent("Event"):b.createEventObject();a.initEvent?a.initEvent("popstate",!1,!1):a.type="popstate",a.state=h.state,R(a)}function T(){B&&(B=!1,S())}function U(a,b,c,d){if(k)y=f.href;else{0===C&&(C=2);var e=L(b,2===C&&-1!==(""+b).indexOf("#"));e._relative!==L()._relative&&(y=d,c?f.replace("#"+e._special):f.hash=e._special)}!l&&a&&(D[f.href]=a),B=!1}function V(b){var c=y;if(y=f.href,c){z!==f.href&&S(),b=b||a.event;var d=L(c,!0),e=L();b.oldURL||(b.oldURL=d._href,b.newURL=e._href),d._hash!==e._hash&&R(b)}}function W(a){setTimeout(function(){s("popstate",function(a){z=f.href,l||(a=N(a,"state",{get:function(){return h.state}})),R(a)},!1)},0),!k&&!0!==a&&"location"in h&&(Z(n.hash),T())}function X(a){for(;a;){if("A"===a.nodeName)return a;a=a.parentNode}}function Y(b){var c=b||a.event,d=X(c.target||c.srcElement),e="defaultPrevented"in c?c.defaultPrevented:!1===c.returnValue;if(d&&"A"===d.nodeName&&!e){var f=L(),g=L(d.getAttribute("href",2));f._href.split("#").shift()===g._href.split("#").shift()&&g._hash&&(f._hash!==g._hash&&(n.hash=g._hash),Z(g._hash),c.preventDefault?c.preventDefault():c.returnValue=!1)}}function Z(d){var e=b.getElementById(d=(d||"").replace(/^#/,""));if(e&&e.id===d&&"A"===e.nodeName){var f=e.getBoundingClientRect();a.scrollTo(c.scrollLeft||0,f.top+(c.scrollTop||0)-(c.clientTop||0))}}function $(){var c=b.getElementsByTagName("script"),d=(c[c.length-1]||{}).src||"";(-1!==d.indexOf("?")?d.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(a,b,c){v[b]=(c||"").replace(/^(0|false)$/,"")}),s(o+"hashchange",V,!1);var g=[J,n,G,a,I,h];l&&delete I.state;for(var i=0;i<g.length;i+=2)for(var j in g[i])if(g[i].hasOwnProperty(j))if("function"==typeof g[i][j])g[i+1][j]=g[i][j];else{var m=O(g[i],j,g[i][j]);if(!N(g[i+1],j,m,function(b,c){c===h&&(a.history=h=g[i+1]=b)}))return t(o+"hashchange",V,!1),!1;g[i+1]===a&&(E[j]=E[j.substr(2)]=[])}return h.setup(),v.redirect&&h.redirect(),v.init&&(C=1),!l&&e&&M(),k||b[p](o+"click",Y,!1),"complete"===b.readyState?W(!0):(k||L()._relative===v.basepath||(B=!0),s(o+"load",W,!1)),!0}var a=("object"==typeof window?window:this)||{};if(!a.history||"emulate"in a.history)return a.history;var b=a.document,c=b.documentElement,d=a.Object,e=a.JSON,f=a.location,g=a.history,h=g,i=g.pushState,j=g.replaceState,k=!!i,l="state"in g,m=d.defineProperty,n=N({},"t")?{}:b.createElement("a"),o="",p=a.addEventListener?"addEventListener":(o="on")&&"attachEvent",q=a.removeEventListener?"removeEventListener":"detachEvent",r=a.dispatchEvent?"dispatchEvent":"fireEvent",s=a[p],t=a[q],u=a[r],v={basepath:"/",redirect:0,type:"/",init:0},w="__historyAPI__",x=b.createElement("a"),y=f.href,z="",A=1,B=!1,C=0,D={},E={},F=b.title,G={onhashchange:null,onpopstate:null},H=function(b,c){var d=a.history!==g;d&&(a.history=g),b.apply(g,c),d&&(a.history=h)},I={setup:function(a,b,c){v.basepath=(""+(null==a?v.basepath:a)).replace(/(?:^|\/)[^\/]*$/,"/"),v.type=null==b?v.type:b,v.redirect=null==c?v.redirect:!!c},redirect:function(b,c){if(h.setup(c,b),c=v.basepath,a.top==a.self){var d=L(null,!1,!0)._relative,e=f.pathname+f.search;k?(e=e.replace(/([^\/])$/,"$1/"),d!=c&&new RegExp("^"+c+"$","i").test(e)&&f.replace(d)):e!=c&&(e=e.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+c,"i").test(e)&&f.replace(c+"#"+e.replace(new RegExp("^"+c,"i"),v.type)+f.hash))}},pushState:function(a,c,d){var e=b.title;null!=F&&(b.title=F),i&&H(i,arguments),U(a,d),b.title=e,F=c},replaceState:function(a,c,d){var e=b.title;null!=F&&(b.title=F),delete D[f.href],j&&H(j,arguments),U(a,d,!0),b.title=e,F=c},location:{set:function(b){0===C&&(C=1),a.location=b},get:function(){return 0===C&&(C=1),k?f:n}},state:{get:function(){return D[f.href]||null}}},J={assign:function(a){0===(""+a).indexOf("#")?U(null,a):f.assign(a)},reload:function(){f.reload()},replace:function(a){0===(""+a).indexOf("#")?U(null,a,!0):f.replace(a)},toString:function(){return this.href},href:{get:function(){return L()._href}},protocol:null,host:null,hostname:null,port:null,pathname:{get:function(){return L()._pathname}},search:{get:function(){return L()._search}},hash:{set:function(a){U(null,(""+a).replace(/^(#|)/,"#"),!1,y)},get:function(){return L()._hash}}};return $()?(h.emulate=!k,a[p]=P,a[q]=Q,a[r]=R,h):void 0}),window.Wg=window.Wg||{},Wg.ImageDownload=Wg.ImageDownload||function(){function a(){$(document).on("click","#imageResults .action .button",function(a){return a.preventDefault(),console.log($(this)),$(this).hasClass("remove")?(d($(this).attr("data-image-id")),$(this).removeClass("remove").text("Add to Basket"),!1):(c($(this).attr("data-image-id")),$(this).addClass("remove").text("Remove from Basket"),!1)}),$("#imageListContainer .thumb").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image...",mainClass:"mfp-img-mobile",gallery:{enabled:!1},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}})}function b(){$(".imageMiniBasket .items").hide(),$(".basketMessage a").off("click"),$(".basketMessage a").on("click",function(a){return a.preventDefault(),$(this).parents(".basketMessage").toggleClass("expanded"),$(this).parents(".basketMessage").siblings(".items").toggle(),!1}),$(".imageMiniBasket .remove").off("click"),$(".imageMiniBasket .remove").on("click",function(a){return a.preventDefault(),d($(this).attr("data-image-id")),!1})}function c(a){e("/imagedownload/imagedownload/AddToBasket/?imageid="+a)}function d(a){e("/imagedownload/imagedownload/RemoveFromBasket/?imageid="+a,function(){var b=$(".imageList .remove[data-image-id='"+a+"']");null!=b&&$(b).removeClass("remove").text("Add to Basket")})}function e(a,c){$(".basketMessage").hasClass("expanded");$.ajax({type:"GET",url:a,success:function(a){a.length>0?($(".imageMiniBasket").replaceWith(a),c&&c()):console.log("no data"),b()}})}function f(){var a=$("#imageDownloadSearch");if(a.length>0){var c=(a.attr("id"),"/ImageDownload/ImageDownload/Index"),d=$(".pagination .pageNumbers .selected").first().data("page")||1,e=$("#PerPage").val();c=c+"/?page="+d,c=c+"&perpage="+e,$("#imageListContainer *").attr("disabled","disabled").off("click"),$("#imageListContainer").css("opacity","0.2"),$.ajax({type:"GET",url:c,data:$(a).serialize(),success:function(a){a.length>0?$("#imageListContainer").html(a):alert("no data")}}).done(function(){$("#imageListContainer *").removeAttr("disabled").on("click"),$("#imageListContainer").css("opacity","")})}}function g(a){$(a+" input:checked").length>0?$(a+" .clearFilter").show():$(a+" .clearFilter").hide()}function h(a){$(a+" label.selected").each(function(){$(this).toggleClass("selected")}),$(a+" input:checked").each(function(){$(this).prop("checked",!1)}),ajaxSearch()}return{init:function(){$(document).ready(function(){$(document).on("click","ul.imageBasket li.item a.remove",function(a){a.preventDefault();var b=$(this);return $.post("./remove/","imageId="+$(this).data("imageid")+"&__RequestVerificationToken="+$(this).parents("form").find('input[name="__RequestVerificationToken"]').val(),function(a){}),b.parents("li").fadeOut("slow").remove(),!1}),$(".imageResolution").on("change",function(){var a=$(this).closest("div.details");$(".lowResMetaData",a).hide(),$(".lowResSpoilerMetaData",a).hide(),$(".highResMetaData",a).hide();var b=$(this).val();"lo"==b?$(".lowResMetaData",a).show():"lo-spoiler"==b?$(".lowResSpoilerMetaData",a).show():$(".highResMetaData",a).show()}),$(document).on("click",".imageresselector",function(a){a.preventDefault();var b=$(this).data("imageres");return $("select[name^='Res_']").each(function(){$(this).val(b)}),!1}),g(".filterImageType"),$(".filterImageType .clearFilter").bind("click",function(){h(".filterImageType")}),$("input[name='imageType']").on("change",function(a){console.log("change imageType"),f(),g(".filterImageType")}),g(".filterCategory"),$(".filterCategory .clearFilter").bind("click",function(){h(".filterCategory")}),$("input[name='collectionNames']").on("change",function(a){f(),g(".filterCategory")}),a(),b();new InfiniteScroll($("#imageListContainer"),"/ImageDownload/ImageDownload/Index",30,!0,"html",$('<div class="loading-container"><h2>Loading</h2><div class="ajaxLoader"></div></div>'),function(){return $("#imageDownloadSearch").serialize()})})}}}(),Wg.ImageDownload.init(),function(){var a=this,b=function(a){if(!a||!a.canvas||!a.path)throw"ImgZoom constructor: missing arguments canvas or path";this.canvas=a.canvas,this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,this.context=this.canvas.getContext("2d"),this.desktop=a.desktop||!1,this.position={x:0,y:0},this.scale={x:.5,y:.5},this.imgTexture=new Image,this.imgTexture.src=a.path,this.lastZoomScale=null,this.lastX=null,this.lastY=null,this.mdown=!1,this.init=!1,this.checkRequestAnimationFrame(),requestAnimationFrame(this.animate.bind(this)),this.setEventListeners()};b.prototype={animate:function(){if(!this.init&&this.imgTexture.width){var a=null;a=this.canvas.clientWidth>this.canvas.clientHeight?this.canvas.clientWidth/this.imgTexture.width:this.canvas.clientHeight/this.imgTexture.height,this.scale.x=a,this.scale.y=a,this.init=!0}this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.imgTexture,this.position.x,this.position.y,this.scale.x*this.imgTexture.width,this.scale.y*this.imgTexture.height),requestAnimationFrame(this.animate.bind(this))},gesturePinchZoom:function(a){var b=!1;if(a.targetTouches.length>=2){var c=a.targetTouches[0],d=a.targetTouches[1],e=Math.sqrt(Math.pow(d.pageX-c.pageX,2)+Math.pow(d.pageY-c.pageY,2));this.lastZoomScale&&(b=e-this.lastZoomScale),this.lastZoomScale=e}return b},doZoom:function(a){if(a){var b=this.scale.x,c=this.scale.x+a/100,d=c-b,e=this.imgTexture.width*this.scale.x,f=this.imgTexture.height*this.scale.y,g=this.imgTexture.width*d,h=this.imgTexture.height*d,i=this.canvas.clientWidth/2,j=this.canvas.clientHeight/2,k=-this.position.x+i,l=-this.position.y+j,m=-k/e,n=-l/f,o=this.position.x+g*m,p=this.position.y+h*n,q=e+g,r=f+h;q<this.canvas.clientWidth||(o>0&&(o=0),o+q<this.canvas.clientWidth&&(o=this.canvas.clientWidth-q),r<this.canvas.clientHeight||(p>0&&(p=0),p+r<this.canvas.clientHeight&&(p=this.canvas.clientHeight-r),this.scale.x=c,this.scale.y=c,this.position.x=o,this.position.y=p))}},doMove:function(a,b){if(this.lastX&&this.lastY){var c=a-this.lastX,d=b-this.lastY,e=this.imgTexture.width*this.scale.x,f=this.imgTexture.height*this.scale.y;this.position.x+=c,this.position.y+=d,this.position.x>0?this.position.x=0:this.position.x+e<this.canvas.clientWidth&&(this.position.x=this.canvas.clientWidth-e),this.position.y>0?this.position.y=0:this.position.y+f<this.canvas.clientHeight&&(this.position.y=this.canvas.clientHeight-f)}this.lastX=a,this.lastY=b},setEventListeners:function(){this.canvas.addEventListener("touchstart",function(a){this.lastX=null,this.lastY=null,this.lastZoomScale=null}.bind(this)),this.canvas.addEventListener("touchmove",function(a){if(a.preventDefault(),2==a.targetTouches.length)this.doZoom(this.gesturePinchZoom(a));else if(1==a.targetTouches.length){var b=a.targetTouches[0].pageX-this.canvas.getBoundingClientRect().left,c=a.targetTouches[0].pageY-this.canvas.getBoundingClientRect().top;this.doMove(b,c)}}.bind(this)),this.desktop&&(window.addEventListener("keyup",function(a){187==a.keyCode||61==a.keyCode?this.doZoom(5):54==a.keyCode&&this.doZoom(-5)}.bind(this)),window.addEventListener("mousedown",function(a){this.mdown=!0,this.lastX=null,this.lastY=null}.bind(this)),window.addEventListener("mouseup",function(a){this.mdown=!1}.bind(this)),window.addEventListener("mousemove",function(a){var b=a.pageX-this.canvas.getBoundingClientRect().left,c=a.pageY-this.canvas.getBoundingClientRect().top;a.target==this.canvas&&this.mdown&&this.doMove(b,c),(b<=0||b>=this.canvas.clientWidth||c<=0||c>=this.canvas.clientHeight)&&(this.mdown=!1)}.bind(this)))},checkRequestAnimationFrame:function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}},a.ImgTouchCanvas=b}.call(this);var imageLoaderBlankState="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",InfiniteScroll=function(a,b,c,d,e,f,g){return"json"!=e&&"xml"!=e&&"html"!=e&&(e=null),c<1&&(c=10),this.container=a||$("#infinite-scroll-container"),this.ajaxLoader=f||$('<div class="infinite-scroll-loader"></div>'),this.ajaxDataDelegate=g,this.page=2,this.perPage=c||10,this.remoteDataType=e||"json",this.append=d||!0,this.ajaxUrl=b,{scrolltrigger:.8,disable:!1,append:!0,previousScrollX:0,previousScrollY:0,disableScroll:!1,ajaxData:null,container:null,ajaxLoader:null,init:function(a){var b=this;b.ajaxData=a.ajaxDataDelegate(),b.container=a.container,b.ajaxLoader=a.ajaxLoader,b.append=a.append;for(var c=a.container.find("img"),d=0;d<c.length;d++)b.placeholderStart(c[d]);$(window).on("scroll",function(c){"down"!==b.getScrollDirection(this).Y||b.disableScroll||b.disable||(b.disableScroll=!0,$(window).scrollTop()/($(document).height()-$(window).height())>b.scrolltrigger&&b.triggerAjax(a,b.container),setTimeout(function(){b.disableScroll=!1},1e3))})},getScrollDirection:function(a){var e,f,b=this,c=$(a).scrollTop(),d=$(a).scrollLeft();return c>b.previousScrollY?f="down":c<b.previousScrollY&&(f="up"),d>b.previousScrollX?b.scrollDirectionX="right":d<b.previousScrollX&&(e="left"),b.previousScrollY=c,b.previousScrollX=d,{X:e,Y:f}},placeholderStart:function(a){var b=a.src;$(a).data("src",b),a.src="/_images/placeholders/img-loader.gif";var c=new Image;c.src=b,c.onload=function(){$(a).fadeOut("fast",function(){$(a).attr("src",$(a).data("src")),$(a).fadeIn("fast")})},c.onerror=function(){$(a).fadeOut("fast",function(){$(a).attr("src",$(a).data("src")),$(a).fadeIn("fast")})}},triggerAjax:function(a,b){var c=this,d=c.ajaxLoader.clone();b.append(d),d.show();var e=a.ajaxUrl+"?page="+a.page+"&perPage="+a.perPage,f=a.ajaxDataDelegate();f!==c.ajaxData&&(c.append=!1),c.disable=$.ajax({url:e,type:"POST",data:f,success:function(e){d.fadeOut().remove(),c.disable=null,c.append?b.append(e):b.html(e);for(var f=b.find("img"),g=0;g<f.length;g++)c.placeholderStart(f[g]);a.page++},error:function(){d.fadeOut().remove(),c.disable=null}})}}.init(this),this};!function(a,b){function D(a){return""===e?a:(a=a.charAt(0).toUpperCase()+a.substr(1),e+a)}var c=Math,d=b.createElement("div").style,e=function(){for(var a="t,webkitT,MozT,msT,OT".split(","),c=0,e=a.length;c<e;c++)if(a[c]+"ransform"in d)return a[c].substr(0,a[c].length-1);return!1}(),f=e?"-"+e.toLowerCase()+"-":"",g=D("transform"),h=D("transitionProperty"),i=D("transitionDuration"),j=D("transformOrigin"),k=D("transitionTimingFunction"),l=D("transitionDelay"),m=/android/gi.test(navigator.appVersion),n=/iphone|ipad/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),p=D("perspective")in d,q="ontouchstart"in a&&!o,r=!1!==e,s=D("transition")in d,t="onorientationchange"in a?"orientationchange":"resize",u=q?"touchstart":"mousedown",v=q?"touchmove":"mousemove",w=q?"touchend":"mouseup",x=q?"touchcancel":"mouseup",y=function(){return!1!==e&&{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[e]}(),z=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),A=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),B=p?" translateZ(0)":"",C=function(c,d){var l,e=this;e.wrapper="object"==typeof c?c:b.getElementById(c),e.wrapper.style.overflow="hidden",e.scroller=e.wrapper.children[0],e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:m,hideScrollbar:n,fadeScrollbar:n&&p,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in d)e.options[l]=d[l];e.x=e.options.x,e.y=e.options.y,e.options.useTransform=r&&e.options.useTransform,e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar,e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar,e.options.zoom=e.options.useTransform&&e.options.zoom,e.options.useTransition=s&&e.options.useTransition,e.options.zoom&&m&&(B=""),e.scroller.style[h]=e.options.useTransform?f+"transform":"top left",e.scroller.style[i]="0",e.scroller.style[j]="0 0",e.options.useTransition&&(e.scroller.style[k]="cubic-bezier(0.33,0.66,0.66,1)"),e.options.useTransform?e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px)"+B:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px",e.options.useTransition&&(e.options.fixedScrollbar=!0),e.refresh(),e._bind(t,a),e._bind(u),q||"none"!=e.options.wheelAction&&(e._bind("DOMMouseScroll"),e._bind("mousewheel")),e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};C.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case u:if(!q&&0!==a.button)return;b._start(a);break;case v:b._move(a);break;case w:case x:b._end(a);break;case t:b._resize();break;case"DOMMouseScroll":case"mousewheel":b._wheel(a);break;case y:b._transitionEnd(a)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(a){var e,d=this;if(!d[a+"Scrollbar"])return void(d[a+"ScrollbarWrapper"]&&(r&&(d[a+"ScrollbarIndicator"].style[g]=""),d[a+"ScrollbarWrapper"].parentNode.removeChild(d[a+"ScrollbarWrapper"]),d[a+"ScrollbarWrapper"]=null,d[a+"ScrollbarIndicator"]=null));d[a+"ScrollbarWrapper"]||(e=b.createElement("div"),d.options.scrollbarClass?e.className=d.options.scrollbarClass+a.toUpperCase():e.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(d.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(d.hScrollbar?"7":"2")+"px;top:2px;right:1px"),e.style.cssText+=";pointer-events:none;"+f+"transition-property:opacity;"+f+"transition-duration:"+(d.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(d.options.hideScrollbar?"0":"1"),d.wrapper.appendChild(e),d[a+"ScrollbarWrapper"]=e,e=b.createElement("div"),d.options.scrollbarClass||(e.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+f+"background-clip:padding-box;"+f+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+f+"border-radius:3px;border-radius:3px"),e.style.cssText+=";pointer-events:none;"+f+"transition-property:"+f+"transform;"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+f+"transition-duration:0;"+f+"transform: translate(0,0)"+B,d.options.useTransition&&(e.style.cssText+=";"+f+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),d[a+"ScrollbarWrapper"].appendChild(e),d[a+"ScrollbarIndicator"]=e),"h"==a?(d.hScrollbarSize=d.hScrollbarWrapper.clientWidth,d.hScrollbarIndicatorSize=c.max(c.round(d.hScrollbarSize*d.hScrollbarSize/d.scrollerW),8),d.hScrollbarIndicator.style.width=d.hScrollbarIndicatorSize+"px",d.hScrollbarMaxScroll=d.hScrollbarSize-d.hScrollbarIndicatorSize,d.hScrollbarProp=d.hScrollbarMaxScroll/d.maxScrollX):(d.vScrollbarSize=d.vScrollbarWrapper.clientHeight,d.vScrollbarIndicatorSize=c.max(c.round(d.vScrollbarSize*d.vScrollbarSize/d.scrollerH),8),d.vScrollbarIndicator.style.height=d.vScrollbarIndicatorSize+"px",d.vScrollbarMaxScroll=d.vScrollbarSize-d.vScrollbarIndicatorSize,d.vScrollbarProp=d.vScrollbarMaxScroll/d.maxScrollY),d._scrollbarPos(a,!0)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},m?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[g]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+B:(a=c.round(a),b=c.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var f,d=this,e="h"==a?d.x:d.y;d[a+"Scrollbar"]&&(e=d[a+"ScrollbarProp"]*e,e<0?(d.options.fixedScrollbar||(f=d[a+"ScrollbarIndicatorSize"]+c.round(3*e),f<8&&(f=8),d[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=f+"px"),e=0):e>d[a+"ScrollbarMaxScroll"]&&(d.options.fixedScrollbar?e=d[a+"ScrollbarMaxScroll"]:(f=d[a+"ScrollbarIndicatorSize"]-c.round(3*(e-d[a+"ScrollbarMaxScroll"])),f<8&&(f=8),d[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=f+"px",e=d[a+"ScrollbarMaxScroll"]+(d[a+"ScrollbarIndicatorSize"]-f))),d[a+"ScrollbarWrapper"].style[l]="0",d[a+"ScrollbarWrapper"].style.opacity=b&&d.options.hideScrollbar?"0":"1",d[a+"ScrollbarIndicator"].style[g]="translate("+("h"==a?e+"px,0)":"0,"+e+"px)")+B)},_start:function(b){var f,h,i,j,k,d=this,e=q?b.touches[0]:b;d.enabled&&(d.options.onBeforeScrollStart&&d.options.onBeforeScrollStart.call(d,b),(d.options.useTransition||d.options.zoom)&&d._transitionTime(0),d.moved=!1,d.animating=!1,d.zoomed=!1,d.distX=0,d.distY=0,d.absDistX=0,d.absDistY=0,d.dirX=0,d.dirY=0,d.options.zoom&&q&&b.touches.length>1&&(j=c.abs(b.touches[0].pageX-b.touches[1].pageX),k=c.abs(b.touches[0].pageY-b.touches[1].pageY),d.touchesDistStart=c.sqrt(j*j+k*k),d.originX=c.abs(b.touches[0].pageX+b.touches[1].pageX-2*d.wrapperOffsetLeft)/2-d.x,d.originY=c.abs(b.touches[0].pageY+b.touches[1].pageY-2*d.wrapperOffsetTop)/2-d.y,d.options.onZoomStart&&d.options.onZoomStart.call(d,b)),d.options.momentum&&(d.options.useTransform?(f=getComputedStyle(d.scroller,null)[g].replace(/[^0-9\-.,]/g,"").split(","),h=+(f[12]||f[4]),i=+(f[13]||f[5])):(h=+getComputedStyle(d.scroller,null).left.replace(/[^0-9-]/g,""),i=+getComputedStyle(d.scroller,null).top.replace(/[^0-9-]/g,"")),h==d.x&&i==d.y||(d.options.useTransition?d._unbind(y):A(d.aniTime),d.steps=[],d._pos(h,i),d.options.onScrollEnd&&d.options.onScrollEnd.call(d))),d.absStartX=d.x,d.absStartY=d.y,d.startX=d.x,d.startY=d.y,d.pointX=e.pageX,d.pointY=e.pageY,d.startTime=b.timeStamp||Date.now(),d.options.onScrollStart&&d.options.onScrollStart.call(d,b),d._bind(v,a),d._bind(w,a),d._bind(x,a))},_move:function(a){var j,k,l,b=this,d=q?a.touches[0]:a,e=d.pageX-b.pointX,f=d.pageY-b.pointY,h=b.x+e,i=b.y+f,m=a.timeStamp||Date.now();if(b.options.onBeforeScrollMove&&b.options.onBeforeScrollMove.call(b,a),b.options.zoom&&q&&a.touches.length>1)return j=c.abs(a.touches[0].pageX-a.touches[1].pageX),k=c.abs(a.touches[0].pageY-a.touches[1].pageY),b.touchesDist=c.sqrt(j*j+k*k),b.zoomed=!0,l=1/b.touchesDistStart*b.touchesDist*this.scale,l<b.options.zoomMin?l=.5*b.options.zoomMin*Math.pow(2,l/b.options.zoomMin):l>b.options.zoomMax&&(l=2*b.options.zoomMax*Math.pow(.5,b.options.zoomMax/l)),b.lastScale=l/this.scale,h=this.originX-this.originX*b.lastScale+this.x,i=this.originY-this.originY*b.lastScale+this.y,this.scroller.style[g]="translate("+h+"px,"+i+"px) scale("+l+")"+B,void(b.options.onZoom&&b.options.onZoom.call(b,a));b.pointX=d.pageX,b.pointY=d.pageY,(h>0||h<b.maxScrollX)&&(h=b.options.bounce?b.x+e/2:h>=0||b.maxScrollX>=0?0:b.maxScrollX),(i>b.minScrollY||i<b.maxScrollY)&&(i=b.options.bounce?b.y+f/2:i>=b.minScrollY||b.maxScrollY>=0?b.minScrollY:b.maxScrollY),b.distX+=e,b.distY+=f,b.absDistX=c.abs(b.distX),b.absDistY=c.abs(b.distY),b.absDistX<6&&b.absDistY<6||(b.options.lockDirection&&(b.absDistX>b.absDistY+5?(i=b.y,f=0):b.absDistY>b.absDistX+5&&(h=b.x,e=0)),b.moved=!0,b._pos(h,i),b.dirX=e>0?-1:e<0?1:0,b.dirY=f>0?-1:f<0?1:0,m-b.startTime>300&&(b.startTime=m,b.startX=b.x,b.startY=b.y),b.options.onScrollMove&&b.options.onScrollMove.call(b,a))},_end:function(d){if(!q||0===d.touches.length){var h,j,p,r,s,t,u,e=this,f=q?d.changedTouches[0]:d,k={dist:0,time:0},l={dist:0,time:0},m=(d.timeStamp||Date.now())-e.startTime,n=e.x,o=e.y;if(e._unbind(v,a),e._unbind(w,a),e._unbind(x,a),e.options.onBeforeScrollEnd&&e.options.onBeforeScrollEnd.call(e,d),e.zoomed)return u=e.scale*e.lastScale,u=Math.max(e.options.zoomMin,u),u=Math.min(e.options.zoomMax,u),e.lastScale=u/e.scale,e.scale=u,e.x=e.originX-e.originX*e.lastScale+e.x,e.y=e.originY-e.originY*e.lastScale+e.y,e.scroller.style[i]="200ms",e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+e.scale+")"+B,e.zoomed=!1,e.refresh(),void(e.options.onZoomEnd&&e.options.onZoomEnd.call(e,d));if(!e.moved)return q&&(e.doubleTapTimer&&e.options.zoom?(clearTimeout(e.doubleTapTimer),e.doubleTapTimer=null,e.options.onZoomStart&&e.options.onZoomStart.call(e,d),e.zoom(e.pointX,e.pointY,1==e.scale?e.options.doubleTapZoom:1),e.options.onZoomEnd&&setTimeout(function(){e.options.onZoomEnd.call(e,d)},200)):this.options.handleClick&&(e.doubleTapTimer=setTimeout(function(){for(e.doubleTapTimer=null,h=f.target;1!=h.nodeType;)h=h.parentNode;"SELECT"!=h.tagName&&"INPUT"!=h.tagName&&"TEXTAREA"!=h.tagName&&(j=b.createEvent("MouseEvents"),j.initMouseEvent("click",!0,!0,d.view,1,f.screenX,f.screenY,f.clientX,f.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null),j._fake=!0,h.dispatchEvent(j))},e.options.zoom?250:0))),e._resetPos(400),void(e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d));if(m<300&&e.options.momentum&&(k=n?e._momentum(n-e.startX,m,-e.x,e.scrollerW-e.wrapperW+e.x,e.options.bounce?e.wrapperW:0):k,l=o?e._momentum(o-e.startY,m,-e.y,e.maxScrollY<0?e.scrollerH-e.wrapperH+e.y-e.minScrollY:0,e.options.bounce?e.wrapperH:0):l,n=e.x+k.dist,o=e.y+l.dist,(e.x>0&&n>0||e.x<e.maxScrollX&&n<e.maxScrollX)&&(k={dist:0,time:0}),(e.y>e.minScrollY&&o>e.minScrollY||e.y<e.maxScrollY&&o<e.maxScrollY)&&(l={dist:0,time:0})),k.dist||l.dist)return s=c.max(c.max(k.time,l.time),10),e.options.snap&&(p=n-e.absStartX,r=o-e.absStartY,c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(t=e._snap(n,o),n=t.x,o=t.y,s=c.max(t.time,s))),e.scrollTo(c.round(n),c.round(o),s),void(e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d));if(e.options.snap)return p=n-e.absStartX,r=o-e.absStartY,c.abs(p)<e.options.snapThreshold&&c.abs(r)<e.options.snapThreshold?e.scrollTo(e.absStartX,e.absStartY,200):(t=e._snap(e.x,e.y),t.x==e.x&&t.y==e.y||e.scrollTo(t.x,t.y,t.time)),void(e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d));e._resetPos(200),e.options.onTouchEnd&&e.options.onTouchEnd.call(e,d)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y)return b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"==e&&(b.hScrollbarWrapper.style[l]="300ms"),b.hScrollbarWrapper.style.opacity="0"),void(b.vScrollbar&&b.options.hideScrollbar&&("webkit"==e&&(b.vScrollbarWrapper.style[l]="300ms"),b.vScrollbarWrapper.style.opacity="0"));b.scrollTo(c,d,a||0)},_wheel:function(a){var c,d,e,f,g,b=this;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else{if(!("detail"in a))return;c=d=3*-a.detail}if("zoom"==b.options.wheelAction)return g=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),g<b.options.zoomMin&&(g=b.options.zoomMin),g>b.options.zoomMax&&(g=b.options.zoomMax),void(g!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,g,400),setTimeout(function(){!--b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400)));e=b.x+c,f=b.y+d,e>0?e=0:e<b.maxScrollX&&(e=b.maxScrollX),f>b.minScrollY?f=b.minScrollY:f<b.maxScrollY&&(f=b.maxScrollY),b.maxScrollY<0&&b.scrollTo(e,f,0)},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind(y),b._startAni())},_startAni:function(){var f,g,h,a=this,b=a.x,d=a.y,e=Date.now();if(!a.animating){if(!a.steps.length)return void a._resetPos(400);if(f=a.steps.shift(),f.x==b&&f.y==d&&(f.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)return a._transitionTime(f.time),a._pos(f.x,f.y),a.animating=!1,void(f.time?a._bind(y):a._resetPos(0));h=function(){var j,k,i=Date.now();if(i>=e+f.time)return a._pos(f.x,f.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),void a._startAni();i=(i-e)/f.time-1,g=c.sqrt(1-i*i),j=(f.x-b)*g+b,k=(f.y-d)*g+d,a._pos(j,k),a.animating&&(a.aniTime=z(h))},h()}},_transitionTime:function(a){a+="ms",this.scroller.style[i]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[i]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[i]=a)},_momentum:function(a,b,d,e,f){var g=6e-4,h=c.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>d?(k=f/(6/(i/h*g)),d+=k,h=h*d/i,i=d):a<0&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=a<0?-1:1,j=h/g,{dist:i,time:c.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var e,f,g,h,i,j,d=this;for(g=d.pagesX.length-1,e=0,f=d.pagesX.length;e<f;e++)if(a>=d.pagesX[e]){g=e;break}for(g==d.currPageX&&g>0&&d.dirX<0&&g--,a=d.pagesX[g],i=c.abs(a-d.pagesX[d.currPageX]),i=i?c.abs(d.x-a)/i*500:0,d.currPageX=g,g=d.pagesY.length-1,e=0;e<g;e++)if(b>=d.pagesY[e]){g=e;break}return g==d.currPageY&&g>0&&d.dirY<0&&g--,b=d.pagesY[g],j=c.abs(b-d.pagesY[d.currPageY]),j=j?c.abs(d.y-b)/j*500:0,d.currPageY=g,h=c.round(c.max(i,j))||200,{x:a,y:b,time:h}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[g]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(t,a),b._unbind(u),b._unbind(v,a),b._unbind(w,a),b._unbind(x,a),b.options.hasTouch||(b._unbind("DOMMouseScroll"),b._unbind("mousewheel")),b.options.useTransition&&b._unbind(y),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var b,d,e,f,a=this,g=0,h=0;if(a.scale<a.options.zoomMin&&(a.scale=a.options.zoomMin),a.wrapperW=a.wrapper.clientWidth||1,a.wrapperH=a.wrapper.clientHeight||1,a.minScrollY=-a.options.topOffset||0,a.scrollerW=c.round(a.scroller.offsetWidth*a.scale),a.scrollerH=c.round((a.scroller.offsetHeight+a.minScrollY)*a.scale),a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH+a.minScrollY,a.dirX=0,a.dirY=0,a.options.onRefresh&&a.options.onRefresh.call(a),a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),a.hScrollbar=a.hScroll&&a.options.hScrollbar,a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH,b=a._offset(a.wrapper),a.wrapperOffsetLeft=-b.left,a.wrapperOffsetTop=-b.top,"string"==typeof a.options.snap)for(a.pagesX=[],a.pagesY=[],f=a.scroller.querySelectorAll(a.options.snap),d=0,e=f.length;d<e;d++)g=a._offset(f[d]),g.left+=a.wrapperOffsetLeft,g.top+=a.wrapperOffsetTop,a.pagesX[d]=g.left<a.maxScrollX?a.maxScrollX:g.left*a.scale,a.pagesY[d]=g.top<a.maxScrollY?a.maxScrollY:g.top*a.scale;else if(a.options.snap){for(a.pagesX=[];g>=a.maxScrollX;)a.pagesX[h]=g,g-=a.wrapperW,h++;for(a.maxScrollX%a.wrapperW&&(a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1]),g=0,h=0,a.pagesY=[];g>=a.maxScrollY;)a.pagesY[h]=g,g-=a.wrapperH,h++;a.maxScrollY%a.wrapperH&&(a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1])}a._scrollbar("h"),a._scrollbar("v"),a.zoomed||(a.scroller.style[i]="0",a._resetPos(400))},scrollTo:function(a,b,c,d){var g,h,e=this,f=a;for(e.stop(),f.length||(f=[{x:a,y:b,time:c,relative:d}]),g=0,h=f.length;g<h;g++)f[g].relative&&(f[g].x=e.x-f[g].x,f[g].y=e.y-f[g].y),e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0});e._startAni()},scrollToElement:function(a,b){var e,d=this;(a=a.nodeType?a:d.scroller.querySelector(a))&&(e=d._offset(a),e.left+=d.wrapperOffsetLeft,e.top+=d.wrapperOffsetTop,e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left,e.top=e.top>d.minScrollY?d.minScrollY:e.top<d.maxScrollY?d.maxScrollY:e.top,b=void 0===b?c.max(2*c.abs(e.left),2*c.abs(e.top)):b,d.scrollTo(e.left,e.top,b))},scrollToPage:function(a,b,c){var e,f,d=this;c=void 0===c?400:c,d.options.onScrollStart&&d.options.onScrollStart.call(d),d.options.snap?(a="next"==a?d.currPageX+1:"prev"==a?d.currPageX-1:a,b="next"==b?d.currPageY+1:"prev"==b?d.currPageY-1:b,a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a,b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b,d.currPageX=a,d.currPageY=b,e=d.pagesX[a],f=d.pagesY[b]):(e=-d.wrapperW*a,f=-d.wrapperH*b,e<d.maxScrollX&&(e=d.maxScrollX),f<d.maxScrollY&&(f=d.maxScrollY)),d.scrollTo(e,f,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(v,a),this._unbind(w,a),this._unbind(x,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(y):A(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[i]=d+"ms",e.scroller.style[g]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+B,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},d=null,"undefined"!=typeof exports?exports.iScroll=C:a.iScroll=C}(window,document);var IScroll=function(a,b,c){function h(a,c){this.wrapper="string"==typeof a?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeIndicator:!0,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!1,HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&g.hasPerspective?" translateZ(0)":"",this.options.useTransition=g.hasTransition&&this.options.useTransition,this.options.useTransform=g.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?g.ease[this.options.bounceEasing]||g.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function i(a,c,d){var e=b.createElement("div"),f=b.createElement("div");return!0===d&&(e.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator","h"==a?(!0===d&&(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),e.className="iScrollHorizontalScrollbar"):(!0===d&&(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),e.className="iScrollVerticalScrollbar"),c||(e.style.pointerEvents="none"),e.appendChild(f),e}function j(c,d){this.wrapper="string"==typeof d.el?b.querySelector(d.el):d.el,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=c,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,speedRatioX:0,speedRatioY:0};for(var e in d)this.options[e]=d[e];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(g.addEvent(this.indicator,"touchstart",this),g.addEvent(this.indicator,"MSPointerDown",this),g.addEvent(this.indicator,"mousedown",this),g.addEvent(a,"touchend",this),g.addEvent(a,"MSPointerUp",this),g.addEvent(a,"mouseup",this))}var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},g=function(){function i(a){return!1!==h&&(""===h?a:h+a.charAt(0).toUpperCase()+a.substr(1))}var d={},g=b.createElement("div").style,h=function(){for(var a=["t","webkitT","MozT","msT","OT"],c=0,d=a.length;c<d;c++)if(a[c]+"ransform"in g)return a[c].substr(0,a[c].length-1);return!1}();d.getTime=Date.now||function(){return(new Date).getTime()},d.extend=function(a,b){for(var c in b)a[c]=b[c]},d.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},d.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},d.momentum=function(a,b,d,e,f){var i,j,g=a-b,h=c.abs(g)/d,k=6e-4;return i=a+h*h/(2*k)*(g<0?-1:1),j=h/k,i<e?(i=f?e-f/2.5*(h/8):e,g=c.abs(i-a),j=g/h):i>0&&(i=f?f/2.5*(h/8):0,g=c.abs(a)+i,j=g/h),{destination:c.round(i),duration:j}};var j=i("transform");return d.extend(d,{hasTransform:!1!==j,hasPerspective:i("perspective")in g,hasTouch:"ontouchstart"in a,hasPointer:navigator.msPointerEnabled,hasTransition:i("transition")in g}),d.isAndroidBrowser=/Android/.test(a.navigator.appVersion)&&/Version\/\d/.test(a.navigator.appVersion),d.extend(d.style={},{transform:j,transitionTimingFunction:i("transitionTimingFunction"),transitionDuration:i("transitionDuration"),transformOrigin:i("transformOrigin")}),d.hasClass=function(a,b){return new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},d.addClass=function(a,b){if(!d.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},d.removeClass=function(a,b){if(d.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"")}},d.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},d.extend(d.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),d.extend(d.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){return f=.22,e=.4,0===a?0:1==a?1:e*c.pow(2,-10*a)*c.sin((a-f/4)*(2*c.PI)/f)+1}}}),d.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},d.click=function(a){var d,c=a.target;"SELECT"!=c.tagName&&"INPUT"!=c.tagName&&"TEXTAREA"!=c.tagName&&(d=b.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d._constructed=!0,c.dispatchEvent(d))},d}();return h.prototype={version:"5.0.1",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&(this._transitionTime(0),this.resetPosition(this.options.bounceTime)||this._execEvent("scrollEnd"))},_start:function(a){if(this.enabled&&(!this.initiated||g.eventType[a.type]===this.initiated)){this.options.preventDefault&&!g.isAndroidBrowser&&a.preventDefault();var d,b=a.touches?a.touches[0]:a;this.initiated=g.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.isAnimating=!1,this.startTime=g.getTime(),this.options.useTransition&&this.isInTransition&&(d=this.getComputedPosition(),this._translate(c.round(d.x),c.round(d.y)),this.isInTransition=!1),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=b.pageX,this.pointY=b.pageY,this._execEvent("scrollStart")}},_move:function(a){if(this.enabled&&g.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var h,i,j,k,b=a.touches?a.touches[0]:a,d=b.pageX-this.pointX,e=b.pageY-this.pointY,f=g.getTime();if(this.pointX=b.pageX,this.pointY=b.pageY,this.distX+=d,this.distY+=e,j=c.abs(this.distX),k=c.abs(this.distY),!(f-this.endTime>300&&j<10&&k<10)){if(this.directionLocked||this.options.freeScroll||(j>k+this.options.directionLockThreshold?this.directionLocked="h":k>=j+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);e=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);d=0}h=this.x+(this.hasHorizontalScroll?d:0),i=this.y+(this.hasVerticalScroll?e:0),(h>0||h<this.maxScrollX)&&(h=this.options.bounce?this.x+d/3:h>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+e/3:i>0?0:this.maxScrollY),this.directionX=d>0?-1:d<0?1:0,this.directionY=e>0?-1:e<0?1:0,this.moved=!0,this._translate(h,i),f-this.startTime>300&&(this.startTime=f,this.startX=this.x,this.startY=this.y)}}},_end:function(a){if(this.enabled&&g.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var d,e,f=(a.changedTouches&&a.changedTouches[0],g.getTime()-this.startTime),h=c.round(this.x),i=c.round(this.y),j=c.abs(h-this.startX),k=c.abs(i-this.startY),l=0,m="";if(this.scrollTo(h,i),this.isInTransition=0,this.initiated=0,this.endTime=g.getTime(),!this.resetPosition(this.options.bounceTime)){if(!this.moved)return this.options.tap&&g.tap(a,this.options.tap),void(this.options.click&&g.click(a));if(this._events.flick&&f<200&&j<100&&k<100)return void this._execEvent("flick");if(this.options.momentum&&f<300&&(d=this.hasHorizontalScroll?g.momentum(this.x,this.startX,f,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:h,duration:0},e=this.hasVerticalScroll?g.momentum(this.y,this.startY,f,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:i,duration:0},h=d.destination,i=e.destination,l=c.max(d.duration,e.duration),this.isInTransition=1),this.options.snap){var n=this._nearestSnap(h,i);this.currentPage=n,h=n.x,i=n.y,l=this.options.snapSpeed||c.max(c.max(c.min(j,1e3),c.min(j,1e3)),300),m=this.options.bounceEasing}if(h!=this.x||i!=this.y)return(h>0||h<this.maxScrollX||i>0||i<this.maxScrollY)&&(m=g.ease.quadratic),void this.scrollTo(h,i,l,m);this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh(),a.resetPosition()},this.options.resizePolling)},resetPosition:function(a){if(this.x<=0&&this.x>=this.maxScrollX&&this.y<=0&&this.y>=this.maxScrollY)return!1;var b=this.x,c=this.y;if(a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),this.options.snap){var d=this._nearestSnap(b,c);this.currentPage=d,b=d.x,c=d.y}return this.scrollTo(b,c,a,this.options.bounceEasing),!0},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.maxScrollX>0&&(this.maxScrollX=0),this.maxScrollY>0&&(this.maxScrollY=0),this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.endTime=0,this.wrapperOffset=g.offset(this.wrapper),this._execEvent("refresh")},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;b<c;b++)this._events[a][b].call(this)}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||g.ease.circular,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var h=g.offset(a);h.left-=this.wrapperOffset.left,h.top-=this.wrapperOffset.top,!0===d&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===e&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),h.left-=d||0,h.top-=e||0,h.left=h.left>0?0:h.left<this.maxScrollX?this.maxScrollX:h.left,h.top=h.top>0?0:h.top<this.maxScrollY?this.maxScrollY:h.top,b=c.max(2*c.abs(h.left),2*c.abs(h.top)),this.scrollTo(h.left,h.top,b,f)}},_transitionTime:function(a){a=a||0,this.scrollerStyle[g.style.transitionDuration]=a+"ms",this.indicator1&&this.indicator1.transitionTime(a),this.indicator2&&this.indicator2.transitionTime(a)},_transitionTimingFunction:function(a){this.scrollerStyle[g.style.transitionTimingFunction]=a,this.indicator1&&this.indicator1.transitionTimingFunction(a),this.indicator2&&this.indicator2.transitionTimingFunction(a)},_translate:function(a,b){this.options.useTransform?this.scrollerStyle[g.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b,this.indicator1&&this.indicator1.updatePosition(),this.indicator2&&this.indicator2.updatePosition()},_initEvents:function(b){var c=b?g.removeEvent:g.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this),g.hasPointer&&(c(this.wrapper,"MSPointerDown",this),c(d,"MSPointerMove",this),c(d,"MSPointerCancel",this),c(d,"MSPointerUp",this)),g.hasTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var c,d,b=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(b=b[g.style.transform].split(")")[0].split(", "),c=+(b[12]||b[4]),d=+(b[13]||b[5])):(c=+b.left.replace(/[^-\d]/g,""),d=+b.top.replace(/[^-\d]/g,"")),{x:c,y:d}},_initIndicators:function(){var c,d,a=this.options.interactiveScrollbars;this.options.scrollbars;this.options.scrollbars?(this.options.scrollY&&(c={el:i("v",a,this.options.scrollbars),interactive:a,defaultScrollbars:!0,resize:this.options.resizeIndicator,listenX:!1},this.wrapper.appendChild(c.el)),this.options.scrollX&&(d={el:i("h",a,this.options.scrollbars),interactive:a,defaultScrollbars:!0,resize:this.options.resizeIndicator,listenY:!1},this.wrapper.appendChild(d.el))):(c=this.options.indicators.length?this.options.indicators[0]:this.options.indicators,d=this.options.indicators[1]&&this.options.indicators[1]),c&&(this.indicator1=new j(this,c)),d&&(this.indicator2=new j(this,d)),this.on("refresh",function(){this.indicator1&&this.indicator1.refresh(),this.indicator2&&this.indicator2.refresh()}),this.on("destroy",function(){this.indicator1&&this.indicator1.destroy(),this.indicator2&&this.indicator2.destroy()})},_initWheel:function(){g.addEvent(this.wrapper,"mousewheel",this),g.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){g.removeEvent(this.wrapper,"mousewheel",this),g.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){var b,c,d,e,f=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){f._execEvent("scrollEnd")},400),a.preventDefault(),"wheelDeltaX"in a)b=a.wheelDeltaX/120,c=a.wheelDeltaY/120;else if("wheelDelta"in a)b=c=a.wheelDelta/120;else{if(!("detail"in a))return;b=c=-a.detail/3}b*=10,c*=10,this.hasVerticalScroll||(b=c),d=this.x+(this.hasHorizontalScroll?b*this.options.invertWheelDirection:0),e=this.y+(this.hasVerticalScroll?c*this.options.invertWheelDirection:0),d>0?d=0:d<this.maxScrollX&&(d=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY),this.scrollTo(d,e,0)},_initSnap:function(){this.pages=[],this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var b,e,f,g,i,l,a=0,d=0,h=0,j=this.options.snapStepX||this.wrapperWidth,k=this.options.snapStepY||this.wrapperHeight;if(!0===this.options.snap)for(f=c.round(j/2),g=c.round(k/2);h>-this.scrollerWidth;){for(this.pages[a]=[],b=0,i=0;i>-this.scrollerHeight;)this.pages[a][b]={x:c.max(h,this.maxScrollX),y:c.max(i,this.maxScrollY),width:j,height:k,cx:h-f,cy:i-g},i-=k,b++;h-=j,a++}else for(l=this.options.snap,b=l.length,e=-1;a<b;a++)(0===a||l[a].offsetLeft<l[a-1].offsetLeft)&&(d=0,e++),this.pages[d]||(this.pages[d]=[]),h=c.max(-l[a].offsetLeft,this.maxScrollX),i=c.max(-l[a].offsetTop,this.maxScrollY),f=h-c.round(l[a].offsetWidth/2),g=i-c.round(l[a].offsetHeight/2),this.pages[d][e]={x:h,y:i,width:l[a].offsetWidth,height:l[a].offsetHeight,cx:f,cy:g},d++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}),this.on("flick",function(){var a=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){var d=0,e=this.pages.length,f=0;if(c.abs(a-this.absStartX)<this.snapThresholdX&&c.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);d<e;d++)if(a>=this.pages[d][0].cx){a=this.pages[d][0].x;break}for(e=this.pages[d].length;f<e;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return d==this.currentPage.pageX&&(d+=this.directionX,d<0?d=0:d>=this.pages.length&&(d=this.pages.length-1),a=this.pages[d][0].x),f==this.currentPage.pageY&&(f+=this.directionY,f<0?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:d,pageY:f}},goToPage:function(a,b,d,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:a<0&&(a=0),b>=this.pages[0].length?b=this.pages[0].length-1:b<0&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;d=void 0===d?this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-this.x),1e3),c.min(c.abs(g-this.y),1e3)),300):d,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,d,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVericalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,c<0&&this.hasVericalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(b){var d,c={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(d in this.options.keyBindings)"string"==typeof this.options.keyBindings[d]&&(this.options.keyBindings[d]=this.options.keyBindings[d].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(d in c)this.options.keyBindings[d]=this.options.keyBindings[d]||c[d];g.addEvent(a,"keydown",this),this.on("destroy",function(){g.removeEvent(a,"keydown",this)})},_key:function(a){var j,b=this.options.snap,d=b?this.currentPage.pageX:this.x,e=b?this.currentPage.pageY:this.y,f=g.getTime(),h=this.keyTime||0,i=.25;switch(this.options.useTransition&&this.isInTransition&&(j=this.getComputedPosition(),this._translate(c.round(j.x),c.round(j.y)),this.isInTransition=!1),this.keyAcceleration=f-h<200?c.min(this.keyAcceleration+i,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?d+=b?1:this.wrapperWidth:e+=b?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?d-=b?1:this.wrapperWidth:e-=b?1:this.wrapperHeight;break;case this.options.keyBindings.end:d=b?this.pages.length-1:this.maxScrollX,e=b?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:d=0,e=0;break;case this.options.keyBindings.left:d+=b?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:e+=b?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:d-=b?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:e-=b?1:5+this.keyAcceleration>>0}if(b)return void this.goToPage(d,e);d>0?(d=0,this.keyAcceleration=0):d<this.maxScrollX&&(d=this.maxScrollX,this.keyAcceleration=0),e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollY&&(e=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(d,e,0),this.keyTime=f},_animate:function(a,b,c,e){function l(){var n,o,p,m=g.getTime();if(m>=k)return f.isAnimating=!1,f._translate(a,b),void f.resetPosition(f.options.bounceTime);m=(m-j)/c,p=e(m),n=(a-h)*p+h,o=(b-i)*p+i,f._translate(n,o),f.isAnimating&&d(l)}var f=this,h=this.x,i=this.y,j=g.getTime(),k=j+c;this.isAnimating=!0,l()},handleEvent:function(a){switch(a.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a)}}},j.prototype={handleEvent:function(a){switch(a.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(a)}},destroy:function(){this.options.interactive&&(g.removeEvent(this.indicator,"touchstart",this),g.removeEvent(this.indicator,"MSPointerDown",this),g.removeEvent(this.indicator,"mousedown",this),g.removeEvent(a,"touchmove",this),g.removeEvent(a,"MSPointerMove",this),g.removeEvent(a,"mousemove",this),g.removeEvent(a,"touchend",this),g.removeEvent(a,"MSPointerUp",this),g.removeEvent(a,"mouseup",this))},_start:function(b){var c=b.touches?b.touches[0]:b;b.preventDefault(),b.stopPropagation(),this.transitionTime(0),this.initiated=!0,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=g.getTime(),g.addEvent(a,"touchmove",this),g.addEvent(a,"MSPointerMove",this),g.addEvent(a,"mousemove",this)},_move:function(a){var c,d,e,f,b=a.touches?a.touches[0]:a;g.getTime();c=b.pageX-this.lastPointX,this.lastPointX=b.pageX,d=b.pageY-this.lastPointY,this.lastPointY=b.pageY,e=this.x+c,f=this.y+d,this._pos(e,f),a.preventDefault(),a.stopPropagation()},_end:function(b){this.initiated&&(this.initiated=!1,b.preventDefault(),b.stopPropagation(),g.removeEvent(a,"touchmove",this),g.removeEvent(a,"MSPointerMove",this),g.removeEvent(a,"mousemove",this))},transitionTime:function(a){a=a||0,this.indicatorStyle[g.style.transitionDuration]=a+"ms"},transitionTimingFunction:function(a){this.indicatorStyle[g.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime(0),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(g.addClass(this.wrapper,"iScrollBothScrollbars"),g.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(g.removeClass(this.wrapper,"iScrollBothScrollbars"),g.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=c.max(c.round(this.wrapperWidth*this.wrapperWidth/this.scroller.scrollerWidth),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=c.max(c.round(this.wrapperHeight*this.wrapperHeight/this.scroller.scrollerHeight),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var a=c.round(this.sizeRatioX*this.scroller.x)||0,b=c.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(a<0?a=0:a>this.maxPosX&&(a=this.maxPosX),b<0?b=0:b>this.maxPosY&&(b=this.maxPosY)),this.x=a,this.y=b,this.scroller.options.useTransform?this.indicatorStyle[g.style.transform]="translate("+a+"px,"+b+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=a+"px",this.indicatorStyle.top=b+"px")},_pos:function(a,b){a<0?a=0:a>this.maxPosX&&(a=this.maxPosX),b<0?b=0:b>this.maxPosY&&(b=this.maxPosY),this.scroller.scrollTo(c.round(a/this.sizeRatioX),c.round(b/this.sizeRatioY))}},h.ease=g.ease,h}(window,document,Math);!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(){return b.apply(a,arguments)}):"object"==typeof module&&module.exports?module.exports=b.call(a,require("jquery")):b.call(a,a.jQuery)}("object"==typeof global?global:this,function(a){function w(a){return a.match(/\D+$/)}function x(b,c,d,e){if("d"!=d&&F(b)){var f=h.exec(c),g="auto"===b.css(d)?0:b.css(d),i="string"==typeof g?E(g):g,k=("string"==typeof c&&E(c),!0===e?0:i),l=b.is(":hidden"),m=b.translation();if("left"==d&&(k=parseInt(i,10)+m.x),"right"==d&&(k=parseInt(i,10)+m.x),"top"==d&&(k=parseInt(i,10)+m.y),"bottom"==d&&(k=parseInt(i,10)+m.y),f||"show"!=c?f||"hide"!=c||(k=0):(k=1,l&&(elem=b[0],elem.style&&(display=elem.style.display,a._data(elem,"olddisplay")||"none"!==display||(display=elem.style.display=""),""===display&&"none"===a.css(elem,"display")&&a._data(elem,"olddisplay",D(elem.tagName)),""!==display&&"none"!==display||(elem.style.display=a._data(elem,"olddisplay")||"")),b.css("opacity",0))),f){var n=parseFloat(f[2]);return f[1]&&(n=("-="===f[1]?-1:1)*n+parseInt(k,10)),f[3]&&"px"!=f[3]&&(n+=f[3]),n}return k}}function y(a,b,c){return!0===c||!0===v&&!1!==c&&u?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px,"+b+"px)"}function z(b,c,d,f,g,h,i,k){var m=b.data(l),n=m&&!C(m)?m:a.extend(!0,{},j),o=g;if(a.inArray(c,e)>-1){var q=n.meta,r=E(b.css(c))||0,s=c+"_o";o=g-r,q[c]=o,q[s]="auto"==b.css(c)?0+o:r+o||0,n.meta=q,i&&0===o&&(o=0-q[s],q[c]=o,q[s]=0)}return b.data(l,A(b,n,c,d,f,o,h,i,k))}function A(a,b,c,d,e,g,h,i,j){var k=!1,l=!0===h&&!0===i;b=b||{},b.original||(b.original={},k=!0),b.properties=b.properties||{},b.secondary=b.secondary||{};for(var m=b.meta,n=b.original,o=b.properties,p=b.secondary,q=f.length-1;q>=0;q--){var r=f[q]+"transition-property",s=f[q]+"transition-duration",t=f[q]+"transition-timing-function";c=l?f[q]+"transform":c,k&&(n[r]=a.css(r)||"",n[s]=a.css(s)||"",n[t]=a.css(t)||""),p[c]=l?y(m.left,m.top,j):g,o[r]=(o[r]?o[r]+",":"")+c,o[s]=(o[s]?o[s]+",":"")+d+"ms",o[t]=(o[t]?o[t]+",":"")+e}return b}function B(a){for(var b in a)if(!("width"!=b&&"height"!=b||"show"!=a[b]&&"hide"!=a[b]&&"toggle"!=a[b]))return!0;return!1}function C(a){for(var b in a)return!1;return!0}function D(a){a=a.toUpperCase();var b={LI:"list-item",TR:"table-row",TD:"table-cell",TH:"table-cell",CAPTION:"table-caption",COL:"table-column",COLGROUP:"table-column-group",TFOOT:"table-footer-group",THEAD:"table-header-group",TBODY:"table-row-group"};return"string"==typeof b[a]?b[a]:"block"}function E(a){return parseFloat(a.replace(w(a),""))}function F(a){var b=!0;return a.each(function(a,c){return b=b&&c.ownerDocument}),b}function G(b,c,e){if(!F(e))return!1;var f=a.inArray(b,d)>-1;return"width"!=b&&"height"!=b&&"opacity"!=b||parseFloat(c)!==parseFloat(e.css(b))||(f=!1),f}var b=a.fn.animate,c=a.fn.stop,d=["top","right","bottom","left","opacity","height","width"],e=["top","right","bottom","left"],f=["-webkit-","-moz-","-o-",""],g=["avoidTransforms","useTranslate3d","leaveTransforms"],h=/^([+-]=)?([\d+-.]+)(.*)$/,i=/([A-Z])/g,j={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},k="px",l="jQe",m="cubic-bezier(",n=")",o=null,p=!1,q=document.body||document.documentElement,r=q.style,s="webkitTransitionEnd oTransitionEnd transitionend",t=void 0!==r.WebkitTransition||void 0!==r.MozTransition||void 0!==r.OTransition||void 0!==r.transition,u="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,v=u;a.expr&&a.expr.filters&&(o=a.expr.filters.animated,a.expr.filters.animated=function(b){return!(!a(b).data("events")||!a(b).data("events")[s])||o.call(this,b)}),a.extend({toggle3DByDefault:function(){return v=!v},toggleDisabledByDefault:function(){return p=!p},setDisabledByDefault:function(a){return p=a}}),a.fn.translation=function(){if(!this[0])return null;var a=this[0],b=window.getComputedStyle(a,null),c={x:0,y:0};if(b)for(var d=f.length-1;d>=0;d--){var e=b.getPropertyValue(f[d]+"transform");if(e&&/matrix/i.test(e)){var g=e.replace(/^matrix\(/i,"").split(/, |\)$/g);c={x:parseInt(g[4],10),y:parseInt(g[5],10)};break}}return c},"/"==window.location.pathname||"/discover/"==window.location.pathname||(a.fn.animate=function(c,d,h,i){c=c||{};var j=!(void 0!==c.bottom||void 0!==c.right),o=a.speed(d,h,i),q=0,r=function(){0===--q&&"function"==typeof o.complete&&o.complete.apply(this,arguments)};return!0===(void 0!==c.avoidCSSTransitions?c.avoidCSSTransitions:p)||!t||C(c)||B(c)||o.duration<=0||o.step?b.apply(this,arguments):this[!0===o.queue?"queue":"each"](function(){var d=a(this),h=a.extend({},o),i=function(b){var g=d.data(l)||{original:{}},h={};if(2==b.eventPhase){if(!0!==c.leaveTransforms){for(var i=f.length-1;i>=0;i--)h[f[i]+"transform"]="";if(j&&void 0!==g.meta)for(var n,m=0;n=e[m];++m){var o=g.meta[n+"_o"];void 0!==o&&(h[n]=o+k,a(this).css(n,h[n]))}}d.unbind(s).css(g.original).css(h).data(l,null),"hide"===c.opacity&&(elem=d[0],elem.style&&(display=a.css(elem,"display"),"none"===display||a._data(elem,"olddisplay")||a._data(elem,"olddisplay",display),elem.style.display="none"),d.css("opacity","")),r.call(this)}},p={bounce:m+"0.0, 0.35, .5, 1.3"+n,linear:"linear",swing:"ease-in-out",easeInQuad:m+"0.550, 0.085, 0.680, 0.530"+n,easeInCubic:m+"0.550, 0.055, 0.675, 0.190"+n,easeInQuart:m+"0.895, 0.030, 0.685, 0.220"+n,easeInQuint:m+"0.755, 0.050, 0.855, 0.060"+n,easeInSine:m+"0.470, 0.000, 0.745, 0.715"+n,easeInExpo:m+"0.950, 0.050, 0.795, 0.035"+n,easeInCirc:m+"0.600, 0.040, 0.980, 0.335"+n,easeInBack:m+"0.600, -0.280, 0.735, 0.045"+n,easeOutQuad:m+"0.250, 0.460, 0.450, 0.940"+n,easeOutCubic:m+"0.215, 0.610, 0.355, 1.000"+n,easeOutQuart:m+"0.165, 0.840, 0.440, 1.000"+n,easeOutQuint:m+"0.230, 1.000, 0.320, 1.000"+n,easeOutSine:m+"0.390, 0.575, 0.565, 1.000"+n,easeOutExpo:m+"0.190, 1.000, 0.220, 1.000"+n,easeOutCirc:m+"0.075, 0.820, 0.165, 1.000"+n,easeOutBack:m+"0.175, 0.885, 0.320, 1.275"+n,easeInOutQuad:m+"0.455, 0.030, 0.515, 0.955"+n,easeInOutCubic:m+"0.645, 0.045, 0.355, 1.000"+n,easeInOutQuart:m+"0.770, 0.000, 0.175, 1.000"+n,easeInOutQuint:m+"0.860, 0.000, 0.070, 1.000"+n,easeInOutSine:m+"0.445, 0.050, 0.550, 0.950"+n,easeInOutExpo:m+"1.000, 0.000, 0.000, 1.000"+n,easeInOutCirc:m+"0.785, 0.135, 0.150, 0.860"+n,easeInOutBack:m+"0.680, -0.550, 0.265, 1.550"+n},t={},u=p[h.easing||"swing"]?p[h.easing||"swing"]:h.easing||"swing";for(var v in c)if(-1===a.inArray(v,g)){var w=a.inArray(v,e)>-1,y=x(d,c[v],v,w&&!0!==c.avoidTransforms);G(v,y,d)?z(d,v,h.duration,u,y,w&&!0!==c.avoidTransforms,j,c.useTranslate3d):t[v]=c[v]}d.unbind(s);var A=d.data(l);if(!A||C(A)||C(A.secondary))h.queue=!1;else{q++,d.css(A.properties);var B=A.secondary;setTimeout(function(){d.bind(s,i).css(B)})}return C(t)||(q++,b.apply(d,[t,{duration:h.duration,easing:a.easing[h.easing]?h.easing:a.easing.swing?"swing":"linear",complete:r,queue:h.queue}])),!0})}),a.fn.animate.defaults={},a.fn.stop=function(b,d,e){return t?(b&&this.queue([]),this.each(function(){var g=a(this),h=g.data(l);if(h&&!C(h)){var j,m={};if(d){if(m=h.secondary,!e&&void 0!==typeof h.meta.left_o||void 0!==typeof h.meta.top_o)for(m.left=void 0!==typeof h.meta.left_o?h.meta.left_o:"auto",m.top=void 0!==typeof h.meta.top_o?h.meta.top_o:"auto",j=f.length-1;j>=0;j--)m[f[j]+"transform"]=""}else if(!C(h.secondary)){var n=window.getComputedStyle(g[0],null);if(n)for(var o in h.secondary)if(h.secondary.hasOwnProperty(o)&&(o=o.replace(i,"-$1").toLowerCase(),m[o]=n.getPropertyValue(o),!e&&/matrix/i.test(m[o]))){var p=m[o].replace(/^matrix\(/i,"").split(/, |\)$/g);for(m.left=parseFloat(p[4])+parseFloat(g.css("left"))+k||"auto",m.top=parseFloat(p[5])+parseFloat(g.css("top"))+k||"auto",j=f.length-1;j>=0;j--)m[f[j]+"transform"]=""}}g.unbind(s),g.css(h.original).css(m).data(l,null)}else c.apply(g,[b,d])}),this):c.apply(this,[b,d])}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function c(a){return e.raw?a:decodeURIComponent(a.replace(b," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),a=c(a);try{return e.json?JSON.parse(a):a}catch(a){}}var b=/\+/g,e=a.cookie=function(b,f,g){if(void 0!==f){if(g=a.extend({},e.defaults,g),"number"==typeof g.expires){var h=g.expires,i=g.expires=new Date;i.setDate(i.getDate()+h)}return f=e.json?JSON.stringify(f):String(f),document.cookie=[e.raw?b:encodeURIComponent(b),"=",e.raw?f:encodeURIComponent(f),g.expires?"; expires="+g.expires.toUTCString():"",g.path?"; path="+g.path:"",g.domain?"; domain="+g.domain:"",g.secure?"; secure":""].join("")}for(var j=document.cookie.split("; "),k=b?void 0:{},l=0,m=j.length;l<m;l++){var n=j[l].split("="),o=c(n.shift()),p=n.join("=");if(b&&b===o){k=d(p);break}b||(k[o]=d(p))}return k};e.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!0)}}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a,a.document,a.Math)}):"undefined"!=typeof exports?module.exports=b(require("jquery"),a,a.document,a.Math):b(jQuery,a,a.document,a.Math)}("undefined"!=typeof window?window:this,function(a,b,c,d,e){"use strict";var ha,f="fullpage-wrapper",g="."+f,h="fp-scrollable",i="."+h,j=".slimScrollBar",k=".slimScrollRail",l="fp-responsive",m="fp-notransition",n="fp-destroyed",o="fp-enabled",p="fp-viewing",q="active",r="."+q,s="fp-completely",t="."+s,u=".section",v="fp-section",w="."+v,x=w+r,y=w+":first",z=w+":last",A="fp-tableCell",B="."+A,C="fp-auto-height",E="fp-normal-scroll",G="fp-nav",H="#"+G,I="fp-tooltip",J="."+I,K="fp-show-active",L=".slide",M="fp-slide",N="."+M,O=N+r,P="fp-slides",Q="."+P,R="fp-slidesContainer",S="."+R,T="fp-table",U="fp-slidesNav",V="."+U,W=V+" a",X="fp-controlArrow",Y="."+X,Z="fp-prev",$="."+Z,_=X+" "+Z,aa=Y+$,ba="fp-next",ca="."+ba,da=X+" "+ba,ea=Y+ca,fa=a(b),ga=a(c);a.fn.fullpage=function(h){function xa(){h.css3&&(h.css3=Zb()),h.scrollBar=h.scrollBar||h.hybrid,za(),Aa(),k.setAllowScrolling(!0),k.setAutoScrolling(h.autoScrolling,"internal");var b=a(x).find(O);b.length&&(0!==a(x).index(w)||0===a(x).index(w)&&0!==b.index())&&gc(b),Db(),Yb(),fa.on("load",function(){mb()})}function ya(){fa.on("scroll",La).on("hashchange",nb).blur(ub).resize(Cb),ga.keydown(ob).keyup(qb).on("click touchstart",H+" a",vb).on("click touchstart",W,wb).on("click",J,pb),a(w).on("click touchstart",Y,tb),h.normalScrollElements&&(ga.on("mouseenter",h.normalScrollElements,function(){k.setMouseWheelScrolling(!1)}),ga.on("mouseleave",h.normalScrollElements,function(){k.setMouseWheelScrolling(!0)}))}function za(){h.anchors.length||(h.anchors=a(h.sectionSelector+"[data-anchor]").map(function(){return a(this).data("anchor").toString()}).get()),h.navigationTooltips.length||(h.navigationTooltips=a(h.sectionSelector+"[data-tooltip]").map(function(){return a(this).data("tooltip").toString()}).get())}function Aa(){$.css({height:"100%",position:"relative"}),$.addClass(f),a("html").addClass(o),ba=fa.height(),$.removeClass(n),Ea(),a(w).each(function(b){var c=a(this),d=c.find(N),e=d.length;Ca(c,b),Da(c,b),e>0?Ba(c,d,e):h.verticalCentered&&Nb(c)}),h.fixedElements&&h.css3&&a(h.fixedElements).appendTo(j),h.navigation&&Ga(),h.scrollOverflow?("complete"===c.readyState&&Ha(),fa.on("load",Ha)):Ia()}function Ba(b,c,d){var e=100*d,f=100/d;c.wrapAll('<div class="'+R+'" />'),c.parent().wrap('<div class="'+P+'" />'),b.find(S).css("width",e+"%"),d>1&&(h.controlArrows&&Fa(b),h.slidesNavigation&&Ub(b,d)),c.each(function(b){a(this).css("width",f+"%"),h.verticalCentered&&Nb(a(this))});var g=b.find(O);g.length&&(0!==a(x).index(w)||0===a(x).index(w)&&0!==g.index())?gc(g):c.eq(0).addClass(q)}function Ca(b,c){c||0!==a(x).length||b.addClass(q),b.css("height",ba+"px"),h.paddingTop&&b.css("padding-top",h.paddingTop),h.paddingBottom&&b.css("padding-bottom",h.paddingBottom),void 0!==h.sectionsColor[c]&&b.css("background-color",h.sectionsColor[c]),void 0!==h.anchors[c]&&b.attr("data-anchor",h.anchors[c])}function Da(b,c){void 0!==h.anchors[c]&&b.hasClass(q)&&Jb(h.anchors[c],c),h.menu&&h.css3&&a(h.menu).closest(g).length&&a(h.menu).appendTo(j)}function Ea(){a(h.sectionSelector).each(function(){a(this).addClass(v)}),a(h.slideSelector).each(function(){a(this).addClass(M)})}function Fa(a){a.find(Q).after('<div class="'+_+'"></div><div class="'+da+'"></div>'),"#fff"!=h.controlArrowColor&&(a.find(ea).css("border-color","transparent transparent transparent "+h.controlArrowColor),a.find(aa).css("border-color","transparent "+h.controlArrowColor+" transparent transparent")),h.loopHorizontal||a.find(aa).hide()}function Ga(){j.append('<div id="'+G+'"><div class="pagInner"></div></div>');var b=a(H);b.addClass(function(){return h.showActiveTooltip?K+" "+h.navigationPosition:h.navigationPosition});for(var c=0;c<a(w).length;c++){var d="";h.anchors.length&&(d=h.anchors[c]);var e='<div class="pagItem"><a href="#'+d+'"></a>',f=h.navigationTooltips[c];void 0!==f&&""!==f&&(e+='<div class="'+I+" "+h.navigationPosition+'">'+f+"</div>"),e+="</div>",b.find(".pagInner").append(e)}a(H).css("margin-top","-"+a(H).height()/2+"px"),a(H).find(".pagItem").eq(a(x).index(w)).find("a").addClass(q)}function Ha(){a(w).each(function(){var b=a(this).find(N);b.length?b.each(function(){Mb(a(this))}):Mb(a(this))}),Ia()}function Ia(){var b=a(x);b.addClass(s),h.scrollOverflowHandler.afterRender&&h.scrollOverflowHandler.afterRender(b),ib(b),jb(b),a.isFunction(h.afterLoad)&&h.afterLoad.call(b,b.data("anchor"),b.index(w)+1),a.isFunction(h.afterRender)&&h.afterRender.call($)}function La(){var b;if(!h.autoScrolling||h.scrollBar){for(var d=fa.scrollTop(),e=Na(d),f=0,g=d+fa.height()/2,i=c.querySelectorAll(w),j=0;j<i.length;++j){i[j].offsetTop<=g&&(f=j)}if(Ma(e)&&(a(x).hasClass(s)||a(x).addClass(s).siblings().removeClass(s)),b=a(i).eq(f),!b.hasClass(q)){Ja=!0;var l=a(x),m=l.index(w)+1,n=Kb(b),o=b.data("anchor"),p=b.index(w)+1,r=b.find(O);if(r.length)var t=r.data("anchor"),u=r.index();la&&(b.addClass(q).siblings().removeClass(q),a.isFunction(h.onLeave)&&h.onLeave.call(l,m,p,n),a.isFunction(h.afterLoad)&&h.afterLoad.call(b,o,p),ib(b),Jb(o,p-1),h.anchors.length&&(ja=o,Vb(u,t,o,p))),clearTimeout(ua),ua=setTimeout(function(){Ja=!1},100)}h.fitToSection&&(clearTimeout(va),va=setTimeout(function(){la&&h.fitToSection&&(a(x).is(b)&&(ca=!0),cb(a(x)),ca=!1)},h.fitToSectionDelay))}}function Ma(b){var c=a(x).position().top,d=c+fa.height();return"up"==b?d>=fa.scrollTop()+fa.height():c<=fa.scrollTop()}function Na(a){var b=a>Ka?"down":"up";return Ka=a,b}function Oa(a,b){if(pa.m[a]){var c,d;if("down"==a?(c="bottom",d=k.moveSectionDown):(c="top",d=k.moveSectionUp),b.length>0){if(!h.scrollOverflowHandler.isScrolled(c,b))return!0;d()}else d()}}function Ta(b){var c=b.originalEvent;if(!Ua(b.target)&&Va(c)){h.autoScrolling&&b.preventDefault();var e=a(x),f=h.scrollOverflowHandler.scrollable(e);if(la&&!D){var g=fc(c);Ra=g.y,Sa=g.x,e.find(Q).length&&d.abs(Qa-Sa)>d.abs(Pa-Ra)?d.abs(Qa-Sa)>fa.outerWidth()/100*h.touchSensitivity&&(Qa>Sa?pa.m.right&&k.moveSlideRight():pa.m.left&&k.moveSlideLeft()):h.autoScrolling&&d.abs(Pa-Ra)>fa.height()/100*h.touchSensitivity&&(Pa>Ra?Oa("down",f):Ra>Pa&&Oa("up",f))}}}function Ua(b,c){c=c||0;var d=a(b).parent();return!!(c<h.normalScrollElementTouchThreshold&&d.is(h.normalScrollElements))||c!=h.normalScrollElementTouchThreshold&&Ua(d,++c)}function Va(a){return void 0===a.pointerType||"mouse"!=a.pointerType}function Wa(a){var b=a.originalEvent;if(h.fitToSection&&i.stop(),Va(b)){var c=fc(b);Pa=c.y,Qa=c.x}}function Xa(a,b){for(var c=0,e=a.slice(d.max(a.length-b,1)),f=0;f<e.length;f++)c+=e[f];return d.ceil(c/b)}function Za(c){var e=(new Date).getTime(),f=a(t).hasClass(E);if(h.autoScrolling&&!oa&&!f){c=c||b.event;var g=c.wheelDelta||-c.deltaY||-c.detail,j=d.max(-1,d.min(1,g)),k=void 0!==c.wheelDeltaX||void 0!==c.deltaX,l=d.abs(c.wheelDeltaX)<d.abs(c.wheelDelta)||d.abs(c.deltaX)<d.abs(c.deltaY)||!k;ma.length>149&&ma.shift(),ma.push(d.abs(g)),h.scrollBar&&(c.preventDefault?c.preventDefault():c.returnValue=!1);var m=a(x),n=h.scrollOverflowHandler.scrollable(m),o=e-Ya;if(Ya=e,o>200&&(ma=[]),la){Xa(ma,10)>=Xa(ma,70)&&l&&(j<0?Oa("down",n):Oa("up",n))}return!1}h.fitToSection&&i.stop()}function $a(b,c){var d=void 0===c?a(x):c,e=d.find(Q),f=e.find(N).length;if(!(!e.length||D||f<2)){var g=e.find(O),i=null;if(i="prev"===b?g.prev(N):g.next(N),!i.length){if(!h.loopHorizontal)return;i="prev"===b?g.siblings(":last"):g.siblings(":first")}D=!0,Ab(e,i)}}function _a(){a(O).each(function(){gc(a(this),"internal")})}function bb(a){var b=a.position(),c=b.top,d=b.top>ab,e=c-ba+a.outerHeight();return a.outerHeight()>ba?d||(c=e):(d||ca&&a.is(":last-child"))&&(c=e),ab=c,c}function cb(b,c,d){if(void 0!==b){var e=bb(b),f={element:b,callback:c,isMovementUp:d,dtop:e,yMovement:Kb(b),anchorLink:b.data("anchor"),sectionIndex:b.index(w),activeSlide:b.find(O),activeSection:a(x),leavingSection:a(x).index(w)+1,localIsResizing:ca};if(!(f.activeSection.is(b)&&!ca||h.scrollBar&&fa.scrollTop()===f.dtop&&!b.hasClass(C))){if(f.activeSlide.length)var g=f.activeSlide.data("anchor"),i=f.activeSlide.index();h.autoScrolling&&h.continuousVertical&&void 0!==f.isMovementUp&&(!f.isMovementUp&&"up"==f.yMovement||f.isMovementUp&&"down"==f.yMovement)&&(f=fb(f)),a.isFunction(h.onLeave)&&!f.localIsResizing&&!1===h.onLeave.call(f.activeSection,f.leavingSection,f.sectionIndex+1,f.yMovement)||(kb(f.activeSection),b.addClass(q).siblings().removeClass(q),ib(b),la=!1,Vb(i,g,f.anchorLink,f.sectionIndex),db(f),ja=f.anchorLink,Jb(f.anchorLink,f.sectionIndex))}}}function db(b){if(h.css3&&h.autoScrolling&&!h.scrollBar){Pb("translate3d(0px, -"+b.dtop+"px, 0px)",!0),h.scrollingSpeed?sa=setTimeout(function(){hb(b)},h.scrollingSpeed):hb(b)}else{var d=eb(b);a(d.element).animate(d.options,h.scrollingSpeed,h.easing).promise().done(function(){h.scrollBar?setTimeout(function(){hb(b)},30):hb(b)})}}function eb(a){var b={};return h.autoScrolling&&!h.scrollBar?(b.options={top:-a.dtop},b.element=g):(b.options={scrollTop:a.dtop},b.element="html, body"),b}function fb(b){return b.isMovementUp?a(x).before(b.activeSection.nextAll(w)):a(x).after(b.activeSection.prevAll(w).get().reverse()),hc(a(x).position().top),_a(),b.wrapAroundElements=b.activeSection,b.dtop=b.element.position().top,b.yMovement=Kb(b.element),b}function gb(b){b.wrapAroundElements&&b.wrapAroundElements.length&&(b.isMovementUp?a(y).before(b.wrapAroundElements):a(z).after(b.wrapAroundElements),hc(a(x).position().top),_a())}function hb(b){gb(b),b.element.find(".fp-scrollable").mouseover(),a.isFunction(h.afterLoad)&&!b.localIsResizing&&h.afterLoad.call(b.element,b.anchorLink,b.sectionIndex+1),jb(b.element),b.element.addClass(s).siblings().removeClass(s),la=!0,a.isFunction(b.callback)&&b.callback.call(this)}function ib(b){var b=lb(b);b.find("img[data-src], source[data-src], audio[data-src]").each(function(){a(this).attr("src",a(this).data("src")),a(this).removeAttr("data-src"),a(this).is("source")&&a(this).closest("video").get(0).load()})}function jb(b){var b=lb(b);b.find("video, audio").each(function(){var b=a(this).get(0);b.hasAttribute("autoplay")&&"function"==typeof b.play&&b.play()})}function kb(b){var b=lb(b);b.find("video, audio").each(function(){var b=a(this).get(0);b.hasAttribute("data-ignore")||"function"!=typeof b.pause||b.pause()})}function lb(b){var c=b.find(O);return c.length&&(b=a(c)),b}function mb(){var a=b.location.hash.replace("#","").split("/"),c=a[0],d=a[1];c&&(h.animateAnchor?Sb(c,d):k.silentMoveTo(c,d))}function nb(){if(!Ja&&!h.lockAnchors){var a=b.location.hash.replace("#","").split("/"),c=a[0],d=a[1],e=void 0===ja,f=void 0===ja&&void 0===d&&!D;c.length&&(c&&c!==ja&&!e||f||!D&&ka!=d)&&Sb(c,d)}}function ob(b){clearTimeout(wa);var c=a(":focus");if(!c.is("textarea")&&!c.is("input")&&!c.is("select")&&"true"!==c.attr("contentEditable")&&""!==c.attr("contentEditable")&&h.keyboardScrolling&&h.autoScrolling){var d=b.which,e=[40,38,32,33,34];a.inArray(d,e)>-1&&b.preventDefault(),oa=b.ctrlKey,wa=setTimeout(function(){xb(b)},150)}}function pb(){a(this).prev().trigger("click")}function qb(a){ia&&(oa=a.ctrlKey)}function rb(a){2==a.which&&(yb=a.pageY,$.on("mousemove",zb))}function sb(a){2==a.which&&$.off("mousemove")}function tb(){var b=a(this).closest(w);a(this).hasClass(Z)?pa.m.left&&k.moveSlideLeft(b):pa.m.right&&k.moveSlideRight(b)}function ub(){ia=!1,oa=!1}function vb(b){b.preventDefault();var c=a(this).parent().index();cb(a(w).eq(c))}function wb(b){b.preventDefault();var c=a(this).closest(w).find(Q);Ab(c,c.find(N).eq(a(this).closest("li").index()))}function xb(b){var c=b.shiftKey;switch(b.which){case 38:case 33:pa.k.up&&k.moveSectionUp();break;case 32:if(c&&pa.k.up){k.moveSectionUp();break}case 40:case 34:pa.k.down&&k.moveSectionDown();break;case 36:pa.k.up&&k.moveTo(1);break;case 35:pa.k.down&&k.moveTo(a(w).length);break;case 37:pa.k.left&&k.moveSlideLeft();break;case 39:pa.k.right&&k.moveSlideRight();break;default:return}}function zb(a){la&&(a.pageY<yb&&pa.m.up?k.moveSectionUp():a.pageY>yb&&pa.m.down&&k.moveSectionDown()),yb=a.pageY}function Ab(b,c){var e=c.position(),f=c.index(),g=b.closest(w),i=g.index(w),j=g.data("anchor"),k=g.find(V),l=Xb(c),m=g.find(O),n=ca;if(h.onSlideLeave){var o=m.index(),p=Lb(o,f);if(!n&&"none"!==p&&a.isFunction(h.onSlideLeave)&&!1===h.onSlideLeave.call(m,j,i+1,o,p,f))return void(D=!1)}kb(m),c.addClass(q).siblings().removeClass(q),n||ib(c),!h.loopHorizontal&&h.controlArrows&&(g.find(aa).toggle(0!==f),g.find(ea).toggle(!c.is(":last-child"))),g.hasClass(q)&&Vb(f,l,j,i);var s=function(){n||a.isFunction(h.afterSlideLoad)&&h.afterSlideLoad.call(c,j,i+1,l,f),jb(c),D=!1};if(h.css3){var t="translate3d(-"+d.round(e.left)+"px, 0px, 0px)";Eb(b.find(S),h.scrollingSpeed>0).css(ic(t)),ta=setTimeout(function(){s()},h.scrollingSpeed,h.easing)}else b.animate({scrollLeft:d.round(e.left)},h.scrollingSpeed,h.easing,function(){s()});k.find(r).removeClass(q),k.find(".pagItem").eq(f).find("a").addClass(q)}function Cb(){if(Db(),F){var b=a(c.activeElement);if(!b.is("textarea")&&!b.is("input")&&!b.is("select")){var e=fa.height();d.abs(e-Bb)>20*d.max(Bb,e)/100&&(k.reBuild(!0),Bb=e)}}else clearTimeout(ra),ra=setTimeout(function(){k.reBuild(!0)},350)}function Db(){var a=h.responsive||h.responsiveWidth,b=h.responsiveHeight,c=a&&fa.outerWidth()<a,d=b&&fa.height()<b;a&&b?k.setResponsive(c||d):a?k.setResponsive(c):b&&k.setResponsive(d)}function Eb(a){var b="all "+h.scrollingSpeed+"ms "+h.easingcss3;return a.removeClass(m),a.css({"-webkit-transition":b,transition:b})}function Fb(a){return a.addClass(m)}function Gb(a,b){var c=825,e=900;if(a<c||b<e){var f=100*a/c,g=100*b/e,h=d.min(f,g),i=h.toFixed(2);j.css("font-size",i+"%")}else j.css("font-size","100%")}function Hb(b,c){h.navigation&&(a(H).find(r).removeClass(q),b?a(H).find('a[href="#'+b+'"]').addClass(q):a(H).find(".pagItem").eq(c).find("a").addClass(q))}function Ib(b){h.menu&&(a(h.menu).find(r).removeClass(q),a(h.menu).find('[data-menuanchor="'+b+'"]').addClass(q))}function Jb(a,b){Ib(a),Hb(a,b)}function Kb(b){var c=a(x).index(w),d=b.index(w);return c==d?"none":c>d?"up":"down"}function Lb(a,b){return a==b?"none":a>b?"left":"right"}function Mb(a){a.css("overflow","hidden");var f,b=h.scrollOverflowHandler,c=b.wrapContent(),d=a.closest(w),e=b.scrollable(a);e.length?f=b.scrollHeight(a):(f=a.get(0).scrollHeight,h.verticalCentered&&(f=a.find(B).get(0).scrollHeight));var g=ba-parseInt(d.css("padding-bottom"))-parseInt(d.css("padding-top"));f>g?e.length?b.update(a,g):(h.verticalCentered?a.find(B).wrapInner(c):a.wrapInner(c),b.create(a,g)):b.remove(a),a.css("overflow","")}function Nb(a){a.addClass(T).wrapInner('<div class="'+A+'" style="height:'+Ob(a)+'px;" />')}function Ob(a){var b=ba;if(h.paddingTop||h.paddingBottom){var c=a;c.hasClass(v)||(c=a.closest(w));var d=parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom"));b=ba-d}return b}function Pb(a,b){b?Eb($):Fb($),$.css(ic(a)),setTimeout(function(){$.removeClass(m)},10)}function Qb(b){var c=$.find(w+'[data-anchor="'+b+'"]');return c.length||(c=a(w).eq(b-1)),c}function Rb(a,b){var c=b.find(Q),d=c.find(N+'[data-anchor="'+a+'"]');return d.length||(d=c.find(N).eq(a)),d}function Sb(a,b){var c=Qb(a);void 0===b&&(b=0),a===ja||c.hasClass(q)?Tb(c,b):cb(c,function(){Tb(c,b)})}function Tb(a,b){if(void 0!==b){var c=a.find(Q),d=Rb(b,a);d.length&&Ab(c,d)}}function Ub(a,b){a.append('<div class="'+U+'"><ul></ul></div>');var c=a.find(V);c.addClass(h.slidesNavPosition);for(var d=0;d<b;d++)c.find("ul").append('<li><a href="#"><span></span></a></li>');c.css("margin-left","-"+c.width()/2+"px"),c.find(".pagItem").first().find("a").addClass(q)}function Vb(a,b,c,d){var e="";h.anchors.length&&!h.lockAnchors&&(a?(void 0!==c&&(e=c),void 0===b&&(b=a),ka=b,Wb(e+"/"+b)):void 0!==a?(ka=b,Wb(c)):Wb(c)),Yb()}function Wb(a){if(h.recordHistory)location.hash=a;else if(F||X)b.history.replaceState(e,e,"#"+a);else{var c=b.location.href.split("#")[0];b.location.replace(c+"#"+a)}}function Xb(a){var b=a.data("anchor"),c=a.index();return void 0===b&&(b=c),b}function Yb(){var b=a(x),c=b.find(O),d=Xb(b),e=Xb(c),g=(b.index(w),String(d));c.length&&(g=g+"-"+e),g=g.replace("/","-").replace("#","");var h=new RegExp("\\b\\s?"+p+"-[^\\s]+\\b","g");j[0].className=j[0].className.replace(h,""),j.addClass(p+"-"+g)}function Zb(){var d,a=c.createElement("p"),f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};c.body.insertBefore(a,null);for(var g in f)a.style[g]!==e&&(a.style[g]="translate3d(1px,1px,1px)",d=b.getComputedStyle(a).getPropertyValue(f[g]));return c.body.removeChild(a),d!==e&&d.length>0&&"none"!==d}function $b(){c.addEventListener?(c.removeEventListener("mousewheel",Za,!1),c.removeEventListener("wheel",Za,!1),c.removeEventListener("MozMousePixelScroll",Za,!1)):c.detachEvent("onmousewheel",Za)}function _b(){var d,a="";b.addEventListener?d="addEventListener":(d="attachEvent",a="on");var f="onwheel"in c.createElement("div")?"wheel":c.onmousewheel!==e?"mousewheel":"DOMMouseScroll";"DOMMouseScroll"==f?c[d](a+"MozMousePixelScroll",Za,!1):c[d](a+f,Za,!1)}function ac(){$.on("mousedown",rb).on("mouseup",sb)}function bc(){$.off("mousedown",rb).off("mouseup",sb)}function cc(){if(F||X){var b=ec();a(g).off("touchstart "+b.down).on("touchstart "+b.down,Wa),a(g).off("touchmove "+b.move).on("touchmove "+b.move,Ta)}}function dc(){if(F||X){var b=ec();a(g).off("touchstart "+b.down),a(g).off("touchmove "+b.move)}}function ec(){return b.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function fc(a){var b=[];return b.y=void 0!==a.pageY&&(a.pageY||a.pageX)?a.pageY:a.touches[0].pageY,b.x=void 0!==a.pageX&&(a.pageY||a.pageX)?a.pageX:a.touches[0].pageX,X&&Va(a)&&h.scrollBar&&(b.y=a.touches[0].pageY,b.x=a.touches[0].pageX),b}function gc(a,b){k.setScrollingSpeed(0,"internal"),void 0!==b&&(ca=!0),Ab(a.closest(Q),a),void 0!==b&&(ca=!1),k.setScrollingSpeed(qa.scrollingSpeed,"internal")}function hc(a){if(h.scrollBar)$.scrollTop(a);else if(h.css3){var b="translate3d(0px, -"+a+"px, 0px)";Pb(b,!1)}else $.css("top",-a)}function ic(a){return{"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,transform:a}}function jc(a,b,c){switch(b){case"up":pa[c].up=a;break;case"down":pa[c].down=a;break;case"left":pa[c].left=a;break;case"right":pa[c].right=a;break;case"all":"m"==c?k.setAllowScrolling(a):k.setKeyboardScrolling(a)}}function kc(){hc(0),a(H+", "+V+", "+Y).remove(),a(w).css({height:"","background-color":"",padding:""}),a(N).css({width:""}),$.css({height:"",position:"","-ms-touch-action":"","touch-action":""}),i.css({overflow:"",height:""}),a("html").removeClass(o),a.each(j.get(0).className.split(/\s+/),function(a,b){0===b.indexOf(p)&&j.removeClass(b)}),a(w+", "+N).each(function(){h.scrollOverflowHandler.remove(a(this)),a(this).removeClass(T+" "+q)}),Fb($),$.find(B+", "+S+", "+Q).each(function(){a(this).replaceWith(this.childNodes)}),i.scrollTop(0);var b=[v,M,R];a.each(b,function(b,c){a("."+c).removeClass(c)})}function lc(a,b,c){h[a]=b,"internal"!==c&&(qa[a]=b)}function mc(){if(a("html").hasClass(o))return void nc("error","Fullpage.js can only be initialized once and you are doing it multiple times!");h.continuousVertical&&(h.loopTop||h.loopBottom)&&(h.continuousVertical=!1,nc("warn","Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),h.scrollBar&&h.scrollOverflow&&nc("warn","Option `scrollBar` is mutually exclusive with `scrollOverflow`. Sections with scrollOverflow might not work well in Firefox"),h.continuousVertical&&h.scrollBar&&(h.continuousVertical=!1,nc("warn","Option `scrollBar` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),a.each(h.anchors,function(b,c){var d=ga.find("[name]").filter(function(){return a(this).attr("name")&&a(this).attr("name").toLowerCase()==c.toLowerCase()}),e=ga.find("[id]").filter(function(){return a(this).attr("id")&&a(this).attr("id").toLowerCase()==c.toLowerCase()});(e.length||d.length)&&(nc("error","data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE)."),e.length&&nc("error",'"'+c+'" is is being used by another element `id` property'),d.length&&nc("error",'"'+c+'" is is being used by another element `name` property'))})}function nc(a,b){console&&console[a]&&console[a]("fullPage: "+b)}if(a("html").hasClass(o))return void mc();var i=a("html, body"),j=a("body"),k=a.fn.fullpage;h=a.extend({menu:!1,anchors:[],lockAnchors:!1,navigation:!1,navigationPosition:"right",navigationTooltips:[],showActiveTooltip:!1,slidesNavigation:!1,slidesNavPosition:"bottom",scrollBar:!1,hybrid:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,fitToSection:!0,fitToSectionDelay:1e3,easing:"easeInOutCubic",easingcss3:"ease",loopBottom:!1,loopTop:!1,loopHorizontal:!0,continuousVertical:!1,normalScrollElements:null,scrollOverflow:!1,scrollOverflowHandler:ha,touchSensitivity:5,normalScrollElementTouchThreshold:5,keyboardScrolling:!0,animateAnchor:!0,recordHistory:!0,controlArrows:!0,controlArrowColor:"#fff",verticalCentered:!0,resize:!1,sectionsColor:[],paddingTop:137,paddingBottom:40,fixedElements:null,responsive:0,responsiveWidth:0,responsiveHeight:0,sectionSelector:u,slideSelector:L,afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterReBuild:null,afterSlideLoad:null,onSlideLeave:null},h),mc(),a.extend(a.easing,{easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}}),k.setAutoScrolling=function(b,c){lc("autoScrolling",b,c);var d=a(x);h.autoScrolling&&!h.scrollBar?(i.css({overflow:"hidden",height:"100%"}),k.setRecordHistory(qa.recordHistory,"internal"),$.css({"-ms-touch-action":"none","touch-action":"none"}),d.length&&hc(d.position().top)):(i.css({overflow:"visible",height:"initial"}),k.setRecordHistory(!1,"internal"),$.css({"-ms-touch-action":"","touch-action":""}),hc(0),d.length&&i.scrollTop(d.position().top))},k.setRecordHistory=function(a,b){lc("recordHistory",a,b)},k.setScrollingSpeed=function(a,b){lc("scrollingSpeed",a,b)},k.setFitToSection=function(a,b){lc("fitToSection",a,b)},k.setLockAnchors=function(a){h.lockAnchors=a},k.setMouseWheelScrolling=function(a){a?(_b(),ac()):($b(),bc())},k.setAllowScrolling=function(b,c){void 0!==c?(c=c.replace(/ /g,"").split(","),a.each(c,function(a,c){jc(b,c,"m")})):b?(k.setMouseWheelScrolling(!0),cc()):(k.setMouseWheelScrolling(!1),dc())},k.setKeyboardScrolling=function(b,c){void 0!==c?(c=c.replace(/ /g,"").split(","),a.each(c,function(a,c){jc(b,c,"k")})):h.keyboardScrolling=b},k.moveSectionUp=function(){var b=a(x).prev(w);b.length||!h.loopTop&&!h.continuousVertical||(b=a(w).last()),b.length&&cb(b,null,!0)},k.moveSectionDown=function(){var b=a(x).next(w);b.length||!h.loopBottom&&!h.continuousVertical||(b=a(w).first()),b.length&&cb(b,null,!1)},k.silentMoveTo=function(a,b){k.setScrollingSpeed(0,"internal"),k.moveTo(a,b),k.setScrollingSpeed(qa.scrollingSpeed,"internal")},k.moveTo=function(a,b){var c=Qb(a);void 0!==b?Sb(a,b):c.length>0&&cb(c)},k.moveSlideRight=function(a){$a("next",a)},k.moveSlideLeft=function(a){$a("prev",a)},k.reBuild=function(b){if(!$.hasClass(n)){ca=!0;var c=fa.outerWidth();ba=fa.height(),h.resize&&Gb(ba,c),a(w).each(function(){var b=a(this).find(Q),c=a(this).find(N);h.verticalCentered&&a(this).find(B).css("height",Ob(a(this))+"px"),a(this).css("height",ba+"px"),h.scrollOverflow&&(c.length?c.each(function(){Mb(a(this))}):Mb(a(this))),c.length>1&&Ab(b,b.find(O))});var d=a(x),e=d.index(w);e&&k.silentMoveTo(e+1),ca=!1,a.isFunction(h.afterResize)&&b&&h.afterResize.call($),a.isFunction(h.afterReBuild)&&!b&&h.afterReBuild.call($)}},k.setResponsive=function(b){var c=j.hasClass(l);b?c||(k.setAutoScrolling(!1,"internal"),k.setFitToSection(!1,"internal"),a(H).hide(),j.addClass(l)):c&&(k.setAutoScrolling(qa.autoScrolling,"internal"),k.setFitToSection(qa.autoScrolling,"internal"),a(H).show(),j.removeClass(l))};var ja,ka,oa,D=!1,F=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),X="ontouchstart"in b||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,$=a(this),ba=fa.height(),ca=!1,ia=!0,la=!0,ma=[],pa={};pa.m={up:!0,down:!0,left:!0,right:!0},pa.k=a.extend(!0,{},pa.m);var ra,sa,ta,ua,va,wa,qa=a.extend(!0,{},h);a(this).length&&(xa(),ya());var Ja=!1,Ka=0,Pa=0,Qa=0,Ra=0,Sa=0,Ya=(new Date).getTime(),ab=0,yb=0,Bb=ba;k.destroy=function(b){k.setAutoScrolling(!1,"internal"),k.setAllowScrolling(!1),k.setKeyboardScrolling(!1),$.addClass(n),clearTimeout(ta),clearTimeout(sa),clearTimeout(ra),clearTimeout(ua),clearTimeout(va),fa.off("scroll",La).off("hashchange",nb).off("resize",Cb),ga.off("click",H+" a").off("mouseenter",H+" li").off("mouseleave",H+" li").off("click",W).off("mouseover",h.normalScrollElements).off("mouseout",h.normalScrollElements),a(w).off("click",Y),clearTimeout(ta),clearTimeout(sa),b&&kc()}},ha={afterRender:function(a){var b=a.find(P),c=a.find(i);b.length&&(c=b.find(O)),c.mouseover()},create:function(a,b){a.find(i).slimScroll({allowPageScroll:!0,height:b+"px",size:"10px",alwaysVisible:!0})},isScrolled:function(a,b){return"top"===a?!b.scrollTop():"bottom"===a?b.scrollTop()+1+b.innerHeight()>=b[0].scrollHeight:void 0},scrollable:function(a){return a.find(Q).length?a.find(O).find(i):a.find(i)},scrollHeight:function(a){return a.find(i).get(0).scrollHeight},remove:function(a){a.find(i).children().first().unwrap().unwrap(),a.find(j).remove(),a.find(k).remove()},update:function(a,b){a.find(i).css("height",b+"px").parent().css("height",b+"px")},wrapContent:function(){return'<div class="'+h+'"></div>'}}}),function(a){a.fn.hoverIntent=function(b,c,d){var e={interval:100,sensitivity:7,timeout:0};e="object"==typeof b?a.extend(e,b):a.isFunction(c)?a.extend(e,{over:b,out:c,selector:d}):a.extend(e,{over:b,out:b,selector:c});var f,g,h,i,j=function(a){f=a.pageX,g=a.pageY},k=function(b,c){if(c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(h-f)+Math.abs(i-g)<e.sensitivity)return a(c).off("mousemove.hoverIntent",j),c.hoverIntent_s=1,e.over.apply(c,[b]);h=f,i=g,c.hoverIntent_t=setTimeout(function(){k(b,c)},e.interval)},l=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,e.out.apply(b,[a])},m=function(b){var c=jQuery.extend({},b),d=this;d.hoverIntent_t&&(d.hoverIntent_t=clearTimeout(d.hoverIntent_t)),"mouseenter"==b.type?(h=c.pageX,i=c.pageY,a(d).on("mousemove.hoverIntent",j),1!=d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){k(c,d)},e.interval))):(a(d).off("mousemove.hoverIntent",j),1==d.hoverIntent_s&&(d.hoverIntent_t=setTimeout(function(){l(c,d)},e.timeout)))};return this.on({"mouseenter.hoverIntent":m,"mouseleave.hoverIntent":m},e.selector)}}(jQuery),function(a){function b(){var b=window.innerHeight,c=document.compatMode;return!c&&a.support.boxModel||(b="CSS1Compat"==c?document.documentElement.clientHeight:document.body.clientHeight),b}a(window).scroll(function(){var c=b(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=[];a.each(a.cache,function(){this.events&&this.events.inview&&e.push(this.handle.elem)}),e.length&&a(e).each(function(){var b=a(this),e=b.offset().top,f=b.height(),g=b.data("inview")||!1;d>e+f||d+c<e?g&&(b.data("inview",!1),b.trigger("inview",[!1])):d<e+f&&(g||(b.data("inview",!0),b.trigger("inview",[!0])))})}),a(function(){a(window).scroll()})}(jQuery),function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function j(){var b=0;g.each(function(){var c=a(this);if(!i.skip_invisible||c.is(":visible"))if(a.abovethetop(this,i)||a.leftofbegin(this,i));else if(a.belowthefold(this,i)||a.rightoffold(this,i)){if(++b>i.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,g=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(i,f)),h=i.container===d||i.container===b?e:a(i.container),0===i.event.indexOf("scroll")&&h.bind(i.event,function(){return j()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.attr("src")!==d&&!1!==c.attr("src")||c.is("img")&&c.attr("src",i.placeholder),c.one("appear",function(){if(!this.loaded){if(i.appear){var d=g.length;i.appear.call(b,d,i)}a("<img />").bind("load",function(){var d=c.attr("data-"+i.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[i.effect](i.effect_speed),b.loaded=!0;var e=a.grep(g,function(a){return!a.loaded});if(g=a(e),i.load){var f=g.length;i.load.call(b,f,i)}}).attr("src",c.attr("data-"+i.data_attribute))}}),0!==i.event.indexOf("scroll")&&c.bind(i.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){j()}),Redant.util.browser.isIOS()&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&g.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){j()}),this},a.belowthefold=function(c,f){return(f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height())<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){return(f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width())<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){return(f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top)>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){return(f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left)>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document),function(a){function b(b,c,d,e){var f=b.text().split(c),g="";f.length&&(a(f).each(function(a,b){g+='<span class="'+d+(a+1)+'">'+b+"</span>"+e}),b.empty().append(g))}var c={init:function(){return this.each(function(){b(a(this),"","char","")})},words:function(){return this.each(function(){b(a(this)," ","word"," ")})},lines:function(){return this.each(function(){var c="eefec303079ad17405c889e092e105b0";b(a(this).children("br").replaceWith(c).end(),c,"line","")})}};a.fn.lettering=function(b){return b&&c[b]?c[b].apply(this,[].slice.call(arguments,1)):"letters"!==b&&b?(a.error("Method "+b+" does not exist on jQuery.lettering"),this):c.init.apply(this,[].slice.call(arguments,0))}}(jQuery),function(a,b,c){function k(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function l(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),!0===a)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function m(){var a,b=this,d=c(b),e=this.id;if(""==b.value){if("password"==b.type){if(!d.data("placeholder-textinput")){try{a=d.clone().attr({type:"text"})}catch(b){a=c("<input>").attr(c.extend(k(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":d,"placeholder-id":e}).bind("focus.placeholder",l),d.data({"placeholder-textinput":a,"placeholder-id":e}).before(a)}d=d.removeAttr("id").hide().prev().attr("id",e).show()}d.addClass("placeholder"),d[0].value=d.attr("placeholder")}else d.removeClass("placeholder")}var i,j,d="placeholder"in b.createElement("input"),e="placeholder"in b.createElement("textarea"),f=c.fn,g=c.valHooks,h=c.propHooks;d&&e?(j=f.placeholder=function(){return this},j.input=j.textarea=!0):(j=f.placeholder=function(){var a=this;return a.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":m}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},j.input=d,j.textarea=e,i={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var e=c(a),f=e.data("placeholder-password");return f?f[0].value=d:e.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&m.call(a)):e.hasClass("placeholder")?l.call(a,!0,d)||(a.value=d):a.value=d,e):a.value=d}},d||(g.input=i,h.value=i),e||(g.textarea=i,h.value=i),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(l);setTimeout(function(){a.each(m)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("jquery-scrollto",this,function(){var b,c;return b=window.jQuery||require("jquery"),b.propHooks.scrollTop=b.propHooks.scrollLeft={get:function(a,b){var c=null;return"HTML"!==a.tagName&&"BODY"!==a.tagName||("scrollLeft"===b?c=window.scrollX:"scrollTop"===b&&(c=window.scrollY)),null==c&&(c=a[b]),c}},b.Tween.propHooks.scrollTop=b.Tween.propHooks.scrollLeft={get:function(a){return b.propHooks.scrollTop.get(a.elem,a.prop)},set:function(a){"HTML"===a.elem.tagName||"BODY"===a.elem.tagName?(a.options.bodyScrollLeft=a.options.bodyScrollLeft||window.scrollX,a.options.bodyScrollTop=a.options.bodyScrollTop||window.scrollY,"scrollLeft"===a.prop?a.options.bodyScrollLeft=Math.round(a.now):"scrollTop"===a.prop&&(a.options.bodyScrollTop=Math.round(a.now)),window.scrollTo(a.options.bodyScrollLeft,a.options.bodyScrollTop)):a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},c={config:{duration:400,easing:"swing",callback:void 0,durationMode:"each",offsetTop:0,offsetLeft:0},configure:function(a){return b.extend(c.config,a||{}),this},scroll:function(a,d){var e,f,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w;return e=a.pop(),f=e.$container,h=e.$target,f.prop("tagName"),i=b("<span/>").css({position:"absolute",top:"0px",left:"0px"}),j=f.css("position"),f.css({position:"relative"}),i.appendTo(f),p=i.offset().top,q=h.offset().top,r=q-p-parseInt(d.offsetTop,10),s=i.offset().left,t=h.offset().left,u=t-s-parseInt(d.offsetLeft,10),l=f.prop("scrollTop"),m=f.prop("scrollLeft"),i.remove(),f.css({position:j}),v={},w=function(b){return 0===a.length?"function"==typeof d.callback&&d.callback():c.scroll(a,d),!0},d.onlyIfOutside&&(n=l+f.height(),o=m+f.width(),l<r&&r<n&&(r=l),m<u&&u<o&&(u=m)),r!==l&&(v.scrollTop=r),u!==m&&(v.scrollLeft=u),f.prop("scrollHeight")===f.width()&&delete v.scrollTop,f.prop("scrollWidth")===f.width()&&delete v.scrollLeft,null!=v.scrollTop||null!=v.scrollLeft?f.animate(v,{duration:d.duration,easing:d.easing,complete:w}):w(),!0},fn:function(a){var d,e,f,g;d=[];var h=b(this);if(0===h.length)return this;for(e=b.extend({},c.config,a),f=h.parent(),g=f.get(0);1===f.length&&g!==document.body&&g!==document;){var i,j;i="visible"!==f.css("overflow-y")&&g.scrollHeight!==g.clientHeight,j="visible"!==f.css("overflow-x")&&g.scrollWidth!==g.clientWidth,(i||j)&&(d.push({$container:f,$target:h}),h=f),f=f.parent(),g=f.get(0)}return d.push({$container:b("html"),$target:h}),"all"===e.durationMode&&(e.duration/=d.length),c.scroll(d,e),this}},b.ScrollTo=b.ScrollTo||c,b.fn.ScrollTo=b.fn.ScrollTo||c.fn,c}),WalkerGreenbank(window,document,jQuery,Redant);var currentCanvas=null;window.Wg=window.Wg||{},Wg.Menus=Wg.Menus||function(a,b,c,d,e){function i(){0==f&&((c("li a").hasClass("highlightedMenu")||c("li a").hasClass("selected"))&&(c(".footerToggles li a").removeClass("highlightedMenu").removeClass("selected"),0==g&&resetMenu()),c(".scrapBookAdd").length>0&&!c(".scrapBookAdd:hover").length>0&&c(".scrapBookAdd").is(":visible")&&c(".scrapBookAdd").fadeOut("")(300,function(){}).slideToggle(),c(".toggleExplore").hasClass("toggleExplore")&&c(".toggleExplore").removeClass("selected"))}var f=!1,g=!1;return{init:function(){c(document).ready(function(){0==c("#deepLinks .section:not(.intro)").length&&c(".bottomMenu, #map_content").mouseover(function(){g=!0}).mouseleave(function(){g=!1}),c(".searchPanel, .bottomMenu").mouseenter(function(){f=!0}).mouseleave(function(){f=!1});var a=!1;c(".scrapBookAdd").mouseover(function(){a=!0}).mouseout(function(){a=!1});var b=!1;c(".toggleMoreInfoMob").bind("click touchstart",function(a){return c(".mobileCorporateMenu.mobMoreInfo").toggle(),c(this).find("span b").hasClass("icon-caret-down")?c(this).find("span b").toggleClass("icon-caret-up").removeClass("icon-caret-down"):c(this).find("span b").toggleClass("icon-caret-down").removeClass("icon-caret-up"),a.preventDefault(),!1}),c(".toggleMoreInfo").click(function(a){a.preventDefault(),resetMenu(),f=!0;var d=c("#corporateInfo"),e=c("#footer");return c("#corporateInfo").show(),b=!0,"75px"==e.css("bottom")?(e.animate({bottom:"0px",avoidCSSTransitions:!0},500,function(){}),d.animate({bottom:"-75px",avoidCSSTransitions:!0},500,function(){d.hide()}),c(".corporateToggle").find(".icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-up")):(e.animate({bottom:"75px",avoidCSSTransitions:!0},500,function(){}),d.animate({bottom:"-10px",avoidCSSTransitions:!0},500,function(){}),c(".corporateToggle").find(".icon-caret-up").removeClass("icon-caret-up").addClass("icon-caret-down")),requestTimeout(function(){f=!1,b=!1},20),!1}),c("body").on("change","form#stockistSearch select",function(a){c(".error.alertInfo").hide();var b=c("#SiteKey").val();switch(c("#stockistSearch .large-8 ul li").hide(),c(this).val()){case"1":c("#Postcode").attr("placeholder","Enter Postcode, Town or City"),c("#HasWallpaper").parents("li").show(),c("#HasFabric").parents("li").show(),c("#HasTrimmings").parents("li").show(),c("#HasHomeAccessories").parents("li").show(),c("#HasRugs").parents("li").show(),"Zoffany"==b?(c("#HasPaint").parents("li").show(),c("#HasFurniture").parents("li").show()):"Sanderson"==b&&c("#HasPaint").parents("li").show();break;case"2":c("#Postcode").attr("placeholder","Enter Postcode, Town or City"),c("#HasWallpaper").parents("li").show(),c("#HasFabric").parents("li").show(),c("#HasTrimmings").parents("li").show(),c("#HasRugs").parents("li").show(),"Zoffany"==b?(c("#HasPaint").parents("li").show(),c("#HasFurniture").parents("li").show()):"Sanderson"==b&&c("#HasPaint").parents("li").show();break;case"3":c("#Postcode").attr("placeholder","Enter Zip code or State"),c("#HasWallpaper").parents("li").show(),c("#HasFabric").parents("li").show(),c("#HasTrimmings").parents("li").show();break;case"4":c("#Postcode").attr("placeholder","Enter Postcode, Town or City"),c("#HasWallpaper").parents("li").show(),c("#HasFabric").parents("li").show(),c("#HasTrimmings").parents("li").show()}}),c(".scroller").each(function(){var a=0;c(this).find(".results > li").each(function(){a+=parseInt(c(this).outerWidth())}),c(this).find(".results").width(a+12)});var e;c(".toggleRecent").bind("click touch",function(){return resetMenu(),c("#recentlyViewed").is(":visible")||c("#recentlyViewed").slideDown(),d.util.browser.isMobile()||d.util.browser.isTablet()?(c("#recentlyViewed .scroller").css("overflow-y","hidden"),c("#recentlyViewed .scroller").css("overflow-x","scroll")):c("#recentlyViewed .scroller").hasClass("iScollInit")||(e=new IScroll("#recentlyViewed .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0,preventDefaultException:{className:/(^|\s)addToBasket(\s|$)/}})),c("#recentlyViewed .scroller").addClass("iScollInit"),!1});var e;c(".toggleInspire").click(function(){return resetMenu(),c("#deepLinks").is(":visible")||c("#deepLinks").slideDown(),d.util.browser.isMobile()||d.util.browser.isTablet()?(c("#deepLinks .scroller").css("overflow-y","hidden"),c("#deepLinks .scroller").css("overflow-x","scroll")):c("#deepLinks .scroller").hasClass("iScollInit")||(e=new IScroll("#deepLinks .scroller",{eventPassthrough:!0,scrollX:!0,scrollY:!1,wheelHorizontal:!0})),c("#deepLinks .scroller").addClass("iScollInit"),!1});var j;c(".toggleFeatured").bind("click touch",function(){return resetMenu(),c("#featured").is(":visible")||c("#featured").slideDown(),d.util.browser.isMobile()||d.util.browser.isTablet()?(c("#featured .scroller").css("overflow-y","hidden"),c("#featured .scroller").css("overflow-x","scroll")):c("#featured .scroller").hasClass("iScollInit")||(j=new IScroll("#featured .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0})),c("#featured .scroller").addClass("iScollInit"),!1});var k;c(".toggleScrapbook").bind("click touch",function(){return resetMenu(),c("#studio").is(":visible")||c("#studio").slideDown(),d.util.browser.isMobile()||d.util.browser.isTablet()?(c("#studio .scroller").css("overflow-y","hidden"),c("#studio .scroller").css("overflow-x","scroll")):c("#studio .scroller").hasClass("iScollInit")||(k=new IScroll("#studio .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0})),c("#studio .scroller").addClass("iScollInit"),!1});var l;c(".toggleExplore").click(function(){return resetMenu(),c(this).find("span").hasClass("openExplore")?(c(this).find("span").removeClass("openExplore"),c(this).removeClass("selected")):c(this).find("span").addClass("openExplore"),c("#explore").is(":visible")||c("#explore").slideDown(),d.util.browser.isMobile()||d.util.browser.isTablet()?(c("#explore .scroller").css("overflow-y","hidden"),c("#explore .scroller").css("overflow-x","scroll")):c("#explore .scroller").hasClass("iScollInit")||(l=new IScroll("#explore .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0})),c("#explore .scroller").addClass("iScollInit"),!1}),c("body").on("click",function(a){i()}),c("body").on("click",".bottomMenu,.searchPanel",function(a){a.stopPropagation()})})}}}(window,document,jQuery,Redant),$.isIPhone=function(){return-1!=navigator.platform.toLowerCase().indexOf("iphone")||-1!=navigator.platform.toLowerCase().indexOf("ipod")},$.isIPad=function(){return-1!=navigator.platform.toLowerCase().indexOf("ipad")},$.isAndroidMobile=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("android")>-1&&a.indexOf("mobile")},$.isAndroidTablet=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("android")>-1&&!a.indexOf("mobile")},$.isWindowsPhone=function(){return navigator.userAgent.toLowerCase().indexOf("windows phone")>-1},$.isBlackberry=function(){return navigator.userAgent.toLowerCase().indexOf("blackberry")>-1},$.isTablet=function(){return $.isAndroidTablet()||$.isIPad()},$.isMobile=function(){return $.isAndroidMobile()||$.isIPhone()||$.isWindowsPhone()||$.isBlackberry()},$(document).ready(function(){function a(a){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}$("#newsletterSubmitButton").on("click",function(b){var c=$("#Person_Email").val(),d=$("#SiteKey").val(),e={Site:d,EmailAddress:c};a(c)?$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"/members/register/NewsLetterRegistration",success:function(a){a?window.location.href='/members/register/?returnUrl=""&email='+encodeURIComponent(c):$("#newsletterError").text("Something went wrong, please check the details entered and try again")},error:function(){$("#newsletterError").text("Something went wrong, please try again")}}):$("#newsletterError").text("Please enter a valid email address")})}),function(b){function j(){var a=document.getElementsByTagName("script"),b=a[a.length-1].src.split("?")[0];return b.split("/").length>0?b.split("/").slice(0,-1).join("/")+"/":""}function z(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}var c=!1,d=!1,f=5e3,g=2e3,h=0,i=b,k=j(),l=["ms","moz","webkit","o"],m=window.requestAnimationFrame||!1,n=window.cancelAnimationFrame||!1;if(!m)for(var o in l){var p=l[o];m||(m=window[p+"RequestAnimationFrame"]),n||(n=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"])}var q=window.MutationObserver||window.WebKitMutationObserver||!1,r={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:"auto"},s=!1,t=function(){function g(){var c=["-moz-grab","-webkit-grab","grab"];(b.ischrome&&!b.ischrome22||b.isie)&&(c=[]);for(var d=0;d<c.length;d++){var e=c[d];if(a.style.cursor=e,a.style.cursor==e)return e}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(s)return s;var a=document.createElement("DIV"),b={};b.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,b.isopera="opera"in window,b.isopera12=b.isopera&&"getUserMedia"in navigator,b.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),b.isie="all"in document&&"attachEvent"in a&&!b.isopera,b.isieold=b.isie&&!("msInterpolationMode"in a.style),b.isie7=b.isie&&!b.isieold&&(!("documentMode"in document)||7==document.documentMode),b.isie8=b.isie&&"documentMode"in document&&8==document.documentMode,b.isie9=b.isie&&"performance"in window&&document.documentMode>=9,b.isie10=b.isie&&"performance"in window&&document.documentMode>=10,b.isie9mobile=/iemobile.9/i.test(navigator.userAgent),b.isie9mobile&&(b.isie9=!1),b.isie7mobile=!b.isie9mobile&&b.isie7&&/iemobile/i.test(navigator.userAgent),b.ismozilla="MozAppearance"in a.style,b.iswebkit="WebkitAppearance"in a.style,b.ischrome="chrome"in window,b.ischrome22=b.ischrome&&b.haspointerlock,b.ischrome26=b.ischrome&&"transition"in a.style,b.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,b.hasmstouch=window.navigator.msPointerEnabled||!1,b.ismac=/^mac$/i.test(navigator.platform),b.isios=b.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),b.isios4=b.isios&&!("seal"in Object),b.isandroid=/android/i.test(navigator.userAgent),b.trstyle=!1,b.hastransform=!1,b.hastranslate3d=!1,b.transitionstyle=!1,b.hastransition=!1,b.transitionend=!1;for(var c=["transform","msTransform","webkitTransform","MozTransform","OTransform"],d=0;d<c.length;d++)if(void 0!==a.style[c[d]]){b.trstyle=c[d];break}b.hastransform=0!=b.trstyle,b.hastransform&&(a.style[b.trstyle]="translate3d(1px,2px,3px)",b.hastranslate3d=/translate3d/.test(a.style[b.trstyle])),b.transitionstyle=!1,b.prefixstyle="",b.transitionend=!1;for(var c=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],e=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],f=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],d=0;d<c.length;d++)if(c[d]in a.style){b.transitionstyle=c[d],b.prefixstyle=e[d],b.transitionend=f[d];break}return b.ischrome26&&(b.prefixstyle=e[1]),b.hastransition=b.transitionstyle,b.cursorgrabvalue=g(),b.hasmousecapture="setCapture"in a,b.hasMutationObserver=!1!==q,a=null,s=b,b},u=function(a,b){function o(){var a=e.doc.css(l.trstyle);return!(!a||"matrix"!=a.substr(0,6))&&a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function p(){var a=e.win;if("zIndex"in a)return a.zIndex();for(;a.length>0;){if(9==a[0].nodeType)return!1;var b=a.css("zIndex");if(!isNaN(b)&&0!=b)return parseInt(b);a=a.parent()}return!1}function u(a,b,c){var d=a.css(b),f=parseFloat(d);if(isNaN(f)){f=s[d]||0;var g=3==f?c?e.win.outerHeight()-e.win.innerHeight():e.win.outerWidth()-e.win.innerWidth():1;return e.isie8&&f&&(f+=1),g?f:0}return f}function w(a,b,c,d){e._bind(a,b,function(d){var d=d||window.event,e={original:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return d.preventDefault?d.preventDefault():d.returnValue=!1,!1},stopImmediatePropagation:function(){d.stopImmediatePropagation?d.stopImmediatePropagation():d.cancelBubble=!0}};return"mousewheel"==b?(e.deltaY=-.025*d.wheelDelta,d.wheelDeltaX&&(e.deltaX=-.025*d.wheelDeltaX)):e.deltaY=d.detail,c.call(a,e)},d)}function x(a,b,c){var d,f;if(0==a.deltaMode?(d=-Math.floor(a.deltaX*(e.opt.mousescrollstep/54)),f=-Math.floor(a.deltaY*(e.opt.mousescrollstep/54))):1==a.deltaMode&&(d=-Math.floor(a.deltaX*e.opt.mousescrollstep),f=-Math.floor(a.deltaY*e.opt.mousescrollstep)),b&&e.opt.oneaxismousemode&&0==d&&f&&(d=f,f=0),d&&(e.scrollmom&&e.scrollmom.stop(),e.lastdeltax+=d,e.debounced("mousewheelx",function(){var a=e.lastdeltax;e.lastdeltax=0,e.rail.drag||e.doScrollLeftBy(a)},120)),f){if(e.opt.nativeparentscrolling&&c&&!e.ispage&&!e.zoomactive)if(f<0){if(e.getScrollTop()>=e.page.maxh)return!0}else if(e.getScrollTop()<=0)return!0;e.scrollmom&&e.scrollmom.stop(),e.lastdeltay+=f,e.debounced("mousewheely",function(){var a=e.lastdeltay;e.lastdeltay=0,e.rail.drag||e.doScrollBy(a)},120)}return a.stopImmediatePropagation(),a.preventDefault()}var e=this;if(this.version="3.5.1",this.name="nicescroll",this.me=b,this.opt={doc:i("body"),win:!1},i.extend(this.opt,r),this.opt.snapbackspeed=80,a)for(var j in e.opt)void 0!==a[j]&&(e.opt[j]=a[j]);this.doc=e.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(e.opt.win?e.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==e.opt.win,this.win=e.opt.win||(this.ispage?i(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?i(window):this.win,this.body=i("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=e.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.checkrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+g++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.overflowx=e.opt.overflowx,this.overflowy=e.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=t();var l=i.extend({},this.detected);this.canhwscroll=l.hastransform&&e.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&e.haswrapper,this.istouchcapable=!1,l.cantouch&&l.ischrome&&!l.isios&&!l.isandroid&&(this.istouchcapable=!0,l.cantouch=!1),l.cantouch&&l.ismozilla&&!l.isios&&!l.isandroid&&(this.istouchcapable=!0,l.cantouch=!1),e.opt.enablemouselockapi||(l.hasmousecapture=!1,l.haspointerlock=!1),this.delayed=function(a,b,c,d){var f=e.delaylist[a],g=(new Date).getTime();if(!d&&f&&f.tt)return!1;f&&f.tt&&clearTimeout(f.tt),f&&f.last+c>g&&!f.tt?e.delaylist[a]={last:g+c,tt:setTimeout(function(){e.delaylist[a].tt=0,b.call()},c)}:f&&f.tt||(e.delaylist[a]={last:g,tt:0},setTimeout(function(){b.call()},0))},this.debounced=function(a,b,c){var d=e.delaylist[a];(new Date).getTime();e.delaylist[a]=b,d||setTimeout(function(){var b=e.delaylist[a];e.delaylist[a]=!1,b.call()},c)},this.synched=function(a,b){function c(){e.onsync||(m(function(){e.onsync=!1;for(a in e.synclist){var b=e.synclist[a];b&&b.call(e),e.synclist[a]=!1}}),e.onsync=!0)}return e.synclist[a]=b,c(),a},this.unsynched=function(a){e.synclist[a]&&(e.synclist[a]=!1)},this.css=function(a,b){for(var c in b)e.saved.css.push([a,c,a.css(c)]),a.css(c,b[c])},this.scrollTop=function(a){return void 0===a?e.getScrollTop():e.setScrollTop(a)},this.scrollLeft=function(a){return void 0===a?e.getScrollLeft():e.setScrollLeft(a)},BezierClass=function(a,b,c,d,e,f,g){this.st=a,this.ed=b,this.spd=c,this.p1=d||0,this.p2=e||1,this.p3=f||0,this.p4=g||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=(new Date).getTime(),b=1-(a-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return b<0?this.ed:this.st+Math.round(this.df*c)},update:function(a,b){return this.st=this.getNow(),this.ed=a,this.spd=b,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},l.hastranslate3d&&l.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(a){if(!a){var b=o();if(b)return 16==b.length?-b[13]:-b[5];if(e.timerscroll&&e.timerscroll.bz)return e.timerscroll.bz.getNow()}return e.doc.translate.y},this.getScrollLeft=function(a){if(!a){var b=o();if(b)return 16==b.length?-b[12]:-b[4];if(e.timerscroll&&e.timerscroll.bh)return e.timerscroll.bh.getNow()}return e.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",!1,!0,window,1),a.dispatchEvent(b)}:document.fireEvent?this.notifyScrollEvent=function(a){var b=document.createEventObject();a.fireEvent("onscroll"),b.cancelBubble=!0}:this.notifyScrollEvent=function(a,b){},l.hastranslate3d&&e.opt.enabletranslate3d?(this.setScrollTop=function(a,b){e.doc.translate.y=a,e.doc.translate.ty=-1*a+"px",e.doc.css(l.trstyle,"translate3d("+e.doc.translate.tx+","+e.doc.translate.ty+",0px)"),b||e.notifyScrollEvent(e.win[0])},this.setScrollLeft=function(a,b){e.doc.translate.x=a,e.doc.translate.tx=-1*a+"px",e.doc.css(l.trstyle,"translate3d("+e.doc.translate.tx+","+e.doc.translate.ty+",0px)"),b||e.notifyScrollEvent(e.win[0])}):(this.setScrollTop=function(a,b){e.doc.translate.y=a,e.doc.translate.ty=-1*a+"px",e.doc.css(l.trstyle,"translate("+e.doc.translate.tx+","+e.doc.translate.ty+")"),b||e.notifyScrollEvent(e.win[0])},this.setScrollLeft=function(a,b){e.doc.translate.x=a,e.doc.translate.tx=-1*a+"px",e.doc.css(l.trstyle,"translate("+e.doc.translate.tx+","+e.doc.translate.ty+")"),b||e.notifyScrollEvent(e.win[0])})):(this.getScrollTop=function(){return e.docscroll.scrollTop()},this.setScrollTop=function(a){return e.docscroll.scrollTop(a)},this.getScrollLeft=function(){return e.docscroll.scrollLeft()},this.setScrollLeft=function(a){return e.docscroll.scrollLeft(a)}),this.getTarget=function(a){return!!a&&(a.target?a.target:!!a.srcElement&&a.srcElement)},this.hasParent=function(a,b){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=b;)c=c.parentNode||!1;return!1!==c};var s={thin:1,medium:3,thick:5};this.getOffset=function(){if(e.isfixed)return{top:parseFloat(e.win.css("top")),left:parseFloat(e.win.css("left"))};if(!e.viewport)return e.win.offset();var a=e.win.offset(),b=e.viewport.offset();return{top:a.top-b.top+e.viewport.scrollTop(),left:a.left-b.left+e.viewport.scrollLeft()}},this.updateScrollBar=function(a){if(e.ishwscroll)e.rail.css({height:e.win.innerHeight()}),e.railh&&e.railh.css({width:e.win.innerWidth()});else{var b=e.getOffset(),c={top:b.top,left:b.left};c.top+=u(e.win,"border-top-width",!0);e.win.outerWidth(),e.win.innerWidth();c.left+=e.rail.align?e.win.outerWidth()-u(e.win,"border-right-width")-e.rail.width:u(e.win,"border-left-width");var f=e.opt.railoffset;if(f&&(f.top&&(c.top+=f.top),e.rail.align&&f.left&&(c.left+=f.left)),e.locked||e.rail.css({top:c.top,left:c.left,height:a?a.h:e.win.innerHeight()}),e.zoom&&e.zoom.css({top:c.top+1,left:1==e.rail.align?c.left-20:c.left+e.rail.width+4}),e.railh&&!e.locked){var c={top:b.top,left:b.left},g=e.railh.align?c.top+u(e.win,"border-top-width",!0)+e.win.innerHeight()-e.railh.height:c.top+u(e.win,"border-top-width",!0),h=c.left+u(e.win,"border-left-width");e.railh.css({top:g,left:h,width:e.railh.width})}}},this.doRailClick=function(a,b,c){var d,f,g,h;e.locked||(e.cancelEvent(a),b?(d=c?e.doScrollLeft:e.doScrollTop,g=c?(a.pageX-e.railh.offset().left-e.cursorwidth/2)*e.scrollratio.x:(a.pageY-e.rail.offset().top-e.cursorheight/2)*e.scrollratio.y,d(g)):(d=c?e.doScrollLeftBy:e.doScrollBy,g=c?e.scroll.x:e.scroll.y,h=c?a.pageX-e.railh.offset().left:a.pageY-e.rail.offset().top,f=c?e.view.w:e.view.h,d(g>=h?f:-f)))},e.hasanimationframe=m,e.hascancelanimationframe=n,e.hasanimationframe?e.hascancelanimationframe||(n=function(){e.cancelAnimationFrame=!0}):(m=function(a){return setTimeout(a,15-Math.floor(+new Date/1e3)%16)},n=clearInterval),this.init=function(){function z(a){if(e.selectiondrag){if(a){var b=e.win.outerHeight(),c=a.pageY-e.selectiondrag.top;c>0&&c<b&&(c=0),c>=b&&(c-=b),e.selectiondrag.df=c}if(0!=e.selectiondrag.df){var d=2*-Math.floor(e.selectiondrag.df/6);e.doScrollBy(d),e.debounced("doselectionscroll",function(){z()},50)}}}function C(a){e.iframexd=!1;try{var b="contentDocument"in this?this.contentDocument:this.contentWindow.document;b.domain}catch(a){e.iframexd=!0,b=!1}if(e.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(e.forcescreen=!0,e.isiframe&&(e.iframe={doc:i(b),html:e.doc.contents().find("html")[0],body:e.doc.contents().find("body")[0]},e.getContentSize=function(){return{w:Math.max(e.iframe.html.scrollWidth,e.iframe.body.scrollWidth),h:Math.max(e.iframe.html.scrollHeight,e.iframe.body.scrollHeight)}},e.docscroll=i(e.iframe.body)),!l.isios&&e.opt.iframeautoresize&&!e.isiframe){e.win.scrollTop(0),e.doc.height("");var d=Math.max(b.getElementsByTagName("html")[0].scrollHeight,b.body.scrollHeight);e.doc.height(d)}e.lazyResize(30),l.isie7&&e.css(i(e.iframe.html),{"overflow-y":"hidden"}),e.css(i(e.iframe.body),{"overflow-y":"hidden"}),l.isios&&e.haswrapper&&e.css(i(b.body),{"-webkit-transform":"translate3d(0, 0, 0)"}),"contentWindow"in this?e.bind(this.contentWindow,"scroll",e.onscroll):e.bind(b,"scroll",e.onscroll),e.opt.enablemousewheel&&e.bind(b,"mousewheel",e.onmousewheel),e.opt.enablekeyboard&&e.bind(b,l.isopera?"keypress":"keydown",e.onkeypress),(l.cantouch||e.opt.touchbehavior)&&(e.bind(b,"mousedown",e.ontouchstart),e.bind(b,"mousemove",function(a){e.ontouchmove(a,!0)}),e.opt.grabcursorenabled&&l.cursorgrabvalue&&e.css(i(b.body),{cursor:l.cursorgrabvalue})),e.bind(b,"mouseup",e.ontouchend),e.zoom&&(e.opt.dblclickzoom&&e.bind(b,"dblclick",e.doZoom),e.ongesturezoom&&e.bind(b,"gestureend",e.ongesturezoom))}if(e.saved.css=[],l.isie7mobile)return!0;if(l.isoperamini)return!0;if(l.hasmstouch&&e.css(e.ispage?i("html"):e.win,{"-ms-touch-action":"none"}),e.zindex="auto",e.ispage||"auto"!=e.opt.zindex?e.zindex=e.opt.zindex:e.zindex=p()||"auto",e.ispage||"auto"==e.zindex||e.zindex>h&&(h=e.zindex),e.isie&&0==e.zindex&&"auto"==e.opt.zindex&&(e.zindex="auto"),!e.ispage||!l.cantouch&&!l.isieold&&!l.isie9mobile){var a=e.docscroll;e.ispage&&(a=e.haswrapper?e.win:e.doc),l.isie9mobile||e.css(a,{"overflow-y":"hidden"}),e.ispage&&l.isie7&&("BODY"==e.doc[0].nodeName?e.css(i("html"),{"overflow-y":"hidden"}):"HTML"==e.doc[0].nodeName&&e.css(i("body"),{"overflow-y":"hidden"})),!l.isios||e.ispage||e.haswrapper||e.css(i("body"),{"-webkit-overflow-scrolling":"touch"});var b=i(document.createElement("div"));b.css({position:"relative",top:0,float:"right",width:e.opt.cursorwidth,height:"0px","background-color":e.opt.cursorcolor,border:e.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":e.opt.cursorborderradius,"-moz-border-radius":e.opt.cursorborderradius,"border-radius":e.opt.cursorborderradius}),b.hborder=parseFloat(b.outerHeight()-b.innerHeight()),e.cursor=b;var g=i(document.createElement("div"));g.attr("id",e.id),g.addClass("nicescroll-rails");var j,m,n=["left","right"];for(var o in n)m=n[o],j=e.opt.railpadding[m],j?g.css("padding-"+m,j+"px"):e.opt.railpadding[m]=0;g.append(b),g.width=Math.max(parseFloat(e.opt.cursorwidth),b.outerWidth())+e.opt.railpadding.left+e.opt.railpadding.right,g.css({width:g.width+"px",zIndex:e.zindex,background:e.opt.background,cursor:"default"}),g.visibility=!0,g.scrollable=!0,g.align="left"==e.opt.railalign?0:1,e.rail=g,e.rail.drag=!1;var r=!1;if(!e.opt.boxzoom||e.ispage||l.isieold||(r=document.createElement("div"),e.bind(r,"click",e.doZoom),e.zoom=i(r),e.zoom.css({cursor:"pointer","z-index":e.zindex,backgroundImage:"url("+k+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),e.opt.dblclickzoom&&e.bind(e.win,"dblclick",e.doZoom),l.cantouch&&e.opt.gesturezoom&&(e.ongesturezoom=function(a){return a.scale>1.5&&e.doZoomIn(a),a.scale<.8&&e.doZoomOut(a),e.cancelEvent(a)},e.bind(e.win,"gestureend",e.ongesturezoom))),e.railh=!1,e.opt.horizrailenabled){e.css(a,{"overflow-x":"hidden"});var b=i(document.createElement("div"));b.css({position:"relative",top:0,height:e.opt.cursorwidth,width:"0px","background-color":e.opt.cursorcolor,border:e.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":e.opt.cursorborderradius,"-moz-border-radius":e.opt.cursorborderradius,"border-radius":e.opt.cursorborderradius}),b.wborder=parseFloat(b.outerWidth()-b.innerWidth()),e.cursorh=b;var s=i(document.createElement("div"));s.attr("id",e.id+"-hr"),s.addClass("nicescroll-rails"),s.height=Math.max(parseFloat(e.opt.cursorwidth),b.outerHeight()),s.css({height:s.height+"px",zIndex:e.zindex,background:e.opt.background}),s.append(b),s.visibility=!0,s.scrollable=!0,s.align="top"==e.opt.railvalign?0:1,e.railh=s,e.railh.drag=!1}if(e.ispage)g.css({position:"fixed",top:"0px",height:"100%"}),g.align?g.css({right:"0px"}):g.css({left:"0px"}),e.body.append(g),e.railh&&(s.css({position:"fixed",left:"0px",width:"100%"}),s.align?s.css({bottom:"0px"}):s.css({top:"0px"}),e.body.append(s));else{if(e.ishwscroll){"static"==e.win.css("position")&&e.css(e.win,{position:"relative"});var t="HTML"==e.win[0].nodeName?e.body:e.win;e.zoom&&(e.zoom.css({position:"absolute",top:1,right:0,"margin-right":g.width+4}),t.append(e.zoom)),g.css({position:"absolute",top:0}),g.align?g.css({right:0}):g.css({left:0}),t.append(g),s&&(s.css({position:"absolute",left:0,bottom:0}),s.align?s.css({bottom:0}):s.css({top:0}),t.append(s))}else{e.isfixed="fixed"==e.win.css("position");var u=e.isfixed?"fixed":"absolute";e.isfixed||(e.viewport=e.getViewport(e.win[0])),e.viewport&&(e.body=e.viewport,0==/fixed|relative|absolute/.test(e.viewport.css("position"))&&e.css(e.viewport,{position:"relative"})),g.css({position:u}),e.zoom&&e.zoom.css({position:u}),e.updateScrollBar(),e.body.append(g),e.zoom&&e.body.append(e.zoom),e.railh&&(s.css({position:u}),e.body.append(s))}l.isios&&e.css(e.win,{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)","-webkit-touch-callout":"none"}),l.isie&&e.opt.disableoutline&&e.win.attr("hideFocus","true"),l.iswebkit&&e.opt.disableoutline&&e.win.css({outline:"none"})}if(!1===e.opt.autohidemode?(e.autohidedom=!1,e.rail.css({opacity:e.opt.cursoropacitymax}),e.railh&&e.railh.css({opacity:e.opt.cursoropacitymax})):!0===e.opt.autohidemode||"leave"===e.opt.autohidemode?(e.autohidedom=i().add(e.rail),l.isie8&&(e.autohidedom=e.autohidedom.add(e.cursor)),e.railh&&(e.autohidedom=e.autohidedom.add(e.railh)),e.railh&&l.isie8&&(e.autohidedom=e.autohidedom.add(e.cursorh))):"scroll"==e.opt.autohidemode?(e.autohidedom=i().add(e.rail),e.railh&&(e.autohidedom=e.autohidedom.add(e.railh))):"cursor"==e.opt.autohidemode?(e.autohidedom=i().add(e.cursor),e.railh&&(e.autohidedom=e.autohidedom.add(e.cursorh))):"hidden"==e.opt.autohidemode&&(e.autohidedom=!1,e.hide(),e.locked=!1),l.isie9mobile){e.scrollmom=new v(e),e.onmangotouch=function(a){var b=e.getScrollTop(),c=e.getScrollLeft();if(b==e.scrollmom.lastscrolly&&c==e.scrollmom.lastscrollx)return!0;var d=b-e.mangotouch.sy,f=c-e.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(f,2)+Math.pow(d,2)))){var h=d<0?-1:1,i=f<0?-1:1,j=+new Date;if(e.mangotouch.lazy&&clearTimeout(e.mangotouch.lazy),j-e.mangotouch.tm>80||e.mangotouch.dry!=h||e.mangotouch.drx!=i)e.scrollmom.stop(),e.scrollmom.reset(c,b),e.mangotouch.sy=b,e.mangotouch.ly=b,e.mangotouch.sx=c,e.mangotouch.lx=c,e.mangotouch.dry=h,e.mangotouch.drx=i,e.mangotouch.tm=j;else{e.scrollmom.stop(),e.scrollmom.update(e.mangotouch.sx-f,e.mangotouch.sy-d),e.mangotouch.tm,e.mangotouch.tm=j;var l=Math.max(Math.abs(e.mangotouch.ly-b),Math.abs(e.mangotouch.lx-c));e.mangotouch.ly=b,e.mangotouch.lx=c,l>2&&(e.mangotouch.lazy=setTimeout(function(){e.mangotouch.lazy=!1,e.mangotouch.dry=0,e.mangotouch.drx=0,e.mangotouch.tm=0,e.scrollmom.doMomentum(30)},100))}}};var w=e.getScrollTop(),x=e.getScrollLeft();e.mangotouch={sy:w,ly:w,dry:0,sx:x,lx:x,drx:0,lazy:!1,tm:0},e.bind(e.docscroll,"scroll",e.onmangotouch)}else{if(l.cantouch||e.istouchcapable||e.opt.touchbehavior||l.hasmstouch){e.scrollmom=new v(e),e.ontouchstart=function(a){if(a.pointerType&&2!=a.pointerType)return!1;if(e.hasmoving=!1,!e.locked){if(l.hasmstouch)for(var b=!!a.target&&a.target;b;){var c=i(b).getNiceScroll();if(c.length>0&&c[0].me==e.me)break;if(c.length>0)return!1;if("DIV"==b.nodeName&&b.id==e.id)break;b=!!b.parentNode&&b.parentNode}e.cancelScroll();var b=e.getTarget(a);if(b){if(/INPUT/i.test(b.nodeName)&&/range/i.test(b.type))return e.stopPropagation(a)}if(!("clientX"in a)&&"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),e.forcescreen){var f=a,a={original:a.original?a.original:a};a.clientX=f.screenX,a.clientY=f.screenY}if(e.rail.drag={x:a.clientX,y:a.clientY,sx:e.scroll.x,sy:e.scroll.y,st:e.getScrollTop(),sl:e.getScrollLeft(),pt:2,dl:!1},e.ispage||!e.opt.directionlockdeadzone)e.rail.drag.dl="f";else{var g={w:i(window).width(),h:i(window).height()},h={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},j=Math.max(0,h.h-g.h),k=Math.max(0,h.w-g.w);!e.rail.scrollable&&e.railh.scrollable?e.rail.drag.ck=j>0&&"v":e.rail.scrollable&&!e.railh.scrollable?e.rail.drag.ck=k>0&&"h":e.rail.drag.ck=!1,e.rail.drag.ck||(e.rail.drag.dl="f")}if(e.opt.touchbehavior&&e.isiframe&&l.isie){var m=e.win.position();e.rail.drag.x+=m.left,e.rail.drag.y+=m.top}if(e.hasmoving=!1,e.lastmouseup=!1,e.scrollmom.reset(a.clientX,a.clientY),!l.cantouch&&!this.istouchcapable&&!l.hasmstouch){if(!(!!b&&/INPUT|SELECT|TEXTAREA/i.test(b.nodeName)))return!e.ispage&&l.hasmousecapture&&b.setCapture(),e.opt.touchbehavior?(b.onclick&&!b._onclick&&(b._onclick=b.onclick,b.onclick=function(a){new Date,e.scrollmom.lasttime;if(e.hasmoving)return!1;b._onclick.call(this,a)}),e.cancelEvent(a)):e.stopPropagation(a);/SUBMIT|CANCEL|BUTTON/i.test(i(b).attr("type"))&&(pc={tg:b,click:!1},e.preventclick=pc)}}},e.ontouchend=function(a){return(!a.pointerType||2==a.pointerType)&&(e.rail.drag&&2==e.rail.drag.pt&&(e.scrollmom.doMomentum(),e.rail.drag=!1,e.hasmoving&&(e.lastmouseup=!0,e.hideCursor(),l.hasmousecapture&&document.releaseCapture(),!l.cantouch))?e.cancelEvent(a):void 0)};var y=e.opt.touchbehavior&&e.isiframe&&!l.hasmousecapture;e.ontouchmove=function(a,b){if(a.pointerType&&2!=a.pointerType)return!1;if(e.rail.drag&&2==e.rail.drag.pt){if(l.cantouch&&void 0===a.original)return!0;e.hasmoving=!0,e.preventclick&&!e.preventclick.click&&(e.preventclick.click=e.preventclick.tg.onclick||!1,e.preventclick.tg.onclick=e.onpreventclick);if(a=i.extend({original:a},a),"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),e.forcescreen){var d=a,a={original:a.original?a.original:a};a.clientX=d.screenX,a.clientY=d.screenY}var f=ofy=0;if(y&&!b){var g=e.win.position();f=-g.left,ofy=-g.top}var h=a.clientY+ofy,j=h-e.rail.drag.y,k=a.clientX+f,m=k-e.rail.drag.x,n=e.rail.drag.st-j;if(e.ishwscroll&&e.opt.bouncescroll?n<0?n=Math.round(n/2):n>e.page.maxh&&(n=e.page.maxh+Math.round((n-e.page.maxh)/2)):(n<0&&(n=0,h=0),n>e.page.maxh&&(n=e.page.maxh,h=0)),e.railh&&e.railh.scrollable){var o=e.rail.drag.sl-m;e.ishwscroll&&e.opt.bouncescroll?o<0?o=Math.round(o/2):o>e.page.maxw&&(o=e.page.maxw+Math.round((o-e.page.maxw)/2)):(o<0&&(o=0,k=0),o>e.page.maxw&&(o=e.page.maxw,k=0))}var p=!1;if(e.rail.drag.dl)p=!0,"v"==e.rail.drag.dl?o=e.rail.drag.sl:"h"==e.rail.drag.dl&&(n=e.rail.drag.st);else{var q=Math.abs(j),r=Math.abs(m),s=e.opt.directionlockdeadzone;if("v"==e.rail.drag.ck){if(q>s&&r<=.3*q)return e.rail.drag=!1,!0;r>s&&(e.rail.drag.dl="f",i("body").scrollTop(i("body").scrollTop()))}else if("h"==e.rail.drag.ck){if(r>s&&q<=.3*r)return e.rail.drag=!1,!0;q>s&&(e.rail.drag.dl="f",i("body").scrollLeft(i("body").scrollLeft()))}}if(e.synched("touchmove",function(){e.rail.drag&&2==e.rail.drag.pt&&(e.prepareTransition&&e.prepareTransition(0),e.rail.scrollable&&e.setScrollTop(n),e.scrollmom.update(k,h),e.railh&&e.railh.scrollable?(e.setScrollLeft(o),e.showCursor(n,o)):e.showCursor(n),l.isie10&&document.selection.clear())}),l.ischrome&&e.istouchcapable&&(p=!1),p)return e.cancelEvent(a)}}}e.onmousedown=function(a,b){if(!e.rail.drag||1==e.rail.drag.pt){if(e.locked)return e.cancelEvent(a);e.cancelScroll(),e.rail.drag={x:a.clientX,y:a.clientY,sx:e.scroll.x,sy:e.scroll.y,pt:1,hr:!!b};var c=e.getTarget(a);return!e.ispage&&l.hasmousecapture&&c.setCapture(),e.isiframe&&!l.hasmousecapture&&(e.saved.csspointerevents=e.doc.css("pointer-events"),e.css(e.doc,{"pointer-events":"none"})),e.cancelEvent(a)}},e.onmouseup=function(a){if(e.rail.drag){if(l.hasmousecapture&&document.releaseCapture(),e.isiframe&&!l.hasmousecapture&&e.doc.css("pointer-events",e.saved.csspointerevents),1!=e.rail.drag.pt)return;return e.rail.drag=!1,e.cancelEvent(a)}},e.onmousemove=function(a){if(e.rail.drag){if(1!=e.rail.drag.pt)return;if(l.ischrome&&0==a.which)return e.onmouseup(a);if(e.cursorfreezed=!0,e.rail.drag.hr){e.scroll.x=e.rail.drag.sx+(a.clientX-e.rail.drag.x),e.scroll.x<0&&(e.scroll.x=0);var b=e.scrollvaluemaxw;e.scroll.x>b&&(e.scroll.x=b)}else{e.scroll.y=e.rail.drag.sy+(a.clientY-e.rail.drag.y),e.scroll.y<0&&(e.scroll.y=0);var c=e.scrollvaluemax;e.scroll.y>c&&(e.scroll.y=c)}return e.synched("mousemove",function(){e.rail.drag&&1==e.rail.drag.pt&&(e.showCursor(),e.rail.drag.hr?e.doScrollLeft(Math.round(e.scroll.x*e.scrollratio.x),e.opt.cursordragspeed):e.doScrollTop(Math.round(e.scroll.y*e.scrollratio.y),e.opt.cursordragspeed))}),e.cancelEvent(a)}},l.cantouch||e.opt.touchbehavior?(e.onpreventclick=function(a){if(e.preventclick)return e.preventclick.tg.onclick=e.preventclick.click,e.preventclick=!1,e.cancelEvent(a)},e.bind(e.win,"mousedown",e.ontouchstart),e.onclick=!l.isios&&function(a){return!e.lastmouseup||(e.lastmouseup=!1,e.cancelEvent(a))},e.opt.grabcursorenabled&&l.cursorgrabvalue&&(e.css(e.ispage?e.doc:e.win,{cursor:l.cursorgrabvalue}),e.css(e.rail,{cursor:l.cursorgrabvalue}))):("getSelection"in document?e.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?e.hasTextSelected=function(){return"None"!=document.selection.type}:e.hasTextSelected=function(){return!1},e.onselectionstart=function(a){e.ispage||(e.selectiondrag=e.win.offset())},e.onselectionend=function(a){e.selectiondrag=!1},e.onselectiondrag=function(a){e.selectiondrag&&e.hasTextSelected()&&e.debounced("selectionscroll",function(){z(a)},250)}),l.hasmstouch&&(e.css(e.rail,{"-ms-touch-action":"none"}),e.css(e.cursor,{"-ms-touch-action":"none"}),e.bind(e.win,"MSPointerDown",e.ontouchstart),e.bind(document,"MSPointerUp",e.ontouchend),e.bind(document,"MSPointerMove",e.ontouchmove),e.bind(e.cursor,"MSGestureHold",function(a){a.preventDefault()}),e.bind(e.cursor,"contextmenu",function(a){a.preventDefault()})),this.istouchcapable&&(e.bind(e.win,"touchstart",e.ontouchstart),e.bind(document,"touchend",e.ontouchend),e.bind(document,"touchcancel",e.ontouchend),e.bind(document,"touchmove",e.ontouchmove)),e.bind(e.cursor,"mousedown",e.onmousedown),e.bind(e.cursor,"mouseup",e.onmouseup),e.railh&&(e.bind(e.cursorh,"mousedown",function(a){e.onmousedown(a,!0)}),e.bind(e.cursorh,"mouseup",function(a){if(!e.rail.drag||2!=e.rail.drag.pt)return e.rail.drag=!1,e.hasmoving=!1,e.hideCursor(),l.hasmousecapture&&document.releaseCapture(),e.cancelEvent(a)})),(e.opt.cursordragontouch||!l.cantouch&&!e.opt.touchbehavior)&&(e.rail.css({cursor:"default"}),e.railh&&e.railh.css({cursor:"default"}),e.jqbind(e.rail,"mouseenter",function(){e.canshowonmouseevent&&e.showCursor(),e.rail.active=!0}),e.jqbind(e.rail,"mouseleave",function(){e.rail.active=!1,e.rail.drag||e.hideCursor()}),e.opt.sensitiverail&&(e.bind(e.rail,"click",function(a){e.doRailClick(a,!1,!1)}),e.bind(e.rail,"dblclick",function(a){e.doRailClick(a,!0,!1)}),e.bind(e.cursor,"click",function(a){e.cancelEvent(a)}),e.bind(e.cursor,"dblclick",function(a){e.cancelEvent(a)})),e.railh&&(e.jqbind(e.railh,"mouseenter",function(){e.canshowonmouseevent&&e.showCursor(),e.rail.active=!0}),e.jqbind(e.railh,"mouseleave",function(){e.rail.active=!1,e.rail.drag||e.hideCursor()}),e.opt.sensitiverail&&(e.bind(e.railh,"click",function(a){e.doRailClick(a,!1,!0)}),e.bind(e.railh,"dblclick",function(a){e.doRailClick(a,!0,!0)}),e.bind(e.cursorh,"click",function(a){e.cancelEvent(a)}),e.bind(e.cursorh,"dblclick",function(a){e.cancelEvent(a)})))),l.cantouch||e.opt.touchbehavior?(e.bind(l.hasmousecapture?e.win:document,"mouseup",e.ontouchend),e.bind(document,"mousemove",e.ontouchmove),e.onclick&&e.bind(document,"click",e.onclick),e.opt.cursordragontouch&&(e.bind(e.cursor,"mousedown",e.onmousedown),e.bind(e.cursor,"mousemove",e.onmousemove),e.cursorh&&e.bind(e.cursorh,"mousedown",function(a){e.onmousedown(a,!0)}),e.cursorh&&e.bind(e.cursorh,"mousemove",e.onmousemove))):(e.bind(l.hasmousecapture?e.win:document,"mouseup",e.onmouseup),e.bind(document,"mousemove",e.onmousemove),e.onclick&&e.bind(document,"click",e.onclick),!e.ispage&&e.opt.enablescrollonselection&&(e.bind(e.win[0],"mousedown",e.onselectionstart),e.bind(document,"mouseup",e.onselectionend),e.bind(e.cursor,"mouseup",e.onselectionend),e.cursorh&&e.bind(e.cursorh,"mouseup",e.onselectionend),e.bind(document,"mousemove",e.onselectiondrag)),e.zoom&&(e.jqbind(e.zoom,"mouseenter",function(){e.canshowonmouseevent&&e.showCursor(),e.rail.active=!0}),e.jqbind(e.zoom,"mouseleave",function(){e.rail.active=!1,e.rail.drag||e.hideCursor()}))),e.opt.enablemousewheel&&(e.isiframe||e.bind(l.isie&&e.ispage?document:e.win,"mousewheel",e.onmousewheel),e.bind(e.rail,"mousewheel",e.onmousewheel),e.railh&&e.bind(e.railh,"mousewheel",e.onmousewheelhr)),e.ispage||l.cantouch||/HTML|BODY/.test(e.win[0].nodeName)||(e.win.attr("tabindex")||e.win.attr({tabindex:f++}),e.jqbind(e.win,"focus",function(a){c=e.getTarget(a).id||!0,e.hasfocus=!0,e.canshowonmouseevent&&e.noticeCursor()}),e.jqbind(e.win,"blur",function(a){c=!1,e.hasfocus=!1}),e.jqbind(e.win,"mouseenter",function(a){d=e.getTarget(a).id||!0,e.hasmousefocus=!0,e.canshowonmouseevent&&e.noticeCursor()}),e.jqbind(e.win,"mouseleave",function(){d=!1,e.hasmousefocus=!1,e.rail.drag||e.hideCursor()}))}if(e.onkeypress=function(a){if(e.locked&&0==e.page.maxh)return!0;a=a||window.e;var b=e.getTarget(a);if(b&&/INPUT|TEXTAREA|SELECT|OPTION/.test(b.nodeName)){if(!(b.getAttribute("type")||b.type||!1)||!/submit|button|cancel/i.tp)return!0}if(e.hasfocus||e.hasmousefocus&&!c||e.ispage&&!c&&!d){var g=a.keyCode;if(e.locked&&27!=g)return e.cancelEvent(a);var h=a.ctrlKey||!1,i=a.shiftKey||!1,j=!1;switch(g){case 38:case 63233:e.doScrollBy(72),j=!0;break;case 40:case 63235:e.doScrollBy(-72),j=!0;break;case 37:case 63232:e.railh&&(h?e.doScrollLeft(0):e.doScrollLeftBy(72),j=!0);break;case 39:case 63234:e.railh&&(h?e.doScrollLeft(e.page.maxw):e.doScrollLeftBy(-72),j=!0);break;case 33:case 63276:e.doScrollBy(e.view.h),j=!0;break;case 34:case 63277:e.doScrollBy(-e.view.h),j=!0;break;case 36:case 63273:e.railh&&h?e.doScrollPos(0,0):e.doScrollTo(0),j=!0;break;case 35:case 63275:e.railh&&h?e.doScrollPos(e.page.maxw,e.page.maxh):e.doScrollTo(e.page.maxh),j=!0;break;case 32:e.opt.spacebarenabled&&(i?e.doScrollBy(e.view.h):e.doScrollBy(-e.view.h),j=!0);break;case 27:e.zoomactive&&(e.doZoom(),j=!0)}if(j)return e.cancelEvent(a)}},e.opt.enablekeyboard&&e.bind(document,l.isopera&&!l.isopera12?"keypress":"keydown",e.onkeypress),e.bind(window,"resize",e.lazyResize),e.bind(window,"orientationchange",e.lazyResize),e.bind(window,"load",e.lazyResize),l.ischrome&&!e.ispage&&!e.haswrapper){var A=e.win.attr("style"),B=parseFloat(e.win.css("width"))+1;e.win.css("width",B),e.synched("chromefix",function(){e.win.attr("style",A)})}e.onAttributeChange=function(a){e.lazyResize(250)},e.ispage||e.haswrapper||(!1!==q?(e.observer=new q(function(a){a.forEach(e.onAttributeChange)}),e.observer.observe(e.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),e.observerremover=new q(function(a){a.forEach(function(a){if(a.removedNodes.length>0)for(var b in a.removedNodes)if(a.removedNodes[b]==e.win[0])return e.remove()})}),e.observerremover.observe(e.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(e.bind(e.win,l.isie&&!l.isie9?"propertychange":"DOMAttrModified",e.onAttributeChange),l.isie9&&e.win[0].attachEvent("onpropertychange",e.onAttributeChange),e.bind(e.win,"DOMNodeRemoved",function(a){a.target==e.win[0]&&e.remove()}))),!e.ispage&&e.opt.boxzoom&&e.bind(window,"resize",e.resizeZoom),e.istextarea&&e.bind(e.win,"mouseup",e.lazyResize),e.checkrtlmode=!0,e.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){C.call(e.doc[0],!1)},500),e.bind(this.doc,"load",C))},this.showCursor=function(a,b){e.cursortimeout&&(clearTimeout(e.cursortimeout),e.cursortimeout=0),e.rail&&(e.autohidedom&&(e.autohidedom.stop().css({opacity:e.opt.cursoropacitymax}),e.cursoractive=!0),e.rail.drag&&1==e.rail.drag.pt||(void 0!==a&&!1!==a&&(e.scroll.y=Math.round(1*a/e.scrollratio.y)),void 0!==b&&(e.scroll.x=Math.round(1*b/e.scrollratio.x))),e.cursor.css({height:e.cursorheight,top:e.scroll.y}),e.cursorh&&(!e.rail.align&&e.rail.visibility?e.cursorh.css({width:e.cursorwidth,left:e.scroll.x+e.rail.width}):e.cursorh.css({width:e.cursorwidth,left:e.scroll.x}),e.cursoractive=!0),e.zoom&&e.zoom.stop().css({opacity:e.opt.cursoropacitymax}))},this.hideCursor=function(a){e.cursortimeout||e.rail&&e.autohidedom&&(e.hasmousefocus&&"leave"==e.opt.autohidemode||(e.cursortimeout=setTimeout(function(){e.rail.active&&e.showonmouseevent||(e.autohidedom.stop().animate({opacity:e.opt.cursoropacitymin}),e.zoom&&e.zoom.stop().animate({opacity:e.opt.cursoropacitymin}),e.cursoractive=!1),e.cursortimeout=0},a||e.opt.hidecursordelay)))},this.noticeCursor=function(a,b,c){e.showCursor(b,c),e.rail.active||e.hideCursor(a)},this.getContentSize=e.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:e.haswrapper?function(){return{w:e.doc.outerWidth()+parseInt(e.win.css("paddingLeft"))+parseInt(e.win.css("paddingRight")),h:e.doc.outerHeight()+parseInt(e.win.css("paddingTop"))+parseInt(e.win.css("paddingBottom"))}}:function(){return{w:e.docscroll[0].scrollWidth,h:e.docscroll[0].scrollHeight}},this.onResize=function(a,b){if(!e||!e.win)return!1;if(!e.haswrapper&&!e.ispage){if("none"==e.win.css("display"))return e.visibility&&e.hideRail().hideRailHr(),!1;e.hidden||e.visibility||e.showRail().showRailHr()}var c=e.page.maxh,d=e.page.maxw,f={h:e.view.h,w:e.view.w};if(e.view={w:e.ispage?e.win.width():parseInt(e.win[0].clientWidth),h:e.ispage?e.win.height():parseInt(e.win[0].clientHeight)},e.page=b||e.getContentSize(),e.page.maxh=Math.max(0,e.page.h-e.view.h),e.page.maxw=Math.max(0,e.page.w-e.view.w),e.page.maxh==c&&e.page.maxw==d&&e.view.w==f.w){if(e.ispage)return e;var g=e.win.offset();if(e.lastposition){var h=e.lastposition;if(h.top==g.top&&h.left==g.left)return e}e.lastposition=g}return 0==e.page.maxh?(e.hideRail(),e.scrollvaluemax=0,e.scroll.y=0,e.scrollratio.y=0,e.cursorheight=0,e.setScrollTop(0),e.rail.scrollable=!1):e.rail.scrollable=!0,0==e.page.maxw?(e.hideRailHr(),e.scrollvaluemaxw=0,e.scroll.x=0,e.scrollratio.x=0,e.cursorwidth=0,e.setScrollLeft(0),e.railh.scrollable=!1):e.railh.scrollable=!0,e.locked=0==e.page.maxh&&0==e.page.maxw,e.locked?(e.ispage||e.updateScrollBar(e.view),!1):(e.hidden||e.visibility?e.hidden||e.railh.visibility||e.showRailHr():e.showRail().showRailHr(),e.istextarea&&e.win.css("resize")&&"none"!=e.win.css("resize")&&(e.view.h-=20),e.cursorheight=Math.min(e.view.h,Math.round(e.view.h*(e.view.h/e.page.h))),e.cursorheight=e.opt.cursorfixedheight?e.opt.cursorfixedheight:Math.max(e.opt.cursorminheight,e.cursorheight),e.cursorwidth=Math.min(e.view.w,Math.round(e.view.w*(e.view.w/e.page.w))),e.cursorwidth=e.opt.cursorfixedheight?e.opt.cursorfixedheight:Math.max(e.opt.cursorminheight,e.cursorwidth),e.scrollvaluemax=e.view.h-e.cursorheight-e.cursor.hborder,e.railh&&(e.railh.width=e.page.maxh>0?e.view.w-e.rail.width:e.view.w,e.scrollvaluemaxw=e.railh.width-e.cursorwidth-e.cursorh.wborder),e.checkrtlmode&&e.railh&&(e.checkrtlmode=!1,e.opt.rtlmode&&0==e.scroll.x&&e.setScrollLeft(e.page.maxw)),e.ispage||e.updateScrollBar(e.view),e.scrollratio={x:e.page.maxw/e.scrollvaluemaxw,y:e.page.maxh/e.scrollvaluemax},e.getScrollTop()>e.page.maxh?e.doScrollTop(e.page.maxh):(e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y)),e.scroll.x=Math.round(e.getScrollLeft()*(1/e.scrollratio.x)),e.cursoractive&&e.noticeCursor()),e.scroll.y&&0==e.getScrollTop()&&e.doScrollTo(Math.floor(e.scroll.y*e.scrollratio.y)),e)},this.resize=e.onResize,this.lazyResize=function(a){return a=isNaN(a)?30:a,e.delayed("resize",e.resize,a),e},this._bind=function(a,b,c,d){e.events.push({e:a,n:b,f:c,b:d,q:!1}),a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},this.jqbind=function(a,b,c){e.events.push({e:a,n:b,f:c,q:!0}),i(a).bind(b,c)},this.bind=function(a,b,c,d){var f="jquery"in a?a[0]:a;if("mousewheel"==b)if("onwheel"in e.win)e._bind(f,"wheel",c,d||!1);else{var g=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";w(f,g,c,d||!1),"DOMMouseScroll"==g&&w(f,"MozMousePixelScroll",c,d||!1)}else if(f.addEventListener){if(l.cantouch&&/mouseup|mousedown|mousemove/.test(b)){var h="mousedown"==b?"touchstart":"mouseup"==b?"touchend":"touchmove";e._bind(f,h,function(a){if(a.touches){if(a.touches.length<2){var b=a.touches.length?a.touches[0]:a;b.original=a,c.call(this,b)}}else if(a.changedTouches){var b=a.changedTouches[0];b.original=a,c.call(this,b)}},d||!1)}e._bind(f,b,c,d||!1),l.cantouch&&"mouseup"==b&&e._bind(f,"touchcancel",c,d||!1)}else e._bind(f,b,function(a){return a=a||window.event||!1,a&&a.srcElement&&(a.target=a.srcElement),"pageY"in a||(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),!1!==c.call(f,a)&&!1!==d||e.cancelEvent(a)})},this._unbind=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=!1},this.unbindAll=function(){for(var a=0;a<e.events.length;a++){var b=e.events[a];b.q?b.e.unbind(b.n,b.f):e._unbind(b.e,b.n,b.f,b.b)}},this.cancelEvent=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.preventManipulation&&a.preventManipulation(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1)},this.stopPropagation=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.stopPropagation?a.stopPropagation():(a.cancelBubble&&(a.cancelBubble=!0),!1))},this.showRail=function(){return 0==e.page.maxh||!e.ispage&&"none"==e.win.css("display")||(e.visibility=!0,e.rail.visibility=!0,e.rail.css("display","block")),e},this.showRailHr=function(){return e.railh?(0==e.page.maxw||!e.ispage&&"none"==e.win.css("display")||(e.railh.visibility=!0,e.railh.css("display","block")),e):e},this.hideRail=function(){return e.visibility=!1,e.rail.visibility=!1,e.rail.css("display","none"),e},this.hideRailHr=function(){return e.railh?(e.railh.visibility=!1,e.railh.css("display","none"),e):e},this.show=function(){return e.hidden=!1,e.locked=!1,e.showRail().showRailHr()},this.hide=function(){return e.hidden=!0,e.locked=!0,e.hideRail().hideRailHr()},this.toggle=function(){return e.hidden?e.show():e.hide()},this.remove=function(){e.stop(),e.cursortimeout&&clearTimeout(e.cursortimeout),e.doZoomOut(),e.unbindAll(),l.isie9&&e.win[0].detachEvent("onpropertychange",e.onAttributeChange),!1!==e.observer&&e.observer.disconnect(),!1!==e.observerremover&&e.observerremover.disconnect(),e.events=null,e.cursor&&e.cursor.remove(),e.cursorh&&e.cursorh.remove(),e.rail&&e.rail.remove(),e.railh&&e.railh.remove(),e.zoom&&e.zoom.remove();for(var a=0;a<e.saved.css.length;a++){var b=e.saved.css[a];b[0].css(b[1],void 0===b[2]?"":b[2])}e.saved=!1,e.me.data("__nicescroll","");var c=i.nicescroll;c.each(function(a){if(this&&this.id===e.id){delete c[a];for(var b=++a;b<c.length;b++,a++)c[a]=c[b];c.length--,c.length&&delete c[c.length]}});for(var d in e)e[d]=null,delete e[d];e=null},this.scrollstart=function(a){return this.onscrollstart=a,e},this.scrollend=function(a){return this.onscrollend=a,e},this.scrollcancel=function(a){return this.onscrollcancel=a,e},this.zoomin=function(a){return this.onzoomin=a,e},this.zoomout=function(a){return this.onzoomout=a,e},this.isScrollable=function(a){var b=a.target?a.target:a;if("OPTION"==b.nodeName)return!0;for(;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=i(b),d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d))return b.clientHeight!=b.scrollHeight;b=!!b.parentNode&&b.parentNode}return!1},this.getViewport=function(a){for(var b=!(!a||!a.parentNode)&&a.parentNode;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=i(b);if(/fixed|absolute/.test(c.css("position")))return c;var d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&b.clientHeight!=b.scrollHeight)return c;if(c.getNiceScroll().length>0)return c;b=!!b.parentNode&&b.parentNode}return!1},this.onmousewheel=function(a){if(e.locked)return e.debounced("checkunlock",e.resize,250),!0;if(e.rail.drag)return e.cancelEvent(a);if("auto"==e.opt.oneaxismousemode&&0!=a.deltaX&&(e.opt.oneaxismousemode=!1),e.opt.oneaxismousemode&&0==a.deltaX&&!e.rail.scrollable)return!e.railh||!e.railh.scrollable||e.onmousewheelhr(a);var b=+new Date,c=!1;if(e.opt.preservenativescrolling&&e.checkarea+600<b&&(e.nativescrollingarea=e.isScrollable(a),c=!0),e.checkarea=b,e.nativescrollingarea)return!0;var d=x(a,!1,c);return d&&(e.checkarea=0),d},this.onmousewheelhr=function(a){if(e.locked||!e.railh.scrollable)return!0;if(e.rail.drag)return e.cancelEvent(a);var b=+new Date,c=!1;return e.opt.preservenativescrolling&&e.checkarea+600<b&&(e.nativescrollingarea=e.isScrollable(a),c=!0),e.checkarea=b,!!e.nativescrollingarea||(e.locked?e.cancelEvent(a):x(a,!0,c))},this.stop=function(){return e.cancelScroll(),e.scrollmon&&e.scrollmon.stop(),e.cursorfreezed=!1,e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y)),e.noticeCursor(),e},this.getTransitionSpeed=function(a){var b=Math.round(10*e.opt.scrollspeed),c=Math.min(b,Math.round(a/20*e.opt.scrollspeed));return c>20?c:0},e.opt.smoothscroll?e.ishwscroll&&l.hastransition&&e.opt.usetransition?(this.prepareTransition=function(a,b){var c=b?a>20?a:0:e.getTransitionSpeed(a),d=c?l.prefixstyle+"transform "+c+"ms ease-out":"";return e.lasttransitionstyle&&e.lasttransitionstyle==d||(e.lasttransitionstyle=d,e.doc.css(l.transitionstyle,d)),c},this.doScrollLeft=function(a,b){var c=e.scrollrunning?e.newscrolly:e.getScrollTop();e.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=e.scrollrunning?e.newscrollx:e.getScrollLeft();e.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=e.getScrollTop(),f=e.getScrollLeft();return((e.newscrolly-d)*(b-d)<0||(e.newscrollx-f)*(a-f)<0)&&e.cancelScroll(),0==e.opt.bouncescroll&&(b<0?b=0:b>e.page.maxh&&(b=e.page.maxh),a<0?a=0:a>e.page.maxw&&(a=e.page.maxw)),(!e.scrollrunning||a!=e.newscrollx||b!=e.newscrolly)&&(e.newscrolly=b,e.newscrollx=a,e.newscrollspeed=c||!1,!e.timer&&void(e.timer=setTimeout(function(){var c=e.getScrollTop(),d=e.getScrollLeft(),f={};f.x=a-d,f.y=b-c,f.px=d,f.py=c;var g=Math.round(Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2))),h=e.newscrollspeed&&e.newscrollspeed>1?e.newscrollspeed:e.getTransitionSpeed(g);if(e.newscrollspeed&&e.newscrollspeed<=1&&(h*=e.newscrollspeed),e.prepareTransition(h,!0),e.timerscroll&&e.timerscroll.tm&&clearInterval(e.timerscroll.tm),h>0){if(!e.scrollrunning&&e.onscrollstart){var i={type:"scrollstart",current:{x:d,y:c},request:{x:a,y:b},end:{x:e.newscrollx,y:e.newscrolly},speed:h};e.onscrollstart.call(e,i)}l.transitionend?e.scrollendtrapped||(e.scrollendtrapped=!0,e.bind(e.doc,l.transitionend,e.onScrollEnd,!1)):(e.scrollendtrapped&&clearTimeout(e.scrollendtrapped),e.scrollendtrapped=setTimeout(e.onScrollEnd,h));var j=c,k=d;e.timerscroll={bz:new BezierClass(j,e.newscrolly,h,0,0,.58,1),bh:new BezierClass(k,e.newscrollx,h,0,0,.58,1)},e.cursorfreezed||(e.timerscroll.tm=setInterval(function(){e.showCursor(e.getScrollTop(),e.getScrollLeft())},60))}e.synched("doScroll-set",function(){e.timer=0,e.scrollendtrapped&&(e.scrollrunning=!0),e.setScrollTop(e.newscrolly),e.setScrollLeft(e.newscrollx),e.scrollendtrapped||e.onScrollEnd()})},50)))},this.cancelScroll=function(){if(!e.scrollendtrapped)return!0;var a=e.getScrollTop(),b=e.getScrollLeft();return e.scrollrunning=!1,l.transitionend||clearTimeout(l.transitionend),e.scrollendtrapped=!1,e._unbind(e.doc,l.transitionend,e.onScrollEnd),e.prepareTransition(0),e.setScrollTop(a),e.railh&&e.setScrollLeft(b),e.timerscroll&&e.timerscroll.tm&&clearInterval(e.timerscroll.tm),e.timerscroll=!1,e.cursorfreezed=!1,e.showCursor(a,b),e},this.onScrollEnd=function(){e.scrollendtrapped&&e._unbind(e.doc,l.transitionend,e.onScrollEnd),e.scrollendtrapped=!1,e.prepareTransition(0),e.timerscroll&&e.timerscroll.tm&&clearInterval(e.timerscroll.tm),e.timerscroll=!1;var a=e.getScrollTop(),b=e.getScrollLeft();if(e.setScrollTop(a),e.railh&&e.setScrollLeft(b),e.noticeCursor(!1,a,b),e.cursorfreezed=!1,a<0?a=0:a>e.page.maxh&&(a=e.page.maxh),b<0?b=0:b>e.page.maxw&&(b=e.page.maxw),a!=e.newscrolly||b!=e.newscrollx)return e.doScrollPos(b,a,e.opt.snapbackspeed);if(e.onscrollend&&e.scrollrunning){var c={type:"scrollend",current:{x:b,y:a},end:{x:e.newscrollx,y:e.newscrolly}};e.onscrollend.call(e,c)}e.scrollrunning=!1}):(this.doScrollLeft=function(a,b){var c=e.scrollrunning?e.newscrolly:e.getScrollTop();e.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=e.scrollrunning?e.newscrollx:e.getScrollLeft();e.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){function l(){if(e.cancelAnimationFrame)return!0;if(e.scrollrunning=!0,k=1-k)return e.timer=m(l)||1;var a=0,b=sy=e.getScrollTop();if(e.dst.ay){b=e.bzscroll?e.dst.py+e.bzscroll.getNow()*e.dst.ay:e.newscrolly;var c=b-sy;(c<0&&b<e.newscrolly||c>0&&b>e.newscrolly)&&(b=e.newscrolly),e.setScrollTop(b),b==e.newscrolly&&(a=1)}else a=1;var d=sx=e.getScrollLeft();if(e.dst.ax){d=e.bzscroll?e.dst.px+e.bzscroll.getNow()*e.dst.ax:e.newscrollx;var c=d-sx;(c<0&&d<e.newscrollx||c>0&&d>e.newscrollx)&&(d=e.newscrollx),e.setScrollLeft(d),d==e.newscrollx&&(a+=1)}else a+=1;if(2==a){if(e.timer=0,e.cursorfreezed=!1,e.bzscroll=!1,e.scrollrunning=!1,b<0?b=0:b>e.page.maxh&&(b=e.page.maxh),d<0?d=0:d>e.page.maxw&&(d=e.page.maxw),d!=e.newscrollx||b!=e.newscrolly)e.doScrollPos(d,b);else if(e.onscrollend){var f={type:"scrollend",current:{x:sx,y:sy},end:{x:e.newscrollx,y:e.newscrolly}};e.onscrollend.call(e,f)}}else e.timer=m(l)||1}var b=void 0===b||!1===b?e.getScrollTop(!0):b;if(e.timer&&e.newscrolly==b&&e.newscrollx==a)return!0;e.timer&&n(e.timer),e.timer=0;var d=e.getScrollTop(),f=e.getScrollLeft();((e.newscrolly-d)*(b-d)<0||(e.newscrollx-f)*(a-f)<0)&&e.cancelScroll(),e.newscrolly=b,e.newscrollx=a,e.bouncescroll&&e.rail.visibility||(e.newscrolly<0?e.newscrolly=0:e.newscrolly>e.page.maxh&&(e.newscrolly=e.page.maxh)),e.bouncescroll&&e.railh.visibility||(e.newscrollx<0?e.newscrollx=0:e.newscrollx>e.page.maxw&&(e.newscrollx=e.page.maxw)),e.dst={},e.dst.x=a-f,e.dst.y=b-d,e.dst.px=f,e.dst.py=d;var g=Math.round(Math.sqrt(Math.pow(e.dst.x,2)+Math.pow(e.dst.y,2)));e.dst.ax=e.dst.x/g,e.dst.ay=e.dst.y/g;var h=0,i=g;0==e.dst.x?(h=d,i=b,e.dst.ay=1,e.dst.py=0):0==e.dst.y&&(h=f,i=a,e.dst.ax=1,e.dst.px=0);var j=e.getTransitionSpeed(g);if(c&&c<=1&&(j*=c),e.bzscroll=j>0&&(e.bzscroll?e.bzscroll.update(i,j):new BezierClass(h,i,j,0,1,0,1)),!e.timer){(d==e.page.maxh&&b>=e.page.maxh||f==e.page.maxw&&a>=e.page.maxw)&&e.checkContentSize();var k=1;if(e.cancelAnimationFrame=!1,e.timer=1,e.onscrollstart&&!e.scrollrunning){var o={type:"scrollstart",current:{x:f,y:d},request:{x:a,y:b},end:{x:e.newscrollx,y:e.newscrolly},speed:j};e.onscrollstart.call(e,o)}l(),(d==e.page.maxh&&b>=d||f==e.page.maxw&&a>=f)&&e.checkContentSize(),e.noticeCursor()}},this.cancelScroll=function(){return e.timer&&n(e.timer),e.timer=0,e.bzscroll=!1,e.scrollrunning=!1,e}):(this.doScrollLeft=function(a,b){var c=e.getScrollTop();e.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=e.getScrollLeft();e.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=a>e.page.maxw?e.page.maxw:a;d<0&&(d=0);var f=b>e.page.maxh?e.page.maxh:b;f<0&&(f=0),e.synched("scroll",function(){e.setScrollTop(f),e.setScrollLeft(d)})},this.cancelScroll=function(){}),this.doScrollBy=function(a,b){var c=0;if(b)c=Math.floor((e.scroll.y-a)*e.scrollratio.y);else{c=(e.timer?e.newscrolly:e.getScrollTop(!0))-a}if(e.bouncescroll){var f=Math.round(e.view.h/2);c<-f?c=-f:c>e.page.maxh+f&&(c=e.page.maxh+f)}return e.cursorfreezed=!1,py=e.getScrollTop(!0),c<0&&py<=0?e.noticeCursor():c>e.page.maxh&&py>=e.page.maxh?(e.checkContentSize(),e.noticeCursor()):void e.doScrollTop(c)},this.doScrollLeftBy=function(a,b){var c=0;if(b)c=Math.floor((e.scroll.x-a)*e.scrollratio.x);else{c=(e.timer?e.newscrollx:e.getScrollLeft(!0))-a}if(e.bouncescroll){var f=Math.round(e.view.w/2);c<-f?c=-f:c>e.page.maxw+f&&(c=e.page.maxw+f)}return e.cursorfreezed=!1,px=e.getScrollLeft(!0),c<0&&px<=0?e.noticeCursor():c>e.page.maxw&&px>=e.page.maxw?e.noticeCursor():void e.doScrollLeft(c)},this.doScrollTo=function(a,b){var c=b?Math.round(a*e.scrollratio.y):a;c<0?c=0:c>e.page.maxh&&(c=e.page.maxh),e.cursorfreezed=!1,e.doScrollTop(a)},this.checkContentSize=function(){var a=e.getContentSize();a.h==e.page.h&&a.w==e.page.w||e.resize(!1,a)},e.onscroll=function(a){e.rail.drag||e.cursorfreezed||e.synched("scroll",function(){e.scroll.y=Math.round(e.getScrollTop()*(1/e.scrollratio.y)),e.railh&&(e.scroll.x=Math.round(e.getScrollLeft()*(1/e.scrollratio.x))),e.noticeCursor()})},e.bind(e.docscroll,"scroll",e.onscroll),this.doZoomIn=function(a){if(!e.zoomactive){e.zoomactive=!0,e.zoomrestore={style:{}};var b=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],c=e.win[0].style;for(var d in b){var f=b[d];e.zoomrestore.style[f]=void 0!==c[f]?c[f]:""}e.zoomrestore.style.width=e.win.css("width"),e.zoomrestore.style.height=e.win.css("height"),e.zoomrestore.padding={w:e.win.outerWidth()-e.win.width(),h:e.win.outerHeight()-e.win.height()},l.isios4&&(e.zoomrestore.scrollTop=i(window).scrollTop(),i(window).scrollTop(0)),e.win.css({position:l.isios4?"absolute":"fixed",top:0,left:0,"z-index":h+100,margin:"0px"});var g=e.win.css("backgroundColor");return(""==g||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(g))&&e.win.css("backgroundColor","#fff"),e.rail.css({"z-index":h+101}),e.zoom.css({"z-index":h+102}),e.zoom.css("backgroundPosition","0px -18px"),e.resizeZoom(),e.onzoomin&&e.onzoomin.call(e),e.cancelEvent(a)}},this.doZoomOut=function(a){if(e.zoomactive)return e.zoomactive=!1,e.win.css("margin",""),e.win.css(e.zoomrestore.style),l.isios4&&i(window).scrollTop(e.zoomrestore.scrollTop),e.rail.css({"z-index":e.zindex}),e.zoom.css({"z-index":e.zindex}),e.zoomrestore=!1,e.zoom.css("backgroundPosition","0px 0px"),e.onResize(),e.onzoomout&&e.onzoomout.call(e),e.cancelEvent(a)},this.doZoom=function(a){return e.zoomactive?e.doZoomOut(a):e.doZoomIn(a)},this.resizeZoom=function(){if(e.zoomactive){var a=e.getScrollTop();e.win.css({width:i(window).width()-e.zoomrestore.padding.w+"px",height:i(window).height()-e.zoomrestore.padding.h+"px"}),e.onResize(),e.setScrollTop(Math.min(e.page.maxh,a))}},this.init(),i.nicescroll.push(this)},v=function(a){var b=this;this.nc=a,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(a,c){b.stop();var d=b.time();b.steptime=0,b.lasttime=d,b.speedx=0,b.speedy=0,b.lastx=a,b.lasty=c,b.lastscrollx=-1,b.lastscrolly=-1},this.update=function(a,c){var d=b.time();b.steptime=d-b.lasttime,b.lasttime=d;var e=c-b.lasty,f=a-b.lastx,g=b.nc.getScrollTop(),h=b.nc.getScrollLeft(),i=g+e,j=h+f;b.snapx=j<0||j>b.nc.page.maxw,b.snapy=i<0||i>b.nc.page.maxh,b.speedx=f,b.speedy=e,b.lastx=a,b.lasty=c},this.stop=function(){b.nc.unsynched("domomentum2d"),b.timer&&clearTimeout(b.timer),b.timer=0,b.lastscrollx=-1,b.lastscrolly=-1},this.doSnapy=function(a,c){var d=!1;c<0?(c=0,d=!0):c>b.nc.page.maxh&&(c=b.nc.page.maxh,d=!0),a<0?(a=0,d=!0):a>b.nc.page.maxw&&(a=b.nc.page.maxw,d=!0),d&&b.nc.doScrollPos(a,c,b.nc.opt.snapbackspeed)},this.doMomentum=function(a){var c=b.time(),d=a?c+a:b.lasttime,e=b.nc.getScrollLeft(),f=b.nc.getScrollTop(),g=b.nc.page.maxh,h=b.nc.page.maxw;b.speedx=h>0?Math.min(60,b.speedx):0,b.speedy=g>0?Math.min(60,b.speedy):0;var i=d&&c-d<=60;(f<0||f>g||e<0||e>h)&&(i=!1);var j=!(!b.speedy||!i)&&b.speedy,k=!(!b.speedx||!i)&&b.speedx;if(j||k){var l=Math.max(16,b.steptime);if(l>50){var m=l/50;b.speedx*=m,b.speedy*=m,l=50}b.demulxy=0,b.lastscrollx=b.nc.getScrollLeft(),b.chkx=b.lastscrollx,b.lastscrolly=b.nc.getScrollTop(),b.chky=b.lastscrolly;var n=b.lastscrollx,o=b.lastscrolly,p=function(){var a=b.time()-c>600?.04:.02;b.speedx&&(n=Math.floor(b.lastscrollx-b.speedx*(1-b.demulxy)),b.lastscrollx=n,(n<0||n>h)&&(a=.1)),b.speedy&&(o=Math.floor(b.lastscrolly-b.speedy*(1-b.demulxy)),b.lastscrolly=o,(o<0||o>g)&&(a=.1)),b.demulxy=Math.min(1,b.demulxy+a),b.nc.synched("domomentum2d",function(){if(b.speedx){b.nc.getScrollLeft()!=b.chkx&&b.stop(),b.chkx=n,b.nc.setScrollLeft(n)}if(b.speedy){b.nc.getScrollTop()!=b.chky&&b.stop(),b.chky=o,b.nc.setScrollTop(o)}b.timer||(b.nc.hideCursor(),b.doSnapy(n,o))}),b.demulxy<1?b.timer=setTimeout(p,l):(b.stop(),b.nc.hideCursor(),b.doSnapy(n,o))};p()}else b.doSnapy(b.nc.getScrollLeft(),b.nc.getScrollTop())}},w=b.fn.scrollTop;b.cssHooks.pageYOffset={get:function(a,b,c){var d=i.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollTop():w.call(a)},set:function(a,b){var c=i.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollTop(parseInt(b)):w.call(a,b),this}},b.fn.scrollTop=function(a){if(void 0===a){var b=!!this[0]&&(i.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollTop():w.call(this)}return this.each(function(){var b=i.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollTop(parseInt(a)):w.call(i(this),a)})};var x=b.fn.scrollLeft;i.cssHooks.pageXOffset={get:function(a,b,c){var d=i.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollLeft():x.call(a)},set:function(a,b){var c=i.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollLeft(parseInt(b)):x.call(a,b),this}},b.fn.scrollLeft=function(a){if(void 0===a){var b=!!this[0]&&(i.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollLeft():x.call(this)}return this.each(function(){var b=i.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollLeft(parseInt(a)):x.call(i(this),a)})};var y=function(b){var c=this;if(this.length=0,this.name="nicescrollarray",this.each=function(a){for(var b=0,d=0;b<c.length;b++)a.call(c[b],d++);return c},this.push=function(a){c[c.length]=a,c.length++},this.eq=function(a){return c[a]},b)for(a=0;a<b.length;a++){var d=i.data(b[a],"__nicescroll")||!1;d&&(this[this.length]=d,this.length++)}return this};z(y.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(a,b){a[b]=function(){var a=arguments;return this.each(function(){this[b].apply(this,a)})}}),b.fn.getNiceScroll=function(a){return void 0===a?new y(this):this[a]&&i.data(this[a],"__nicescroll")||!1},b.extend(b.expr[":"],{nicescroll:function(a){return!!i.data(a,"__nicescroll")}}),i.fn.niceScroll=function(a,b){void 0===b&&("object"!=typeof a||"jquery"in a||(b=a,a=!1));var c=new y;void 0===b&&(b={}),a&&(b.doc=i(a),b.win=i(this));var d=!("doc"in b);return d||"win"in b||(b.win=i(this)),this.each(function(){var a=i(this).data("__nicescroll")||!1;a||(b.doc=d?i(this):b.doc,a=new u(b,i(this)),i(this).data("__nicescroll",a)),c.push(a)}),1==c.length?c[0]:c},window.NiceScroll={getjQuery:function(){return b}},i.nicescroll||(i.nicescroll=new y,i.nicescroll.options=r)}(jQuery),function(b){function c(){var a=document.getElementsByTagName("script"),b=a[a.length-1].src.split("?")[0];return b.split("/").length>0?b.split("/").slice(0,-1).join("/")+"/":""}function d(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}var e=!1,f=!1,g=5e3,h=2e3,i=0,j=b,k=c(),l=["ms","moz","webkit","o"],m=window.requestAnimationFrame||!1,n=window.cancelAnimationFrame||!1;if(!m)for(var o in l){var p=l[o];m||(m=window[p+"RequestAnimationFrame"]),n||(n=window[p+"CancelAnimationFrame"]||window[p+"CancelRequestAnimationFrame"])}var q=window.MutationObserver||window.WebKitMutationObserver||!1,r={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:"auto"},s=!1,t=function(){function a(){var a=["-moz-grab","-webkit-grab","grab"];(c.ischrome&&!c.ischrome22||c.isie)&&(a=[]);for(var d=0;d<a.length;d++){var e=a[d];if(b.style.cursor=e,b.style.cursor==e)return e}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(s)return s;var b=document.createElement("DIV"),c={};c.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,c.isopera="opera"in window,c.isopera12=c.isopera&&"getUserMedia"in navigator,c.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),c.isie="all"in document&&"attachEvent"in b&&!c.isopera,c.isieold=c.isie&&!("msInterpolationMode"in b.style),c.isie7=c.isie&&!c.isieold&&(!("documentMode"in document)||7==document.documentMode),c.isie8=c.isie&&"documentMode"in document&&8==document.documentMode,c.isie9=c.isie&&"performance"in window&&document.documentMode>=9,c.isie10=c.isie&&"performance"in window&&document.documentMode>=10,c.isie9mobile=/iemobile.9/i.test(navigator.userAgent),c.isie9mobile&&(c.isie9=!1),c.isie7mobile=!c.isie9mobile&&c.isie7&&/iemobile/i.test(navigator.userAgent),c.ismozilla="MozAppearance"in b.style,c.iswebkit="WebkitAppearance"in b.style,c.ischrome="chrome"in window,c.ischrome22=c.ischrome&&c.haspointerlock,c.ischrome26=c.ischrome&&"transition"in b.style,c.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,c.hasmstouch=window.navigator.msPointerEnabled||!1,c.ismac=/^mac$/i.test(navigator.platform),c.isios=c.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),c.isios4=c.isios&&!("seal"in Object),c.isandroid=/android/i.test(navigator.userAgent),c.trstyle=!1,c.hastransform=!1,c.hastranslate3d=!1,c.transitionstyle=!1,c.hastransition=!1,c.transitionend=!1;for(var d=["transform","msTransform","webkitTransform","MozTransform","OTransform"],e=0;e<d.length;e++)if(void 0!==b.style[d[e]]){c.trstyle=d[e];break}c.hastransform=0!=c.trstyle,c.hastransform&&(b.style[c.trstyle]="translate3d(1px,2px,3px)",c.hastranslate3d=/translate3d/.test(b.style[c.trstyle])),c.transitionstyle=!1,c.prefixstyle="",c.transitionend=!1;for(var d=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],f=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],g=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],e=0;e<d.length;e++)if(d[e]in b.style){c.transitionstyle=d[e],c.prefixstyle=f[e],c.transitionend=g[e];break}return c.ischrome26&&(c.prefixstyle=f[1]),c.hastransition=c.transitionstyle,c.cursorgrabvalue=a(),c.hasmousecapture="setCapture"in b,c.hasMutationObserver=!1!==q,b=null,s=c,c},u=function(a,b){function c(){var a=s.doc.css(w.trstyle);return!(!a||"matrix"!=a.substr(0,6))&&a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function d(){var a=s.win;if("zIndex"in a)return a.zIndex();for(;a.length>0;){if(9==a[0].nodeType)return!1;var b=a.css("zIndex");if(!isNaN(b)&&0!=b)return parseInt(b);a=a.parent()}return!1}function l(a,b,c){var d=a.css(b),e=parseFloat(d);if(isNaN(e)){e=x[d]||0;var f=3==e?c?s.win.outerHeight()-s.win.innerHeight():s.win.outerWidth()-s.win.innerWidth():1;return s.isie8&&e&&(e+=1),f?e:0}return e}function o(a,b,c,d){s._bind(a,b,function(d){var d=d||window.event,e={original:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return d.preventDefault?d.preventDefault():d.returnValue=!1,!1},stopImmediatePropagation:function(){d.stopImmediatePropagation?d.stopImmediatePropagation():d.cancelBubble=!0}};return"mousewheel"==b?(e.deltaY=-.025*d.wheelDelta,d.wheelDeltaX&&(e.deltaX=-.025*d.wheelDeltaX)):e.deltaY=d.detail,c.call(a,e)},d)}function p(a,b,c){var d,e;if(0==a.deltaMode?(d=-Math.floor(a.deltaX*(s.opt.mousescrollstep/54)),e=-Math.floor(a.deltaY*(s.opt.mousescrollstep/54))):1==a.deltaMode&&(d=-Math.floor(a.deltaX*s.opt.mousescrollstep),e=-Math.floor(a.deltaY*s.opt.mousescrollstep)),b&&s.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0),d&&(s.scrollmom&&s.scrollmom.stop(),s.lastdeltax+=d,s.debounced("mousewheelx",function(){var a=s.lastdeltax;s.lastdeltax=0,s.rail.drag||s.doScrollLeftBy(a)},120)),e){if(s.opt.nativeparentscrolling&&c&&!s.ispage&&!s.zoomactive)if(e<0){if(s.getScrollTop()>=s.page.maxh)return!0}else if(s.getScrollTop()<=0)return!0;s.scrollmom&&s.scrollmom.stop(),s.lastdeltay+=e,s.debounced("mousewheely",function(){var a=s.lastdeltay;s.lastdeltay=0,s.rail.drag||s.doScrollBy(a)},120)}return a.stopImmediatePropagation(),a.preventDefault()}var s=this;if(this.version="3.5.1",this.name="nicescroll",this.me=b,this.opt={doc:j("body"),win:!1},j.extend(this.opt,r),this.opt.snapbackspeed=80,a)for(var u in s.opt)void 0!==a[u]&&(s.opt[u]=a[u]);this.doc=s.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(s.opt.win?s.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==s.opt.win,this.win=s.opt.win||(this.ispage?j(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?j(window):this.win,this.body=j("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=s.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.checkrtlmode=!1,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+h++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.overflowx=s.opt.overflowx,this.overflowy=s.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=t();var w=j.extend({},this.detected);this.canhwscroll=w.hastransform&&s.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&s.haswrapper,this.istouchcapable=!1,w.cantouch&&w.ischrome&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),w.cantouch&&w.ismozilla&&!w.isios&&!w.isandroid&&(this.istouchcapable=!0,w.cantouch=!1),s.opt.enablemouselockapi||(w.hasmousecapture=!1,w.haspointerlock=!1),this.delayed=function(a,b,c,d){var e=s.delaylist[a],f=(new Date).getTime();return!(!d&&e&&e.tt)&&(e&&e.tt&&clearTimeout(e.tt),void(e&&e.last+c>f&&!e.tt?s.delaylist[a]={last:f+c,tt:setTimeout(function(){s.delaylist[a].tt=0,b.call()},c)}:e&&e.tt||(s.delaylist[a]={last:f,tt:0},setTimeout(function(){b.call()},0))))},this.debounced=function(a,b,c){var d=s.delaylist[a];(new Date).getTime(),s.delaylist[a]=b,d||setTimeout(function(){var b=s.delaylist[a];s.delaylist[a]=!1,b.call()},c)},this.synched=function(a,b){function c(){s.onsync||(m(function(){s.onsync=!1;for(a in s.synclist){var b=s.synclist[a];b&&b.call(s),s.synclist[a]=!1}}),s.onsync=!0)}return s.synclist[a]=b,c(),a},this.unsynched=function(a){s.synclist[a]&&(s.synclist[a]=!1)},this.css=function(a,b){for(var c in b)s.saved.css.push([a,c,a.css(c)]),a.css(c,b[c])},this.scrollTop=function(a){return void 0===a?s.getScrollTop():s.setScrollTop(a)},this.scrollLeft=function(a){return void 0===a?s.getScrollLeft():s.setScrollLeft(a)},BezierClass=function(a,b,c,d,e,f,g){this.st=a,this.ed=b,this.spd=c,this.p1=d||0,this.p2=e||1,this.p3=f||0,this.p4=g||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=(new Date).getTime(),b=1-(a-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return b<0?this.ed:this.st+Math.round(this.df*c)},update:function(a,b){return this.st=this.getNow(),this.ed=a,this.spd=b,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll?(this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},w.hastranslate3d&&w.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(a){if(!a){var b=c();if(b)return 16==b.length?-b[13]:-b[5];if(s.timerscroll&&s.timerscroll.bz)return s.timerscroll.bz.getNow()}return s.doc.translate.y},this.getScrollLeft=function(a){if(!a){var b=c();if(b)return 16==b.length?-b[12]:-b[4];if(s.timerscroll&&s.timerscroll.bh)return s.timerscroll.bh.getNow()}return s.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",!1,!0,window,1),a.dispatchEvent(b)}:document.fireEvent?this.notifyScrollEvent=function(a){var b=document.createEventObject();a.fireEvent("onscroll"),b.cancelBubble=!0}:this.notifyScrollEvent=function(a,b){},w.hastranslate3d&&s.opt.enabletranslate3d?(this.setScrollTop=function(a,b){s.doc.translate.y=a,s.doc.translate.ty=-1*a+"px",s.doc.css(w.trstyle,"translate3d("+s.doc.translate.tx+","+s.doc.translate.ty+",0px)"),b||s.notifyScrollEvent(s.win[0])},this.setScrollLeft=function(a,b){s.doc.translate.x=a,s.doc.translate.tx=-1*a+"px",s.doc.css(w.trstyle,"translate3d("+s.doc.translate.tx+","+s.doc.translate.ty+",0px)"),b||s.notifyScrollEvent(s.win[0])}):(this.setScrollTop=function(a,b){s.doc.translate.y=a,s.doc.translate.ty=-1*a+"px",s.doc.css(w.trstyle,"translate("+s.doc.translate.tx+","+s.doc.translate.ty+")"),b||s.notifyScrollEvent(s.win[0])},this.setScrollLeft=function(a,b){s.doc.translate.x=a,s.doc.translate.tx=-1*a+"px",s.doc.css(w.trstyle,"translate("+s.doc.translate.tx+","+s.doc.translate.ty+")"),b||s.notifyScrollEvent(s.win[0])})):(this.getScrollTop=function(){return s.docscroll.scrollTop()},this.setScrollTop=function(a){return s.docscroll.scrollTop(a)},this.getScrollLeft=function(){return s.docscroll.scrollLeft()},this.setScrollLeft=function(a){return s.docscroll.scrollLeft(a)}),this.getTarget=function(a){return!!a&&(a.target?a.target:!!a.srcElement&&a.srcElement)},this.hasParent=function(a,b){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=b;)c=c.parentNode||!1;return!1!==c};var x={thin:1,medium:3,thick:5};this.getOffset=function(){if(s.isfixed)return{top:parseFloat(s.win.css("top")),left:parseFloat(s.win.css("left"))};if(!s.viewport)return s.win.offset();var a=s.win.offset(),b=s.viewport.offset();return{top:a.top-b.top+s.viewport.scrollTop(),left:a.left-b.left+s.viewport.scrollLeft()}},this.updateScrollBar=function(a){if(s.ishwscroll)s.rail.css({height:s.win.innerHeight()}),s.railh&&s.railh.css({width:s.win.innerWidth()});else{var b=s.getOffset(),c={top:b.top,left:b.left};c.top+=l(s.win,"border-top-width",!0),s.win.outerWidth(),s.win.innerWidth(),c.left+=s.rail.align?s.win.outerWidth()-l(s.win,"border-right-width")-s.rail.width:l(s.win,"border-left-width");var d=s.opt.railoffset;if(d&&(d.top&&(c.top+=d.top),s.rail.align&&d.left&&(c.left+=d.left)),s.locked||s.rail.css({top:c.top,left:c.left,height:a?a.h:s.win.innerHeight()}),s.zoom&&s.zoom.css({top:c.top+1,left:1==s.rail.align?c.left-20:c.left+s.rail.width+4}),s.railh&&!s.locked){var c={top:b.top,left:b.left},e=s.railh.align?c.top+l(s.win,"border-top-width",!0)+s.win.innerHeight()-s.railh.height:c.top+l(s.win,"border-top-width",!0),f=c.left+l(s.win,"border-left-width");s.railh.css({top:e,left:f,width:s.railh.width})}}},this.doRailClick=function(a,b,c){var d,e,f,g;s.locked||(s.cancelEvent(a),b?(d=c?s.doScrollLeft:s.doScrollTop,f=c?(a.pageX-s.railh.offset().left-s.cursorwidth/2)*s.scrollratio.x:(a.pageY-s.rail.offset().top-s.cursorheight/2)*s.scrollratio.y,d(f)):(d=c?s.doScrollLeftBy:s.doScrollBy,f=c?s.scroll.x:s.scroll.y,g=c?a.pageX-s.railh.offset().left:a.pageY-s.rail.offset().top,e=c?s.view.w:s.view.h,d(f>=g?e:-e)))},s.hasanimationframe=m,s.hascancelanimationframe=n,s.hasanimationframe?s.hascancelanimationframe||(n=function(){s.cancelAnimationFrame=!0}):(m=function(a){return setTimeout(a,15-Math.floor(+new Date/1e3)%16)},n=clearInterval),this.init=function(){function a(b){if(s.selectiondrag){if(b){var c=s.win.outerHeight(),d=b.pageY-s.selectiondrag.top;d>0&&d<c&&(d=0),d>=c&&(d-=c),s.selectiondrag.df=d}if(0!=s.selectiondrag.df){var e=2*-Math.floor(s.selectiondrag.df/6);s.doScrollBy(e),s.debounced("doselectionscroll",function(){a()},50)}}}function b(a){s.iframexd=!1;try{var b="contentDocument"in this?this.contentDocument:this.contentWindow.document;b.domain}catch(a){s.iframexd=!0,b=!1}if(s.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(s.forcescreen=!0,s.isiframe&&(s.iframe={doc:j(b),html:s.doc.contents().find("html")[0],body:s.doc.contents().find("body")[0]},s.getContentSize=function(){return{w:Math.max(s.iframe.html.scrollWidth,s.iframe.body.scrollWidth),h:Math.max(s.iframe.html.scrollHeight,s.iframe.body.scrollHeight)}},s.docscroll=j(s.iframe.body)),!w.isios&&s.opt.iframeautoresize&&!s.isiframe){s.win.scrollTop(0),s.doc.height("");var c=Math.max(b.getElementsByTagName("html")[0].scrollHeight,b.body.scrollHeight);s.doc.height(c)}s.lazyResize(30),w.isie7&&s.css(j(s.iframe.html),{"overflow-y":"hidden"}),s.css(j(s.iframe.body),{"overflow-y":"hidden"}),w.isios&&s.haswrapper&&s.css(j(b.body),{"-webkit-transform":"translate3d(0, 0, 0)"}),"contentWindow"in this?s.bind(this.contentWindow,"scroll",s.onscroll):s.bind(b,"scroll",s.onscroll),s.opt.enablemousewheel&&s.bind(b,"mousewheel",s.onmousewheel),s.opt.enablekeyboard&&s.bind(b,w.isopera?"keypress":"keydown",s.onkeypress),(w.cantouch||s.opt.touchbehavior)&&(s.bind(b,"mousedown",s.ontouchstart),s.bind(b,"mousemove",function(a){s.ontouchmove(a,!0)}),s.opt.grabcursorenabled&&w.cursorgrabvalue&&s.css(j(b.body),{cursor:w.cursorgrabvalue})),s.bind(b,"mouseup",s.ontouchend),s.zoom&&(s.opt.dblclickzoom&&s.bind(b,"dblclick",s.doZoom),s.ongesturezoom&&s.bind(b,"gestureend",s.ongesturezoom))}if(s.saved.css=[],w.isie7mobile)return!0;if(w.isoperamini)return!0;if(w.hasmstouch&&s.css(s.ispage?j("html"):s.win,{"-ms-touch-action":"none"}),s.zindex="auto",s.ispage||"auto"!=s.opt.zindex?s.zindex=s.opt.zindex:s.zindex=d()||"auto",s.ispage||"auto"==s.zindex||s.zindex>i&&(i=s.zindex),s.isie&&0==s.zindex&&"auto"==s.opt.zindex&&(s.zindex="auto"),!s.ispage||!w.cantouch&&!w.isieold&&!w.isie9mobile){var c=s.docscroll;s.ispage&&(c=s.haswrapper?s.win:s.doc),w.isie9mobile||s.css(c,{"overflow-y":"hidden"}),s.ispage&&w.isie7&&("BODY"==s.doc[0].nodeName?s.css(j("html"),{"overflow-y":"hidden"}):"HTML"==s.doc[0].nodeName&&s.css(j("body"),{"overflow-y":"hidden"})),!w.isios||s.ispage||s.haswrapper||s.css(j("body"),{"-webkit-overflow-scrolling":"touch"});var h=j(document.createElement("div"));h.css({position:"relative",top:0,float:"right",width:s.opt.cursorwidth,height:"0px","background-color":s.opt.cursorcolor,border:s.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":s.opt.cursorborderradius,"-moz-border-radius":s.opt.cursorborderradius,"border-radius":s.opt.cursorborderradius}),h.hborder=parseFloat(h.outerHeight()-h.innerHeight()),s.cursor=h;var l=j(document.createElement("div"));l.attr("id",s.id),l.addClass("nicescroll-rails");var m,n,o=["left","right"];for(var p in o)n=o[p],m=s.opt.railpadding[n],m?l.css("padding-"+n,m+"px"):s.opt.railpadding[n]=0;l.append(h),l.width=Math.max(parseFloat(s.opt.cursorwidth),h.outerWidth())+s.opt.railpadding.left+s.opt.railpadding.right,l.css({width:l.width+"px",zIndex:s.zindex,background:s.opt.background,cursor:"default"}),l.visibility=!0,l.scrollable=!0,l.align="left"==s.opt.railalign?0:1,s.rail=l,s.rail.drag=!1;var r=!1;if(!s.opt.boxzoom||s.ispage||w.isieold||(r=document.createElement("div"),s.bind(r,"click",s.doZoom),s.zoom=j(r),s.zoom.css({cursor:"pointer","z-index":s.zindex,backgroundImage:"url("+k+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),s.opt.dblclickzoom&&s.bind(s.win,"dblclick",s.doZoom),w.cantouch&&s.opt.gesturezoom&&(s.ongesturezoom=function(a){return a.scale>1.5&&s.doZoomIn(a),a.scale<.8&&s.doZoomOut(a),s.cancelEvent(a)},s.bind(s.win,"gestureend",s.ongesturezoom))),s.railh=!1,s.opt.horizrailenabled){s.css(c,{"overflow-x":"hidden"});var h=j(document.createElement("div"));h.css({position:"relative",top:0,height:s.opt.cursorwidth,width:"0px","background-color":s.opt.cursorcolor,border:s.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":s.opt.cursorborderradius,"-moz-border-radius":s.opt.cursorborderradius,"border-radius":s.opt.cursorborderradius}),h.wborder=parseFloat(h.outerWidth()-h.innerWidth()),s.cursorh=h;var t=j(document.createElement("div"));t.attr("id",s.id+"-hr"),t.addClass("nicescroll-rails"),t.height=Math.max(parseFloat(s.opt.cursorwidth),h.outerHeight()),t.css({height:t.height+"px",zIndex:s.zindex,background:s.opt.background}),t.append(h),t.visibility=!0,t.scrollable=!0,t.align="top"==s.opt.railvalign?0:1,s.railh=t,s.railh.drag=!1}if(s.ispage)l.css({position:"fixed",top:"0px",height:"100%"}),l.align?l.css({right:"0px"}):l.css({left:"0px"}),s.body.append(l),s.railh&&(t.css({position:"fixed",left:"0px",width:"100%"}),t.align?t.css({bottom:"0px"}):t.css({top:"0px"}),s.body.append(t));else{if(s.ishwscroll){"static"==s.win.css("position")&&s.css(s.win,{position:"relative"});var u="HTML"==s.win[0].nodeName?s.body:s.win;s.zoom&&(s.zoom.css({position:"absolute",top:1,right:0,"margin-right":l.width+4}),u.append(s.zoom)),l.css({position:"absolute",top:0}),l.align?l.css({right:0}):l.css({left:0}),u.append(l),t&&(t.css({position:"absolute",left:0,bottom:0}),t.align?t.css({bottom:0}):t.css({top:0}),u.append(t))}else{s.isfixed="fixed"==s.win.css("position");var x=s.isfixed?"fixed":"absolute";s.isfixed||(s.viewport=s.getViewport(s.win[0])),s.viewport&&(s.body=s.viewport,0==/fixed|relative|absolute/.test(s.viewport.css("position"))&&s.css(s.viewport,{position:"relative"})),l.css({position:x}),s.zoom&&s.zoom.css({position:x}),s.updateScrollBar(),s.body.append(l),s.zoom&&s.body.append(s.zoom),s.railh&&(t.css({position:x}),s.body.append(t))}w.isios&&s.css(s.win,{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)","-webkit-touch-callout":"none"}),w.isie&&s.opt.disableoutline&&s.win.attr("hideFocus","true"),w.iswebkit&&s.opt.disableoutline&&s.win.css({outline:"none"})}if(!1===s.opt.autohidemode?(s.autohidedom=!1,s.rail.css({opacity:s.opt.cursoropacitymax}),s.railh&&s.railh.css({opacity:s.opt.cursoropacitymax})):!0===s.opt.autohidemode||"leave"===s.opt.autohidemode?(s.autohidedom=j().add(s.rail),w.isie8&&(s.autohidedom=s.autohidedom.add(s.cursor)),s.railh&&(s.autohidedom=s.autohidedom.add(s.railh)),s.railh&&w.isie8&&(s.autohidedom=s.autohidedom.add(s.cursorh))):"scroll"==s.opt.autohidemode?(s.autohidedom=j().add(s.rail),s.railh&&(s.autohidedom=s.autohidedom.add(s.railh))):"cursor"==s.opt.autohidemode?(s.autohidedom=j().add(s.cursor),s.railh&&(s.autohidedom=s.autohidedom.add(s.cursorh))):"hidden"==s.opt.autohidemode&&(s.autohidedom=!1,s.hide(),s.locked=!1),w.isie9mobile){s.scrollmom=new v(s),s.onmangotouch=function(a){var b=s.getScrollTop(),c=s.getScrollLeft();if(b==s.scrollmom.lastscrolly&&c==s.scrollmom.lastscrollx)return!0;var d=b-s.mangotouch.sy,e=c-s.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(e,2)+Math.pow(d,2)))){var g=d<0?-1:1,h=e<0?-1:1,i=+new Date;if(s.mangotouch.lazy&&clearTimeout(s.mangotouch.lazy),i-s.mangotouch.tm>80||s.mangotouch.dry!=g||s.mangotouch.drx!=h)s.scrollmom.stop(),s.scrollmom.reset(c,b),s.mangotouch.sy=b,s.mangotouch.ly=b,s.mangotouch.sx=c,s.mangotouch.lx=c,s.mangotouch.dry=g,s.mangotouch.drx=h,s.mangotouch.tm=i;else{s.scrollmom.stop(),s.scrollmom.update(s.mangotouch.sx-e,s.mangotouch.sy-d),s.mangotouch.tm,s.mangotouch.tm=i;var j=Math.max(Math.abs(s.mangotouch.ly-b),Math.abs(s.mangotouch.lx-c));s.mangotouch.ly=b,s.mangotouch.lx=c,j>2&&(s.mangotouch.lazy=setTimeout(function(){s.mangotouch.lazy=!1,s.mangotouch.dry=0,s.mangotouch.drx=0,s.mangotouch.tm=0,s.scrollmom.doMomentum(30)},100))}}};var y=s.getScrollTop(),z=s.getScrollLeft();s.mangotouch={sy:y,ly:y,dry:0,sx:z,lx:z,drx:0,lazy:!1,tm:0},s.bind(s.docscroll,"scroll",s.onmangotouch)}else{if(w.cantouch||s.istouchcapable||s.opt.touchbehavior||w.hasmstouch){s.scrollmom=new v(s),s.ontouchstart=function(a){if(a.pointerType&&2!=a.pointerType)return!1;if(s.hasmoving=!1,!s.locked){if(w.hasmstouch)for(var b=!!a.target&&a.target;b;){var c=j(b).getNiceScroll();if(c.length>0&&c[0].me==s.me)break;if(c.length>0)return!1;if("DIV"==b.nodeName&&b.id==s.id)break;b=!!b.parentNode&&b.parentNode}s.cancelScroll();var b=s.getTarget(a);if(b){if(/INPUT/i.test(b.nodeName)&&/range/i.test(b.type))return s.stopPropagation(a)}if(!("clientX"in a)&&"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),s.forcescreen){var e=a,a={original:a.original?a.original:a};a.clientX=e.screenX,a.clientY=e.screenY}if(s.rail.drag={x:a.clientX,y:a.clientY,sx:s.scroll.x,sy:s.scroll.y,st:s.getScrollTop(),sl:s.getScrollLeft(),pt:2,dl:!1},s.ispage||!s.opt.directionlockdeadzone)s.rail.drag.dl="f";else{var f={w:j(window).width(),h:j(window).height()},g={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h=Math.max(0,g.h-f.h),i=Math.max(0,g.w-f.w);!s.rail.scrollable&&s.railh.scrollable?s.rail.drag.ck=h>0&&"v":s.rail.scrollable&&!s.railh.scrollable?s.rail.drag.ck=i>0&&"h":s.rail.drag.ck=!1,s.rail.drag.ck||(s.rail.drag.dl="f")}if(s.opt.touchbehavior&&s.isiframe&&w.isie){var k=s.win.position();s.rail.drag.x+=k.left,s.rail.drag.y+=k.top}if(s.hasmoving=!1,s.lastmouseup=!1,s.scrollmom.reset(a.clientX,a.clientY),!w.cantouch&&!this.istouchcapable&&!w.hasmstouch){if(!(!!b&&/INPUT|SELECT|TEXTAREA/i.test(b.nodeName)))return!s.ispage&&w.hasmousecapture&&b.setCapture(),s.opt.touchbehavior?(b.onclick&&!b._onclick&&(b._onclick=b.onclick,b.onclick=function(a){return new Date,s.scrollmom.lasttime,!s.hasmoving&&void b._onclick.call(this,a)}),s.cancelEvent(a)):s.stopPropagation(a);/SUBMIT|CANCEL|BUTTON/i.test(j(b).attr("type"))&&(pc={tg:b,click:!1},s.preventclick=pc)}}},s.ontouchend=function(a){return(!a.pointerType||2==a.pointerType)&&(s.rail.drag&&2==s.rail.drag.pt&&(s.scrollmom.doMomentum(),s.rail.drag=!1,s.hasmoving&&(s.lastmouseup=!0,s.hideCursor(),w.hasmousecapture&&document.releaseCapture(),!w.cantouch))?s.cancelEvent(a):void 0)};var A=s.opt.touchbehavior&&s.isiframe&&!w.hasmousecapture;s.ontouchmove=function(a,b){if(a.pointerType&&2!=a.pointerType)return!1;if(s.rail.drag&&2==s.rail.drag.pt){if(w.cantouch&&void 0===a.original)return!0;s.hasmoving=!0,s.preventclick&&!s.preventclick.click&&(s.preventclick.click=s.preventclick.tg.onclick||!1,s.preventclick.tg.onclick=s.onpreventclick);if(a=j.extend({original:a},a),"changedTouches"in a&&(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY),s.forcescreen){var d=a,a={original:a.original?a.original:a};a.clientX=d.screenX,a.clientY=d.screenY}var e=ofy=0;if(A&&!b){var f=s.win.position();e=-f.left,ofy=-f.top}var g=a.clientY+ofy,h=g-s.rail.drag.y,i=a.clientX+e,k=i-s.rail.drag.x,l=s.rail.drag.st-h;if(s.ishwscroll&&s.opt.bouncescroll?l<0?l=Math.round(l/2):l>s.page.maxh&&(l=s.page.maxh+Math.round((l-s.page.maxh)/2)):(l<0&&(l=0,g=0),l>s.page.maxh&&(l=s.page.maxh,g=0)),s.railh&&s.railh.scrollable){var m=s.rail.drag.sl-k;s.ishwscroll&&s.opt.bouncescroll?m<0?m=Math.round(m/2):m>s.page.maxw&&(m=s.page.maxw+Math.round((m-s.page.maxw)/2)):(m<0&&(m=0,i=0),m>s.page.maxw&&(m=s.page.maxw,i=0))}var n=!1;if(s.rail.drag.dl)n=!0,"v"==s.rail.drag.dl?m=s.rail.drag.sl:"h"==s.rail.drag.dl&&(l=s.rail.drag.st);else{var o=Math.abs(h),p=Math.abs(k),q=s.opt.directionlockdeadzone;if("v"==s.rail.drag.ck){if(o>q&&p<=.3*o)return s.rail.drag=!1,!0;p>q&&(s.rail.drag.dl="f",j("body").scrollTop(j("body").scrollTop()))}else if("h"==s.rail.drag.ck){if(p>q&&o<=.3*p)return s.rail.drag=!1,!0;o>q&&(s.rail.drag.dl="f",j("body").scrollLeft(j("body").scrollLeft()))}}if(s.synched("touchmove",function(){s.rail.drag&&2==s.rail.drag.pt&&(s.prepareTransition&&s.prepareTransition(0),s.rail.scrollable&&s.setScrollTop(l),s.scrollmom.update(i,g),s.railh&&s.railh.scrollable?(s.setScrollLeft(m),s.showCursor(l,m)):s.showCursor(l),w.isie10&&document.selection.clear())}),w.ischrome&&s.istouchcapable&&(n=!1),n)return s.cancelEvent(a)}}}s.onmousedown=function(a,b){if(!s.rail.drag||1==s.rail.drag.pt){if(s.locked)return s.cancelEvent(a);s.cancelScroll(),s.rail.drag={x:a.clientX,y:a.clientY,sx:s.scroll.x,sy:s.scroll.y,pt:1,hr:!!b};var c=s.getTarget(a);return!s.ispage&&w.hasmousecapture&&c.setCapture(),s.isiframe&&!w.hasmousecapture&&(s.saved.csspointerevents=s.doc.css("pointer-events"),s.css(s.doc,{"pointer-events":"none"})),s.cancelEvent(a)}},s.onmouseup=function(a){if(s.rail.drag){if(w.hasmousecapture&&document.releaseCapture(),s.isiframe&&!w.hasmousecapture&&s.doc.css("pointer-events",s.saved.csspointerevents),1!=s.rail.drag.pt)return;return s.rail.drag=!1,s.cancelEvent(a)}},s.onmousemove=function(a){if(s.rail.drag){if(1!=s.rail.drag.pt)return;if(w.ischrome&&0==a.which)return s.onmouseup(a);if(s.cursorfreezed=!0,s.rail.drag.hr){s.scroll.x=s.rail.drag.sx+(a.clientX-s.rail.drag.x),s.scroll.x<0&&(s.scroll.x=0);var b=s.scrollvaluemaxw;s.scroll.x>b&&(s.scroll.x=b)}else{s.scroll.y=s.rail.drag.sy+(a.clientY-s.rail.drag.y),s.scroll.y<0&&(s.scroll.y=0);var c=s.scrollvaluemax;s.scroll.y>c&&(s.scroll.y=c)}return s.synched("mousemove",function(){s.rail.drag&&1==s.rail.drag.pt&&(s.showCursor(),s.rail.drag.hr?s.doScrollLeft(Math.round(s.scroll.x*s.scrollratio.x),s.opt.cursordragspeed):s.doScrollTop(Math.round(s.scroll.y*s.scrollratio.y),s.opt.cursordragspeed))}),s.cancelEvent(a)}},w.cantouch||s.opt.touchbehavior?(s.onpreventclick=function(a){if(s.preventclick)return s.preventclick.tg.onclick=s.preventclick.click,s.preventclick=!1,s.cancelEvent(a)},s.bind(s.win,"mousedown",s.ontouchstart),s.onclick=!w.isios&&function(a){return!s.lastmouseup||(s.lastmouseup=!1,s.cancelEvent(a))},s.opt.grabcursorenabled&&w.cursorgrabvalue&&(s.css(s.ispage?s.doc:s.win,{cursor:w.cursorgrabvalue}),s.css(s.rail,{cursor:w.cursorgrabvalue}))):("getSelection"in document?s.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?s.hasTextSelected=function(){return"None"!=document.selection.type}:s.hasTextSelected=function(){return!1},s.onselectionstart=function(a){s.ispage||(s.selectiondrag=s.win.offset())},s.onselectionend=function(a){s.selectiondrag=!1},s.onselectiondrag=function(b){s.selectiondrag&&s.hasTextSelected()&&s.debounced("selectionscroll",function(){a(b)},250)}),w.hasmstouch&&(s.css(s.rail,{"-ms-touch-action":"none"}),s.css(s.cursor,{"-ms-touch-action":"none"}),s.bind(s.win,"MSPointerDown",s.ontouchstart),s.bind(document,"MSPointerUp",s.ontouchend),s.bind(document,"MSPointerMove",s.ontouchmove),s.bind(s.cursor,"MSGestureHold",function(a){a.preventDefault()}),s.bind(s.cursor,"contextmenu",function(a){a.preventDefault()})),this.istouchcapable&&(s.bind(s.win,"touchstart",s.ontouchstart),s.bind(document,"touchend",s.ontouchend),s.bind(document,"touchcancel",s.ontouchend),s.bind(document,"touchmove",s.ontouchmove)),s.bind(s.cursor,"mousedown",s.onmousedown),s.bind(s.cursor,"mouseup",s.onmouseup),s.railh&&(s.bind(s.cursorh,"mousedown",function(a){s.onmousedown(a,!0)}),s.bind(s.cursorh,"mouseup",function(a){if(!s.rail.drag||2!=s.rail.drag.pt)return s.rail.drag=!1,s.hasmoving=!1,s.hideCursor(),w.hasmousecapture&&document.releaseCapture(),s.cancelEvent(a)})),(s.opt.cursordragontouch||!w.cantouch&&!s.opt.touchbehavior)&&(s.rail.css({cursor:"default"}),s.railh&&s.railh.css({cursor:"default"}),s.jqbind(s.rail,"mouseenter",function(){s.canshowonmouseevent&&s.showCursor(),s.rail.active=!0}),s.jqbind(s.rail,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}),s.opt.sensitiverail&&(s.bind(s.rail,"click",function(a){s.doRailClick(a,!1,!1)}),s.bind(s.rail,"dblclick",function(a){s.doRailClick(a,!0,!1)}),s.bind(s.cursor,"click",function(a){s.cancelEvent(a)}),s.bind(s.cursor,"dblclick",function(a){s.cancelEvent(a)})),s.railh&&(s.jqbind(s.railh,"mouseenter",function(){s.canshowonmouseevent&&s.showCursor(),s.rail.active=!0}),s.jqbind(s.railh,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}),s.opt.sensitiverail&&(s.bind(s.railh,"click",function(a){s.doRailClick(a,!1,!0)}),s.bind(s.railh,"dblclick",function(a){s.doRailClick(a,!0,!0)}),s.bind(s.cursorh,"click",function(a){s.cancelEvent(a)}),s.bind(s.cursorh,"dblclick",function(a){s.cancelEvent(a)})))),w.cantouch||s.opt.touchbehavior?(s.bind(w.hasmousecapture?s.win:document,"mouseup",s.ontouchend),s.bind(document,"mousemove",s.ontouchmove),s.onclick&&s.bind(document,"click",s.onclick),s.opt.cursordragontouch&&(s.bind(s.cursor,"mousedown",s.onmousedown),s.bind(s.cursor,"mousemove",s.onmousemove),s.cursorh&&s.bind(s.cursorh,"mousedown",function(a){s.onmousedown(a,!0)}),s.cursorh&&s.bind(s.cursorh,"mousemove",s.onmousemove))):(s.bind(w.hasmousecapture?s.win:document,"mouseup",s.onmouseup),s.bind(document,"mousemove",s.onmousemove),s.onclick&&s.bind(document,"click",s.onclick),!s.ispage&&s.opt.enablescrollonselection&&(s.bind(s.win[0],"mousedown",s.onselectionstart),s.bind(document,"mouseup",s.onselectionend),s.bind(s.cursor,"mouseup",s.onselectionend),s.cursorh&&s.bind(s.cursorh,"mouseup",s.onselectionend),s.bind(document,"mousemove",s.onselectiondrag)),s.zoom&&(s.jqbind(s.zoom,"mouseenter",function(){s.canshowonmouseevent&&s.showCursor(),s.rail.active=!0}),s.jqbind(s.zoom,"mouseleave",function(){s.rail.active=!1,s.rail.drag||s.hideCursor()}))),s.opt.enablemousewheel&&(s.isiframe||s.bind(w.isie&&s.ispage?document:s.win,"mousewheel",s.onmousewheel),s.bind(s.rail,"mousewheel",s.onmousewheel),s.railh&&s.bind(s.railh,"mousewheel",s.onmousewheelhr)),s.ispage||w.cantouch||/HTML|BODY/.test(s.win[0].nodeName)||(s.win.attr("tabindex")||s.win.attr({tabindex:g++}),s.jqbind(s.win,"focus",function(a){e=s.getTarget(a).id||!0,s.hasfocus=!0,s.canshowonmouseevent&&s.noticeCursor()}),s.jqbind(s.win,"blur",function(a){e=!1,s.hasfocus=!1}),s.jqbind(s.win,"mouseenter",function(a){f=s.getTarget(a).id||!0,s.hasmousefocus=!0,s.canshowonmouseevent&&s.noticeCursor()}),s.jqbind(s.win,"mouseleave",function(){f=!1,s.hasmousefocus=!1,s.rail.drag||s.hideCursor()}))}if(s.onkeypress=function(a){if(s.locked&&0==s.page.maxh)return!0;a=a||window.e;var b=s.getTarget(a);if(b&&/INPUT|TEXTAREA|SELECT|OPTION/.test(b.nodeName)){if(!(b.getAttribute("type")||b.type||!1)||!/submit|button|cancel/i.tp)return!0}if(s.hasfocus||s.hasmousefocus&&!e||s.ispage&&!e&&!f){var d=a.keyCode;if(s.locked&&27!=d)return s.cancelEvent(a);var g=a.ctrlKey||!1,h=a.shiftKey||!1,i=!1;switch(d){case 38:case 63233:s.doScrollBy(72),i=!0;break;case 40:case 63235:s.doScrollBy(-72),i=!0;break;case 37:case 63232:s.railh&&(g?s.doScrollLeft(0):s.doScrollLeftBy(72),i=!0);break;case 39:case 63234:s.railh&&(g?s.doScrollLeft(s.page.maxw):s.doScrollLeftBy(-72),i=!0);break;case 33:case 63276:s.doScrollBy(s.view.h),i=!0;break;case 34:case 63277:s.doScrollBy(-s.view.h),i=!0;break;case 36:case 63273:s.railh&&g?s.doScrollPos(0,0):s.doScrollTo(0),i=!0;break;case 35:case 63275:s.railh&&g?s.doScrollPos(s.page.maxw,s.page.maxh):s.doScrollTo(s.page.maxh),i=!0;break;case 32:s.opt.spacebarenabled&&(h?s.doScrollBy(s.view.h):s.doScrollBy(-s.view.h),i=!0);break;case 27:s.zoomactive&&(s.doZoom(),i=!0)}if(i)return s.cancelEvent(a)}},s.opt.enablekeyboard&&s.bind(document,w.isopera&&!w.isopera12?"keypress":"keydown",s.onkeypress),s.bind(window,"resize",s.lazyResize),s.bind(window,"orientationchange",s.lazyResize),s.bind(window,"load",s.lazyResize),w.ischrome&&!s.ispage&&!s.haswrapper){var B=s.win.attr("style"),C=parseFloat(s.win.css("width"))+1;s.win.css("width",C),s.synched("chromefix",function(){s.win.attr("style",B)})}s.onAttributeChange=function(a){s.lazyResize(250)},s.ispage||s.haswrapper||(!1!==q?(s.observer=new q(function(a){a.forEach(s.onAttributeChange)}),s.observer.observe(s.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),s.observerremover=new q(function(a){a.forEach(function(a){if(a.removedNodes.length>0)for(var b in a.removedNodes)if(a.removedNodes[b]==s.win[0])return s.remove()})}),s.observerremover.observe(s.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(s.bind(s.win,w.isie&&!w.isie9?"propertychange":"DOMAttrModified",s.onAttributeChange),w.isie9&&s.win[0].attachEvent("onpropertychange",s.onAttributeChange),s.bind(s.win,"DOMNodeRemoved",function(a){a.target==s.win[0]&&s.remove()}))),!s.ispage&&s.opt.boxzoom&&s.bind(window,"resize",s.resizeZoom),s.istextarea&&s.bind(s.win,"mouseup",s.lazyResize),s.checkrtlmode=!0,s.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){b.call(s.doc[0],!1)},500),s.bind(this.doc,"load",b))},this.showCursor=function(a,b){s.cursortimeout&&(clearTimeout(s.cursortimeout),s.cursortimeout=0),s.rail&&(s.autohidedom&&(s.autohidedom.stop().css({opacity:s.opt.cursoropacitymax}),s.cursoractive=!0),s.rail.drag&&1==s.rail.drag.pt||(void 0!==a&&!1!==a&&(s.scroll.y=Math.round(1*a/s.scrollratio.y)),void 0!==b&&(s.scroll.x=Math.round(1*b/s.scrollratio.x))),s.cursor.css({height:s.cursorheight,top:s.scroll.y}),s.cursorh&&(!s.rail.align&&s.rail.visibility?s.cursorh.css({width:s.cursorwidth,left:s.scroll.x+s.rail.width}):s.cursorh.css({width:s.cursorwidth,left:s.scroll.x}),s.cursoractive=!0),s.zoom&&s.zoom.stop().css({opacity:s.opt.cursoropacitymax}))},this.hideCursor=function(a){s.cursortimeout||s.rail&&s.autohidedom&&(s.hasmousefocus&&"leave"==s.opt.autohidemode||(s.cursortimeout=setTimeout(function(){s.rail.active&&s.showonmouseevent||(s.autohidedom.stop().animate({opacity:s.opt.cursoropacitymin}),s.zoom&&s.zoom.stop().animate({opacity:s.opt.cursoropacitymin}),s.cursoractive=!1),s.cursortimeout=0},a||s.opt.hidecursordelay)))},this.noticeCursor=function(a,b,c){s.showCursor(b,c),s.rail.active||s.hideCursor(a)},this.getContentSize=s.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:s.haswrapper?function(){return{w:s.doc.outerWidth()+parseInt(s.win.css("paddingLeft"))+parseInt(s.win.css("paddingRight")),h:s.doc.outerHeight()+parseInt(s.win.css("paddingTop"))+parseInt(s.win.css("paddingBottom"))}}:function(){return{w:s.docscroll[0].scrollWidth,h:s.docscroll[0].scrollHeight}},this.onResize=function(a,b){if(!s||!s.win)return!1;if(!s.haswrapper&&!s.ispage){if("none"==s.win.css("display"))return s.visibility&&s.hideRail().hideRailHr(),!1;s.hidden||s.visibility||s.showRail().showRailHr()}var c=s.page.maxh,d=s.page.maxw,e={h:s.view.h,w:s.view.w};if(s.view={w:s.ispage?s.win.width():parseInt(s.win[0].clientWidth),h:s.ispage?s.win.height():parseInt(s.win[0].clientHeight)},s.page=b||s.getContentSize(),s.page.maxh=Math.max(0,s.page.h-s.view.h),s.page.maxw=Math.max(0,s.page.w-s.view.w),s.page.maxh==c&&s.page.maxw==d&&s.view.w==e.w){if(s.ispage)return s;var f=s.win.offset();if(s.lastposition){var g=s.lastposition;if(g.top==f.top&&g.left==f.left)return s}s.lastposition=f}return 0==s.page.maxh?(s.hideRail(),s.scrollvaluemax=0,s.scroll.y=0,s.scrollratio.y=0,s.cursorheight=0,s.setScrollTop(0),s.rail.scrollable=!1):s.rail.scrollable=!0,0==s.page.maxw?(s.hideRailHr(),s.scrollvaluemaxw=0,s.scroll.x=0,s.scrollratio.x=0,s.cursorwidth=0,s.setScrollLeft(0),s.railh.scrollable=!1):s.railh.scrollable=!0,s.locked=0==s.page.maxh&&0==s.page.maxw,s.locked?(s.ispage||s.updateScrollBar(s.view),!1):(s.hidden||s.visibility?s.hidden||s.railh.visibility||s.showRailHr():s.showRail().showRailHr(),s.istextarea&&s.win.css("resize")&&"none"!=s.win.css("resize")&&(s.view.h-=20),s.cursorheight=Math.min(s.view.h,Math.round(s.view.h*(s.view.h/s.page.h))),s.cursorheight=s.opt.cursorfixedheight?s.opt.cursorfixedheight:Math.max(s.opt.cursorminheight,s.cursorheight),s.cursorwidth=Math.min(s.view.w,Math.round(s.view.w*(s.view.w/s.page.w))),s.cursorwidth=s.opt.cursorfixedheight?s.opt.cursorfixedheight:Math.max(s.opt.cursorminheight,s.cursorwidth),s.scrollvaluemax=s.view.h-s.cursorheight-s.cursor.hborder,s.railh&&(s.railh.width=s.page.maxh>0?s.view.w-s.rail.width:s.view.w,s.scrollvaluemaxw=s.railh.width-s.cursorwidth-s.cursorh.wborder),s.checkrtlmode&&s.railh&&(s.checkrtlmode=!1,s.opt.rtlmode&&0==s.scroll.x&&s.setScrollLeft(s.page.maxw)),s.ispage||s.updateScrollBar(s.view),s.scrollratio={x:s.page.maxw/s.scrollvaluemaxw,y:s.page.maxh/s.scrollvaluemax},s.getScrollTop()>s.page.maxh?s.doScrollTop(s.page.maxh):(s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.scroll.x=Math.round(s.getScrollLeft()*(1/s.scrollratio.x)),s.cursoractive&&s.noticeCursor()),s.scroll.y&&0==s.getScrollTop()&&s.doScrollTo(Math.floor(s.scroll.y*s.scrollratio.y)),s)},this.resize=s.onResize,this.lazyResize=function(a){return a=isNaN(a)?30:a,s.delayed("resize",s.resize,a),s},this._bind=function(a,b,c,d){s.events.push({e:a,n:b,f:c,b:d,q:!1}),a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},this.jqbind=function(a,b,c){s.events.push({e:a,n:b,f:c,q:!0}),j(a).bind(b,c)},this.bind=function(a,b,c,d){var e="jquery"in a?a[0]:a;if("mousewheel"==b)if("onwheel"in s.win)s._bind(e,"wheel",c,d||!1);else{var f=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";o(e,f,c,d||!1),"DOMMouseScroll"==f&&o(e,"MozMousePixelScroll",c,d||!1)}else if(e.addEventListener){if(w.cantouch&&/mouseup|mousedown|mousemove/.test(b)){var g="mousedown"==b?"touchstart":"mouseup"==b?"touchend":"touchmove";s._bind(e,g,function(a){if(a.touches){if(a.touches.length<2){var b=a.touches.length?a.touches[0]:a;b.original=a,c.call(this,b)}}else if(a.changedTouches){var b=a.changedTouches[0];b.original=a,c.call(this,b)}},d||!1)}s._bind(e,b,c,d||!1),w.cantouch&&"mouseup"==b&&s._bind(e,"touchcancel",c,d||!1)}else s._bind(e,b,function(a){return a=a||window.event||!1,a&&a.srcElement&&(a.target=a.srcElement),"pageY"in a||(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),!1!==c.call(e,a)&&!1!==d||s.cancelEvent(a)})},this._unbind=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=!1},this.unbindAll=function(){for(var a=0;a<s.events.length;a++){var b=s.events[a];b.q?b.e.unbind(b.n,b.f):s._unbind(b.e,b.n,b.f,b.b)}},this.cancelEvent=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.preventManipulation&&a.preventManipulation(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1)},this.stopPropagation=function(a){var a=a.original?a.original:a||(window.event||!1);return!!a&&(a.stopPropagation?a.stopPropagation():(a.cancelBubble&&(a.cancelBubble=!0),!1))},this.showRail=function(){return 0==s.page.maxh||!s.ispage&&"none"==s.win.css("display")||(s.visibility=!0,s.rail.visibility=!0,s.rail.css("display","block")),s},this.showRailHr=function(){return s.railh?(0==s.page.maxw||!s.ispage&&"none"==s.win.css("display")||(s.railh.visibility=!0,s.railh.css("display","block")),s):s},this.hideRail=function(){return s.visibility=!1,s.rail.visibility=!1,s.rail.css("display","none"),s},this.hideRailHr=function(){return s.railh?(s.railh.visibility=!1,s.railh.css("display","none"),s):s},this.show=function(){return s.hidden=!1,s.locked=!1,s.showRail().showRailHr()},this.hide=function(){return s.hidden=!0,s.locked=!0,s.hideRail().hideRailHr()},this.toggle=function(){return s.hidden?s.show():s.hide()},this.remove=function(){s.stop(),s.cursortimeout&&clearTimeout(s.cursortimeout),s.doZoomOut(),s.unbindAll(),w.isie9&&s.win[0].detachEvent("onpropertychange",s.onAttributeChange),!1!==s.observer&&s.observer.disconnect(),!1!==s.observerremover&&s.observerremover.disconnect(),s.events=null,s.cursor&&s.cursor.remove(),s.cursorh&&s.cursorh.remove(),s.rail&&s.rail.remove(),s.railh&&s.railh.remove(),s.zoom&&s.zoom.remove();for(var a=0;a<s.saved.css.length;a++){var b=s.saved.css[a];b[0].css(b[1],void 0===b[2]?"":b[2])}s.saved=!1,s.me.data("__nicescroll","");var c=j.nicescroll;c.each(function(a){if(this&&this.id===s.id){delete c[a];for(var b=++a;b<c.length;b++,a++)c[a]=c[b];--c.length&&delete c[c.length]}});for(var d in s)s[d]=null,delete s[d];s=null},this.scrollstart=function(a){return this.onscrollstart=a,s},this.scrollend=function(a){return this.onscrollend=a,s},this.scrollcancel=function(a){return this.onscrollcancel=a,s},this.zoomin=function(a){return this.onzoomin=a,s},this.zoomout=function(a){return this.onzoomout=a,s},this.isScrollable=function(a){var b=a.target?a.target:a;if("OPTION"==b.nodeName)return!0;for(;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=j(b),d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d))return b.clientHeight!=b.scrollHeight;b=!!b.parentNode&&b.parentNode}return!1},this.getViewport=function(a){for(var b=!(!a||!a.parentNode)&&a.parentNode;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=j(b);if(/fixed|absolute/.test(c.css("position")))return c;var d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&b.clientHeight!=b.scrollHeight)return c;if(c.getNiceScroll().length>0)return c;b=!!b.parentNode&&b.parentNode}return!1},this.onmousewheel=function(a){if(s.locked)return s.debounced("checkunlock",s.resize,250),!0;if(s.rail.drag)return s.cancelEvent(a);if("auto"==s.opt.oneaxismousemode&&0!=a.deltaX&&(s.opt.oneaxismousemode=!1),s.opt.oneaxismousemode&&0==a.deltaX&&!s.rail.scrollable)return!s.railh||!s.railh.scrollable||s.onmousewheelhr(a);var b=+new Date,c=!1;if(s.opt.preservenativescrolling&&s.checkarea+600<b&&(s.nativescrollingarea=s.isScrollable(a),c=!0),s.checkarea=b,s.nativescrollingarea)return!0;var d=p(a,!1,c);return d&&(s.checkarea=0),d},this.onmousewheelhr=function(a){if(s.locked||!s.railh.scrollable)return!0;if(s.rail.drag)return s.cancelEvent(a);var b=+new Date,c=!1;return s.opt.preservenativescrolling&&s.checkarea+600<b&&(s.nativescrollingarea=s.isScrollable(a),c=!0),s.checkarea=b,!!s.nativescrollingarea||(s.locked?s.cancelEvent(a):p(a,!0,c))},this.stop=function(){return s.cancelScroll(),s.scrollmon&&s.scrollmon.stop(),s.cursorfreezed=!1,s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.noticeCursor(),s},this.getTransitionSpeed=function(a){var b=Math.round(10*s.opt.scrollspeed),c=Math.min(b,Math.round(a/20*s.opt.scrollspeed));return c>20?c:0},s.opt.smoothscroll?s.ishwscroll&&w.hastransition&&s.opt.usetransition?(this.prepareTransition=function(a,b){var c=b?a>20?a:0:s.getTransitionSpeed(a),d=c?w.prefixstyle+"transform "+c+"ms ease-out":"";return s.lasttransitionstyle&&s.lasttransitionstyle==d||(s.lasttransitionstyle=d,s.doc.css(w.transitionstyle,d)),c},this.doScrollLeft=function(a,b){var c=s.scrollrunning?s.newscrolly:s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.scrollrunning?s.newscrollx:s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=s.getScrollTop(),e=s.getScrollLeft();return((s.newscrolly-d)*(b-d)<0||(s.newscrollx-e)*(a-e)<0)&&s.cancelScroll(),0==s.opt.bouncescroll&&(b<0?b=0:b>s.page.maxh&&(b=s.page.maxh),a<0?a=0:a>s.page.maxw&&(a=s.page.maxw)),(!s.scrollrunning||a!=s.newscrollx||b!=s.newscrolly)&&(s.newscrolly=b,s.newscrollx=a,s.newscrollspeed=c||!1,!s.timer&&void(s.timer=setTimeout(function(){var c=s.getScrollTop(),d=s.getScrollLeft(),e={};e.x=a-d,e.y=b-c,e.px=d,e.py=c;var f=Math.round(Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))),g=s.newscrollspeed&&s.newscrollspeed>1?s.newscrollspeed:s.getTransitionSpeed(f);if(s.newscrollspeed&&s.newscrollspeed<=1&&(g*=s.newscrollspeed),s.prepareTransition(g,!0),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),g>0){if(!s.scrollrunning&&s.onscrollstart){var h={type:"scrollstart",current:{x:d,y:c},request:{x:a,y:b},end:{x:s.newscrollx,y:s.newscrolly},speed:g};s.onscrollstart.call(s,h)}w.transitionend?s.scrollendtrapped||(s.scrollendtrapped=!0,s.bind(s.doc,w.transitionend,s.onScrollEnd,!1)):(s.scrollendtrapped&&clearTimeout(s.scrollendtrapped),s.scrollendtrapped=setTimeout(s.onScrollEnd,g));var i=c,j=d;s.timerscroll={bz:new BezierClass(i,s.newscrolly,g,0,0,.58,1),bh:new BezierClass(j,s.newscrollx,g,0,0,.58,1)},s.cursorfreezed||(s.timerscroll.tm=setInterval(function(){s.showCursor(s.getScrollTop(),s.getScrollLeft())},60))}s.synched("doScroll-set",function(){s.timer=0,s.scrollendtrapped&&(s.scrollrunning=!0),s.setScrollTop(s.newscrolly),s.setScrollLeft(s.newscrollx),s.scrollendtrapped||s.onScrollEnd()})},50)))},this.cancelScroll=function(){if(!s.scrollendtrapped)return!0;var a=s.getScrollTop(),b=s.getScrollLeft();return s.scrollrunning=!1,w.transitionend||clearTimeout(w.transitionend),s.scrollendtrapped=!1,s._unbind(s.doc,w.transitionend,s.onScrollEnd),s.prepareTransition(0),s.setScrollTop(a),s.railh&&s.setScrollLeft(b),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),s.timerscroll=!1,s.cursorfreezed=!1,s.showCursor(a,b),s},this.onScrollEnd=function(){s.scrollendtrapped&&s._unbind(s.doc,w.transitionend,s.onScrollEnd),s.scrollendtrapped=!1,s.prepareTransition(0),s.timerscroll&&s.timerscroll.tm&&clearInterval(s.timerscroll.tm),s.timerscroll=!1;var a=s.getScrollTop(),b=s.getScrollLeft();if(s.setScrollTop(a),s.railh&&s.setScrollLeft(b),s.noticeCursor(!1,a,b),s.cursorfreezed=!1,a<0?a=0:a>s.page.maxh&&(a=s.page.maxh),b<0?b=0:b>s.page.maxw&&(b=s.page.maxw),a!=s.newscrolly||b!=s.newscrollx)return s.doScrollPos(b,a,s.opt.snapbackspeed);if(s.onscrollend&&s.scrollrunning){var c={type:"scrollend",current:{x:b,y:a},end:{x:s.newscrollx,y:s.newscrolly}};s.onscrollend.call(s,c)}s.scrollrunning=!1}):(this.doScrollLeft=function(a,b){var c=s.scrollrunning?s.newscrolly:s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.scrollrunning?s.newscrollx:s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){function d(){if(s.cancelAnimationFrame)return!0;if(s.scrollrunning=!0,k=1-k)return s.timer=m(d)||1;var a=0,b=sy=s.getScrollTop();if(s.dst.ay){b=s.bzscroll?s.dst.py+s.bzscroll.getNow()*s.dst.ay:s.newscrolly;var c=b-sy;(c<0&&b<s.newscrolly||c>0&&b>s.newscrolly)&&(b=s.newscrolly),s.setScrollTop(b),b==s.newscrolly&&(a=1)}else a=1;var e=sx=s.getScrollLeft();if(s.dst.ax){e=s.bzscroll?s.dst.px+s.bzscroll.getNow()*s.dst.ax:s.newscrollx;var c=e-sx;(c<0&&e<s.newscrollx||c>0&&e>s.newscrollx)&&(e=s.newscrollx),s.setScrollLeft(e),e==s.newscrollx&&(a+=1)}else a+=1;if(2==a){if(s.timer=0,s.cursorfreezed=!1,s.bzscroll=!1,s.scrollrunning=!1,b<0?b=0:b>s.page.maxh&&(b=s.page.maxh),e<0?e=0:e>s.page.maxw&&(e=s.page.maxw),e!=s.newscrollx||b!=s.newscrolly)s.doScrollPos(e,b);else if(s.onscrollend){var f={type:"scrollend",current:{x:sx,y:sy},end:{x:s.newscrollx,y:s.newscrolly}};s.onscrollend.call(s,f)}}else s.timer=m(d)||1}var b=void 0===b||!1===b?s.getScrollTop(!0):b;if(s.timer&&s.newscrolly==b&&s.newscrollx==a)return!0;s.timer&&n(s.timer),s.timer=0;var e=s.getScrollTop(),f=s.getScrollLeft();((s.newscrolly-e)*(b-e)<0||(s.newscrollx-f)*(a-f)<0)&&s.cancelScroll(),s.newscrolly=b,s.newscrollx=a,s.bouncescroll&&s.rail.visibility||(s.newscrolly<0?s.newscrolly=0:s.newscrolly>s.page.maxh&&(s.newscrolly=s.page.maxh)),s.bouncescroll&&s.railh.visibility||(s.newscrollx<0?s.newscrollx=0:s.newscrollx>s.page.maxw&&(s.newscrollx=s.page.maxw)),s.dst={},s.dst.x=a-f,s.dst.y=b-e,s.dst.px=f,s.dst.py=e;var g=Math.round(Math.sqrt(Math.pow(s.dst.x,2)+Math.pow(s.dst.y,2)));s.dst.ax=s.dst.x/g,s.dst.ay=s.dst.y/g;var h=0,i=g;0==s.dst.x?(h=e,i=b,s.dst.ay=1,s.dst.py=0):0==s.dst.y&&(h=f,i=a,s.dst.ax=1,s.dst.px=0);var j=s.getTransitionSpeed(g);if(c&&c<=1&&(j*=c),s.bzscroll=j>0&&(s.bzscroll?s.bzscroll.update(i,j):new BezierClass(h,i,j,0,1,0,1)),!s.timer){(e==s.page.maxh&&b>=s.page.maxh||f==s.page.maxw&&a>=s.page.maxw)&&s.checkContentSize();var k=1;if(s.cancelAnimationFrame=!1,s.timer=1,s.onscrollstart&&!s.scrollrunning){var l={type:"scrollstart",current:{x:f,y:e},request:{x:a,y:b},end:{x:s.newscrollx,y:s.newscrolly},speed:j};s.onscrollstart.call(s,l)}d(),(e==s.page.maxh&&b>=e||f==s.page.maxw&&a>=f)&&s.checkContentSize(),s.noticeCursor()}},this.cancelScroll=function(){return s.timer&&n(s.timer),s.timer=0,s.bzscroll=!1,s.scrollrunning=!1,s}):(this.doScrollLeft=function(a,b){var c=s.getScrollTop();s.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=s.getScrollLeft();s.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=a>s.page.maxw?s.page.maxw:a;d<0&&(d=0);var e=b>s.page.maxh?s.page.maxh:b;e<0&&(e=0),s.synched("scroll",function(){s.setScrollTop(e),s.setScrollLeft(d)})},this.cancelScroll=function(){}),this.doScrollBy=function(a,b){var c=0;if(b)c=Math.floor((s.scroll.y-a)*s.scrollratio.y);else{c=(s.timer?s.newscrolly:s.getScrollTop(!0))-a}if(s.bouncescroll){var e=Math.round(s.view.h/2);c<-e?c=-e:c>s.page.maxh+e&&(c=s.page.maxh+e)}return s.cursorfreezed=!1,py=s.getScrollTop(!0),c<0&&py<=0?s.noticeCursor():c>s.page.maxh&&py>=s.page.maxh?(s.checkContentSize(),s.noticeCursor()):void s.doScrollTop(c)},this.doScrollLeftBy=function(a,b){var c=0;if(b)c=Math.floor((s.scroll.x-a)*s.scrollratio.x);else{c=(s.timer?s.newscrollx:s.getScrollLeft(!0))-a}if(s.bouncescroll){var e=Math.round(s.view.w/2);c<-e?c=-e:c>s.page.maxw+e&&(c=s.page.maxw+e)}return s.cursorfreezed=!1,px=s.getScrollLeft(!0),c<0&&px<=0?s.noticeCursor():c>s.page.maxw&&px>=s.page.maxw?s.noticeCursor():void s.doScrollLeft(c)},this.doScrollTo=function(a,b){var c=b?Math.round(a*s.scrollratio.y):a;c<0?c=0:c>s.page.maxh&&(c=s.page.maxh),s.cursorfreezed=!1,s.doScrollTop(a)},this.checkContentSize=function(){var a=s.getContentSize();a.h==s.page.h&&a.w==s.page.w||s.resize(!1,a)},s.onscroll=function(a){s.rail.drag||s.cursorfreezed||s.synched("scroll",function(){s.scroll.y=Math.round(s.getScrollTop()*(1/s.scrollratio.y)),s.railh&&(s.scroll.x=Math.round(s.getScrollLeft()*(1/s.scrollratio.x))),s.noticeCursor()})},s.bind(s.docscroll,"scroll",s.onscroll),this.doZoomIn=function(a){if(!s.zoomactive){s.zoomactive=!0,s.zoomrestore={style:{}};var b=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],c=s.win[0].style;for(var d in b){var e=b[d];s.zoomrestore.style[e]=void 0!==c[e]?c[e]:""}s.zoomrestore.style.width=s.win.css("width"),s.zoomrestore.style.height=s.win.css("height"),s.zoomrestore.padding={w:s.win.outerWidth()-s.win.width(),h:s.win.outerHeight()-s.win.height()},w.isios4&&(s.zoomrestore.scrollTop=j(window).scrollTop(),j(window).scrollTop(0)),s.win.css({position:w.isios4?"absolute":"fixed",top:0,left:0,"z-index":i+100,margin:"0px"});var f=s.win.css("backgroundColor");return(""==f||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(f))&&s.win.css("backgroundColor","#fff"),s.rail.css({"z-index":i+101}),s.zoom.css({"z-index":i+102}),s.zoom.css("backgroundPosition","0px -18px"),s.resizeZoom(),s.onzoomin&&s.onzoomin.call(s),s.cancelEvent(a)}},this.doZoomOut=function(a){if(s.zoomactive)return s.zoomactive=!1,s.win.css("margin",""),s.win.css(s.zoomrestore.style),w.isios4&&j(window).scrollTop(s.zoomrestore.scrollTop),s.rail.css({"z-index":s.zindex}),s.zoom.css({"z-index":s.zindex}),s.zoomrestore=!1,s.zoom.css("backgroundPosition","0px 0px"),s.onResize(),s.onzoomout&&s.onzoomout.call(s),s.cancelEvent(a)},this.doZoom=function(a){return s.zoomactive?s.doZoomOut(a):s.doZoomIn(a)},this.resizeZoom=function(){if(s.zoomactive){var a=s.getScrollTop();s.win.css({width:j(window).width()-s.zoomrestore.padding.w+"px",height:j(window).height()-s.zoomrestore.padding.h+"px"}),s.onResize(),s.setScrollTop(Math.min(s.page.maxh,a))}},this.init(),j.nicescroll.push(this)},v=function(a){var b=this;this.nc=a,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(a,c){b.stop();var d=b.time();b.steptime=0,b.lasttime=d,b.speedx=0,b.speedy=0,b.lastx=a,b.lasty=c,b.lastscrollx=-1,b.lastscrolly=-1},this.update=function(a,c){var d=b.time();b.steptime=d-b.lasttime,b.lasttime=d;var e=c-b.lasty,f=a-b.lastx,g=b.nc.getScrollTop(),h=b.nc.getScrollLeft(),i=g+e,j=h+f;b.snapx=j<0||j>b.nc.page.maxw,b.snapy=i<0||i>b.nc.page.maxh,b.speedx=f,b.speedy=e,b.lastx=a,b.lasty=c},this.stop=function(){b.nc.unsynched("domomentum2d"),b.timer&&clearTimeout(b.timer),b.timer=0,b.lastscrollx=-1,b.lastscrolly=-1},this.doSnapy=function(a,c){var d=!1;c<0?(c=0,d=!0):c>b.nc.page.maxh&&(c=b.nc.page.maxh,d=!0),a<0?(a=0,d=!0):a>b.nc.page.maxw&&(a=b.nc.page.maxw,d=!0),d&&b.nc.doScrollPos(a,c,b.nc.opt.snapbackspeed)},this.doMomentum=function(a){var c=b.time(),d=a?c+a:b.lasttime,e=b.nc.getScrollLeft(),f=b.nc.getScrollTop(),g=b.nc.page.maxh,h=b.nc.page.maxw;b.speedx=h>0?Math.min(60,b.speedx):0,b.speedy=g>0?Math.min(60,b.speedy):0;var i=d&&c-d<=60;(f<0||f>g||e<0||e>h)&&(i=!1);var j=!(!b.speedy||!i)&&b.speedy,k=!(!b.speedx||!i)&&b.speedx;if(j||k){var l=Math.max(16,b.steptime);if(l>50){var m=l/50;b.speedx*=m,b.speedy*=m,l=50}b.demulxy=0,b.lastscrollx=b.nc.getScrollLeft(),b.chkx=b.lastscrollx,b.lastscrolly=b.nc.getScrollTop(),b.chky=b.lastscrolly;var n=b.lastscrollx,o=b.lastscrolly,p=function(){var a=b.time()-c>600?.04:.02;b.speedx&&(n=Math.floor(b.lastscrollx-b.speedx*(1-b.demulxy)),b.lastscrollx=n,(n<0||n>h)&&(a=.1)),b.speedy&&(o=Math.floor(b.lastscrolly-b.speedy*(1-b.demulxy)),b.lastscrolly=o,(o<0||o>g)&&(a=.1)),b.demulxy=Math.min(1,b.demulxy+a),b.nc.synched("domomentum2d",function(){if(b.speedx){b.nc.getScrollLeft()!=b.chkx&&b.stop(),b.chkx=n,b.nc.setScrollLeft(n)}if(b.speedy){b.nc.getScrollTop()!=b.chky&&b.stop(),b.chky=o,b.nc.setScrollTop(o)}b.timer||(b.nc.hideCursor(),b.doSnapy(n,o))}),b.demulxy<1?b.timer=setTimeout(p,l):(b.stop(),b.nc.hideCursor(),b.doSnapy(n,o))};p()}else b.doSnapy(b.nc.getScrollLeft(),b.nc.getScrollTop())}},w=b.fn.scrollTop;b.cssHooks.pageYOffset={get:function(a,b,c){var d=j.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollTop():w.call(a)},set:function(a,b){var c=j.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollTop(parseInt(b)):w.call(a,b),this}},b.fn.scrollTop=function(a){if(void 0===a){var b=!!this[0]&&(j.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollTop():w.call(this)}return this.each(function(){var b=j.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollTop(parseInt(a)):w.call(j(this),a)})};var x=b.fn.scrollLeft;j.cssHooks.pageXOffset={get:function(a,b,c){var d=j.data(a,"__nicescroll")||!1;return d&&d.ishwscroll?d.getScrollLeft():x.call(a)},set:function(a,b){var c=j.data(a,"__nicescroll")||!1;return c&&c.ishwscroll?c.setScrollLeft(parseInt(b)):x.call(a,b),this}},b.fn.scrollLeft=function(a){if(void 0===a){var b=!!this[0]&&(j.data(this[0],"__nicescroll")||!1);return b&&b.ishwscroll?b.getScrollLeft():x.call(this)}return this.each(function(){var b=j.data(this,"__nicescroll")||!1;b&&b.ishwscroll?b.setScrollLeft(parseInt(a)):x.call(j(this),a)})};var y=function(b){var c=this;if(this.length=0,this.name="nicescrollarray",this.each=function(a){for(var b=0,d=0;b<c.length;b++)a.call(c[b],d++);return c},this.push=function(a){c[c.length]=a,c.length++},this.eq=function(a){return c[a]},b)for(a=0;a<b.length;a++){var d=j.data(b[a],"__nicescroll")||!1;d&&(this[this.length]=d,this.length++)}return this};d(y.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(a,b){a[b]=function(){var a=arguments;return this.each(function(){this[b].apply(this,a)})}}),b.fn.getNiceScroll=function(a){return void 0===a?new y(this):this[a]&&j.data(this[a],"__nicescroll")||!1},b.extend(b.expr[":"],{nicescroll:function(a){return!!j.data(a,"__nicescroll")}}),j.fn.niceScroll=function(a,b){void 0===b&&("object"!=typeof a||"jquery"in a||(b=a,a=!1));var c=new y;void 0===b&&(b={}),a&&(b.doc=j(a),b.win=j(this));var d=!("doc"in b);return d||"win"in b||(b.win=j(this)),this.each(function(){var a=j(this).data("__nicescroll")||!1;a||(b.doc=d?j(this):b.doc,a=new u(b,j(this)),j(this).data("__nicescroll",a)),c.push(a)}),1==c.length?c[0]:c},window.NiceScroll={getjQuery:function(){return b}},j.nicescroll||(j.nicescroll=new y,j.nicescroll.options=r)}(jQuery),window.Wg=window.Wg||{},Wg.QuickPurchase=Wg.QuickPurchase||function(){function g(a){return $.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})}var a=$("table.quickPurchase"),b=$("#QuickPurchaseKeywords"),c=$("#placeOrder"),e=null,f=null;return{orderHandlerDelegate:function(b){var c=[];if($(".productCode").each(function(a){c.push($(this).data("skuid"))}),c.length>0){var d="/basket/action/?command=add&sample=True&skuid="+c.join(",");$.get(d,function(b){if($("body .notification").remove(),"Successful"===b.Status)$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2></div>').prependTo("body"),a.find("tr:not(.autoCompleteRow)").remove(),window.location="/basket/summary/";else{var c=[];$.each(b.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},6e3),jQuery.fx.interval=20})}},init:function(){var h=this;$(document).ready(function(){$.when(g("quick-purchase-row"),g("quick-purchase-autocomplete")).done(function(a,b){e=_.template(a[0]),f=_.template(b[0])}),b.autocomplete({delay:500,minLength:3,source:"/shops/WgShop/PredictiveSearchFrontendQuickPurchase/",focus:function(a,b){a.preventDefault()},select:function(a,c){a.preventDefault(),b.parents("tr").before(e(c.item)),b.val(""),$(document).trigger("priceupdate")}}).on("keydown",function(a){if(13==a.keyCode)return a.preventDefault(),!1}).data("ui-autocomplete")._renderItem=function(b,c){return $(f($.extend(c,{b2b:a.hasClass("b2b")}))).data("item.autocomplete",$.extend(c,{b2b:a.hasClass("b2b")})).appendTo(b)},a.not(".b2b").on("click",".removeItem a",function(a){return a.preventDefault(),$(this).parents("tr").remove(),!1}),c.on("click",function(a){return a.preventDefault(),h.orderHandlerDelegate(),!1})})}}}(),Wg.QuickPurchase.init();var imageLoaderBlankState="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",QuickView=function(a,b,c,d,e){({init:function(){var f=this;f.scrollOffset=c,f.collection=a,f.items=function(){return f.collection.children("."+f.itemClass)},f.quickViewType=b,f.after=d,f.ajaxLoader=e,f.url="collection"==f.quickViewType?"/shops/wgshop/collectionquickview?categoryId=":"/shops/wgshop/paintquickview?productId=",f.patternReplace="collection"==f.quickViewType?"category_":"product_",f.quickViewChildSelector=".selectedItem",f.columns=Math.floor(f.collection.innerWidth()/f.items().first().outerWidth()),f.rows=function(){return Math.ceil(f.items().length/f.columns)},a.off("click",">."+f.itemClass+">.quickViewLink, a.quickview-close"),a.on("click",">."+f.itemClass+">.quickViewLink, a.quickview-close",function(a){return a.preventDefault(),f.clickHandler(a.currentTarget),!1})},ajaxTimeout:3e4,itemClass:"item",selectedClass:"selected",quickViewContainerTemplate:'<div class="selectedItemContainer"></div>',currentSelectedItem:null,selectedItemIndex:null,selectedItemRow:null,quickViewPlacement:null,ajaxReference:null,parentItem:null,collapse:function(a,b){a.stop().animate({height:0},400,function(){a.remove(),b(a)})},scrollToElement:function(a){a.ScrollTo({duration:400,easing:"linear",offsetTop:this.scrollOffset})},expand:function(a){},clickHandler:function(a){var b=this;b.items().filter("."+b.selectedClass).removeClass(b.selectedClass);var c=$(a).closest("."+b.itemClass);if($(a).hasClass("button-close")){if(!$(a).parent().parent().hasClass("productCollections")){var d=$("*[data-quick-view-id = "+$(this).parents("section").attr("id")+"]");return b.selectedItemRow=9999,$(".selectedItemContainer").stop().animate({height:0},400,function(){$(".selectedItemContainer").remove(),$("#share").remove(),$("#pinterestImages").remove(),d.removeClass("selected")}),!1}}else null!=b.currentSelectedItem?b.collapse(b.currentSelectedItem,function(){b.currentSelectedItem=null,$("#share").remove(),$("#pinterestImages").remove(),b.clickHandlerAfter(c)}):b.clickHandlerAfter(c)},clickHandlerAfter:function(a){var b=this,c=b.items().index(a)+1;if(b.selectedItemIndex===c)return void(b.selectedItemIndex=null);b.selectedItemIndex=c,b.parentItem=a,b.selectedItemRow=Math.ceil(b.selectedItemIndex/b.columns),b.quickViewPlacement=b.selectedItemRow*b.columns-1;var d=a.data("quick-view-id");if(null!=d){var e=d.toString().replace(b.patternReplace,""),f=a.data("productcode"),g=a.data("skuid"),h=b.url+e;null!=f&&(h=Redant.util.setQuerystring(h,"code",f)),null!=g&&(h=Redant.util.setQuerystring(h,"skuId",g)),b.triggerAjax(h)}},placeholderStart:function(a){var b=a.src;$(a).data("src",b),a.src="/_images/placeholders/img-loader.gif";var c=new Image;c.src=b,c.onload=function(){$(a).fadeOut("fast",function(){$(a).attr("src",$(a).data("src")),$(a).fadeIn("fast")})},c.onerror=function(){$(a).fadeOut("fast",function(){$(a).attr("src",$(a).data("src")),$(a).fadeIn("fast")})}},triggerAjax:function(a){var b=this;null!=b.ajaxReference&&b.ajaxReference.abort();var c=$(b.quickViewContainerTemplate),d=setTimeout(function(){b.parentItem.addClass(b.selectedClass);var a=b.ajaxLoader.clone(),d=c.append(a);b.currentSelectedItem=d,b.selectedItemRow==b.rows()?b.collection.append(d):b.items().eq(b.quickViewPlacement).after(d),$(d).animate({height:110},400)},1e3);this.ajaxReference=$.ajax({url:a,timeout:b.ajaxTimeout,success:function(a){clearTimeout(d),b.currentSelectedItem=c.append(a),b.currentSelectedItem.children(b.quickViewChildSelector).hide();for(var e=b.currentSelectedItem.find("img"),f=0;f<e.length;f++)b.placeholderStart(e[f]);Number(b.selectedItemRow)==Number(b.rows())?b.collection.append(b.currentSelectedItem):b.items().eq(b.quickViewPlacement).after(b.currentSelectedItem),$(".loading-container",b.currentSelectedItem).remove(),b.parentItem.addClass(b.selectedClass),""!=b.quickViewChildSelector?(b.currentSelectedItem.children(b.quickViewChildSelector).show(),$(".quickview-image").length&&$(".quickview-image").height($(".quickview-image").width()),$(".related-images img").length&&$(".related-images img").height($(".related-images img").width()),b.currentSelectedItem.animate({height:b.currentSelectedItem.children(b.quickViewChildSelector).outerHeight()},400,function(){b.after(),b.scrollToElement(b.currentSelectedItem),$(document).trigger("quickview:expanded")})):(b.currentSelectedItem.children().show(),b.currentSelectedItem.animate({height:b.currentSelectedItem.children().first().outerHeight()},400,function(){b.after(),b.scrollToElement(b.currentSelectedItem),$(document).trigger("quickview:expanded")})),b.ajaxReference=null}})}}).init()},requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){!c&&hasProp(a,e)||(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function p(a){var b,c;for(b=0;a[b];b+=1)if("."===(c=a[b]))a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function q(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,q=b&&b.split("/"),r=q,s=g.map,t=s&&s["*"];if(a&&"."===a.charAt(0)&&(b?(r=getOwn(g.pkgs,b)?q=[b]:q.slice(0,q.length-1),a=r.concat(a.split("/")),p(a),e=getOwn(g.pkgs,d=a[0]),a=a.join("/"),e&&a===d+"/"+e.main&&(a=d)):0===a.indexOf("./")&&(a=a.substring(2))),c&&s&&(q||t)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),q)for(j=q.length;j>0;j-=1)if((f=getOwn(s,q.slice(0,j).join("/")))&&(f=getOwn(f,k))){l=f,m=i;break}if(l)break;!n&&t&&getOwn(t,k)&&(n=getOwn(t,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function r(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===d.contextName)return b.parentNode.removeChild(b),!0})}function s(a){var b=getOwn(g.paths,a);if(b&&isArray(b)&&b.length>1)return r(a),b.shift(),d.require.undef(a),d.require([a]),!0}function t(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function u(a,b,c,e){var f,g,h,i,j=null,k=b?b.name:null,m=a,p=!0,r="";return a||(p=!1,a="_@r"+(n+=1)),i=t(a),j=i[0],a=i[1],j&&(j=q(j,k,e),g=getOwn(l,j)),a&&(j?r=g&&g.normalize?g.normalize(a,function(a){return q(a,k,e)}):q(a,k,e):(r=q(a,k,e),i=t(r),j=i[0],r=i[1],c=!0,f=d.nameToUrl(r))),h=!j||g||c?"":"_unnormalized"+(o+=1),{prefix:j,name:r,parentMap:b,unnormalized:!!h,url:f,originalName:m,isDefine:p,id:(j?j+"!"+r:r)+h}}function v(a){var b=a.id,c=getOwn(h,b);return c||(c=h[b]=new d.Module(a)),c}function w(a,b,c){var d=a.id,e=getOwn(h,d);!hasProp(l,d)||e&&!e.defineEmitComplete?(e=v(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(l[d])}function x(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(h,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function y(){globalDefQueue.length&&(apsp.apply(k,[k.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function z(a){delete h[a],delete i[a]}function A(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(h,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,l[f]),a.check()):A(g,b,c))}),c[d]=!0)}function B(){var a,c,e,h,j=1e3*g.waitSeconds,k=j&&d.startTime+j<(new Date).getTime(),l=[],m=[],n=!1,o=!0;if(!b){if(b=!0,eachProp(i,function(b){if(a=b.map,c=a.id,b.enabled&&(a.isDefine||m.push(b),!b.error))if(!b.inited&&k)s(c)?(h=!0,n=!0):(l.push(c),r(c));else if(!b.inited&&b.fetched&&a.isDefine&&(n=!0,!a.prefix))return o=!1}),k&&l.length)return e=makeError("timeout","Load timeout for modules: "+l,null,l),e.contextName=d.contextName,x(e);o&&each(m,function(a){A(a,{},{})}),k&&!h||!n||!isBrowser&&!isWebWorker||f||(f=setTimeout(function(){f=0,B()},50)),b=!1}}function C(a){hasProp(l,a[0])||v(u(a[0],null,!0)).init(a[1],a[2])}function D(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function E(a){var b=a.currentTarget||a.srcElement;return D(b,d.onScriptLoad,"load","onreadystatechange"),D(b,d.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function F(){var a;for(y();k.length;){if(a=k.shift(),null===a[0])return x(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));C(a)}}var b,c,d,e,f,g={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},h={},i={},j={},k=[],l={},m={},n=1,o=1;return e={require:function(a){return a.require?a.require:a.require=d.makeRequire(a.map)},exports:function(a){if(a.usingExports=!0,a.map.isDefine)return a.exports?a.exports:a.exports=l[a.map.id]={}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var c=getOwn(g.pkgs,a.map.id);return(c?getOwn(g.config,a.map.id+"/"+c.main):getOwn(g.config,a.map.id))||{}},exports:l[a.map.id]}}},c=function(a){this.events=getOwn(j,a.id)||{},this.map=a,this.shim=getOwn(g.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},c.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,d.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();d.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;m[a]||(m[a]=!0,d.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,e=this.depExports,f=this.exports,g=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(g)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{f=d.execCb(c,g,e,f)}catch(b){a=b}else f=d.execCb(c,g,e,f);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?f=b.exports:void 0===f&&this.usingExports&&(f=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",x(this.error=a)}else f=g;this.exports=f,this.map.isDefine&&!this.ignore&&(l[c]=f,req.onResourceLoad&&req.onResourceLoad(d,this.map,this.depMaps)),z(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,c=u(a.prefix);this.depMaps.push(c),w(c,"defined",bind(this,function(c){var e,f,i,j=this.map.name,k=this.map.parentMap?this.map.parentMap.name:null,l=d.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized)return c.normalize&&(j=c.normalize(j,function(a){return q(a,k,!0)})||""),f=u(a.prefix+"!"+j,this.map.parentMap),w(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),void((i=getOwn(h,f.id))&&(this.depMaps.push(f),this.events.error&&i.on("error",bind(this,function(a){this.emit("error",a)})),i.enable()));e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&z(a.map.id)}),x(a)}),e.fromText=bind(this,function(c,f){var h=a.name,i=u(h),j=useInteractive;f&&(c=f),j&&(useInteractive=!1),v(i),hasProp(g.config,b)&&(g.config[h]=g.config[b]);try{req.exec(c)}catch(a){return x(makeError("fromtexteval","fromText eval for "+b+" failed: "+a,a,[b]))}j&&(useInteractive=!0),this.depMaps.push(i),d.completeLoad(h),l([h],e)}),c.load(a.name,l,e,g)})),d.enable(c,this),this.pluginMaps[c.id]=c},enable:function(){i[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,f,g;if("string"==typeof a){if(a=u(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,g=getOwn(e,a.id))return void(this.depExports[b]=g(this));this.depCount+=1,w(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&w(a,"error",bind(this,this.errback))}c=a.id,f=h[c],hasProp(e,c)||!f||f.enabled||d.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(h,a.id);b&&!b.enabled&&d.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},d={config:g,contextName:a,registry:h,defined:l,urlFetched:m,defQueue:k,Module:c,makeModuleMap:u,nextTick:req.nextTick,onError:x,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=g.pkgs,c=g.shim,e={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){e[b]?"map"===b?(g.map||(g.map={}),mixin(g[b],a,!0,!0)):mixin(g[b],a,!0):g[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=d.makeShimExports(a)),c[b]=a}),g.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),g.pkgs=b),eachProp(h,function(a,b){a.inited||a.map.unnormalized||(a.map=u(b))}),(a.deps||a.callback)&&d.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,c){function f(g,i,j){var k,m,n;return c.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof g?isFunction(i)?x(makeError("requireargs","Invalid require call"),j):b&&hasProp(e,g)?e[g](h[b.id]):req.get?req.get(d,g,b,f):(m=u(g,b,!1,!0),k=m.id,hasProp(l,k)?l[k]:x(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(F(),d.nextTick(function(){F(),n=v(u(null,b)),n.skipMap=c.skipMap,n.init(g,i,j,{enabled:!0}),B()}),f)}return c=c||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),d.nameToUrl(q(a,b&&b.id,!0),c,!0)},defined:function(a){return hasProp(l,u(a,b,!1,!0).id)},specified:function(a){return a=u(a,b,!1,!0).id,hasProp(l,a)||hasProp(h,a)}}),b||(f.undef=function(a){y();var c=u(a,b,!0),d=getOwn(h,a);delete l[a],delete m[c.url],delete j[a],d&&(d.events.defined&&(j[a]=d.events),z(a))}),f},enable:function(a){getOwn(h,a.id)&&v(a).enable()},completeLoad:function(a){var b,c,d,e=getOwn(g.shim,a)||{},f=e.exports;for(y();k.length;){if(c=k.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);C(c)}if(d=getOwn(h,a),!b&&!hasProp(l,a)&&d&&!d.inited){if(!(!g.enforceDefine||f&&getGlobal(f)))return s(a)?void 0:x(makeError("nodefine","No define call for "+a,null,[a]));C([a,e.deps||[],e.exportsFn])}B()},nameToUrl:function(a,b,c){var d,e,f,h,i,j,k,l,m;if(req.jsExtRegExp.test(a))l=a+(b||"");else{for(d=g.paths,e=g.pkgs,i=a.split("/"),j=i.length;j>0;j-=1){if(k=i.slice(0,j).join("/"),f=getOwn(e,k),m=getOwn(d,k)){isArray(m)&&(m=m[0]),i.splice(0,j,m);break}if(f){h=a===f.name?f.location+"/"+f.main:f.location,i.splice(0,j,h);break}}l=i.join("/"),l+=b||(/\?/.test(l)||c?"":".js"),l=("/"===l.charAt(0)||l.match(/^[\w\+\.\-]+:/)?"":g.baseUrl)+l}return g.urlArgs?l+(-1===l.indexOf("?")?"?":"&")+g.urlArgs:l},load:function(a,b){req.load(d,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=E(a);d.completeLoad(b.id)}},onScriptError:function(a){var b=E(a);if(!s(b.id))return x(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},d.require=d.makeRequire(),d}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){if("interactive"===a.readyState)return interactiveScript=a}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a,b,c){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var e,d=a&&a.config||{};if(isBrowser)return e=req.createNode(d,b,c),e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",b),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)),e.src=c,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(d){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,d,[b]))}},isBrowser&&eachReverse(scripts(),function(a){if(head||(head=a.parentNode),dataMain=a.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript())&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")]),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),_.templateSettings.variable="rc";var selectedItem,saveTimer,disableAjaxCall,isMoving,touch,Scrapbook=function(a){this.id=0,this.name="",this.items=null!=a?new ScrapCollection(a.items):new ScrapCollection;for(var b in a)this[b]=a[b]},ScrapCollection=function(a){var b=[];for(var c in a)b.push(new Scrap(a[c]));return b},Scrap=function(a){this.scrapbookItemId=null,this.zIndex=0,this.name="",this.description="",this.imageUrl="",this.top=0,this.left=0,this.height=0,this.width=0,this.rotation=0,this.scrapbookId=null,this.skuId=null,this.imageAssetId=null,this.isOnCanvas=!1;for(var b in a)this[b]=a[b]},ScrapList=function(a){this.items=new ScrapCollection(a)},scraps,scrapbook=new Scrapbook,scrapbookSaveXhr;$(document).ready(function(){touch=Redant.util.browser.isTouchDevice(),$(document.body).on("click",".item .actions a.plus",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest(".item");if(null!=b){var c=$("#scrapBook"),d=$(b).clone(),e=$(d);e.css({"z-index":-1,top:200,left:200,position:"absolute"}),e.appendTo("body"),handleMoodboardDrop({},{draggable:e,offset:e.offset()}),$("html, body").animate({scrollTop:c.position().top-$("#header").outerHeight()},1e3)}return!1}),$(".save-scrapbook").click(function(){return scrapbook.name=$("#scrapbookName").val(),$(this).text("Saving"),0==scrapbook.id?createScrapbook():updateScrapbook(),requestTimeout(function(){$(".save-scrapbook").text("Saved!")},1300),requestTimeout(function(){$(".save-scrapbook").text("Save")},3e3),!1}),$(document.body).on("mousedown","#scrapBook .scrap",function(a){setSelectedScrap(this),a.stopPropagation()}),setTimeout(function(){$("#scrapBookContainer").animate({height:480},400,function(){$(".loading-scrapbook").fadeOut()})},3e3),0==touch?$("#scrapBookContainer").mouseenter(function(){$("#scrapControls, .selected .ui-resizable-handle, .selected .rotatable-handle").fadeIn(),$(".scrap.selected").addClass("border-dashed")}).mouseleave(function(){$("#scrapControls, .selected .ui-resizable-handle, .selected .rotatable-handle").fadeOut(),$(".scrap.selected").removeClass("border-dashed")}):$("#scrapControls").show(),$(document.body).on("click","#scrapBookSamples .productList .item",function(a){return a.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}),$(document.body).on("click","#scrapBookSamples #selectAllProducts",function(a){$("#scrapBookSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}),$(document.body).on("click","#printButton",function(a){a.preventDefault(),$("#print-info").foundation("reveal","open")}),$(document.body).on("click","#shareButton",function(a){a.preventDefault(),$("#share").foundation("reveal","open")}),$(document.body).on("click","a.button.sample",function(a){a.preventDefault(),$("#scrapBookSamples").foundation("reveal","open")}),$(document.body).on("click","#scrapBookSamples .AddToBasket",function(a){var b=[];if(0==$("#scrapBookSamples .productList .item.selected").length&&$("#noItemsSelected").show(),$("#scrapBookSamples .productList .item.selected").each(function(a){b.push($(this).data("skuid"))}),b.length>0){$("#noItemsSelected").hide();var c="/basket/action/?command=add&skuid="+b.join(",");$.get(c,function(a){if($("body .notification").remove(),"Successful"===a.Status)$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2></div>').prependTo("body"),$("#scrapBookSamples").foundation("reveal","close"),getProducts(),getMiniBasketPartial();else{var b=[];$.each(a.BasketErrors,function(a,c){b.push(c.Message)}),$("#basketErrors").html(b.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},6e3),jQuery.fx.interval=20})}else $("#noItemsSelected").show();return!1}),$.when(getScrapbook()).done(function(){initialize()}),$("#scrapbookName").keyup(function(a){13==(a.keyCode?a.keyCode:a.which)&&(scrapbook.name=$(this).val(),0==scrapbook.id?createScrapbook():updateScrapbook(),$("#scrapbookName").blur())}),$(document.body).on("click","#scrapControls .button",function(a){var b=$(".scrap.selected"),c=b.siblings(".scrap.added"),e=(c.map(function(){return $(a.currentTarget).css("z-index")}),parseInt(b.css("z-index")));switch(a.currentTarget.id){case"top":e=$("#scrapBook .scrap").length+1;break;case"zup":e+=1;break;case"zdown":e-=1;break;case"bottom":e=0;break;case"remove":$(".selected").addClass("deleted"),$(".deleted").fadeOut(300,function(){})}return-1===e&&(e=0,c.each(function(){var a=parseInt($(this).css("z-index"))+1;$(this).css("z-index",a),$(this).find(".zIndex").text(a)})),b.css({zIndex:e}),saveScrapbookItem(b),a.stopPropagation(),!1}),$(document.body).on("click","div.item div.actions a.remove",function(a){a.preventDefault();var b=$(this),c=b.closest("div.item");pushToServer(b.attr("href"),null,!0,function(a){if(a.Success){var b=c.data("scrapbookitemid");null==b||"undefined"==b?c.fadeOut(300):($("#scrapBook div#scrapbookItem_"+b).fadeOut(300),getProducts(),refreshScrapbookList())}})})});var scrapbookSaveXhr;_.templateSettings.variable="rc";var selectedItem,saveTimer,disableAjaxCall,isMoving,touch,Scrapbook=function(a){this.id=0,this.name="",this.items=null!=a?new ScrapCollection(a.items):new ScrapCollection;for(var b in a)this[b]=a[b]},ScrapCollection=function(a){var b=[];for(var c in a)b.push(new Scrap(a[c]));return b},Scrap=function(a){this.scrapbookItemId=null,this.zIndex=0,this.name="",this.description="",this.imageUrl="",this.top=0,this.left=0,this.height=0,this.width=0,this.rotation=0,this.scrapbookId=null,this.skuId=null,this.imageAssetId=null,this.isOnCanvas=!1;for(var b in a)this[b]=a[b]},ScrapList=function(a){this.items=new ScrapCollection(a)},scraps,scrapbook=new Scrapbook;$(document).ready(function(){touch=Redant.util.browser.isTouchDevice(),$(document.body).on("click",".item .actions a.plus",function(a){var b;if(a.preventDefault(),a.stopPropagation(),null!=(b=$(this).closest(".item"))){var c=$("#scrapBook"),d=$(b).clone(),e=$(d);e.css({"z-index":-1,top:200,left:200,position:"absolute"}),e.appendTo("body"),handleMoodboardDrop({},{draggable:e,offset:e.offset()}),$("html,body").animate({scrollTop:c.position().top-$("#header").outerHeight()},1e3)}return!1}),$(".save-scrapbook").click(function(){return scrapbook.name=$("#scrapbookName").val(),$(this).text("Saving"),0==scrapbook.id?createScrapbook():updateScrapbook(),requestTimeout(function(){$(".save-scrapbook").text("Saved!")},1300),requestTimeout(function(){$(".save-scrapbook").text("Save")},3e3),!1}),$(document.body).on("mousedown","#scrapBook .scrap",function(a){setSelectedScrap(this),a.stopPropagation()}),setTimeout(function(){$("#scrapBookContainer").animate({height:480},400,function(){$(".loading-scrapbook").fadeOut()})},3e3),0==touch?$("#scrapBookContainer").mouseenter(function(){$("#scrapControls, .selected .ui-resizable-handle, .selected .rotatable-handle").fadeIn(),$(".scrap.selected").addClass("border-dashed")}).mouseleave(function(){$("#scrapControls, .selected .ui-resizable-handle, .selected .rotatable-handle").fadeOut(),$(".scrap.selected").removeClass("border-dashed")}):$("#scrapControls").show(),$(document.body).on("click","#scrapBookSamples .productList .item",function(a){return a.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}),$(document.body).on("click","#scrapBookSamples #selectAllProducts",function(){$("#scrapBookSamples .productList .item").each(function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}),$(document.body).on("click","#printButton",function(a){a.preventDefault(),$("#print-info").foundation("reveal","open")}),$(document.body).on("click","#shareButton",function(a){a.preventDefault(),$("#share").foundation("reveal","open")}),$(document.body).on("click","a.button.sample",function(a){a.preventDefault(),$("#scrapBookSamples").foundation("reveal","open")}),$(document.body).on("click","#scrapBookSamples .AddToBasket",function(){var b,a=[];return 0==$("#scrapBookSamples .productList .item.selected").length&&$("#noItemsSelected").show(),$("#scrapBookSamples .productList .item.selected").each(function(){a.push($(this).data("skuid"))}),a.length>0?($("#noItemsSelected").hide(),b="/basket/action/?command=add&skuid="+a.join(","),$.get(b,function(a){if($("body .notification").remove(),"Successful"===a.Status)$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2></div>').prependTo("body"),$("#scrapBookSamples").foundation("reveal","close"),getProducts(),getMiniBasketPartial();else{var b=[];$.each(a.BasketErrors,function(a,c){b.push(c.Message)}),$("#basketErrors").html(b.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},6e3),jQuery.fx.interval=20})):$("#noItemsSelected").show(),!1}),$.when(getScrapbook()).done(function(){initialize()}),$("#scrapbookName").keyup(function(a){13==(a.keyCode?a.keyCode:a.which)&&(scrapbook.name=$(this).val(),0==scrapbook.id?createScrapbook():updateScrapbook(),$("#scrapbookName").blur())}),$(document.body).on("click","#scrapControls .button",function(a){var b=$(".scrap.selected"),c=b.siblings(".scrap.added"),e=(c.map(function(){return $(a.currentTarget).css("z-index")}),parseInt(b.css("z-index")));switch(a.currentTarget.id){case"top":e=$("#scrapBook .scrap").length+1;break;case"zup":e+=1;break;case"zdown":e-=1;break;case"bottom":e=0;break;case"remove":$(".selected").addClass("deleted"),$(".deleted").fadeOut(300,function(){})}return-1===e&&(e=0,c.each(function(){var a=parseInt($(this).css("z-index"))+1;$(this).css("z-index",a),$(this).find(".zIndex").text(a)})),b.css({zIndex:e}),saveScrapbookItem(b),a.stopPropagation(),!1}),$(document.body).on("click","div.item div.actions a.remove",function(a){a.preventDefault();var b=$(this),c=b.closest("div.item");pushToServer(b.attr("href"),null,!0,function(a){if(a.Success){var b=c.data("scrapbookitemid");null==b||"undefined"==b?c.fadeOut(300):($("#scrapBook div#scrapbookItem_"+b).fadeOut(300),getProducts(),refreshScrapbookList())}})})}),window.Wg=window.Wg||{},Wg.Moodboard=Wg.Moodboard||function(){var a=function(a){this.id=0,this.name="",this.items=null!=a?new b(a.items):new b;for(var c in a)this[c]=a[c]},b=function(a){var b=[];for(var d in a)b.push(new c(a[d]));return b},c=function(a){this.scrapbookItemId=null,this.zIndex=0,this.name="",this.description="",this.imageUrl="",this.top=0,this.left=0,this.height=0,this.width=0,this.rotation=0,this.scrapbookId=null,this.skuId=null,this.imageAssetId=null,this.isOnCanvas=!1;for(var b in a)this[b]=a[b]};new a}();var Scrapbook=function(a){var b=function(a,b){return{scrapbook:a,scrapbookId:a.id,scrapbookItemId:b.scrapbookItemId,name:b.name,description:b.description,skuId:b.skuId,el:null,imageUrl:b.imageUrl,imageAssetId:b.imageAssetId,zIndex:b.zIndex,rotation:b.rotation,height:b.height,width:b.height,top:b.top,left:b.left,attributes:b.attributes,isOnCanvas:b.isOnCanvas,update:function(){var a="z-index: "+this.zIndex+"; left: "+this.left+"px; top: "+this.top+"px; position: absolute; width: "+this.width+"px; height: "+this.height+"px;transform: rotate("+this.rotation+"rad);-webkit-transform: rotate("+this.rotation+"rad);";this.el||(this.el=$('<div id="scrap'+this.scrapbookItemId+'" data-id="'+this.scrapbookItemId+'" class="scrapbook-scrap"><img class="inner" src="'+this.imageUrl+'"/></div>'),$(this.scrapbook.el).append(this.el)),this.el.attr("style",a),this.isOnCanvas?this.el.show():this.el.hide()},toJSON:function(){var a=this;return{scrapbookId:a.scrapbookId,scrapbookItemId:a.scrapbookItemId,skuId:a.skuId,imageUrl:a.imageUrl,imageAssetId:a.imageAssetId,name:a.name,description:a.description,code:a.code,zIndex:a.zIndex,rotation:a.rotation,height:a.height,width:a.width,top:a.top,left:a.left}}}},c=null;return{el:a,id:0,name:"",scraps:[],pinterestUrl:"",twitterUrl:"",facebookUrl:"",shareUrl:"",isReadOnly:!1,studioListingTemplate:null,moodboardListingTemplate:null,previousState:null,toJSON:function(a,b){for(var c={id:this.id,name:this.name,items:[],pinterestUrl:this.pinterestUrl,twitterUrl:this.twitterUrl,facebookUrl:this.facebookUrl,isReadOnly:this.isReadOnly,shareUrl:this.shareUrl},d=0;d<this.scraps.length;d++)c.items.push(this.scraps[d].toJSON());return c},loadStudioListingTemplate:function(){return $.get("/_js/template/scrapbookItemsScrap.html")},loadMoodboardListingTemplate:function(){return $.get("/_js/template/moodboardItemsScrap.html")},loadFromServer:function(a){var c=this;c.el.find(".scrapbook-scrap").remove();var d=$.Deferred();return $.ajax({url:"/scrapbook/moodboards/scrapbookdata/",data:"scrapbookId="+a,type:"GET",async:!0,xhrFields:{withCredentials:!0},success:function(a){if(a){if(c.id=a.id,c.name=a.name,c.pinterestUrl=a.pinterestUrl,c.twitterUrl=a.twitterUrl,c.facebookUrl=a.facebookUrl,c.shareUrl=a.shareUrl,c.scraps=[],c.isReadOnly=a.isReadOnly,a.items)for(var e=0;e<a.items.length;e++){var f=new b(c,a.items[e]);0===f.zIndex&&(f.zIndex=e),c.scraps.push(f)}c.isReadOnly&&$("#scrapbookName").replaceWith('<div id="scrapbookName">'+c.name+"</div>"),d.resolve()}},error:function(){d.reject()}}),d.promise()},loadStudioListing:function(){var a=this,b=$.Deferred();return $.ajax({url:"/actionuri/studio/studio/listajax/",type:"GET",async:!0,xhrFields:{withCredentials:!0},success:function(c){c&&(a.studio=c,a.updateStudioListing(),b.resolve())},error:function(){b.reject()}}),b.promise()},saveToServer:function(){var a=this;if(null!=c&&c.abort(),$(".scrapbook-status").text("Saving moodboard.  Please wait..."),!(this.id>0))return $(".scrapbook-status").text("Saving moodboard.  Please wait..."),c=$.ajax({url:"/scrapbook/moodboards/addscrapbook",data:"scrapbookName="+a.name||"",type:"POST",async:!0,success:function(b){a.id=b.id,a.name=b.name||"",a.pinterestUrl=b.pinterestUrl,a.twitterUrl=b.twitterUrl,a.facebookUrl=b.facebookUrl,a.shareUrl=b.shareUrl,$(".scrapbook-status").text(""),a.saveToServer()},error:function(a,b,c){"abort"!==c?$(".scrapbook-status").text("Error saving moodboard."):$(".scrapbook-status").text("")}});c=$.ajax({url:"/scrapbook/moodboards/updatescrapbookdata",data:JSON.stringify(this),contentType:"application/json; charset=utf-8",type:"POST",async:!0,success:function(b){console.log(b),a.id=b.id,a.name=b.name||"",a.pinterestUrl=b.pinterestUrl,a.twitterUrl=b.twitterUrl,a.facebookUrl=b.facebookUrl,a.shareUrl=b.shareUrl,$(".scrapbook-status").text("")},error:function(a,b,c){"abort"!==c?$(".scrapbook-status").text("Error saving moodboard."):$(".scrapbook-status").text("")}})},findScrap:function(a){return _.find(this.scraps,function(b){return b.scrapbookItemId===a})},findScrapsAhead:function(a){return _.sortBy(_.filter(this.scraps,function(b){return b.zIndex>a.zIndex}),function(a){return a.zIndex})},findScrapsBehind:function(a){return _.sortBy(_.filter(this.scraps,function(b){return b.zIndex<a.zIndex}),function(a){return a.zIndex})},moveBackward:function(a){var b=this.findScrap(a),c=this.findScrapsBehind(b);c.length>0&&(c[c.length-1].zIndex++,b.zIndex--,this.update())},moveForward:function(a){var b=this.findScrap(a),c=this.findScrapsAhead(b);c.length>0&&(c[0].zIndex--,b.zIndex++,this.update())},moveToBack:function(a){var b=this.findScrap(a),c=this.findScrapsBehind(b);if(c.length>0){b.zIndex=c[0].zIndex;for(var d=0;d<c.length;d++)c[d].zIndex++;this.update()}},moveToFront:function(a){var b=this.findScrap(a),c=this.findScrapsAhead(b);if(c.length>0){b.zIndex=c[c.length-1].zIndex;for(var d=0;d<c.length;d++)c[d].zIndex--;this.update()}},addScrap:function(a,b,c){var d=this;0===d.id?$.when(d.saveToServer()).done(function(e){d.addScrapInner(d,a,b,c)}):d.addScrapInner(d,a,b,c)},addScrapInner:function(a,c,d,e){if(c.data("scrapbookitemid")){var f=a.findScrap(c.data("scrapbookitemid"));f.rotation=0,f.left=d,f.top=e,f.height=f.width=120,f.isOnCanvas=!0,a.update()}else{var f=new b(a,{skuId:c.data("skuid"),imageAssetId:c.data("imageassetid"),imageUrl:c.find("img").attr("src"),rotation:0,left:d,top:e,height:120,width:120,isOnCanvas:!0});$.ajax({url:"/scrapbook/moodboards/additem",data:JSON.stringify(f),contentType:"application/json; charset=utf-8",type:"POST",async:!0,success:function(b){$.extend(f,b),a.scraps.push(f),a.update(),$(".scrapbook-status").text()},error:function(){console.log("Error saving moodboard")}})}},removeScrap:function(a){var b=this,c=b.findScrap(a);c.el.fadeOut("fast",function(){c.isOnCanvas=!1,c.left=c.top=null,b.update()})},update:function(){for(var a=this,b="",c=0;c<this.scraps.length;c++)this.scraps[c].update(),b+=this.moodboardListingTemplate(this.scraps[c]);if($("#scrapbookName").val(a.name),!a.isReadOnly){var d=JSON.stringify(a);a.previousState&&a.previousState==d||(console.log("State has changed.  Saving to server"),a.saveToServer())}a.previousState=d,$("#moodboardItems").html(b),a.isReadOnly||(this.setDraggable($("#moodboardItems")),$("#scrapbookInner").droppable({accept:".item.scrapAdd",drop:function(b,c){var d=$(c.draggable),e=$("#scrapbookInner"),f=c.offset.left-e.offset().left,g=c.offset.top-e.offset().top;console.log(c),a.addScrap(d,f,g)}}),$("#scrapbookName").on("keyup",function(b){a.name=$(this).val()}),$(".scrapbook-scrap").off("click").on("click",function(b){return b.preventDefault(),$(".selected").removeClass("selected"),$(this).addClass("selected"),$(this).resizable({aspectRatio:!0,helper:"ui-resizable-helper",handles:"se",stop:function(b,c){var d=c.size,e=a.findScrap($(b.target).data("id"));e.height=d.height,e.width=d.width,a.update()}}).rotatable({stop:function(b,c){var d=c.angle;a.findScrap($(b.target).data("id")).rotation=d.current,a.update()}}),!1}).draggable({containment:"#scrapbookInner",stop:function(b,c){var d=c.position,e=a.findScrap($(b.target).data("id"));e.top=d.top,e.left=d.left,a.update()}}).disableSelection())},updateStudioListing:function(){for(var a="",b=0;b<this.studio.Items.length;b++)a+=this.studioListingTemplate(this.studio.Items[b]);$("#scrapbookItems").html(a),this.isReadOnly||this.setDraggable($("#scrapbookItems"))},setDraggable:function(a){$(".item",a).draggable({cancel:"a.plus,a.remove",revert:"invalid",helper:function(a){return $('<img src="'+$(this).find("img").attr("src")+'" height="120" width="120"/>')},cursor:"move"})},init:function(a){var b=this;void 0!==a&&null!=a&&0!=a?$.when(b.loadFromServer(a),b.loadStudioListingTemplate(),b.loadMoodboardListingTemplate()).done(function(a,c,d){b.studioListingTemplate=_.template(c[0]),b.moodboardListingTemplate=_.template(d[0]),b.loadStudioListing(),b.initialised()}):$.when(b.loadStudioListingTemplate(),b.loadMoodboardListingTemplate()).done(function(a,c){b.studioListingTemplate=_.template(a[0]),b.moodboardListingTemplate=_.template(c[0]),b.loadStudioListing(),b.initialised()})},initialised:function(){var a=this;a.update(),a.isReadOnly&&$("#btnMoveToFront, #btnMoveToBack, #btnMoveForward, #btnMoveBackward, #btnRemove, #btnSave").remove(),$(document).on("click",".scrapbook-button",function(b){b.preventDefault();var c=$(".selected").data("id");switch(b.currentTarget.id){case"btnMoveToFront":a.moveToFront(c);break;case"btnMoveToBack":a.moveToBack(c);break;case"btnMoveForward":a.moveForward(c);break;case"btnMoveBackward":a.moveBackward(c);break;case"btnRemove":a.removeScrap(c);break;case"btnSave":a.saveToServer();break;case"btnPrint":window.print();break;case"btnShare":$("#share").foundation("reveal","open");break;case"btnOrder":$("#scrapBookSamples").foundation("reveal","open",{url:"/actionuri/scrapbook/scrapbook/products/?scrapbookId="+a.id})}return!1}).on("click",".productList .item .remove",function(b){return b.preventDefault(),a.removeScrap($(b.currentTarget).parents(".item").data("scrapbookitemid")),!1}).on("click",".productList .item .plus",function(b){b.preventDefault();var c=$(b.currentTarget).parents(".item");return a.addScrap(c,a.el.width()/2-60,a.el.height()/2-60),!1}).on("click","#scrapBookSamples .productList .item",function(a){return a.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}).on("click","#scrapBookSamples #selectAllProducts",function(a){$("#scrapBookSamples .productList .item").each(function(a){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}).on("click","#scrapBookSamples .AddToBasket",function(b){var c=[];if(0==$("#scrapBookSamples .productList .item.selected").length&&$("#noItemsSelected").show(),$("#scrapBookSamples .productList .item.selected").each(function(a){c.push($(this).data("skuid"))}),c.length>0){var d=$('<div id="overlay" style="width: 100%;height: 100%;background-color: #666;opacity: 0.5;display: block;position: fixed;left: 0;top: 0;z-index: 9999;"></div>');d.append(Redant.util.ajaxLoader()),$("body").append(d),$("#noItemsSelected").hide();var e="/basket/action/?command=add&skuid="+c.join(",");$.get(e,function(b){if($("body .notification").remove(),$("#overlay").remove(),"Successful"===b.Status)$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2></div>').prependTo("body"),$("#scrapBookSamples").foundation("reveal","close"),a.update(),getMiniBasketPartial();else{var c=[];$.each(b.BasketErrors,function(a,b){c.push(b.Message)}),$("#basketErrors").html(c.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},6e3),jQuery.fx.interval=20})}else $("#noItemsSelected").show();return!1}),Redant.util.browser.isTablet()||Redant.util.browser.isMobile()?$("#scrapbook").addClass("hover"):$(document).on("mouseover","#scrapbook",function(a){$(this).addClass("hover")}).on("mouseout","#scrapbook",function(a){$(this).removeClass("hover")})}}},searchScroll,isSearching=!1,searchPanelMarkup=null,filterForm=null;$(document).ready(function(){(Redant.util.browser.isMobile()||Redant.util.browser.isTablet())&&($(".searchSite .tooltip").remove(),$(".quick-links").remove()),$(document).on("keydown",".searchPanel input[type=text]",function(a){13==a.keyCode&&"true"!=$(a.currentTarget).data("block")&&$(this).closest("form").submit()}),requestTimeout(function(){new $.accordion($(".filterAccordion:not(.faqFilterAccordion)"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){}})},10),filterForm=$("form.filterAccordion"),$("#searchPanelKeywords").on("click",function(a){var b=$(this);return null==searchPanelMarkup&&$.ajax({url:"/shops/wgshopsearch/searchpanel/",type:"GET",async:!1,dataType:"html",success:function(a){searchPanelMarkup=$(a).filter(".topNavItem searchNav"),b.after(searchPanelMarkup),$("#searchPanelKeywords").autocomplete({source:"/shops/WgShop/PredictiveSearchFrontend/",select:function(a,b){b.item.url&&($(".topNavItem searchNav input[type=text]").data("block","true"),a.preventDefault(),window.location=b.item.url)}})},error:function(a,b,c){console.log([a,b,c])}}),$(".searchPanel").is(":visible")?$(".searchPanel").fadeToggle(function(){$(".searchSite").stop(!0).animate({bottom:"10px",avoidCSSTransitions:!0},100,function(){})}):$(this).stop(!0).animate({bottom:"0px",avoidCSSTransitions:!0},100,function(){$(".searchPanel").fadeIn(function(){$(".searchPanel #searchPanelKeywords").focus()})}),!1}),$(".brands label.all").off("click"),$(".brands label.all").on("click",function(a){var b=$(this);return b.hasClass("selectedAll")?(b.parents("ul").children().children().removeClass("selected"),b.parents("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(b.parents("ul").children().children().addClass("selected"),b.parents("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll")),ajaxSearch(),toggleClear(".filterBrands"),!1}),filterForm.on("click",".colours a, .patterns a, .searchOptions .colours label, .patterns label",function(){var a=$(this);a.data("id");if(a.parent().hasClass("toggleAll"))a.hasClass("selectedAll")?(a.parent().siblings("ul").children().children().removeClass("selected"),a.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),a.removeClass("selectedAll")):(a.parent().siblings("ul").children().children().addClass("selected"),a.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),a.addClass("selectedAll"));else{a.toggleClass("selected");toggleCheckbox(a.find('input[type="checkbox"]'))}return!1}),$("body").on("click",".searchPanel .colours label",function(a){a.preventDefault();var c,b=$(this),d=b.parent().siblings("ul").children().children().find('input[type="checkbox"]');if(b.parent().hasClass("toggleAll"))b.hasClass("selectedAll")?(b.parent().siblings("ul").children().children().removeClass("selected"),d.prop("checked",!1),b.removeClass("selectedAll"),c=b.parent().siblings("ul").children().children().find('input[type="checkbox"]').data("id"),$("[data-img="+c+"]").css("display","none")):(b.parent().siblings("ul").children().children().addClass("selected"),d.prop("checked",!0),b.addClass("selectedAll"),c=b.parent().siblings("ul").children().children().find('input[type="checkbox"]').data("id"),$("[data-img="+c+"]").css("display","inline-block"));else{b.toggleClass("selected");toggleCheckbox(b.find('input[type="checkbox"]')),c=b.parent().siblings("ul").children().children().find('input[type="checkbox"]').data("id")}return!1});var a=/^([a-zA-Z0-9 \/_'-]+)$/i;$(document).on("submit","form.siteSearch",function(b){$("#searchPanelKeywordsError").hide();var c=!0,d=$("#searchPanelKeywords",$(this)).val();if(""!=d&&null!=d&&a.test(d)||(c=!1),!c)return $("#searchPanelKeywordsError").fadeIn(400,function(a){var b=this;setTimeout(function(){$(b).fadeOut(400)},5e3)}),!1}),$(document).on("submit","form.colours",function(a){$("#searchPanelColoursError").hide();var b=!0;if(0==$("input[name=SelectedColours]:checked").length&&(b=!1),!b)return $("#searchPanelColoursError").fadeIn(400,function(a){var b=this;setTimeout(function(){$(b).fadeOut(400)},5e3)}),!1}),bindSearchCriteria('.brands label:not(".all")',".filterBrands"),bindSearchCriteria(".filterEndUse label",".filterEndUse"),bindSearchCriteria(".filterType label",".filterType"),bindSearchCriteria(".filterProductGroup label",".filterProductGroup"),bindSearchCriteria(".filterFlameRetardant label",".filterFlameRetardant"),filterForm.on("click",".filterColours .clearFilter",function(){return clearSelectedCheck(".filterColours")}),filterForm.on("click",".filterBrands .clearFilter",function(){return clearSelectedCheck(".filterBrands")}),filterForm.on("click",".filterEndUse .clearFilter",function(){return clearSelectedCheck(".filterEndUse")}),filterForm.on("click",".filterType .clearFilter",function(){return clearSelectedCheck(".filterType")}),filterForm.on("click",".filterProductGroup .clearFilter",function(){return clearSelectedCheck(".filterProductGroup")}),filterForm.on("click",".filterFlameRetardant .clearFilter",function(){return clearSelectedCheck(".filterFlameRetardant")}),filterForm.on("click",".filterMartindale .clearFilter",function(){return clearSelectedCheck(".filterMartindale")}),toggleClear(".filterDimOut"),bindSearchCriteria(".filterDimOut label",".filterDimOut"),$(".filterDimOut .clearFilter").bind("click",function(){return clearSelectedCheck(".filterDimOut")}),$(".filterTags .clearFilter").hide(),$("input[name='keywords']").change(function(){$(this).val().length>1&&$(".filterTags .clearFilter").show();var b=!0,c=$(this).val();(""==c||null==c||!a.test(c)||c.length>3)&&(b=!1),b&&ajaxSearch()}),filterForm.on("click",".filterTags .clearFilter",function(){return toggleClearText("input[name='keywords']")}),filterForm.on("click",".filterMartindale .clearFilter",function(){return self.clearSelectedCheck(".filterMartindale"),ajaxSearch(),!1}),filterForm.on("click",".filterPriceRange .clearFilter",function(){return $(".filterPriceRange .sliderBar").slider("destroy"),sliders.reinitialize('input[name="PriceRange"]'),ajaxSearch(),!1}),$("#martindale").parents(".field").on("click",function(a,b){$(".filterMartindale .clearFilter").show(),ajaxSearch()}),$("#searchProducts, #searchPaint").on("click",".colours label",function(){var a=$(this);if(a.parent().hasClass("toggleAll")){var b=a.parent().siblings("ul").children().children();return a.hasClass("selectedAll")?(b.find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selected"),a.removeClass("selectedAll")):(b.find('input[type="checkbox"]').prop("checked",!0),b.addClass("selected"),a.addClass("selectedAll")),toggleClear(".filterColours"),ajaxSearch(),!1}var c=a.attr("data-colour-code");return toggleCheckbox($("#SelectedColours_"+c)),$(this).toggleClass("selected"),ajaxSearch(),toggleClear(".filterColours"),!1});var b=Redant.util.ajaxLoader();if($("#searchPaint").length>0){new InfiniteScroll($(".productList"),"/shops/paint/",30,!0,"html",b,function(){return $("#searchPaint").serialize()})}if($("#searchProducts").length>0){new InfiniteScroll($(".productList"),"/shops/search/",30,!0,"html",b,function(){return $("#searchProducts").serialize()})}}),_.templateSettings.variable="rc",window.Wg=window.Wg||{},Wg.Stockists=Wg.Stockists||function(){function d(a,c,d){$.when(e("stockist-map-pin")).done(function(e){b=e;for(var g=_.template(e),h=[],i=0;i<c.length;i++){var k=$(c[i]),l=k.find(".details"),m=k.data(),n=l.data(),o=new google.maps.LatLng(m.lat,m.lng),p=m.shop,q=m.stockistid,r=n.name,s=n.address1,t=n.address2,u=n.town,v=n.county,w=n.postcode,x=n.telephonenumber,y=n.email,z=n.url,A=n.othershops,B=[];null!=A&&(B=A.split(","));var C=g({stockistName:r,stockistAddress:_.reject([s,t,u,v,w],function(a){return!a}).join("<br />"),stockistTelephoneNumber:x,stockistEmail:y,stockistUrl:z,stockistBrands:B}),D=null!=p?"/_images/brands/"+p+"/map-icons/map-pin.png":"",E=new google.maps.Marker({icon:D,position:o,title:r,map:a,zIndex:9999-i,html:C,animation:google.maps.Animation.DROP,customInfo:q});d&&j.bounds.extend(E.position),h.push(E),j.markers[k.attr("id")]=E,google.maps.event.addListener(E,"click",function(){f("result_"+this.customInfo,!0)})}d&&a.fitBounds(j.bounds)})}function e(a){return null!=b?b:$.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})}function f(a,b){var c=j.markers[a];if(c){var d=j.map;j.infoWindow||(j.infoWindow=new google.maps.InfoWindow);var e=j.infoWindow;e.close(),e.setContent(c.html),e.open(d,c),d.panTo(c.position);var f=$("#whereToBuyResults ul.results > li").first().position().top;$("#whereToBuyResults").stop(!0,!0).animate({scrollTop:$("#"+a).position().top-f},500)}}function g(a){var b=$("#whereToBuyResults").find("ul.results"),c="1"!=b.data("region"),e=b.children("li");if(e.length>0){a=a||e.first().attr("id");var f=$("#"+a);j.baseLatLng=new google.maps.LatLng(f.data("lat"),f.data("lng")),j.bounds=new google.maps.LatLngBounds,j.mapOptions={zoom:14,center:j.baseLatLng,mapTypeId:google.maps.MapTypeId.ROADMAP},j.map=new google.maps.Map(document.getElementById("map_canvas"),j.mapOptions),google.maps.event.addListenerOnce(j.map,"tilesloaded",function(){d(j.map,e,c)})}}function h(){return $("#StockistSearchIsVisible").val("false"),$("#collections, #container").show(),$("#map_content").fadeOut(function(){$(".leftMenu").animate({left:"-420",avoidCSSTransitions:!0},500,function(){j.map=null,j.bounds=null,j.infowindow=null,j.mapOptions={},j.markers={},j.baseLatLng=null,j.markerClusterer=null,i(),$("#StockistSearchIsVisible").val("true"),$("#map_content").html('<a class="closeMaps button">Close Maps</a><div id="map_canvas"></div>'),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").empty().css("overflow","auto"),$(".leftMenu").removeClass("leftMenu").css({height:"auto",top:"auto",left:"0px",bottom:"-100px"}).animate({left:"0",bottom:"35",avoidCSSTransitions:!0})})}),!1}function i(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch, #stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":console.log("yes"),$("#Postcode").parent(".fp-tableCell").parent(".fp-section").show(),$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}var a,b=null,j={map:null,bounds:null,infowindow:null,mapOptions:{},markers:{},markerClusterer:null,baseLatLng:null,GoogleMapsLoaded:function(){Redant.util.loadScript("/_js/vendor/markerclusterer_compiled.js",function(){setTimeout(function(){for(var a=$(".leftMenu .results > li"),b=0,c=0;c<a.length;c++)b+=$(a[c]).outerHeight();$(".leftMenu .scroller").height(Math.ceil(b)),$("#map_content").fadeIn(function(){g()}),$("#collections, #container").hide(),$("#whereToBuyResults").niceScroll({})},500)})},hideStockists:function(){h()},setAjaxLocation:function(){var a="",b="",c="",d="";if("1"==$("#Region").val()&&""==$("#Postcode").val());else{switch($("#Region option:selected").text(),$("#Region").val()){case"1":a=$("#Region option:selected").text()+" "+$("#Postcode").val();break;case"2":a=$("#EuropeanCountryId option:selected").text();break;case"3":a=$("#StateId option:selected").text()+"  United States of America";break;case"4":a=$("#WorldCountryId option:selected").text()}b=new google.maps.Geocoder,b.geocode({address:a},function(a,b){if(b==google.maps.GeocoderStatus.OK){c=a[0].geometry.location.A,d=a[0].geometry.location.F,$("#Latitude").val(c),$("#Longitude").val(d);var e=$("#whereToBuySearch .formControls");e.find(".button").hide();var f=Redant.util.ajaxLoaderForButton().css("display","inline-block");f.appendTo(e),$.ajax({type:"POST",url:"/actionuri/stockist/stockist/footer",data:$("#whereToBuySearch form").serialize(),success:function(a){$("#whereToBuy").replaceWith(a),$("#whereToBuy").addClass("leftMenu").css({top:"50%"}).show().animate({left:"0",avoidCSSTransitions:!0},500),Wg.Stockists.GoogleMapsLoaded()}}).always(function(){f.remove(),e.find(".button").show()})}})}},init:function(){$(document).ready(function(){$("body").on("submit","#whereToBuySearch form",function(a){return a.preventDefault(),$("#PostcodeError").hide(),"1"==$("#Region").val()&&""==$("#Postcode").val()?($("#PostcodeError").show(),!1):(Redant.util.loadScript("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=Wg.Stockists.setAjaxLocation")&&Wg.Stockists.setAjaxLocation(),!1)}).on("click",".showOnMap",function(a){return a.preventDefault(),mapElemId=$(this).parents("li").attr("id"),f(mapElemId,!0),!1}).on("click",".closeMaps",function(a){return a.preventDefault(),h(),!1}).on("click",".toggleStockist",function(b){b.preventDefault(),resetMenu();var c=$("#whereToBuy");return c.is(":visible")?($(this).removeClass("highlightedMenu"),h()):($("#StockistSearchIsVisible").val("true"),c.css({bottom:"-50px",display:"block",opacity:"1"}),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").css("overflow",""),i(),c.animate({bottom:"50%",left:"50%",avoidCSSTransitions:!0},500,function(){$("#whereToBuyResults .scroller").hasClass("iScollInit")&&(a=new IScroll("#whereToBuyResults .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0}))})),!1}).on("click",".setDefaultStockist",function(a){a.preventDefault();var b=$(this);$.get(this.href,function(a){1==a.success&&($(".setDefaultStockist").removeClass("selected").removeAttr("disabled"),b.addClass("selected"),b.attr("disabled","disabled"))})}).on("change","#Region",function(a){i()})})}};return j}(),Wg.Stockists.init(),window.Wg=window.Wg||{},Wg.Stockists=Wg.Stockists||function(){function a(a,d,e){$.when(b("stockist-map-pin")).done(function(b){var f,g,j;for(h=b,f=_.template(b),g=[],j=0;j<d.length;j++){var k=$(d[j]),l=k.find(".details"),m=k.data(),n=l.data(),o=new google.maps.LatLng(m.lat,m.lng),p=m.shop,q=m.stockistid,r=n.name,s=n.address1,t=n.address2,u=n.town,v=n.county,w=n.postcode,x=n.telephonenumber,y=n.email,z=n.url,A=n.othershops,B=[];null!=A&&(B=A.split(","));var C=f({stockistName:r,stockistAddress:_.reject([s,t,u,v,w],function(a){return!a}).join("<br />"),stockistTelephoneNumber:x,stockistEmail:y,stockistUrl:z,stockistBrands:B}),D=null!=p?"/_images/brands/"+p+"/map-icons/map-pin.png":"",E=new google.maps.Marker({icon:D,position:o,title:r,map:a,zIndex:9999-j,html:C,animation:google.maps.Animation.DROP,customInfo:q});e&&i.bounds.extend(E.position),g.push(E),i.markers[k.attr("id")]=E,google.maps.event.addListener(E,"click",function(){c("result_"+this.customInfo,!0)})}e&&a.fitBounds(i.bounds)})}function b(a){return null!=h?h:$.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})}function c(a){var c,d,e,b=i.markers[a];b&&(c=i.map,i.infoWindow||(i.infoWindow=new google.maps.InfoWindow),d=i.infoWindow,d.close(),d.setContent(b.html),d.open(c,b),c.panTo(b.position),e=$("#whereToBuyResults ul.results > li").first().position().top,$("#whereToBuyResults").stop(!0,!0).animate({scrollTop:$("#"+a).position().top-e},500))}function d(b){var f,c=$("#whereToBuyResults").find("ul.results"),d="1"!=c.data("region"),e=c.children("li");e.length>0&&(b=b||e.first().attr("id"),f=$("#"+b),i.baseLatLng=new google.maps.LatLng(f.data("lat"),f.data("lng")),i.bounds=new google.maps.LatLngBounds,i.mapOptions={zoom:14,center:i.baseLatLng,mapTypeId:google.maps.MapTypeId.ROADMAP},i.map=new google.maps.Map(document.getElementById("map_canvas"),i.mapOptions),google.maps.event.addListenerOnce(i.map,"tilesloaded",function(){a(i.map,e,d)}))}function e(){return $("#StockistSearchIsVisible").val("false"),$("#collections, #container").show(),$("#map_content").fadeOut(function(){$(".leftMenu").animate({left:"-420",avoidCSSTransitions:!0},500,function(){i.map=null,i.bounds=null,i.infowindow=null,i.mapOptions={},i.markers={},i.baseLatLng=null,i.markerClusterer=null,f(),$("#StockistSearchIsVisible").val("true"),$("#map_content").html('<a class="closeMaps button">Close Maps</a><div id="map_canvas"></div>'),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").empty().css("overflow","auto"),$(".leftMenu").removeClass("leftMenu").css({height:"auto",top:"auto",left:"0px",bottom:"-100px"}).animate({left:"0",bottom:"35",avoidCSSTransitions:!0})})}),!1}function f(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch, #stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}var g,h=null,i={map:null,bounds:null,infowindow:null,mapOptions:{},markers:{},markerClusterer:null,baseLatLng:null,GoogleMapsLoaded:function(){Redant.util.loadScript("/_js/vendor/markerclusterer_compiled.js",function(){setTimeout(function(){for(var a=$(".leftMenu .results > li"),b=0,c=0;c<a.length;c++)b+=$(a[c]).outerHeight();$(".leftMenu .scroller").height(Math.ceil(b)),$("#map_content").fadeIn(function(){d()}),$("#collections, #container").hide(),$("#whereToBuyResults").niceScroll({})},500)})},hideStockists:function(){e()},setAjaxLocation:function(){var a="",b="",c="",d="";if("1"!=$("#Region").val()||""!=$("#Postcode").val()){switch($("#Region option:selected").text(),$("#Region").val()){case"1":a=$("#Region option:selected").text()+" "+$("#Postcode").val();break;case"2":a=$("#EuropeanCountryId option:selected").text();break;case"3":a=$("#StateId option:selected").text()+"  United States of America";break;case"4":a=$("#WorldCountryId option:selected").text()}b=new google.maps.Geocoder,b.geocode({address:a},function(a,b){var e,f;b==google.maps.GeocoderStatus.OK&&(c=a[0].geometry.location.A,d=a[0].geometry.location.F,$("#Latitude").val(c),$("#Longitude").val(d),e=$("#whereToBuySearch .formControls"),e.find(".button").hide(),f=Redant.util.ajaxLoaderForButton().css("display","inline-block"),f.appendTo(e),$.ajax({type:"POST",url:"/actionuri/stockist/stockist/footer",data:$("#whereToBuySearch form").serialize(),success:function(a){$("#whereToBuy").replaceWith(a),$("#whereToBuy").addClass("leftMenu").css({top:"50%"}).show().animate({left:"0",avoidCSSTransitions:!0},500),Wg.Stockists.GoogleMapsLoaded()}}).always(function(){f.remove(),e.find(".button").show()}))})}},init:function(){$(document).ready(function(){$("body").on("submit","#whereToBuySearch form",function(a){return a.preventDefault(),$("#PostcodeError").hide(),"1"==$("#Region").val()&&""==$("#Postcode").val()?($("#PostcodeError").show(),!1):(Redant.util.loadScript("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=Wg.Stockists.setAjaxLocation")&&Wg.Stockists.setAjaxLocation(),!1)}).on("click",".showOnMap",function(a){return a.preventDefault(),mapElemId=$(this).parents("li").attr("id"),c(mapElemId,!0),!1}).on("click",".closeMaps",function(a){return a.preventDefault(),e(),!1}).on("click",".toggleStockist",function(a){a.preventDefault(),resetMenu();var b=$("#whereToBuy");return b.is(":visible")?($(this).removeClass("highlightedMenu"),e()):($("#StockistSearchIsVisible").val("true"),b.css({bottom:"-50px",display:"block",opacity:"1"}),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").css("overflow",""),f(),b.animate({bottom:"50%",left:"50%",avoidCSSTransitions:!0},500,function(){$("#whereToBuyResults .scroller").hasClass("iScollInit")&&(g=new IScroll("#whereToBuyResults .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0}))})),!1}).on("click",".setDefaultStockist",function(a){a.preventDefault();var b=$(this);$.get(this.href,function(a){1==a.success&&($(".setDefaultStockist").removeClass("selected").removeAttr("disabled"),b.addClass("selected"),b.attr("disabled","disabled"))})}).on("change","#Region",function(){f()})})}};return i}(),Wg.Stockists.init(),window.Wg=window.Wg||{},Wg.Stockists=Wg.Stockists||function(){function a(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch, #stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}return{hideStockists:function(){},init:function(){$(document).ready(function(){$(".toggleStockist").click(function(a){a.preventDefault(),window.location=this.href}),a(),$("body").on("change","#Region",function(b){a()})})}}}(),Wg.Stockists.init(),window.Wg=window.Wg||{},Wg.Stockists=Wg.Stockists||function(){function a(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch,#stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}return{hideStockists:function(){},init:function(){$(document).ready(function(){$(".toggleStockist").click(function(a){a.preventDefault(),window.location=this.href}),a(),$("body").on("change","#Region",function(){a()})})}}}(),Wg.Stockists.init(),LazyLoad=function(a){function b(b,c){var e,d=a.createElement(b);for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e]);return d}function c(a){var c,d,b=j[a];b&&(c=b.callback,d=b.urls,d.shift(),k=0,d.length||(c&&c.call(b.context,b.obj),j[a]=null,l[a].length&&e(a)))}function d(){var b=navigator.userAgent;h={async:!0===a.createElement("script").async},(h.webkit=/AppleWebKit\//.test(b))||(h.ie=/MSIE/.test(b))||(h.opera=/Opera/.test(b))||(h.gecko=/Gecko\//.test(b))||(h.unknown=!0)}function e(e,k,m,n,o){var s,t,u,v,w,x,p=function(){c(e)},q="css"===e,r=[];if(h||d(),k)if(k="string"==typeof k?[k]:k.concat(),q||h.async||h.gecko||h.opera)l[e].push({urls:k,callback:m,obj:n,context:o});else for(s=0,t=k.length;s<t;++s)l[e].push({urls:[k[s]],callback:s===t-1?m:null,obj:n,context:o});if(!j[e]&&(v=j[e]=l[e].shift())){for(i||(i=a.head||a.getElementsByTagName("head")[0]),w=v.urls,s=0,t=w.length;s<t;++s)x=w[s],q?u=h.gecko?b("style"):b("link",{href:x,rel:"stylesheet"}):(u=b("script",{src:x}),u.async=!1),u.className="lazyload",u.setAttribute("charset","utf-8"),h.ie&&!q?u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&(u.onreadystatechange=null,p())}:q&&(h.gecko||h.webkit)?h.webkit?(v.urls[s]=u.href,g()):(u.innerHTML='@import "'+x+'";',f(u)):u.onload=u.onerror=p,r.push(u);for(s=0,t=r.length;s<t;++s)i.appendChild(r[s])}}function f(a){var b;try{b=!!a.sheet.cssRules}catch(d){return k+=1,void(k<200?setTimeout(function(){f(a)},50):b&&c("css"))}c("css")}function g(){var b,a=j.css;if(a){for(b=m.length;--b>=0;)if(m[b].href===a.urls[0]){c("css");break}k+=1,a&&(k<200?setTimeout(g,50):c("css"))}}var h,i,j={},k=0,l={css:[],js:[]},m=a.styleSheets;return{css:function(a,b,c,d){e("css",a,b,c,d)},js:function(a,b,c,d){e("js",a,b,c,d)}}}(this.document),LoadLib=function(a){function b(a){var b=0,d=!1;for(b=0;b<c.length;b++)c[b]==a&&(d=!0);return!!d||(c.push(a),!1)}var c=[];return{css:function(a,c,d,e){b(a)||LazyLoad.css(a,c,d,e)},js:function(a,c,d,e){b(a)||LazyLoad.js(a,c,d,e)}}}(this.document);var WebFontConfig;if(void 0===embed_path||void 0===embed_path)var embed_path=getEmbedScriptPath("storyjs-embed.js").split("js/")[0];!function(){"object"==typeof url_config?createStoryJS(url_config):"object"==typeof timeline_config?createStoryJS(timeline_config):"object"==typeof storyjs_config?createStoryJS(storyjs_config):"object"==typeof config&&createStoryJS(config)}(),function(a){var b,c="",d=Math.PI,e=d/2,f="Touch"in window,g=f?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},h={backward:["bl","tl"],forward:["br","tr"],all:["tl","bl","tr","br"]},i=["single","double"],j={page:1,gradients:!0,duration:600,acceleration:!0,display:"double",when:null},k={folding:null,corners:"forward",cornerSize:100,gradients:!0,duration:600,acceleration:!0},l={0:{top:0,left:0,right:"auto",bottom:"auto"},1:{top:0,right:0,left:"auto",bottom:"auto"}},m=function(a,b,c,d){return{css:{position:"absolute",top:a,left:b,overflow:d||"hidden","z-index":c||"auto"}}},n=function(a,b,c,d,e){var f=1-e,g=f*f*f,h=e*e*e;return o(Math.round(g*a.x+3*e*f*f*b.x+3*e*e*f*c.x+h*d.x),Math.round(g*a.y+3*e*f*f*b.y+3*e*e*f*c.y+h*d.y))},o=function(a,b){return{x:a,y:b}},p=function(a,c,d){return b&&d?" translate3d("+a+"px,"+c+"px, 0px) ":" translate("+a+"px, "+c+"px) "},q=function(a){return" rotate("+a+"deg) "},r=function(a,b){return Object.prototype.hasOwnProperty.call(b,a)},s=function(){for(var a=["Moz","Webkit","Khtml","O","ms"],b=a.length,c="";b--;)a[b]+"Transform"in document.body.style&&(c="-"+a[b].toLowerCase()+"-");return c},t=function(a,b,d,e,f){var g,h=[];if("-webkit-"==c){for(g=0;g<f;g++)h.push("color-stop("+e[g][0]+", "+e[g][1]+")");a.css({"background-image":"-webkit-gradient(linear, "+b.x+"% "+b.y+"%,  "+d.x+"% "+d.y+"%, "+h.join(",")+" )"})}else{var b={x:b.x/100*a.width(),y:b.y/100*a.height()},d={x:d.x/100*a.width(),y:d.y/100*a.height()},i=d.x-b.x;g=d.y-b.y;var j=Math.atan2(g,i),k=j-Math.PI/2,k=Math.abs(a.width()*Math.sin(k))+Math.abs(a.height()*Math.cos(k)),i=Math.sqrt(g*g+i*i),d=o(d.x<b.x?a.width():0,d.y<b.y?a.height():0),l=Math.tan(j);for(g=-1/l,l=(g*d.x-d.y-l*b.x+b.y)/(g-l),d=g*l-g*d.x+d.y,b=Math.sqrt(Math.pow(l-b.x,2)+Math.pow(d-b.y,2)),g=0;g<f;g++)h.push(" "+e[g][1]+" "+100*(b+i*e[g][0])/k+"%");a.css({"background-image":c+"linear-gradient("+-j+"rad,"+h.join(",")+")"})}},u={init:function(d){void 0===b&&(b="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style,c=s());var e,i=this.data(),k=this.children(),d=a.extend({width:this.width(),height:this.height()},j,d);if(i.opts=d,i.pageObjs={},i.pages={},i.pageWrap={},i.pagePlace={},i.pageMv=[],i.totalPages=d.pages||0,d.when)for(e in d.when)r(e,d.when)&&this.bind(e,d.when[e]);for(this.css({position:"relative",width:d.width,height:d.height}),this.turn("display",d.display),b&&!f&&d.acceleration&&this.transform(p(0,0,!0)),e=0;e<k.length;e++)this.turn("addPage",k[e],e+1);return this.turn("page",d.page),h=a.extend({},h,d.corners),a(this).bind(g.start,function(a){for(var b in i.pages)if(r(b,i.pages)&&!1===v._eventStart.call(i.pages[b],a))return!1}),a(document).bind(g.move,function(a){for(var b in i.pages)r(b,i.pages)&&v._eventMove.call(i.pages[b],a)}).bind(g.end,function(a){for(var b in i.pages)r(b,i.pages)&&v._eventEnd.call(i.pages[b],a)}),i.done=!0,this},addPage:function(b,c){var d=!1,e=this.data(),f=e.totalPages+1;if(c){if(c==f)c=f,d=!0;else if(c>f)throw Error('It is impossible to add the page "'+c+'", the maximum value is: "'+f+'"')}else c=f,d=!0;return 1<=c&&c<=f&&(e.done&&this.turn("stop"),c in e.pageObjs&&u._movePages.call(this,c,1),d&&(e.totalPages=f),e.pageObjs[c]=a(b).addClass("turn-page p"+c),u._addPage.call(this,c),e.done&&this.turn("update"),u._removeFromDOM.call(this)),this},_addPage:function(b){var c=this.data(),d=c.pageObjs[b];if(d)if(u._necessPage.call(this,b)){if(!c.pageWrap[b]){var e="double"==c.display?this.width()/2:this.width(),f=this.height();d.css({width:e,height:f}),c.pagePlace[b]=b,c.pageWrap[b]=a("<div/>",{class:"turn-page-wrapper",page:b,css:{position:"absolute",overflow:"hidden",width:e,height:f}}).css(l["double"==c.display?b%2:0]),this.append(c.pageWrap[b]),c.pageWrap[b].prepend(c.pageObjs[b])}(!b||1==u._setPageLoc.call(this,b))&&u._makeFlip.call(this,b)}else c.pagePlace[b]=0,c.pageObjs[b]&&c.pageObjs[b].remove()},hasPage:function(a){return a in this.data().pageObjs},_makeFlip:function(a){var b=this.data();if(!b.pages[a]&&b.pagePlace[a]==a){var c="single"==b.display,d=a%2;b.pages[a]=b.pageObjs[a].css({width:c?this.width():this.width()/2,height:this.height()}).flip({page:a,next:c&&a===b.totalPages?a-1:d||c?a+1:a-1,turn:this,duration:b.opts.duration,acceleration:b.opts.acceleration,corners:c?"all":d?"forward":"backward",backGradient:b.opts.gradients,frontGradient:b.opts.gradients}).flip("disable",b.disabled).bind("pressed",u._pressed).bind("released",u._released).bind("start",u._start).bind("end",u._end).bind("flip",u._flip)}return b.pages[a]},_makeRange:function(){var a;this.data();var b=this.turn("range");for(a=b[0];a<=b[1];a++)u._addPage.call(this,a)},range:function(a){var b,c,d=this.data(),a=a||d.tpage||d.page,e=u._view.call(this,a);if(1>a||a>d.totalPages)throw Error('"'+a+'" is not a page for range');return e[1]=e[1]||e[0],1<=e[0]&&e[1]<=d.totalPages?(a=Math.floor(2),d.totalPages-e[1]>e[0]?(b=Math.min(e[0]-1,a),c=2*a-b):(c=Math.min(d.totalPages-e[1],a),b=2*a-c)):c=b=5,[Math.max(1,e[0]-b),Math.min(d.totalPages,e[1]+c)]},_necessPage:function(a){if(0===a)return!0;var b=this.turn("range");return a>=b[0]&&a<=b[1]},_removeFromDOM:function(){var a,b=this.data();for(a in b.pageWrap)r(a,b.pageWrap)&&!u._necessPage.call(this,a)&&u._removePageFromDOM.call(this,a)},_removePageFromDOM:function(a){var b=this.data();if(b.pages[a]){var c=b.pages[a].data();c.f&&c.f.fwrapper&&c.f.fwrapper.remove(),b.pages[a].remove(),delete b.pages[a]}b.pageObjs[a]&&b.pageObjs[a].remove(),b.pageWrap[a]&&(b.pageWrap[a].remove(),delete b.pageWrap[a]),delete b.pagePlace[a]},removePage:function(a){var b=this.data();return b.pageObjs[a]&&(this.turn("stop"),u._removePageFromDOM.call(this,a),delete b.pageObjs[a],u._movePages.call(this,a,-1),b.totalPages-=1,u._makeRange.call(this),b.page>b.totalPages&&this.turn("page",b.totalPages)),this},_movePages:function(a,b){var c,d=this.data(),e="single"==d.display,f=function(a){var c=a+b,f=c%2;d.pageObjs[a]&&(d.pageObjs[c]=d.pageObjs[a].removeClass("page"+a).addClass("page"+c)),d.pagePlace[a]&&d.pageWrap[a]&&(d.pagePlace[c]=c,d.pageWrap[c]=d.pageWrap[a].css(l[e?0:f]).attr("page",c),d.pages[a]&&(d.pages[c]=d.pages[a].flip("options",{page:c,next:e||f?c+1:c-1,corners:e?"all":f?"forward":"backward"})),b&&(delete d.pages[a],delete d.pagePlace[a],delete d.pageObjs[a],delete d.pageWrap[a],delete d.pageObjs[a]))};if(0<b)for(c=d.totalPages;c>=a;c--)f(c);else for(c=a;c<=d.totalPages;c++)f(c)},display:function(b){var c=this.data(),d=c.display;if(b){if(-1==a.inArray(b,i))throw Error('"'+b+'" is not a value for display');return"single"==b?c.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),c.pageObjs[0]=a("<div />",{class:"turn-page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)):c.pageObjs[0]&&(this.turn("stop").css({overflow:""}),c.pageObjs[0].remove(),delete c.pageObjs[0]),c.display=b,d&&(b=this.turn("size"),u._movePages.call(this,1,0),this.turn("size",b.width,b.height).turn("update")),this}return d},animating:function(){return 0<this.data().pageMv.length},disable:function(b){var c,d=this.data(),e=this.turn("view");d.disabled=void 0===b||!0===b;for(c in d.pages)r(c,d.pages)&&d.pages[c].flip("disable",!!b&&a.inArray(c,e));return this},size:function(a,b){if(a&&b){var e,c=this.data(),d="double"==c.display?a/2:a;this.css({width:a,height:b}),c.pageObjs[0]&&c.pageObjs[0].css({width:d,height:b});for(e in c.pageWrap)r(e,c.pageWrap)&&(c.pageObjs[e].css({width:d,height:b}),c.pageWrap[e].css({width:d,height:b}),c.pages[e]&&c.pages[e].css({width:d,height:b}));return this.turn("resize"),this}return{width:this.width(),height:this.height()}},resize:function(){var a,b=this.data();for(b.pages[0]&&(b.pageWrap[0].css({left:-this.width()}),b.pages[0].flip("resize",!0)),a=1;a<=b.totalPages;a++)b.pages[a]&&b.pages[a].flip("resize",!0)},_removeMv:function(a){var b,c=this.data();for(b=0;b<c.pageMv.length;b++)if(c.pageMv[b]==a)return c.pageMv.splice(b,1),!0;return!1},_addMv:function(a){var b=this.data();u._removeMv.call(this,a),b.pageMv.push(a)},_view:function(a){var b=this.data(),a=a||b.page;return"double"==b.display?a%2?[a-1,a]:[a,a+1]:[a]},view:function(a){var b=this.data(),a=u._view.call(this,a);return"double"==b.display?[0<a[0]?a[0]:0,a[1]<=b.totalPages?a[1]:0]:[0<a[0]&&a[0]<=b.totalPages?a[0]:0]},stop:function(){var a,b,c=this.data(),d=c.pageMv;c.pageMv=[],c.tpage&&(c.page=c.tpage,delete c.tpage);for(a in d)r(a,d)&&(b=c.pages[d[a]].data().f.opts,v._moveFoldingPage.call(c.pages[d[a]],null),c.pages[d[a]].flip("hideFoldedPage"),c.pagePlace[b.next]=b.next,b.force&&(b.next=0==b.page%2?b.page-1:b.page+1,delete b.force));return this.turn("update"),this},pages:function(a){var b=this.data();if(a){if(a<b.totalPages){for(var c=a+1;c<=b.totalPages;c++)this.turn("removePage",c);this.turn("page")>a&&this.turn("page",a)}return b.totalPages=a,this}return b.totalPages},_fitPage:function(b,c){var d=this.data(),e=this.turn("view",b);d.page!=b&&(this.trigger("turning",[b,e]),-1!=a.inArray(1,e)&&this.trigger("first"),-1!=a.inArray(d.totalPages,e)&&this.trigger("last")),d.pageObjs[b]&&(d.tpage=b,this.turn("stop",c),u._removeFromDOM.call(this),u._makeRange.call(this),this.trigger("turned",[b,e]))},_turnPage:function(b){var c,d,e=this.data(),f=this.turn("view"),g=this.turn("view",b);e.page!=b&&(this.trigger("turning",[b,g]),-1!=a.inArray(1,g)&&this.trigger("first"),-1!=a.inArray(e.totalPages,g)&&this.trigger("last")),e.pageObjs[b]&&(e.tpage=b,this.turn("stop"),u._makeRange.call(this),"single"==e.display?(c=f[0],d=g[0]):f[1]&&b>f[1]?(c=f[1],d=g[0]):f[0]&&b<f[0]&&(c=f[0],d=g[1]),e.pages[c])&&(b=e.pages[c].data().f.opts,e.tpage=d,b.next!=d&&(b.next=d,e.pagePlace[d]=b.page,b.force=!0),"single"==e.display?e.pages[c].flip("turnPage",g[0]>f[0]?"br":"bl"):e.pages[c].flip("turnPage"))},page:function(b){var b=parseInt(b,10),c=this.data();return 0<b&&b<=c.totalPages?(c.done&&-1==a.inArray(b,this.turn("view"))?u._turnPage.call(this,b):u._fitPage.call(this,b),this):c.page},next:function(){var a=this.data();return this.turn("page",u._view.call(this,a.page).pop()+1)},previous:function(){var a=this.data();return this.turn("page",u._view.call(this,a.page).shift()-1)},_addMotionPage:function(){var b=a(this).data().f.opts,c=b.turn,d=c.data();b.pageMv=b.page,u._addMv.call(c,b.pageMv),d.pagePlace[b.next]=b.page,c.turn("update")},_start:function(b,c,d){var e=c.turn.data(),f=a.Event("start");b.stopPropagation(),c.turn.trigger(f,[c,d]),f.isDefaultPrevented()?b.preventDefault():("single"==e.display&&(d="l"==d.charAt(1),1==c.page&&d||c.page==e.totalPages&&!d?b.preventDefault():d?(c.next=c.next<c.page?c.next:c.page-1,c.force=!0):c.next=c.next>c.page?c.next:c.page+1),u._addMotionPage.call(this))},_end:function(b,c){var d=a(this).data().f.opts,e=d.turn,f=e.data();b.stopPropagation(),c||f.tpage?f.tpage!=d.next&&f.tpage!=d.page||(delete f.tpage,u._fitPage.call(e,f.tpage||d.next,!0)):(u._removeMv.call(e,d.pageMv),e.turn("update"))},_pressed:function(){var b,c=a(this).data().f,d=c.opts.turn.data().pages;for(b in d)b!=c.opts.page&&d[b].flip("disable",!0);return c.time=(new Date).getTime()},_released:function(b,c){var d=a(this),e=d.data().f;b.stopPropagation(),(200>(new Date).getTime()-e.time||0>c.x||c.x>a(this).width())&&(b.preventDefault(),e.opts.turn.data().tpage=e.opts.next,e.opts.turn.turn("update"),a(d).flip("turnPage"))},_flip:function(){var b=a(this).data().f.opts;b.turn.trigger("turn",[b.next])},calculateZ:function(a){var b,c,d,e,f=this,g=this.data();b=this.turn("view");var h=b[0]||b[1],i={pageZ:{},partZ:{},pageV:{}},j=function(a){a=f.turn("view",a),a[0]&&(i.pageV[a[0]]=!0),a[1]&&(i.pageV[a[1]]=!0)};for(b=0;b<a.length;b++)c=a[b],d=g.pages[c].data().f.opts.next,e=g.pagePlace[c],j(c),j(d),c=g.pagePlace[d]==d?d:c,i.pageZ[c]=g.totalPages-Math.abs(h-c),i.partZ[e]=2*g.totalPages+Math.abs(h-c);return i},update:function(){var a,b=this.data();if(b.pageMv.length&&0!==b.pageMv[0]){var c=this.turn("calculateZ",b.pageMv);this.turn("view",b.tpage);for(a in b.pageWrap)r(a,b.pageWrap)&&(b.pageWrap[a].css({display:c.pageV[a]?"":"none","z-index":c.pageZ[a]||0}),b.pages[a]&&(b.pages[a].flip("z",c.partZ[a]||null),c.pageV[a]&&b.pages[a].flip("resize"),b.tpage&&b.pages[a].flip("disable",!0)))}else for(a in b.pageWrap)r(a,b.pageWrap)&&(c=u._setPageLoc.call(this,a),b.pages[a]&&b.pages[a].flip("disable",b.disabled||1!=c).flip("z",null))},_setPageLoc:function(a){var b=this.data(),c=this.turn("view");return a==c[0]||a==c[1]?(b.pageWrap[a].css({"z-index":b.totalPages,display:""}),1):"single"==b.display&&a==c[0]+1||"double"==b.display&&a==c[0]-2||a==c[1]+2?(b.pageWrap[a].css({"z-index":b.totalPages-1,display:""}),2):(b.pageWrap[a].css({"z-index":0,display:"none"}),0)}},v={init:function(a){return a.gradients&&(a.frontGradient=!0,a.backGradient=!0),this.data({f:{}}),this.flip("options",a),v._addPageWrapper.call(this),this},setData:function(b){var c=this.data();return c.f=a.extend(c.f,b),this},options:function(b){var c=this.data().f;return b?(v.setData.call(this,{opts:a.extend({},c.opts||k,b)}),this):c.opts},z:function(a){var b=this.data().f;return b.opts["z-index"]=a,b.fwrapper.css({"z-index":a||parseInt(b.parent.css("z-index"),10)||0}),this},_cAllowed:function(){return h[this.data().f.opts.corners]||this.data().f.opts.corners},_cornerActivated:function(b){if(void 0===b.originalEvent)return!1;var b=f?b.originalEvent.touches:[b],c=this.data().f,d=c.parent.offset(),e=this.width(),g=this.height(),b={x:Math.max(0,b[0].pageX-d.left),y:Math.max(0,b[0].pageY-d.top)},c=c.opts.cornerSize,d=v._cAllowed.call(this);if(0>=b.x||0>=b.y||b.x>=e||b.y>=g)return!1;if(b.y<c)b.corner="t";else{if(!(b.y>=g-c))return!1;b.corner="b"}if(b.x<=c)b.corner+="l";else{if(!(b.x>=e-c))return!1;b.corner+="r"}return-1!=a.inArray(b.corner,d)&&b},_c:function(a,b){return b=b||0,{tl:o(b,b),tr:o(this.width()-b,b),bl:o(b,this.height()-b),br:o(this.width()-b,this.height()-b)}[a]},_c2:function(a){return{tl:o(2*this.width(),0),tr:o(-this.width(),0),bl:o(2*this.width(),this.height()),br:o(-this.width(),this.height())}[a]},_foldingPage:function(){var a=this.data().f.opts;if(a.folding)return a.folding;if(a.turn){var b=a.turn.data();return"single"==b.display?b.pageObjs[a.next]?b.pageObjs[0]:null:b.pageObjs[a.next]}},_backGradient:function(){var b=this.data().f,c=b.opts.turn;return(c=b.opts.backGradient&&(!c||"single"==c.data().display||2!=b.opts.page&&b.opts.page!=c.data().totalPages-1))&&!b.bshadow&&(b.bshadow=a("<div/>",m(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(b.parent)),c},resize:function(a){var b=this.data().f,c=this.width(),d=this.height(),e=Math.round(Math.sqrt(Math.pow(c,2)+Math.pow(d,2)));a&&(b.wrapper.css({width:e,height:e}),b.fwrapper.css({width:e,height:e}).children(":first-child").css({width:c,height:d}),b.fpage.css({width:d,height:c}),b.opts.frontGradient&&b.ashadow.css({width:d,height:c}),v._backGradient.call(this)&&b.bshadow.css({width:c,height:d})),b.parent.is(":visible")&&(b.fwrapper.css({top:b.parent.offset().top,left:b.parent.offset().left}),b.opts.turn&&b.fparent.css({top:-b.opts.turn.offset().top,left:-b.opts.turn.offset().left})),this.flip("z",b.opts["z-index"])},_addPageWrapper:function(){var b=this.data().f,c=this.parent();if(!b.wrapper){this.css("left"),this.css("top");var d=this.width(),e=this.height();Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(e,2))),b.parent=c,b.fparent=b.opts.turn?b.opts.turn.data().fparent:a("#turn-fwrappers"),b.fparent||(d=a("<div/>",{css:{"pointer-events":"none"}}).hide(),d.data().flips=0,b.opts.turn?(d.css(m(-b.opts.turn.offset().top,-b.opts.turn.offset().left,"auto","visible").css).appendTo(b.opts.turn),b.opts.turn.data().fparent=d):d.css(m(0,0,"auto","visible").css).attr("id","turn-fwrappers").appendTo(a("body")),b.fparent=d),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),b.wrapper=a("<div/>",m(0,0,this.css("z-index"))).appendTo(c).prepend(this),b.fwrapper=a("<div/>",m(c.offset().top,c.offset().left)).hide().appendTo(b.fparent),b.fpage=a("<div/>",{css:{cursor:"default"}}).appendTo(a("<div/>",m(0,0,0,"visible")).appendTo(b.fwrapper)),b.opts.frontGradient&&(b.ashadow=a("<div/>",m(0,0,1)).appendTo(b.fpage)),v.setData.call(this,b),v.resize.call(this,!0)}},_fold:function(a){var g,h,i,j,k,l,b=this,c=0,f=0,m=o(0,0),n=o(0,0),r=o(0,0),s=this.width(),u=this.height(),w=v._foldingPage.call(this);Math.tan(f);var x=this.data().f,y=x.opts.acceleration,z=x.wrapper.height(),A=v._c.call(this,a.corner),B="t"==a.corner.substr(0,1),C="l"==a.corner.substr(1,1),D=function(){var t,p=o(A.x?A.x-a.x:a.x,A.y?A.y-a.y:a.y),q=Math.atan2(p.y,p.x);f=e-q,c=f/d*180,t=o(C?s-p.x/2:a.x+p.x/2,p.y/2);var w=f-Math.atan2(t.y,t.x),w=Math.max(0,Math.sin(w)*Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2)));return r=o(w*Math.sin(f),w*Math.cos(f)),f>e&&(r.x+=Math.abs(r.y*Math.tan(q)),r.y=0,Math.round(r.x*Math.tan(d-f))<u)?(a.y=Math.sqrt(Math.pow(u,2)+2*t.x*p.x),B&&(a.y=u-a.y),D()):(f>e&&(p=d-f,q=z-u/Math.sin(p),m=o(Math.round(q*Math.cos(p)),Math.round(q*Math.sin(p))),C&&(m.x=-m.x),B)&&(m.y=-m.y),g=Math.round(r.y/Math.tan(f)+r.x),p=s-g,q=p*Math.cos(2*f),t=p*Math.sin(2*f),n=o(Math.round(C?p-q:g+q),Math.round(B?t:u-t)),k=p*Math.sin(f),p=v._c2.call(b,a.corner),p=Math.sqrt(Math.pow(p.x-a.x,2)+Math.pow(p.y-a.y,2)),l=p<s?p/s:1,x.opts.frontGradient&&(j=100<k?(k-100)/k:0,h=o(k*Math.sin(e-f)/u*100,k*Math.cos(e-f)/s*100),B&&(h.y=100-h.y),C)&&(h.x=100-h.x),v._backGradient.call(b)&&(i=o(k*Math.sin(f)/s*100,k*Math.cos(f)/u*100),C||(i.x=100-i.x),!B)&&(i.y=100-i.y),r.x=Math.round(r.x),r.y=Math.round(r.y),!0)},E=function(a,c,d,e){var g=["0","auto"],k=(s-z)*d[0]/100,r=(u-z)*d[1]/100,c={left:g[c[0]],top:g[c[1]],right:g[c[2]],bottom:g[c[3]]},g=90!=e&&-90!=e?C?-1:1:0,d=d[0]+"% "+d[1]+"%";b.css(c).transform(q(e)+p(a.x+g,a.y,y),d),x.fpage.parent().css(c),x.wrapper.transform(p(-a.x+k-g,-a.y+r,y)+q(-e),d),x.fwrapper.transform(p(-a.x+m.x+k,-a.y+m.y+r,y)+q(-e),d),x.fpage.parent().transform(q(e)+p(a.x+n.x-m.x,a.y+n.y-m.y,y),d),x.opts.frontGradient&&t(x.ashadow,o(C?100:0,B?100:0),o(h.x,h.y),[[j,"rgba(0,0,0,0)"],[.8*(1-j)+j,"rgba(0,0,0,"+.2*l+")"],[1,"rgba(255,255,255,"+.2*l+")"]],3,f),v._backGradient.call(b)&&t(x.bshadow,o(C?0:100,B?0:100),o(i.x,i.y),[[.8,"rgba(0,0,0,0)"],[1,"rgba(0,0,0,"+.3*l+")"],[1,"rgba(0,0,0,0)"]],3)};switch(a.corner){case"tl":a.x=Math.max(a.x,1),D(),E(r,[1,0,0,1],[100,0],c),x.fpage.transform(p(-u,-s,y)+q(90-2*c),"100% 100%"),w.transform(q(90)+p(0,-u,y),"0% 0%");break;case"tr":a.x=Math.min(a.x,s-1),D(),E(o(-r.x,r.y),[0,0,0,1],[0,0],-c),x.fpage.transform(p(0,-s,y)+q(2*c-90),"0% 100%"),w.transform(q(270)+p(-s,0,y),"0% 0%");break;case"bl":a.x=Math.max(a.x,1),D(),E(o(r.x,-r.y),[1,1,0,0],[100,100],-c),x.fpage.transform(p(-u,0,y)+q(2*c-90),"100% 0%"),w.transform(q(270)+p(-s,0,y),"0% 0%");break;case"br":a.x=Math.min(a.x,s-1),D(),E(o(-r.x,-r.y),[0,1,1,0],[0,100],c),x.fpage.transform(q(90-2*c),"0% 0%"),w.transform(q(90)+p(0,-u,y),"0% 0%")}x.point=a},_moveFoldingPage:function(a){var b=this.data().f,c=v._foldingPage.call(this);c&&(a?b.fpage.children()[b.ashadow?"1":"0"]||(v.setData.call(this,{backParent:c.parent()}),b.fpage.prepend(c)):b.backParent&&b.backParent.prepend(c))},_showFoldedPage:function(b,c){var d=v._foldingPage.call(this),e=this.data(),f=e.f;if(!f.point||f.point.corner!=b.corner){var g=a.Event("start");if(this.trigger(g,[f.opts,b.corner]),g.isDefaultPrevented())return!1}if(d){if(c){var h=this,d=f.point&&f.point.corner==b.corner?f.point:v._c.call(this,b.corner,1);this.animatef({from:[d.x,d.y],to:[b.x,b.y],duration:500,frame:function(a){b.x=Math.round(a[0]),b.y=Math.round(a[1]),v._fold.call(h,b)}})}else v._fold.call(this,b),e.effect&&!e.effect.turning&&this.animatef(!1);return f.fwrapper.is(":visible")||(f.fparent.show().data().flips++,v._moveFoldingPage.call(this,!0),f.fwrapper.show(),f.bshadow&&f.bshadow.show()),!0}return!1},hide:function(){var a=this.data().f,b=v._foldingPage.call(this);return 0==--a.fparent.data().flips&&a.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform("","0% 100%"),a.wrapper.transform("","0% 100%"),a.fwrapper.hide(),a.bshadow&&a.bshadow.hide(),b.transform("","0% 0%"),this},hideFoldedPage:function(a){var b=this.data().f;if(b.point){var c=this,d=b.point,e=function(){b.point=null,c.flip("hide"),c.trigger("end",[!1])};if(a){var f=v._c.call(this,d.corner),a="t"==d.corner.substr(0,1)?Math.min(0,d.y-f.y)/2:Math.max(0,d.y-f.y)/2,g=o(d.x,d.y+a),h=o(f.x,f.y-a);this.animatef({from:0,to:1,frame:function(a){a=n(d,g,h,f,a),d.x=a.x,d.y=a.y,v._fold.call(c,d)},complete:e,duration:800,hiding:!0})}else this.animatef(!1),e()}},turnPage:function(a){var b=this,c=this.data().f,a={corner:c.corner?c.corner.corner:a||v._cAllowed.call(this)[0]},d=c.point||v._c.call(this,a.corner,c.opts.turn?c.opts.turn.data().opts.elevation:0),e=v._c2.call(this,a.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(c){c=n(d,d,e,e,c),a.x=c.x,a.y=c.y,v._showFoldedPage.call(b,a)},complete:function(){b.trigger("end",[!0])},duration:c.opts.duration,turning:!0}),c.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},_eventStart:function(a){var b=this.data().f;if(!b.disabled&&!this.flip("isTurning")){if(b.corner=v._cornerActivated.call(this,a),b.corner&&v._foldingPage.call(this,b.corner))return v._moveFoldingPage.call(this,!0),this.trigger("pressed",[b.point]),!1;b.corner=null}},_eventMove:function(a){var b=this.data().f;if(!b.disabled)if(a=f?a.originalEvent.touches:[a],b.corner){var c=b.parent.offset();b.corner.x=a[0].pageX-c.left,b.corner.y=a[0].pageY-c.top,v._showFoldedPage.call(this,b.corner)}else!this.data().effect&&this.is(":visible")&&((a=v._cornerActivated.call(this,a[0]))?(b=v._c.call(this,a.corner,b.opts.cornerSize/2),a.x=b.x,a.y=b.y,v._showFoldedPage.call(this,a,!0)):v.hideFoldedPage.call(this,!0))},_eventEnd:function(){var b=this.data().f;if(!b.disabled&&b.point){var c=a.Event("released");this.trigger(c,[b.point]),c.isDefaultPrevented()||v.hideFoldedPage.call(this,!0)}b.corner=null},disable:function(a){return v.setData.call(this,{disabled:a}),this}},w=function(a,b,c){if(!c[0]||"object"==typeof c[0])return b.init.apply(a,c);if(b[c[0]]&&"_"!=c[0].toString().substr(0,1))return b[c[0]].apply(a,Array.prototype.slice.call(c,1));throw c[0]+" is an invalid value"};a.extend(a.fn,{flip:function(a,b){return w(this,v,arguments)},turn:function(a){return w(this,u,arguments)},transform:function(a,b){var d={};return b&&(d[c+"transform-origin"]=b),d[c+"transform"]=a,this.css(d)},animatef:function(a){var b=this.data();if(b.effect&&clearInterval(b.effect.handle),a){a.to.length||(a.to=[a.to]),a.from.length||(a.from=[a.from]),a.easing||(a.easing=function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c});var c,d=[],e=a.to.length,f=this,g=a.fps||30,h=-g,i=function(){var c,i=[];for(h=Math.min(a.duration,h+g),c=0;c<e;c++)i.push(a.easing(1,h,a.from[c],d[c],a.duration));a.frame(1==e?i[0]:i),h==a.duration&&(clearInterval(b.effect.handle),delete b.effect,f.data(b),a.complete&&a.complete())};for(c=0;c<e;c++)d.push(a.to[c]-a.from[c]);b.effect=a,b.effect.handle=setInterval(i,g),this.data(b),i()}else delete b.effect}}),a.isTouch=f}(jQuery),function(a){"use strict";var b=[],c={isNewSearch:!1,searchResultsTemplate:null,searchResultGridTemplate:null,searchResultListTemplate:null,searchFilterTemplate:null,slider:null,ajaxReference:null,tagUpdateReference:null,previousScrollX:0,previousScrollY:0,disableScroll:!1,disable:!1,page:1,scrollTrigger:.7,query:"",searchHandle:"",delay:null,form:null,defaultLayoutOption:"grid",_layoutOption:null,lastBannerCategoryIdUsed:null,hash:window.location.search.substr(1),renderFilters:function(b){var c=this,d=c.searchFilterTemplate({model:b});a(".leftCol").length>0?a(".leftCol").replaceWith(d):a("#container").append(d),a(".toggleFilters").click(function(){a(".filterAccordion, #productFilters").toggle()})},renderContents:function(b,c){var d=this.searchResultsTemplate({model:b,itemTemplate:c});return a("#content").remove(),a(d).appendTo("#container")},renderBanner:function(){if(this.lastBannerCategoryContentUsed&&this.lastBannerCategoryContentUsed.length){var b=a(".listing-options");b.length&&(a(".searchBanner").remove(),b.before(this.lastBannerCategoryContentUsed))}},getItemMarkup:function(a,b){var c="",d=0;return _.each(a.ProductSearchResults,function(a){c+=b(a),d++}),c},renderItems:function(b,c){a(".searchResults").append(this.getItemMarkup(b,c))},reRenderItems:function(b,c){a(".searchResults").empty().append(this.getItemMarkup(b,c))},render:function(a){if(a?this.dataLastLoaded=a:a=this.dataLastLoaded,a){this.renderFilters(a);var b="grid"===this.layoutOption?this.searchResultGridTemplate:this.searchResultListTemplate;this.isNewSearch?this.attachContentViewHandlers(this.renderContents(a,b)):this.renderItems(a,b),this.postRender()}},attachContentViewHandlers:function(b){var c=this,e=(a("#selectStandard",b),a("#setLayoutOptionGrid",b)),f=a("#setLayoutOptionList",b);e.click(function(a){a.preventDefault(),e.parent().hasClass("active")||(e.parent().addClass("active"),f.parent().removeClass("active"),c.layoutOption="grid",c.reRenderItems(c.dataLastLoaded,c.searchResultGridTemplate))}),f.click(function(a){a.preventDefault(),f.parent().hasClass("active")||(f.parent().addClass("active"),e.parent().removeClass("active"),c.layoutOption="list",c.reRenderItems(c.dataLastLoaded,c.searchResultListTemplate))}),"list"===this.layoutOption&&f.click()},initializeShareDialog:function(){a("#share").detach().appendTo(a("#content"))},postRender:function(){var c=this;new QuickView(a(".productList"),"product",a("#header").outerHeight()+20+"px",function(){Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables(),c.initializeShareDialog()},Redant.util.ajaxLoader());setTimeout(function(){c.renderBanner();new a.accordion(a(".filterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){b.push(a[0].className)},onItemClose:function(a){var c=a[0].className,d=b.indexOf(c);b.splice(d,1)},onInit:function(){0==b.length&&b.push("accordion-always-open");var c=b;b=[];for(var d=0,e=c.length;d<e;d++){var f=c[d].split(" ").join(".");a("."+f).find(this.trigger).trigger("click")}}});a(".tagpickerSearch").each(function(){var b=a(this),d=b.closest("form")[0],e=!0;"allownew=false"==b.attr("rel")&&(e=!1);var g={width:"100%",json_url:"/shops/WgShop/PredictiveSearchFrontend/",complete_text:"Enter keywords...",bricket:!1,onselect:function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()},onremove:function(b){a("#"+b._id).prop("selected",!1),clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()}};g.newel=e,a("select",b).fcbkcomplete(g),a("input[type=text]",b).keydown(function(){clearTimeout(c.tagUpdateReference)}),c.slider=new FormElement({type:"SliderSingle",elements:a(".slider.single")})});var e=a("form.filterAccordion");c.toggleClear(".filterColours"),c.toggleClear(".filterMartindale"),c.toggleClear(".filterBrands"),c.toggleClear(".filterEndUse"),c.toggleClear(".filterType"),c.toggleClear(".filterPattern"),c.toggleClear(".filterProductGroup"),c.toggleClear(".filterFlameRetardant"),c.toggleClear(".filterUsage"),c.toggleClear(".filterComposition"),c.toggleClear(".filterFRTreatable"),c.toggleClear(".filterFRTreated"),c.toggleClear(".filterFRInherent"),null!=a("#keywords").val()&&a("#keywords").val().length>0?a(".filterTags .clearFilter").show():a(".filterTags .clearFilter").hide(),e.find(".brands label.all").off("click"),e.find(".brands label.all").on("click",function(){var b=a(this),d=b.parents("ul").children().children();return b.hasClass("selectedAll")?(d.removeClass("selected"),d.find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(d.addClass("selected"),d.find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll")),clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),toggleClear(".filterBrands"),!1}),e.on("click",".colours label, .brands label, .patterns label, .searchOptions .colours label",function(){var b=a(this);if(b.parent().hasClass("toggleAll"))b.hasClass("selectedAll")?(b.parent().siblings("ul").children().children().removeClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(b.parent().siblings("ul").children().children().addClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll"));else{b.toggleClass("selected");toggleCheckbox(b.find('input[type="checkbox"]'))}return clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),!1}),e.on("change",".optionList li input[type=checkbox],.optionList li input[type=radio]",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),a("#SortBy").on("change",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),e.on("click",".filterColours .clearFilter",function(){return c.clearSelectedCheck(".filterColours"),c.execute(!0),!1}),e.on("click",".filterBrands .clearFilter",function(){return c.clearSelectedCheck(".filterBrands"),c.execute(!0),!1}),e.on("click",".filterPattern .clearFilter",function(){return c.clearSelectedCheck(".filterPattern"),c.execute(!0),!1}),e.on("click",".filterEndUse .clearFilter",function(){return c.clearSelectedCheck(".filterEndUse"),c.execute(!0),!1}),e.on("click",".filterType .clearFilter",function(){return c.clearSelectedCheck(".filterType"),c.execute(!0),!1}),e.on("click",".filterProductGroup .clearFilter",function(){return c.clearSelectedCheck(".filterProductGroup"),c.execute(!0),!1}),e.on("click",".filterFlameRetardant .clearFilter",function(){return c.clearSelectedCheck(".filterFlameRetardant"),c.execute(!0),!1}),e.on("click",".filterMartindale .clearFilter",function(){return c.clearSelectedCheck(".filterMartindale"),c.execute(!0),!1}),e.on("click",".filterUsage .clearFilter",function(){return c.clearSelectedCheck(".filterUsage"),c.execute(!0),!1}),e.on("click",".filterFRTreated .clearFilter",function(){return c.clearSelectedCheck(".filterFRTreated"),c.execute(!0),!1}),e.on("click",".filterFRInherent .clearFilter",function(){return c.clearSelectedCheck(".filterFRInherent"),c.execute(!0),!1}),e.on("click",".filterFRTreatable .clearFilter",function(){return c.clearSelectedCheck(".filterFRTreatable"),c.execute(!0),!1}),e.on("click",".filterComposition .clearFilter",function(){return c.clearSelectedCheck(".filterComposition"),c.execute(!0),!1}),e.on("click",".filterRoom .clearFilter",function(){return c.clearSelectedCheck(".filterRoom"),c.execute(!0),!1}),e.on("click",".filterTags .clearFilter",function(){return c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),e.on("click",".clearAllFilters",function(){return c.clearSelectedCheck(".filterColours,.filterBrands,.filterPattern,.filterEndUse,.filterType,.filterProductGroup,.filterFlameRetardant,.filterUsage,.filterComposition,.filterFRTreated,.filterFRTreatable,.filterFRInherent,.filterRoom"),c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),a("#martindale").parents(".field").on("click",function(b,d){a(".filterMartindale .clearFilter").show(),c.execute(!0)}),Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables()},10)},toggleClear:function(b){a(b).find("input:checked").length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},toggleClearText:function(b){a(b).val("")},toggleClearSlider:function(b){a(b).find("input").length>0&&a(b).find("input").val().length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},removeAllOptions:function(b){a(b).find("option").each(function(){a(this).remove()})},clearSelectedCheck:function(b){var c=this;a(b).find("label.selected").each(function(){a(this).toggleClass("selected")}),a(b).find("input:checked").each(function(){a(this).prop("checked",!1)}),a(b).find(".selectedAll").removeClass("selectedAll"),c.toggleClear(b)},setSearchTabUrls:function(){var b=a("#keywords").val();a(".tabs ul li a").each(function(){var c=a(this),d=c.attr("href");d=d.split("?")[0],null!=b&&(d=d+"?keywords="+b.join(" ")),c.attr("href",d)})},execute:function(b,c){c=c||function(){},this.ajaxReference&&(this.ajaxReference.abort(),a(".actionLoader").remove()),this.isNewSearch=b,this.isNewSearch?(this.disable=!1,this.page=1,this.query=this.getSearchQuery()):this.page=1;var d=Redant.util.ajaxLoader().appendTo("body").css({"z-index":"9999",bottom:"40px"}).show(),e=this.getQueryString("categoryName"),f=this.getQueryString("categoryId"),h=(this.getQueryString("SelectedProductGroups"),"/shops/wgshopsearch/AjaxCushion/?page="+this.page+"&perPage=120"),i=a("#searchHandle").val();h=h+"&categoryName="+e,h=h+"&categoryId="+f,h=h+"&searchHandle="+i;var k,j=this;if((k=6508)&&this.lastBannerCategoryIdUsed!==k){this.lastBannerCategoryIdUsed=k,this.lastBannerCategoryContentUsed=null,this.ajaxBannerLoad&&this.ajaxBannerLoad.abort();var l=a.ajax({url:"/shops/productcategories/GetBannerBySkuAttributeOption/",type:"GET",data:{skuAttributeOptionId:6508},complete:function(){j.ajaxBannerLoad===l&&(j.ajaxBannerLoad=null)},success:function(a){j.lastBannerCategoryContentUsed=a,j.renderBanner()}});this.ajaxBannerLoad=l}this.query=this.query.replace("?",""),this.ajaxReference=a.ajax({url:h,type:"POST",data:this.query,responseType:"json",complete:function(){j.ajaxReference=null,d.remove()},success:function(b){d.fadeOut({complete:function(){d.remove()}}),"?"!==j.query.substr(0,1)&&(j.query="?"+j.query),this.searchHandle=b.SearchHandle,this.totalPages=b.lastPage;var e=window.location.protocol+"//"+window.location.host+window.location.pathname+j.query;null!=b.ProductSearchResults&&b.ProductSearchResults.length>0&&history.pushState({},document.title,e),j.render(b),a(".scrapBookAdd").prependTo("#content"),c(null,b)}})},getSearchQuery:function(){var b="";if(null!=this.hash&&this.hash.length>0)b=this.hash,this.hash=null;else{b=a("#initializeSearch").length>0?a("#initializeSearch").serialize():a("#searchProducts").serialize()||"",b+="&SortBy="+(a("#SortBy").val()||"default");var c=b.match("&layoutOption=[a-zA-z0-9]*");c&&c.length?b=b.replace(c[0],"&layoutOption="+this.layoutOption):b+="&layoutOption="+this.layoutOption}return b+="&searchHandle="+a("#searchHandle").val(),a("#initializeSearch").remove(),b},setQueryString:function(a,b){var c="(&|\\?)"+a+"=[a-zA-z0-9]*",d=window.location.search.match(c);if(d&&d.length){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+d.input.replace(d[0],"&"+a+"="+b);history.pushState({},document.title,e)}else{var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&"+a+"="+b;history.pushState({},document.title,e)}},getQueryString:function(a){var b="(&|\\?)"+a+"=([a-zA-z0-9]*)",c=window.location.search.match(b);return c&&3===c.length?c[2]:""},loadTemplate:function(b){return a.ajax({url:"/_js/template/"+b+".html?v=4",type:"GET",dataType:"html"})},init:function(b){var c=a.Deferred(),d=this;return d.form=b,a.when(d.loadTemplate("search-results"),d.loadTemplate("cushion-result-grid"),d.loadTemplate("cushion-filter"),d.loadTemplate("cushion-result-list")).done(function(a,b,e,f){d.searchResultsTemplate=_.template(a[0]),d.searchResultGridTemplate=_.template(b[0]),d.searchFilterTemplate=_.template(e[0]),d.searchResultListTemplate=_.template(f[0]),c.resolve(d)}),Object.defineProperty(d,"layoutOption",{get:function(){return d._layoutOption||(d._layoutOption=d.getQueryString("layoutOption")||d.defaultLayoutOption),d._layoutOption},set:function(a){d.setQueryString("layoutOption",a),d._layoutOption=a}}),c.promise()},getScrollDirection:function(b){var f,g,c=this,d=a(b).scrollTop(),e=a(b).scrollLeft();return d>c.previousScrollY?g="down":d<c.previousScrollY&&(g="up"),e>c.previousScrollX?c.scrollDirectionX="right":e<c.previousScrollX&&(f="left"),c.previousScrollY=d,c.previousScrollX=e,{X:f,Y:g}}};a(document).ready(function(){a("body").hasClass("searchTemplate")&&c.init("#searchProducts").then(function(a){return a.execute(!0)})})}(jQuery);var openItems=[],PaintSearch={isNewSearch:!1,searchResultsTemplate:null,searchResultTemplate:null,searchFilterTemplate:null,slider:null,ajaxReference:null,tagUpdateReference:null,previousScrollX:0,previousScrollY:0,disableScroll:!1,disable:!1,page:1,scrollTrigger:.7,query:"",delay:null,renderFilters:function(a){var b=this,c=b.searchFilterTemplate({model:a});$(".leftCol").length>0?$(".leftCol").replaceWith(c):$("#container").append(c),$(".toggleFilters").click(function(a){$(".filterAccordion, #productFilters").toggle()})},renderContents:function(a){var b=this,c=b.searchResultsTemplate({model:a,itemTemplate:b.searchResultTemplate});$("#content").remove(),$("#container").append(c)},renderItems:function(a){var b=this,c="",d=b.searchResultTemplate;_.each(a.ProductSearchResults,function(a){c+=d(a)}),""!==c&&$(".searchResults").append(c)},render:function(a){var b=this;b.renderFilters(a),b.isNewSearch?b.renderContents(a):b.renderItems(a),b.postRender()},postRender:function(){var a=this;new QuickView($(".productList"),"product",$("#header").outerHeight()+20+"px",function(){Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader());setTimeout(function(){new $.accordion($(".filterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){openItems.push(a[0].className)},onItemClose:function(a){var b=a[0].className,c=openItems.indexOf(b);openItems.splice(c,1)},onInit:function(){var a=openItems;openItems=[];for(var b=0,c=a.length;b<c;b++){var d=a[b].split(" ").join(".");$("."+d).find(this.trigger).trigger("click")}}});$(".tagpickerSearch").each(function(){field=$(this);var b=field.closest("form")[0],c=!0;"allownew=false"==field.attr("rel")&&(c=!1);var e={width:"100%",json_url:"/shops/WgShop/PredictiveSearchFrontend/",complete_text:"Enter keywords...",bricket:!1,onselect:function(){clearTimeout(a.delay),a.delay=setTimeout(function(){a.execute(!0)},500),$(".postbackSearch").length>0&&$(b).submit()},onremove:function(c){$("#"+c._id).prop("selected",!1),clearTimeout(a.delay),a.delay=setTimeout(function(){a.execute(!0)},500),$(".postbackSearch").length>0&&$(b).submit()}};e.newel=c,$("select",field).fcbkcomplete(e),$("input[type=text]",field).keydown(function(b){clearTimeout(a.tagUpdateReference)}),a.slider=new FormElement({type:"SliderSingle",elements:$(".slider.single")})});var c=$("form.filterAccordion");a.toggleClear(".filterColours"),null!=$("#keywords").val()&&$("#keywords").val().length>0?$(".filterTags .clearFilter").show():$(".filterTags .clearFilter").hide(),c.on("click",".colours label, .searchOptions .colours label",function(){var b=$(this);if(b.parent().hasClass("toggleAll"))b.hasClass("selectedAll")?(b.parent().siblings("ul").children().children().removeClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(b.parent().siblings("ul").children().children().addClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll"));else{b.toggleClass("selected");toggleCheckbox(b.find('input[type="checkbox"]'))}return clearTimeout(a.delay),a.delay=setTimeout(function(){a.execute(!0)},500),!1}),c.on("change",".optionList li input[type=checkbox],.optionList li input[type=radio]",function(b){clearTimeout(a.delay),a.delay=setTimeout(function(){a.execute(!0)},500)}),c.on("click",".filterColours .clearFilter",function(){return a.clearSelectedCheck(".filterColours"),a.execute(!0),!1}),c.on("click",".filterTags .clearFilter",function(){return a.toggleClearText("input[name='keywords']"),a.removeAllOptions("select[name='keywords']"),a.execute(!0),!1}),Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables()},10)},toggleClear:function(a){$(a).find("input:checked").length>0?$(a).find(".clearFilter").show():$(a).find(".clearFilter").hide()},toggleClearText:function(a){$(a).val("")},toggleClearSlider:function(a){$(a).find("input").val().length>0?$(a).find(".clearFilter").show():$(a).find(".clearFilter").hide()},removeAllOptions:function(a){$(a).find("option").each(function(){$(this).remove()})},clearSelectedCheck:function(a){var b=this;$(a).find("label.selected").each(function(){$(this).toggleClass("selected")}),$(a).find("input:checked").each(function(){$(this).prop("checked",!1)}),$(a).find(".selectedAll").removeClass("selectedAll"),b.toggleClear(a)},execute:function(a){var b=this;b.ajaxReference&&(b.ajaxReference.abort(),$(".actionLoader").remove()),b.isNewSearch=a,b.isNewSearch?(b.disable=!1,b.page=1,b.getSearchQuery()):b.page++;var c=Redant.util.ajaxLoader();$("body").append(c),c.css({"z-index":"9999",bottom:"40px"}),c.show(),console.log(b.query),b.ajaxReference=$.ajax({url:"/shops/wgshopsearch/ajaxpaint/?page="+b.page+"&perPage=120",type:"POST",data:b.query,responseType:"json",success:function(a){b.ajaxReference=null,c.fadeOut(),c.remove(),null!==a?(null!==a.ProductSearchResults&&0!=a.ProductSearchResults.length||(b.disable=!0),b.render(a)):b.disable=!0,$(".scrapBookAdd").prependTo("#content")}})},arrayHasValues:function(a){for(var b=!1,c=0;c<a.length;c++)if(null!==a[c]||void 0!==a[c]&&""!==a[c]){b=!0;break}return b},getSearchQuery:function(){this.query=($("#initializeSearch").length>0?$("#initializeSearch"):$("#searchPaint")).serialize()||"",$("#initializeSearch").remove()},loadTemplate:function(a){return $.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})},init:function(){var a=this;return $.when(a.loadTemplate("paint-results"),a.loadTemplate("paint-result"),a.loadTemplate("paint-filter")).done(function(b,c,d){a.searchResultsTemplate=_.template(b[0]),a.searchResultTemplate=_.template(c[0]),a.searchFilterTemplate=_.template(d[0])}),$(window).on("scroll",function(b){"down"!==a.getScrollDirection(this).Y||a.disableScroll||a.disable||null!=a.ajaxReference||(a.disableScroll=!0,$(window).scrollTop()/($(document).height()-$(window).height())>a.scrollTrigger&&a.execute(!1),setTimeout(function(){a.disableScroll=!1},1e3))}),a},getScrollDirection:function(a){var e,f,b=this,c=$(a).scrollTop(),d=$(a).scrollLeft();return c>b.previousScrollY?f="down":c<b.previousScrollY&&(f="up"),d>b.previousScrollX?b.scrollDirectionX="right":d<b.previousScrollX&&(e="left"),b.previousScrollY=c,b.previousScrollX=d,{X:e,Y:f}}};$(document).ready(function(){$("#paint-search-placeholder").length>0&&PaintSearch.init().execute(!0)}),function(a){"use strict";var b=[],c={isNewSearch:!1,searchResultsTemplate:null,searchResultGridTemplate:null,searchResultListTemplate:null,searchFilterTemplate:null,slider:null,ajaxReference:null,tagUpdateReference:null,previousScrollX:0,previousScrollY:0,disableScroll:!1,disable:!1,page:1,scrollTrigger:.7,query:"",searchHandle:"",searchTerms:"",totalPages:0,delay:null,form:null,defaultLayoutOption:"grid",_layoutOption:null,lastBannerCategoryIdUsed:null,hash:window.location.search.substr(1),renderFilters:function(b){var c=this,d=c.searchFilterTemplate({model:b});a(".leftCol").length>0?a(".leftCol").replaceWith(d):a("#container").append(d),a(".toggleFilters").click(function(){a(".filterAccordion, #productFilters").toggle()})},renderContents:function(b,c){var d=this.searchResultsTemplate({model:b,itemTemplate:c});return(b.CelebrosCustomMessage||b.CelebrosCustomMessage.length)&&(this.lastBannerCategoryContentUsed=b.CelebrosCustomMessage),a("#content").remove(),a(d).appendTo("#container")},renderBanner:function(){if(this.lastBannerCategoryContentUsed&&this.lastBannerCategoryContentUsed.length){var b=a(".listing-options");b.length&&(a(".searchBanner").remove(),b.before(this.lastBannerCategoryContentUsed))}},getItemMarkup:function(a,b){var c="",d=0;return _.each(a.ProductSearchResults,function(a){c+=b(a),d++}),c},renderItems:function(b,c){a(".searchResults").append(this.getItemMarkup(b,c))},reRenderItems:function(b,c){a(".searchResults").empty().append(this.getItemMarkup(b,c))},render:function(a){if(a?this.dataLastLoaded=a:a=this.dataLastLoaded,a){this.renderFilters(a);var b="grid"===this.layoutOption?this.searchResultGridTemplate:this.searchResultListTemplate;this.isNewSearch?this.attachContentViewHandlers(this.renderContents(a,b)):this.renderItems(a,b),this.postRender()}},attachContentViewHandlers:function(b){var c=this,e=(a("#selectStandard",b),a("#setLayoutOptionGrid",b)),f=a("#setLayoutOptionList",b);e.click(function(a){a.preventDefault(),e.parent().hasClass("active")||(e.parent().addClass("active"),f.parent().removeClass("active"),c.layoutOption="grid",c.reRenderItems(c.dataLastLoaded,c.searchResultGridTemplate))}),f.click(function(a){a.preventDefault(),f.parent().hasClass("active")||(f.parent().addClass("active"),e.parent().removeClass("active"),c.layoutOption="list",c.reRenderItems(c.dataLastLoaded,c.searchResultListTemplate))}),"list"===this.layoutOption&&f.click()},initializeShareDialog:function(){a("#share").detach().appendTo(a("#content"))},postRender:function(){var c=this;new QuickView(a(".productList"),"product",a("#header").outerHeight()+20+"px",function(){Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables(),c.initializeShareDialog()},Redant.util.ajaxLoader());setTimeout(function(){c.renderBanner();new a.accordion(a(".filterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){b.push(a[0].className)},onItemClose:function(a){var c=a[0].className,d=b.indexOf(c);b.splice(d,1)},onInit:function(){0==b.length&&b.push("accordion-always-open");var c=b;b=[];for(var d=0,e=c.length;d<e;d++){var f=c[d].split(" ").join(".");a("."+f).find(this.trigger).trigger("click")}}});a(".tagpickerSearch").each(function(){var b=a(this),d=b.closest("form")[0],e=!0;"allownew=false"==b.attr("rel")&&(e=!1);var g={width:"100%",json_url:"/shops/WgShop/PredictiveSearchFrontend/",complete_text:"Enter keywords...",bricket:!1,onselect:function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()},onremove:function(b){a("#"+b._id).prop("selected",!1),clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()}};g.newel=e,a("select",b).fcbkcomplete(g),a("input[type=text]",b).keydown(function(){clearTimeout(c.tagUpdateReference)}),c.slider=new FormElement({type:"SliderSingle",elements:a(".slider.single")})});var e=a("form.filterAccordion");c.toggleClear(".filterColours"),c.toggleClear(".filterMartindale"),c.toggleClear(".filterBrands"),c.toggleClear(".filterEndUse"),c.toggleClear(".filterType"),c.toggleClear(".filterPattern"),c.toggleClear(".filterProductGroup"),c.toggleClear(".filterFlameRetardant"),c.toggleClear(".filterUsage"),c.toggleClear(".filterComposition"),c.toggleClear(".filterFRTreatable"),c.toggleClear(".filterFRTreated"),c.toggleClear(".filterFRInherent"),c.toggleClear(".filterWallpaperType"),c.toggleClear(".filterTrimmingType"),c.toggleClear(".filterFabricType"),c.toggleClear(".filterRoom"),null!=a("#keywords").val()&&a("#keywords").val().length>0?a(".filterTags .clearFilter").show():a(".filterTags .clearFilter").hide(),e.find(".brands label.all").off("click"),e.find(".brands label.all").on("click",function(){var b=a(this),d=b.parents("ul").children().children();return b.hasClass("selectedAll")?(d.removeClass("selected"),d.find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(d.addClass("selected"),d.find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll")),clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),toggleClear(".filterBrands"),!1}),e.on("click",".colours label, .brands label, .patterns label, .searchOptions .colours label",function(){var b=a(this);if(b.parent().hasClass("toggleAll"))b.hasClass("selectedAll")?(b.parent().siblings("ul").children().children().removeClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(b.parent().siblings("ul").children().children().addClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll"));else{b.toggleClass("selected");toggleCheckbox(b.find('input[type="checkbox"]'))}return clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),!1}),e.on("change",".optionList li input[type=checkbox],.optionList li input[type=radio]",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),"default"!==a("#SortBy").val()&&""!==a("#SortBy").val()||a("#SortBy option[value='alphaasc']").prop("selected",!0),a("#SortBy").on("change",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),e.on("click",".filterColours .clearFilter",function(){return c.clearSelectedCheck(".filterColours"),c.execute(!0),!1}),e.on("click",".filterBrands .clearFilter",function(){return c.clearSelectedCheck(".filterBrands"),c.execute(!0),!1}),e.on("click",".filterPattern .clearFilter",function(){return c.clearSelectedCheck(".filterPattern"),c.execute(!0),!1}),e.on("click",".filterEndUse .clearFilter",function(){return c.clearSelectedCheck(".filterEndUse"),c.execute(!0),!1}),e.on("click",".filterType .clearFilter",function(){return c.clearSelectedCheck(".filterType"),c.execute(!0),!1}),e.on("click",".filterProductGroup .clearFilter",function(){return c.clearSelectedCheck(".filterProductGroup"),c.execute(!0),!1}),e.on("click",".filterFlameRetardant .clearFilter",function(){return c.clearSelectedCheck(".filterFlameRetardant"),c.execute(!0),!1}),e.on("click",".filterMartindale .clearFilter",function(){return c.clearSelectedCheck(".filterMartindale"),c.execute(!0),!1}),e.on("click",".filterUsage .clearFilter",function(){return c.clearSelectedCheck(".filterUsage"),c.execute(!0),!1}),e.on("click",".filterFRTreated .clearFilter",function(){return c.clearSelectedCheck(".filterFRTreated"),c.execute(!0),!1}),e.on("click",".filterFRInherent .clearFilter",function(){return c.clearSelectedCheck(".filterFRInherent"),c.execute(!0),!1}),e.on("click",".filterFRTreatable .clearFilter",function(){return c.clearSelectedCheck(".filterFRTreatable"),c.execute(!0),!1}),e.on("click",".filterComposition .clearFilter",function(){return c.clearSelectedCheck(".filterComposition"),c.execute(!0),!1}),e.on("click",".filterWallpaperType .clearFilter",function(){return c.clearSelectedCheck(".filterWallpaperType"),c.execute(!0),!1}),e.on("click",".filterTrimmingType .clearFilter",function(){return c.clearSelectedCheck(".filterTrimmingType"),c.execute(!0),!1}),e.on("click",".filterFabricType .clearFilter",function(){return c.clearSelectedCheck(".filterFabricType"),c.execute(!0),!1}),e.on("click",".filterRoom .clearFilter",function(){return c.clearSelectedCheck(".filterRoom"),c.execute(!0),!1}),e.on("click",".filterTags .clearFilter",function(){return c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),e.on("click",".clearAllFilters",function(){return c.clearSelectedCheck(".filterColours,.filterBrands,.filterPattern,.filterEndUse,.filterType,.filterProductGroup,.filterFlameRetardant,.filterUsage,.filterComposition,.filterFRTreated,.filterFRTreatable,.filterFRInherent,.filterWallpaperType,.filterTrimmingType,.filterFabricType"),c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),a("#martindale").parents(".field").on("click",function(b,d){a(".filterMartindale .clearFilter").show(),c.execute(!0)}),Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables()},10)},toggleClear:function(b){a(b).find("input:checked").length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},toggleClearText:function(b){a(b).val("")},toggleClearSlider:function(b){a(b).find("input").length>0&&a(b).find("input").val().length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},removeAllOptions:function(b){a(b).find("option").each(function(){a(this).remove()})},clearSelectedCheck:function(b){var c=this;a(b).find("label.selected").each(function(){a(this).toggleClass("selected")}),a(b).find("input:checked").each(function(){a(this).prop("checked",!1)}),a(b).find(".selectedAll").removeClass("selectedAll"),c.toggleClear(b)},setSearchTabUrls:function(){var b=a("#keywords").val();a(".tabs ul li a").each(function(){var c=a(this),d=c.attr("href");d=d.split("?")[0],null!=b&&(d=d+"?keywords="+b.join(" ")),c.attr("href",d)})},execute:function(b,d){if(d=d||function(){},this.ajaxReference&&(this.ajaxReference.abort(),a(".actionLoader").remove()),this.isNewSearch=b,this.isNewSearch)this.disable=!1,this.page=1,this.query=this.getSearchQuery();else{if(this.page>this.totalPages)return!1;this.page++,this.query=this.getSearchQuery()}var e=Redant.util.ajaxLoader().appendTo("body").css({"z-index":"9999",bottom:"40px"}).show(),g=(a("#LastSearchPage").val(),this.getQueryString("brand")),h=a("#searchHandle").val(),i="/shops/wgshopsearch/ajaxsearch/?page="+this.page+"&perPage=120";i=i+"&searchHandle="+h,i=i+"&brand="+g;var m,j=a(".filterProductGroup input:checked"),k=this,l=function(){var b=a(".listing-options").prev();b.hasClass("content-banner")&&b.remove()};if((m=j.first().val()||this.getQueryString("SelectedProductGroups"))&&this.lastBannerCategoryIdUsed!==m){this.lastBannerCategoryIdUsed=m,this.lastBannerCategoryContentUsed=null,this.ajaxBannerLoad&&this.ajaxBannerLoad.abort();var n=a.ajax({url:"/shops/productcategories/GetBannerBySkuAttributeOption/",type:"GET",data:{skuAttributeOptionId:m},complete:function(){k.ajaxBannerLoad===n&&(k.ajaxBannerLoad=null)},success:function(a){k.lastBannerCategoryContentUsed=a,k.renderBanner()}});this.ajaxBannerLoad=n}else l();this.query=this.query.replace("?",""),this.ajaxReference=a.ajax({url:i,type:"POST",data:this.query,responseType:"json",complete:function(){k.ajaxReference=null},success:function(b){e.fadeOut({complete:function(){e.remove()}}),"?"!==k.query.substr(0,1)&&(k.query="?"+k.query),this.searchHandle=b.SearchHandle,this.lastPage=b.LastPage,this.totalPages=b.LastPage,this.searchTerms=b.SearchSequence,this.currentPage=b.CurrentPage,c.totalPages=b.LastPage;var f=window.location.protocol+"//"+window.location.host+window.location.pathname+k.query;null!=b.ProductSearchResults&&b.ProductSearchResults.length>0&&history.pushState({},document.title,f),k.isNewSearch?k.render(b):b.ProductSearchResults.length>0&&k.render(b),a(".scrapBookAdd").prependTo("#content"),d(null,b)}})},getSearchQuery:function(){var b="";if(null!=this.hash&&this.hash.length>0)b=this.hash,this.hash=null;else{b=a("#initializeSearch").length>0?a("#initializeSearch").serialize():a("#searchProducts").serialize()||"",b+="&SortBy="+(a("#SortBy").val()||"default");var c=b.match("&layoutOption=[a-zA-z0-9]*");c&&c.length?b=b.replace(c[0],"&layoutOption="+this.layoutOption):b+="&layoutOption="+this.layoutOption,b+="&searchHandle="+a("#searchHandle").val(),b+="&searchTerms="+a("#searchTerm").val()}return a("#initializeSearch").remove(),b},setQueryString:function(a,b){var c="(&|\\?)"+a+"=[a-zA-z0-9]*",d=window.location.search.match(c);if(d&&d.length){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+d.input.replace(d[0],"&"+a+"="+b);history.pushState({},document.title,e)}else{var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&"+a+"="+b;history.pushState({},document.title,e)}},getQueryString:function(a){var b="(&|\\?)"+a+"=([a-zA-z0-9]*)",c=window.location.search.match(b);return c&&3===c.length?c[2]:""},loadTemplate:function(b){return a.ajax({url:"/_js/template/"+b+".html?v=4",type:"GET",dataType:"html"})},init:function(b){var c=a.Deferred(),d=this;return d.form=b,a.when(d.loadTemplate("search-results"),d.loadTemplate("search-result-grid"),d.loadTemplate("search-filter"),d.loadTemplate("search-result-list")).done(function(b,e,f,g){d.searchResultsTemplate=_.template(b[0]),d.searchResultGridTemplate=_.template(e[0]),d.searchFilterTemplate=_.template(f[0]),d.searchResultListTemplate=_.template(g[0]),a(window).on("scroll",function(){"down"!==d.getScrollDirection(this).Y||d.disableScroll||a(window).scrollTop()/(a(document).height()-a(window).height())>d.scrollTrigger&&(d.disableScroll=!0,d.execute(!1,function(){d.disableScroll=!1}))}),c.resolve(d)}),Object.defineProperty(d,"layoutOption",{get:function(){return d._layoutOption||(d._layoutOption=d.getQueryString("layoutOption")||d.defaultLayoutOption),d._layoutOption},set:function(a){d.setQueryString("layoutOption",a),d._layoutOption=a}}),c.promise()},getScrollDirection:function(b){var f,g,c=this,d=a(b).scrollTop(),e=a(b).scrollLeft();return d>c.previousScrollY?g="down":d<c.previousScrollY&&(g="up"),e>c.previousScrollX?c.scrollDirectionX="right":e<c.previousScrollX&&(f="left"),c.previousScrollY=d,c.previousScrollX=e,{X:f,Y:g}}};a(document).ready(function(){a("body").hasClass("searchTemplate")&&c.init("#searchProducts").then(function(a){return a.execute(!0)})})}(jQuery),function(a){"use strict";var b=[],c={isNewSearch:!1,searchResultsTemplate:null,searchResultGridTemplate:null,searchResultListTemplate:null,searchFilterTemplate:null,slider:null,ajaxReference:null,tagUpdateReference:null,previousScrollX:0,previousScrollY:0,disableScroll:!1,disable:!1,page:1,scrollTrigger:.7,query:"",delay:null,form:null,hash:null,layoutOption:"grid",renderFilters:function(b){var c=this,d=c.searchFilterTemplate({model:b});a(".leftCol").length>0?a(".leftCol").replaceWith(d):a("#container").append(d),a(".toggleFilters").click(function(){a(".filterAccordion, #productFilters").toggle()})},renderContents:function(b,c){var d=this.searchResultsTemplate({model:b,itemTemplate:c});return a("#content").remove(),a(d).appendTo("#container")},renderBanner:function(){if(this.lastBannerCategoryContentUsed&&this.lastBannerCategoryContentUsed.length){var b=a(".listing-options");b.length&&b.before(this.lastBannerCategoryContentUsed)}},getItemMarkup:function(a,b){var c="";return _.each(a.ProductSearchResults,function(a){c+=b(a)}),c},renderItems:function(b,c){a(".searchResults").append(this.getItemMarkup(b,c))},reRenderItems:function(b,c){a(".searchResults").empty().append(this.getItemMarkup(b,c))},render:function(a){var b;if(a?this.dataLastLoaded=a:a=this.dataLastLoaded,a){this.renderFilters(a);var c=this.getHash("layoutOption");"grid"===c&&(b=this.searchResultGridTemplate),"list"===c&&(b=this.searchResultListTemplate),this.isNewSearch?this.attachContentViewHandlers(this.renderContents(a,b)):this.renderItems(a,b),this.postRender()}},attachContentViewHandlers:function(b){var c=this;a("#selectStandard",b);this.setLayoutOptionGrid=a("#setLayoutOptionGrid",b),this.setLayoutOptionList=a("#setLayoutOptionList",b),c.setLayoutOptionGrid.click(function(a){a.preventDefault(),c.setLayoutOptionGrid.parent().hasClass("active")||(c.setLayoutOptionGrid.parent().addClass("active"),c.setLayoutOptionList.parent().removeClass("active"),c.layoutOption="grid",c.setHash("layoutOption",c.layoutOption),c.reRenderItems(c.dataLastLoaded,c.searchResultGridTemplate))}),c.setLayoutOptionList.click(function(a){a.preventDefault(),c.setLayoutOptionList.parent().hasClass("active")||(c.setLayoutOptionList.parent().addClass("active"),c.setLayoutOptionGrid.parent().removeClass("active"),c.layoutOption="list",c.setHash("layoutOption",c.layoutOption),c.reRenderItems(c.dataLastLoaded,c.searchResultListTemplate))})},setHash:function(a,b){var d="&"+a+"=[a-zA-z]*",e=c.hash.match(d);e.length&&(this.hash=e.replace(e[0],"&"+a+"="+b),window.location.hash=c.hash)},getHash:function(a){var b="&"+a+"=([a-zA-z]*)",d=c.hash.match(b);return 2===d.length?d[1]:null},initializeShareDialog:function(){a("#share").detach().appendTo(a("#content"))},postRender:function(){var c=this;new QuickView(a(".productList"),"product",a("#header").outerHeight()+20+"px",function(){Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables(),c.initializeShareDialog()},Redant.util.ajaxLoader());setTimeout(function(){c.renderBanner();new a.accordion(a(".filterAccordion"),{accordionType:"adv",trigger:".toggle-filterAccordion",element:".content-filterAccordion",container:".boxSection",transitionSpeed:0,transitionEase:"linear",closeOthers:!1,openFirst:!0,onItemOpen:function(a){b.push(a[0].className)},onItemClose:function(a){var c=a[0].className,d=b.indexOf(c);b.splice(d,1)},onInit:function(){0==b.length&&b.push("accordion-always-open");var c=b;b=[];for(var d=0,e=c.length;d<e;d++){var f=c[d].split(" ").join(".");a("."+f).find(this.trigger).trigger("click")}}});a(".tagpickerSearch").each(function(){var b=a(this),d=b.closest("form")[0],e=!0;"allownew=false"==b.attr("rel")&&(e=!1);var g={width:"100%",json_url:"/shops/WgShop/PredictiveSearchFrontend/",complete_text:"Enter keywords...",bricket:!1,onselect:function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()},onremove:function(b){a("#"+b._id).prop("selected",!1),clearTimeout(c.delay),c.delay=setTimeout(function(){c.setSearchTabUrls(),c.execute(!0)},500),a(".postbackSearch").length>0&&a(d).submit()}};g.newel=e,a("select",b).fcbkcomplete(g),a("input[type=text]",b).keydown(function(){clearTimeout(c.tagUpdateReference)}),c.slider=new FormElement({type:"SliderSingle",elements:a(".slider.single")})});var e=a("form.filterAccordion");c.toggleClear(".filterColours"),c.toggleClear(".filterMartindale"),c.toggleClear(".filterBrands"),c.toggleClear(".filterEndUse"),c.toggleClear(".filterType"),c.toggleClear(".filterPattern"),c.toggleClear(".filterProductGroup"),c.toggleClear(".filterFlameRetardant"),c.toggleClear(".filterUsage"),c.toggleClear(".filterComposition"),null!=a("#keywords").val()&&a("#keywords").val().length>0?a(".filterTags .clearFilter").show():a(".filterTags .clearFilter").hide(),e.find(".brands label.all").off("click"),e.find(".brands label.all").on("click",function(){var b=a(this),d=b.parents("ul").children().children();return b.hasClass("selectedAll")?(d.removeClass("selected"),d.find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(d.addClass("selected"),d.find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll")),clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),toggleClear(".filterBrands"),!1}),e.on("click",".colours label, .brands label, .patterns label, .searchOptions .colours label",function(){var b=a(this);if(b.parent().hasClass("toggleAll"))b.hasClass("selectedAll")?(b.parent().siblings("ul").children().children().removeClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!1),b.removeClass("selectedAll")):(b.parent().siblings("ul").children().children().addClass("selected"),b.parent().siblings("ul").children().children().find('input[type="checkbox"]').prop("checked",!0),b.addClass("selectedAll"));else{b.toggleClass("selected");toggleCheckbox(b.find('input[type="checkbox"]'))}return clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500),!1}),e.on("change",".optionList li input[type=checkbox],.optionList li input[type=radio]",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),a("#SortBy").on("change",function(){clearTimeout(c.delay),c.delay=setTimeout(function(){c.execute(!0)},500)}),e.on("click",".filterColours .clearFilter",function(){return c.clearSelectedCheck(".filterColours"),c.execute(!0),!1}),e.on("click",".filterBrands .clearFilter",function(){return c.clearSelectedCheck(".filterBrands"),c.execute(!0),!1}),e.on("click",".filterPattern .clearFilter",function(){return c.clearSelectedCheck(".filterPattern"),c.execute(!0),!1}),e.on("click",".filterEndUse .clearFilter",function(){return c.clearSelectedCheck(".filterEndUse"),c.execute(!0),!1}),e.on("click",".filterType .clearFilter",function(){return c.clearSelectedCheck(".filterType"),c.execute(!0),!1}),e.on("click",".filterProductGroup .clearFilter",function(){return c.clearSelectedCheck(".filterProductGroup"),c.execute(!0),!1}),e.on("click",".filterFlameRetardant .clearFilter",function(){return c.clearSelectedCheck(".filterFlameRetardant"),c.execute(!0),!1}),e.on("click",".filterMartindale .clearFilter",function(){return c.clearSelectedCheck(".filterMartindale"),c.execute(!0),!1}),e.on("click",".filterUsage .clearFilter",function(){return c.clearSelectedCheck(".filterUsage"),c.execute(!0),!1}),e.on("click",".filterComposition .clearFilter",function(){return c.clearSelectedCheck(".filterComposition"),c.execute(!0),!1}),e.on("click",".filterTags .clearFilter",function(){return c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),e.on("click",".clearAllFilters",function(){return c.clearSelectedCheck(".filterColours,.filterBrands,.filterPattern,.filterEndUse,.filterType,.filterProductGroup,.filterFlameRetardant,.filterUsage,.filterComposition"),c.toggleClearText('input[name="keywords"]'),c.removeAllOptions('select[name="keywords"]'),c.setSearchTabUrls(),c.execute(!0),!1}),a("#martindale").parents(".field").on("click",function(b,d){a(".filterMartindale .clearFilter").show(),c.execute(!0)}),Redant.util.browser.isMobile()||Redant.util.browser.isTablet()||initializeDraggables()},10)},toggleClear:function(b){a(b).find("input:checked").length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},toggleClearText:function(b){a(b).val("")},toggleClearSlider:function(b){a(b).find("input").length>0&&a(b).find("input").val().length>0?a(b).find(".clearFilter").show():a(b).find(".clearFilter").hide()},removeAllOptions:function(b){a(b).find("option").each(function(){a(this).remove()})},clearSelectedCheck:function(b){var c=this;a(b).find("label.selected").each(function(){a(this).toggleClass("selected")}),a(b).find("input:checked").each(function(){a(this).prop("checked",!1)}),a(b).find(".selectedAll").removeClass("selectedAll"),c.toggleClear(b)},setSearchTabUrls:function(){var b=a("#keywords").val();a(".tabs ul li a").each(function(){var c=a(this),d=c.attr("href");d=d.split("?")[0],null!=b&&(d=d+"?keywords="+b.join(" ")),c.attr("href",d)})},execute:function(b){this.ajaxReference&&(this.ajaxReference.abort(),a(".actionLoader").remove()),this.isNewSearch=b,this.isNewSearch?(this.disable=!1,this.page=1,this.getSearchQuery()):this.page++;var c=Redant.util.ajaxLoader().appendTo("body").css({"z-index":"9999",bottom:"40px"}).show(),d=Redant.util.getQuerystring("categoryName"),e=Redant.util.getQuerystring("categoryId"),g=(Redant.util.getQuerystring("SelectedProductGroups"),"/shops/wgshopsearch/ajaxsearch/?page="+this.page+"&perPage=120");g=g+"&categoryName="+d,g=g+"&categoryId="+e;var h=a(".filterProductGroup input:checked"),i=this,j=function(){i.lastBannerCategoryIdUsed=null;var b=a(".listing-options").prev();b.hasClass("content-banner")&&b.remove()};if(1===h.length){var k=h.first().val();if(this.lastBannerCategoryIdUsed&&this.lastBannerCategoryIdUsed===k)j();else{this.lastBannerCategoryIdUsed=k,this.lastBannerCategoryContentUsed=null,this.ajaxBannerLoad&&this.ajaxBannerLoad.abort();var l=a.ajax({url:"/shops/productcategories/GetBannerBySkuAttributeOption/",type:"GET",data:{skuAttributeOptionId:k},complete:function(){i.ajaxBannerLoad===l&&(i.ajaxBannerLoad=null)},success:function(a){i.lastBannerCategoryContentUsed=a,i.renderBanner()}});this.ajaxBannerLoad=l}}else j();this.ajaxReference=a.ajax({url:g,type:"POST",data:this.query,responseType:"json",complete:function(){i.ajaxReference=null},success:function(b){c.fadeOut({complete:function(){c.remove()}}),window.location.hash=i.query,b?((null===b.ProductSearchResults||0==b.ProductSearchResults.length||b.ProductSearchResults.length<120)&&(i.disable=!0),i.render(b)):i.disable=!0,a(".scrapBookAdd").prependTo("#content")}})},arrayHasValues:function(a){for(var b=!1,c=0;c<a.length;c++)if(null!==a[c]||void 0!==a[c]&&""!==a[c]){b=!0;break}return b},getSearchQuery:function(){var b=this;if(null!=b.hash&&b.hash.length>0)b.query=b.hash;else{var c;c=a("#initializeSearch").length>0?a("#initializeSearch").serialize():a("#searchProducts").serialize()||"",c+="&SortBy="+(a("#SortBy").val()||"default"),c+="&layoutOption="+b.layoutOption,b.query=c}a("#initializeSearch").remove(),b.hash=null},deserialize:function(b){var c=this,d=a(c.form),e={};a.each(b.split("&"),function(){var a=this.split("="),b=decodeURIComponent(a[0]),c=a.length>1?decodeURIComponent(a[1].replace(/\+/g,"%20")):null;b in e||(e[b]=[]),e[b].push(c)}),a.each(e,function(b,c){var e=d.find('[name="'+b+'"]');switch(e.attr("type")){case"radio":case"checkbox":for(var f=0;f<e.length;f++)for(var g=0;g<c.length;g++)e[f].value==c[g]&&(a(e[f]).prop("checked",!0),a('label[for="'+a(e[f]).attr("id")+'"]').addClass("selected"));break;default:e.val(c)}}),a("input:checkbox:checked,input:radio:checked").each(function(){a(this).attr("name")in e||(this.checked=!1)})},loadTemplate:function(b){return a.ajax({url:"/_js/template/"+b+".html",type:"GET",dataType:"html"})},init:function(b){var c=this;return c.form=b,c.hash=window.location.hash.substring(1),a.when(c.loadTemplate("search-results"),c.loadTemplate("search-result-grid"),c.loadTemplate("search-filter"),c.loadTemplate("search-result-list")).done(function(a,b,d,e){c.searchResultsTemplate=_.template(a[0]),c.searchResultGridTemplate=_.template(b[0]),c.searchFilterTemplate=_.template(d[0]),c.searchResultListTemplate=_.template(e[0])}),a(window).on("scroll",function(){"down"!==c.getScrollDirection(this).Y||c.disableScroll||c.disable||null!=c.ajaxReference||a(window).scrollTop()/(a(document).height()-a(window).height())>c.scrollTrigger&&(c.disableScroll=!0,c.execute(!1),c.disableScroll=!1)}),c},getScrollDirection:function(b){var f,g,c=this,d=a(b).scrollTop(),e=a(b).scrollLeft();return d>c.previousScrollY?g="down":d<c.previousScrollY&&(g="up"),e>c.previousScrollX?c.scrollDirectionX="right":e<c.previousScrollX&&(f="left"),c.previousScrollY=d,c.previousScrollX=e,{X:f,Y:g}}};a(document).ready(function(){a("body").hasClass("searchTemplate")&&c.init("#searchProducts").execute(!0)})}(jQuery),window.Wg=window.Wg||{},Wg.Stockists=Wg.Stockists||function(){function a(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch, #stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}function f(a,c,e){$.when(g("stockist-map-pin")).done(function(f){d=f;for(var g=_.template(f),i=[],j=0;j<c.length;j++){var k=$(c[j]),l=k.find(".details"),m=k.data(),n=l.data(),o=new google.maps.LatLng(m.lat,m.lng),p=m.shop,q=m.stockistid,r=n.name,s=n.address1,t=n.address2,u=n.town,v=n.county,w=n.postcode,x=n.telephonenumber,y=n.email,z=n.url,A=n.othershops,B=[];null!=A&&(B=A.split(","));var C=g({stockistName:r,stockistAddress:_.reject([s,t,u,v,w],function(a){return!a}).join("<br />"),stockistTelephoneNumber:x,stockistEmail:y,stockistUrl:z,stockistBrands:B}),D=null!=p?"/_images/brands/"+p+"/map-icons/map-pin.png":"",E=new google.maps.Marker({icon:D,position:o,title:r,map:a,zIndex:9999-j,html:C,animation:google.maps.Animation.DROP,customInfo:q});e&&b.bounds.extend(E.position),i.push(E),b.markers[k.attr("id")]=E,google.maps.event.addListener(E,"click",function(){h("result_"+this.customInfo,!0)})}e&&a.fitBounds(b.bounds)})}function g(a){return null!=d?d:$.ajax({url:"/_js/template/"+a+".html",type:"GET",dataType:"html"})}function h(a,c){var d=b.markers[a];if(d){var e=b.map;b.infoWindow||(b.infoWindow=new google.maps.InfoWindow);var f=b.infoWindow;f.close(),f.setContent(d.html),f.open(e,d),e.panTo(d.position);var g=$("#whereToBuyResults ul.results > li").first().position().top;$("#whereToBuyResults").stop(!0,!0).animate({scrollTop:$("#"+a).position().top-g},500)}}function i(a){var c=$("#whereToBuyResults").find("ul.results"),d="1"!=c.data("region"),e=c.children("li");if(e.length>0){a=a||e.first().attr("id");var g=$("#"+a);b.baseLatLng=new google.maps.LatLng(g.data("lat"),g.data("lng")),b.bounds=new google.maps.LatLngBounds,b.mapOptions={zoom:14,center:b.baseLatLng,mapTypeId:google.maps.MapTypeId.ROADMAP},b.map=new google.maps.Map(document.getElementById("map_canvas"),b.mapOptions),google.maps.event.addListenerOnce(b.map,"tilesloaded",function(){f(b.map,e,d)})}}function j(){return $("#StockistSearchIsVisible").val("false"),$("#collections, #container").show(),$("#map_content").fadeOut(function(){$(".leftMenu").animate({left:"-420",avoidCSSTransitions:!0},500,function(){b.map=null,b.bounds=null,b.infowindow=null,b.mapOptions={},b.markers={},b.baseLatLng=null,b.markerClusterer=null,a(),$("#StockistSearchIsVisible").val("true"),$("#map_content").html('<a class="closeMaps button">Close Maps</a><div id="map_canvas"></div>'),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").empty().css("overflow","auto"),$(".leftMenu").removeClass("leftMenu").css({height:"auto",top:"auto",left:"0px",bottom:"-100px"}).animate({left:"0",bottom:"35",avoidCSSTransitions:!0})})}),!1}function a(){$(".error.alertInfo").hide();var a=$("#SiteKey").val();switch($("#stockistSearch .large-8 ul li").hide(),$("#whereToBuySearch, #stockistSearch").find(".stockistSearchTerms .field").hide(),$("#Region").val()){case"1":console.log("yes"),$("#Postcode").parent(".fp-tableCell").parent(".fp-section").show(),$("#Postcode").parent().show(),$("#Postcode").attr("placeholder","Enter Postcode, Town or City"),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasHomeAccessories").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"2":$("#EuropeanCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show(),$("#HasRugs").parents("li").show(),"Zoffany"==a?($("#HasPaint").parents("li").show(),$("#HasFurniture").parents("li").show()):"Sanderson"==a&&$("#HasPaint").parents("li").show();break;case"3":$("#StateId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show();break;case"4":$("#WorldCountryId").parent().show(),$("#HasWallpaper").parents("li").show(),$("#HasFabric").parents("li").show(),$("#HasTrimmings").parents("li").show()}}if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))var b={hideStockists:function(){},init:function(){$(document).ready(function(){$(".toggleStockist").click(function(a){a.preventDefault(),window.location=this.href}),a(),$("body").on("change","#Region",function(b){a()})})}};else var c,d=null,b={map:null,bounds:null,infowindow:null,mapOptions:{},markers:{},markerClusterer:null,baseLatLng:null,GoogleMapsLoaded:function(){Redant.util.loadScript("/_js/vendor/markerclusterer_compiled.js",function(){setTimeout(function(){for(var a=$(".leftMenu .results > li"),b=0,c=0;c<a.length;c++)b+=$(a[c]).outerHeight();$(".leftMenu .scroller").height(Math.ceil(b)),$("#map_content").fadeIn(function(){i()}),$("#collections, #container").hide(),$("#whereToBuyResults").niceScroll({})},500)})},hideStockists:function(){j()},setAjaxLocation:function(){var a="",b="",c="",d="";if("1"==$("#Region").val()&&""==$("#Postcode").val());else{switch($("#Region option:selected").text(),$("#Region").val()){case"1":a=$("#Region option:selected").text()+" "+$("#Postcode").val();break;case"2":a=$("#EuropeanCountryId option:selected").text();break;case"3":a=$("#StateId option:selected").text()+"  United States of America";break;case"4":a=$("#WorldCountryId option:selected").text()}b=new google.maps.Geocoder,b.geocode({address:a},function(a,b){if(b==google.maps.GeocoderStatus.OK){c=a[0].geometry.location.A,d=a[0].geometry.location.F,$("#Latitude").val(c),$("#Longitude").val(d);var e=$("#whereToBuySearch .formControls");e.find(".button").hide();var f=Redant.util.ajaxLoaderForButton().css("display","inline-block");f.appendTo(e),$.ajax({type:"POST",url:"/actionuri/stockist/stockist/footer",data:$("#whereToBuySearch form").serialize(),success:function(a){$("#whereToBuy").replaceWith(a),$("#whereToBuy").addClass("leftMenu").css({top:"50%"}).show().animate({left:"0",avoidCSSTransitions:!0},500),Wg.Stockists.GoogleMapsLoaded()}}).always(function(){f.remove(),e.find(".button").show()})}})}},init:function(){$(document).ready(function(){$("body").on("submit","#whereToBuySearch form",function(a){return a.preventDefault(),$("#PostcodeError").hide(),"1"==$("#Region").val()&&""==$("#Postcode").val()?($("#PostcodeError").show(),!1):(Redant.util.loadScript("https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=Wg.Stockists.setAjaxLocation")&&Wg.Stockists.setAjaxLocation(),!1)}).on("click",".showOnMap",function(a){return a.preventDefault(),mapElemId=$(this).parents("li").attr("id"),h(mapElemId,!0),!1}).on("click",".closeMaps",function(a){return a.preventDefault(),j(),!1}).on("click",".toggleStockist",function(b){console.log("working"),b.preventDefault(),resetMenu();var d=$("#whereToBuy");return d.is(":visible")?($(this).removeClass("highlightedMenu"),j()):($("#StockistSearchIsVisible").val("true"),d.css({bottom:"-50px",display:"block",opacity:"1"}),$("#whereToBuyResults").getNiceScroll().remove(),$("#whereToBuyResults").css("overflow",""),a(),d.animate({bottom:"50%",left:"50%",avoidCSSTransitions:!0},500,function(){$("#whereToBuyResults .scroller").hasClass("iScollInit")&&(c=new IScroll("#whereToBuyResults .scroller",{eventPassthrough:!1,scrollX:!0,scrollY:!1,wheelHorizontal:!0}))})),!1}).on("click",".setDefaultStockist",function(a){a.preventDefault();var b=$(this);$.get(this.href,function(a){1==a.success&&($(".setDefaultStockist").removeClass("selected").removeAttr("disabled"),b.addClass("selected"),b.attr("disabled","disabled"))})}).on("change","#Region",function(b){a()})})}};return b}(),Wg.Stockists.init();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:void 0,function(a,b){function c(a){var b=!!a&&"length"in a&&a.length,c=fa.type(a);return"function"!==c&&!fa.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a,b,c){if(fa.isFunction(b))return fa.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fa.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(pa.test(b))return fa.filter(b,a,c);b=fa.filter(b,a)}return fa.grep(a,function(a){return _.call(b,a)>-1!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b={};return fa.each(a.match(va)||[],function(a,c){b[c]=!0}),b}function g(){X.removeEventListener("DOMContentLoaded",g),a.removeEventListener("load",g),fa.ready()}function h(){this.expando=fa.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ca,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:Ba.test(c)?fa.parseJSON(c):c)}catch(a){}Aa.set(a,b,c)}else c=void 0;return c}function j(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return fa.css(a,b,"")},i=h(),j=c&&c[3]||(fa.cssNumber[b]?"":"px"),k=(fa.cssNumber[b]||"px"!==j&&+i)&&Ea.exec(fa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do{f=f||".5",k/=f,fa.style(a,b,k+j)}while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function k(a,b){var c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&fa.nodeName(a,b)?fa.merge([a],c):c}function l(a,b){for(var c=0,d=a.length;c<d;c++)za.set(a[c],"globalEval",!b||za.get(b[c],"globalEval"))}function m(a,b,c,d,e){for(var f,g,h,i,j,m,n=b.createDocumentFragment(),o=[],p=0,q=a.length;p<q;p++)if((f=a[p])||0===f)if("object"===fa.type(f))fa.merge(o,f.nodeType?[f]:f);else if(La.test(f)){for(g=g||n.appendChild(b.createElement("div")),h=(Ia.exec(f)||["",""])[1].toLowerCase(),i=Ka[h]||Ka._default,g.innerHTML=i[1]+fa.htmlPrefilter(f)+i[2],m=i[0];m--;)g=g.lastChild;fa.merge(o,g.childNodes),g=n.firstChild,g.textContent=""}else o.push(b.createTextNode(f));for(n.textContent="",p=0;f=o[p++];)if(d&&fa.inArray(f,d)>-1)e&&e.push(f);else if(j=fa.contains(f.ownerDocument,f),g=k(n.appendChild(f),"script"),j&&l(g),c)for(m=0;f=g[m++];)Ja.test(f.type||"")&&c.push(f);return n}function n(){return!0}function o(){return!1}function p(){try{return X.activeElement}catch(a){}}function q(a,b,c,d,e,f){var g,h;if("object"===(void 0===b?"undefined":_typeof(b))){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)q(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=o;else if(!e)return a;return 1===f&&(g=e,e=function(a){return fa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=fa.guid++)),a.each(function(){fa.event.add(this,b,e,d,c)})}function r(a,b){return fa.nodeName(a,"table")&&fa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function s(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function t(a){var b=Sa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function u(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(za.hasData(a)&&(f=za.access(a),g=za.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)fa.event.add(b,e,j[e][c])}Aa.hasData(a)&&(h=Aa.access(a),i=fa.extend({},h),Aa.set(b,i))}}function v(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ha.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function w(a,b,c,d){b=Z.apply([],b);var e,f,g,h,i,j,l=0,n=a.length,o=n-1,p=b[0],q=fa.isFunction(p);if(q||n>1&&"string"==typeof p&&!da.checkClone&&Ra.test(p))return a.each(function(e){var f=a.eq(e);q&&(b[0]=p.call(this,e,f.html())),w(f,b,c,d)});if(n&&(e=m(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(g=fa.map(k(e,"script"),s),h=g.length;l<n;l++)i=e,l!==o&&(i=fa.clone(i,!0,!0),h&&fa.merge(g,k(i,"script"))),c.call(a[l],i,l);if(h)for(j=g[g.length-1].ownerDocument,fa.map(g,t),l=0;l<h;l++)i=g[l],Ja.test(i.type||"")&&!za.access(i,"globalEval")&&fa.contains(j,i)&&(i.src?fa._evalUrl&&fa._evalUrl(i.src):fa.globalEval(i.textContent.replace(Ta,"")))}return a}function x(a,b,c){for(var d,e=b?fa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||fa.cleanData(k(d)),d.parentNode&&(c&&fa.contains(d.ownerDocument,d)&&l(k(d,"script")),d.parentNode.removeChild(d));return a}function y(a,b){var c=fa(b.createElement(a)).appendTo(b.body),d=fa.css(c[0],"display");return c.detach(),d}function z(a){var b=X,c=Va[a];return c||(c=y(a,b),"none"!==c&&c||(Ua=(Ua||fa("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ua[0].contentDocument,b.write(),b.close(),c=y(a,b),Ua.detach()),Va[a]=c),c}function A(a,b,c){var d,e,f,g,h=a.style;return c=c||Ya(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||fa.contains(a.ownerDocument,a)||(g=fa.style(a,b)),c&&!da.pixelMarginRight()&&Xa.test(g)&&Wa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function B(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function C(a){if(a in db)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=cb.length;c--;)if((a=cb[c]+b)in db)return a}function D(a,b,c){var d=Ea.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=fa.css(a,c+Fa[f],!0,e)),d?("content"===c&&(g-=fa.css(a,"padding"+Fa[f],!0,e)),"margin"!==c&&(g-=fa.css(a,"border"+Fa[f]+"Width",!0,e))):(g+=fa.css(a,"padding"+Fa[f],!0,e),"padding"!==c&&(g+=fa.css(a,"border"+Fa[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ya(a),g="border-box"===fa.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=A(a,b,f),(e<0||null==e)&&(e=a.style[b]),Xa.test(e))return e;d=g&&(da.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=za.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ga(d)&&(f[g]=za.access(d,"olddisplay",z(d.nodeName)))):(e=Ga(d),"none"===c&&e||za.set(d,"olddisplay",e?c:fa.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function H(a,b,c,d,e){return new H.prototype.init(a,b,c,d,e)}function I(){return a.setTimeout(function(){eb=void 0}),eb=fa.now()}function J(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=Fa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function K(a,b,c){for(var d,e=(N.tweeners[b]||[]).concat(N.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function L(a,b,c){var d,e,f,g,h,i,j,l=this,m={},n=a.style,o=a.nodeType&&Ga(a),p=za.get(a,"fxshow");c.queue||(h=fa._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,fa.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=fa.css(a,"display"),"inline"===("none"===j?za.get(a,"olddisplay")||z(a.nodeName):j)&&"none"===fa.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],gb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||fa.style(a,d)}else j=void 0;if(fa.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=za.access(a,"fxshow",{}),f&&(p.hidden=!o),o?fa(a).show():l.done(function(){fa(a).hide()}),l.done(function(){var b;za.remove(a,"fxshow");for(b in m)fa.style(a,b,m[b])});for(d in m)g=K(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function M(a,b){var c,d,e,f,g;for(c in a)if(d=fa.camelCase(c),e=b[d],f=a[c],fa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=fa.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function N(a,b,c){var d,e,f=0,g=N.prefilters.length,h=fa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=eb||I(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:fa.extend({},b),opts:fa.extend(!0,{specialEasing:{},easing:fa.easing._default},c),originalProperties:b,originalOptions:c,startTime:eb||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(M(k,j.opts.specialEasing);f<g;f++)if(d=N.prefilters[f].call(j,a,k,j.opts))return fa.isFunction(d.stop)&&(fa._queueHooks(j.elem,j.opts.queue).stop=fa.proxy(d.stop,d)),d;return fa.map(k,K,j),fa.isFunction(j.opts.start)&&j.opts.start.call(a,j),fa.fx.timer(fa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a){return a.getAttribute&&a.getAttribute("class")||""}function P(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(va)||[];if(fa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Q(a,b,c,d){function e(h){var i;return f[h]=!0,fa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Ab;return e(b.dataTypes[0])||!f["*"]&&e("*")}function R(a,b){var c,d,e=fa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&fa.extend(!0,a,d),a}function S(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function T(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(a){return{state:"parsererror",error:g?a:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function U(a,b,c,d){var e;if(fa.isArray(b))fa.each(b,function(b,e){c||Eb.test(a)?d(a,e):U(a+"["+("object"===(void 0===e?"undefined":_typeof(e))&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==fa.type(b))d(a,b);else for(e in b)U(a+"["+e+"]",b[e],c,d)}function V(a){return fa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var W=[],X=a.document,Y=W.slice,Z=W.concat,$=W.push,_=W.indexOf,aa={},ba=aa.toString,ca=aa.hasOwnProperty,da={},ea="2.2.4",fa=function a(b,c){return new a.fn.init(b,c)},ga=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ha=/^-ms-/,ia=/-([\da-z])/gi,ja=function(a,b){return b.toUpperCase()};fa.fn=fa.prototype={jquery:ea,constructor:fa,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:Y.call(this)},pushStack:function(a){var b=fa.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return fa.each(this,a)},map:function(a){return this.pushStack(fa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:$,sort:W.sort,splice:W.splice},fa.extend=fa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"===(void 0===g?"undefined":_typeof(g))||fa.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(fa.isPlainObject(d)||(e=fa.isArray(d)))?(e?(e=!1,f=c&&fa.isArray(c)?c:[]):f=c&&fa.isPlainObject(c)?c:{},g[b]=fa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},fa.extend({expando:"jQuery"+(ea+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===fa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!fa.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==fa.type(a)||a.nodeType||fa.isWindow(a))return!1;if(a.constructor&&!ca.call(a,"constructor")&&!ca.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||ca.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===(void 0===a?"undefined":_typeof(a))||"function"==typeof a?aa[ba.call(a)]||"object":void 0===a?"undefined":_typeof(a)},globalEval:function(a){var b,c=eval;(a=fa.trim(a))&&(1===a.indexOf("use strict")?(b=X.createElement("script"),b.text=a,X.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ha,"ms-").replace(ia,ja)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var d,e=0;if(c(a))for(d=a.length;e<d&&!1!==b.call(a[e],e,a[e]);e++);else for(e in a)if(!1===b.call(a[e],e,a[e]))break;return a},trim:function(a){return null==a?"":(a+"").replace(ga,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?fa.merge(d,"string"==typeof a?[a]:a):$.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:_.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var e=[],f=0,g=a.length,h=!c;f<g;f++)!b(a[f],f)!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f,g=0,h=[];if(c(a))for(e=a.length;g<e;g++)null!=(f=b(a[g],g,d))&&h.push(f);else for(g in a)null!=(f=b(a[g],g,d))&&h.push(f);return Z.apply([],h)},guid:1,proxy:function(b,c){var d,e,a;if("string"==typeof c&&(d=b[c],c=b,b=d),fa.isFunction(b))return e=Y.call(arguments,2),a=function(){return b.apply(c||this,e.concat(Y.call(arguments)))},a.guid=b.guid=b.guid||fa.guid++,a},now:Date.now,support:da}),"function"==typeof Symbol&&(fa.fn[Symbol.iterator]=W[Symbol.iterator]),fa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()});var ka=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o=b&&b.ownerDocument,p=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==p&&9!==p&&11!==p)return c;if(!d&&((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,I)){if(11!==p&&(j=ra.exec(a)))if(e=j[1]){if(9===p){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(o&&(g=o.getElementById(e))&&M(b,g)&&g.id===e)return c.push(g),c}else{if(j[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=j[3])&&v.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(v.qsa&&!T[a+" "]&&(!J||!J.test(a))){if(1!==p)o=b,n=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(ta,"\\$&"):b.setAttribute("id",h=N),l=z(a),f=l.length,i=ma.test(h)?"#"+h:"[id='"+h+"']";f--;)l[f]=i+" "+m(l[f]);n=l.join(","),o=sa.test(a)&&k(b.parentNode)||b}if(n)try{return $.apply(c,o.querySelectorAll(n)),c}catch(a){}finally{h===N&&b.removeAttribute("id")}}}return B(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(a){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&void 0!==a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(j=b[N]||(b[N]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===P&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g===G||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===G||(F(k),h=!I);m=a[l++];)if(m(k,g||G,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=/'|\\/g,ua=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),va=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},wa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(a){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=G.documentElement,I=!y(G),(c=G.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",wa,!1):c.attachEvent&&c.attachEvent("onunload",wa)),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(G.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=qa.test(G.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!G.getElementsByName||!G.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if(void 0!==b.getElementById&&I){var c=b.getElementById(a);return c?[c]:[]}},w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=qa.test(G.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=G.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=qa.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",fa)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=qa.test(H.compareDocumentPosition),M=b||qa.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c||(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===G||a.ownerDocument===O&&M(O,a)?-1:b===G||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===G?-1:b===G?1:e?-1:f?1:D?aa(D,a)-aa(D,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===O?-1:i[d]===O?1:0},G):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(ka,"='$1']"),v.matchesSelector&&I&&!T[c+" "]&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(a){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[3]||a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ua,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[P,n,t];break}}else if(s&&(m=b,l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===P&&j[1],t=n),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[N]||(m[N]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[P,t]),m!==b)););return(t-=e)===d||t%d==0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ha,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ua,va),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do{if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ia.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in w.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(!(b=(w.find.ID(g.matches[0].replace(ua,va),b)||[])[0]))return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(ua,va),sa.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),!(a=d.length&&m(f)))return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,!b||sa.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);fa.find=ka,fa.expr=ka.selectors,fa.expr[":"]=fa.expr.pseudos,fa.uniqueSort=fa.unique=ka.uniqueSort,fa.text=ka.getText,fa.isXMLDoc=ka.isXML,fa.contains=ka.contains;var la=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&fa(a).is(c))break;d.push(a)}return d},ma=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},na=fa.expr.match.needsContext,oa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,pa=/^.[^:#\[\.,]*$/;fa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?fa.find.matchesSelector(d,a)?[d]:[]:fa.find.matches(a,fa.grep(b,function(a){return 1===a.nodeType}))},fa.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(fa(a).filter(function(){for(b=0;b<c;b++)if(fa.contains(e[b],this))return!0}));for(b=0;b<c;b++)fa.find(a,e[b],d);return d=this.pushStack(c>1?fa.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&na.test(a)?fa(a):a||[],!1).length}});var qa,ra=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(fa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||qa,"string"==typeof a){if(!(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ra.exec(a))||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof fa?b[0]:b,fa.merge(this,fa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:X,!0)),oa.test(d[1])&&fa.isPlainObject(b))for(d in b)fa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=X.getElementById(d[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=X,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):fa.isFunction(a)?void 0!==c.ready?c.ready(a):a(fa):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),fa.makeArray(a,this))}).prototype=fa.fn,qa=fa(X);var ta=/^(?:parents|prev(?:Until|All))/,ua={children:!0,contents:!0,next:!0,prev:!0};fa.fn.extend({has:function(a){var b=fa(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(fa.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=na.test(a)||"string"!=typeof a?fa(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&fa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?fa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?_.call(fa(a),this[0]):_.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(fa.uniqueSort(fa.merge(this.get(),fa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),fa.each({parent:function(b){var a=b.parentNode;return a&&11!==a.nodeType?a:null},parents:function(a){return la(a,"parentNode")},parentsUntil:function(a,b,c){return la(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return la(a,"nextSibling")},prevAll:function(a){return la(a,"previousSibling")},nextUntil:function(a,b,c){return la(a,"nextSibling",c)},prevUntil:function(a,b,c){return la(a,"previousSibling",c)},siblings:function(a){return ma((a.parentNode||{}).firstChild,a)},children:function(a){return ma(a.firstChild)},contents:function(a){return a.contentDocument||fa.merge([],a.childNodes)}},function(a,b){fa.fn[a]=function(c,d){var e=fa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=fa.filter(d,e)),this.length>1&&(ua[a]||fa.uniqueSort(e),ta.test(a)&&e.reverse()),this.pushStack(e)}});var va=/\S+/g;fa.Callbacks=function(a){a="string"==typeof a?f(a):fa.extend({},a);var b,c,d,e,g=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<g.length;)!1===g[i].apply(c[0],c[1])&&a.stopOnFalse&&(i=g.length,c=!1);a.memory||(c=!1),b=!1,e&&(g=c?[]:"")},k={add:function(){return g&&(c&&!b&&(i=g.length-1,h.push(c)),function b(c){fa.each(c,function(c,d){fa.isFunction(d)?a.unique&&k.has(d)||g.push(d):d&&d.length&&"string"!==fa.type(d)&&b(d)})}(arguments),c&&!b&&j()),this},remove:function(){return fa.each(arguments,function(a,b){for(var c;(c=fa.inArray(b,g,c))>-1;)g.splice(c,1),c<=i&&i--}),this},has:function(a){return a?fa.inArray(a,g)>-1:g.length>0},empty:function(){return g&&(g=[]),this},disable:function(){return e=h=[],g=c="",this},disabled:function(){return!g},lock:function(){return e=h=[],c||(g=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},fa.extend({Deferred:function(a){var b=[["resolve","done",fa.Callbacks("once memory"),"resolved"],["reject","fail",fa.Callbacks("once memory"),"rejected"],["notify","progress",fa.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return fa.Deferred(function(c){fa.each(b,function(b,f){var g=fa.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&fa.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?fa.extend(a,d):d}},e={};return d.pipe=d.then,fa.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=Y.call(arguments),g=f.length,h=1!==g||a&&fa.isFunction(a.promise)?g:0,i=1===h?a:fa.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?Y.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&fa.isFunction(f[e].promise)?f[e].promise().progress(j(e,c,b)).done(j(e,d,f)).fail(i.reject):--h;return h||i.resolveWith(d,f),i.promise()}});var wa;fa.fn.ready=function(a){return fa.ready.promise().done(a),this},fa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?fa.readyWait++:fa.ready(!0)},ready:function(a){(!0===a?--fa.readyWait:fa.isReady)||(fa.isReady=!0,!0!==a&&--fa.readyWait>0||(wa.resolveWith(X,[fa]),fa.fn.triggerHandler&&(fa(X).triggerHandler("ready"),fa(X).off("ready"))))}}),fa.ready.promise=function(b){return wa||(wa=fa.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?a.setTimeout(fa.ready):(X.addEventListener("DOMContentLoaded",g),a.addEventListener("load",g))),wa.promise(b)},fa.ready.promise();var xa=function a(b,c,d,e,f,g,h){var i=0,j=b.length,k=null==d;if("object"===fa.type(d)){f=!0;for(i in d)a(b,c,i,d[i],!0,g,h)}else if(void 0!==e&&(f=!0,fa.isFunction(e)||(h=!0),k&&(h?(c.call(b,e),c=null):(k=c,c=function(a,b,c){return k.call(fa(a),c)})),c))for(;i<j;i++)c(b[i],d,h?e:e.call(b[i],i,c(b[i],d)));return f?b:k?c.call(b):j?c(b[0],d):g},ya=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};h.uid=1,h.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!ya(a))return{};var b=a[this.expando];return b||(b={},ya(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,fa.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{fa.isArray(b)?d=b.concat(b.map(fa.camelCase)):(e=fa.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(va)||[])),c=d.length;for(;c--;)delete f[d[c]]}(void 0===b||fa.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!fa.isEmptyObject(b)}};var za=new h,Aa=new h,Ba=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ca=/[A-Z]/g;fa.extend({hasData:function(a){return Aa.hasData(a)||za.hasData(a)},data:function(a,b,c){return Aa.access(a,b,c)},removeData:function(a,b){Aa.remove(a,b)},_data:function(a,b,c){return za.access(a,b,c)},_removeData:function(a,b){za.remove(a,b)}}),fa.fn.extend({data:function(b,c){var d,e,a,f=this[0],g=f&&f.attributes;if(void 0===b){if(this.length&&(a=Aa.get(f),1===f.nodeType&&!za.get(f,"hasDataAttrs"))){for(d=g.length;d--;)g[d]&&(e=g[d].name,0===e.indexOf("data-")&&(e=fa.camelCase(e.slice(5)),i(f,e,a[e])));za.set(f,"hasDataAttrs",!0)}return a}return"object"===(void 0===b?"undefined":_typeof(b))?this.each(function(){Aa.set(this,b)}):xa(this,function(a){var c,d;if(f&&void 0===a){if(void 0!==(c=Aa.get(f,b)||Aa.get(f,b.replace(Ca,"-$&").toLowerCase())))return c;if(d=fa.camelCase(b),void 0!==(c=Aa.get(f,d)))return c;if(void 0!==(c=i(f,d,void 0)))return c}else d=fa.camelCase(b),this.each(function(){var c=Aa.get(this,d);Aa.set(this,d,a),b.indexOf("-")>-1&&void 0!==c&&Aa.set(this,b,a)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Aa.remove(this,a)})}}),fa.extend({queue:function(b,c,d){var a;if(b)return c=(c||"fx")+"queue",a=za.get(b,c),d&&(!a||fa.isArray(d)?a=za.access(b,c,fa.makeArray(d)):a.push(d)),a||[]},dequeue:function(a,b){b=b||"fx";var c=fa.queue(a,b),d=c.length,e=c.shift(),f=fa._queueHooks(a,b),g=function(){fa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return za.get(a,c)||za.access(a,c,{empty:fa.Callbacks("once memory").add(function(){za.remove(a,[b+"queue",c])})})}}),fa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?fa.queue(this[0],a):void 0===b?this:this.each(function(){var c=fa.queue(this,a,b);fa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&fa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=fa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=za.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Da=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ea=new RegExp("^(?:([+-])=|)("+Da+")([a-z%]*)$","i"),Fa=["Top","Right","Bottom","Left"],Ga=function(a,b){return a=b||a,"none"===fa.css(a,"display")||!fa.contains(a.ownerDocument,a)},Ha=/^(?:checkbox|radio)$/i,Ia=/<([\w:-]+)/,Ja=/^$|\/(?:java|ecma)script/i,Ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ka.optgroup=Ka.option,Ka.tbody=Ka.tfoot=Ka.colgroup=Ka.caption=Ka.thead,Ka.th=Ka.td;var La=/<|&#?\w+;/;!function(){var a=X.createDocumentFragment(),b=a.appendChild(X.createElement("div")),c=X.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),da.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",da.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ma=/^key/,Na=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Oa=/^([^.]*)(?:\.(.+)|)/;fa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=fa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==fa&&fa.event.triggered!==b.type?fa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(va)||[""],j=b.length;j--;)h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=fa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=fa.event.special[n]||{},k=fa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&fa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),fa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=za.hasData(a)&&za.get(a);if(q&&(i=q.events)){for(b=(b||"").match(va)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=fa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||fa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)fa.event.remove(a,n+b[j],c,d,!0);fa.isEmptyObject(i)&&za.remove(a,"handle events")}},dispatch:function(a){a=fa.event.fix(a);var b,c,d,e,f,g=[],h=Y.call(arguments),i=(za.get(this,"events")||{})[a.type]||[],j=fa.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||!1!==j.preDispatch.call(this,a)){for(g=fa.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(f.namespace)||(a.handleObj=f,a.data=f.data,void 0!==(d=((fa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h))&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?fa(e,this).index(i)>-1:fa.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||X,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[fa.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new fa.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=X),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&fa.nodeName(this,"input"))return this.click(),!1},_default:function(a){return fa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},fa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},fa.Event=function(a,b){return this instanceof fa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?n:o):this.type=a,b&&fa.extend(this,b),this.timeStamp=a&&a.timeStamp||fa.now(),void(this[fa.expando]=!0)):new fa.Event(a,b)},fa.Event.prototype={constructor:fa.Event,isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=n,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=n,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=n,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},fa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){fa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||fa.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),fa.fn.extend({on:function(a,b,c,d){return q(this,a,b,c,d)},one:function(a,b,c,d){return q(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,fa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===(void 0===a?"undefined":_typeof(a))){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=o),this.each(function(){fa.event.remove(this,a,c,b)})}});var Pa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Qa=/<script|<style|<link/i,Ra=/checked\s*(?:[^=]|=\s*.checked.)/i,Sa=/^true\/(.*)/,Ta=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;fa.extend({htmlPrefilter:function(a){return a.replace(Pa,"<$1></$2>")},clone:function(b,c,d){var e,f,g,h,a=b.cloneNode(!0),i=fa.contains(b.ownerDocument,b);if(!(da.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||fa.isXMLDoc(b)))for(h=k(a),g=k(b),e=0,f=g.length;e<f;e++)v(g[e],h[e]);if(c)if(d)for(g=g||k(b),h=h||k(a),e=0,f=g.length;e<f;e++)u(g[e],h[e]);else u(b,a);return h=k(a,"script"),h.length>0&&l(h,!i&&k(b,"script")),a},cleanData:function(a){for(var b,c,d,e=fa.event.special,f=0;void 0!==(c=a[f]);f++)if(ya(c)){if(b=c[za.expando]){if(b.events)for(d in b.events)e[d]?fa.event.remove(c,d):fa.removeEvent(c,d,b.handle);c[za.expando]=void 0}c[Aa.expando]&&(c[Aa.expando]=void 0)}}}),fa.fn.extend({domManip:w,detach:function(a){return x(this,a,!0)},remove:function(a){return x(this,a)},text:function(a){return xa(this,function(a){return void 0===a?fa.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){r(this,a).appendChild(a)}})},prepend:function(){return w(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return w(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(fa.cleanData(k(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return fa.clone(this,a,b)})},html:function(a){return xa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Qa.test(a)&&!Ka[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=fa.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(fa.cleanData(k(b,!1)),b.innerHTML=a);b=0}catch(a){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return w(this,arguments,function(b){var c=this.parentNode;fa.inArray(this,a)<0&&(fa.cleanData(k(this)),c&&c.replaceChild(b,this))},a)}}),fa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fa.fn[a]=function(a){for(var c,d=[],e=fa(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),fa(e[g])[b](c),$.apply(d,c.get());return this.pushStack(d)}});var Ua,Va={HTML:"block",BODY:"block"},Wa=/^margin/,Xa=new RegExp("^("+Da+")(?!px)[a-z%]+$","i"),Ya=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Za=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},$a=X.documentElement;!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",$a.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,$a.removeChild(g)}var c,d,e,f,g=X.createElement("div"),h=X.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",da.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),fa.extend(da,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},pixelMarginRight:function(){return null==d&&b(),e},reliableMarginLeft:function(){return null==d&&b(),f},reliableMarginRight:function(){var b,c=h.appendChild(X.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",$a.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),$a.removeChild(g),h.removeChild(c),b}}))}();var _a=/^(none|table(?!-c[ea]).+)/,ab={position:"absolute",visibility:"hidden",display:"block"},bb={letterSpacing:"0",fontWeight:"400"},cb=["Webkit","O","Moz","ms"],db=X.createElement("div").style;fa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=A(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(b,c,d,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var f,g,h,i=fa.camelCase(c),a=b.style;return c=fa.cssProps[i]||(fa.cssProps[i]=C(i)||i),h=fa.cssHooks[c]||fa.cssHooks[i],void 0===d?h&&"get"in h&&void 0!==(f=h.get(b,!1,e))?f:a[c]:(g=void 0===d?"undefined":_typeof(d),"string"===g&&(f=Ea.exec(d))&&f[1]&&(d=j(b,c,f),g="number"),void(null!=d&&d===d&&("number"===g&&(d+=f&&f[3]||(fa.cssNumber[i]?"":"px")),da.clearCloneStyle||""!==d||0!==c.indexOf("background")||(a[c]="inherit"),h&&"set"in h&&void 0===(d=h.set(b,d,e))||(a[c]=d))))}},css:function(a,b,c,d){var e,f,g,h=fa.camelCase(b);return b=fa.cssProps[h]||(fa.cssProps[h]=C(h)||h),g=fa.cssHooks[b]||fa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=A(a,b,d)),"normal"===e&&b in bb&&(e=bb[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),fa.each(["height","width"],function(a,b){fa.cssHooks[b]={get:function(a,c,d){if(c)return _a.test(fa.css(a,"display"))&&0===a.offsetWidth?Za(a,ab,function(){return F(a,b,d)}):F(a,b,d)},set:function(a,c,d){var e,f=d&&Ya(a),g=d&&E(a,b,d,"border-box"===fa.css(a,"boxSizing",!1,f),f);return g&&(e=Ea.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=fa.css(a,b)),D(a,c,g)}}}),fa.cssHooks.marginLeft=B(da.reliableMarginLeft,function(a,b){if(b)return(parseFloat(A(a,"marginLeft"))||a.getBoundingClientRect().left-Za(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),fa.cssHooks.marginRight=B(da.reliableMarginRight,function(a,b){if(b)return Za(a,{display:"inline-block"},A,[a,"marginRight"])}),fa.each({margin:"",padding:"",border:"Width"},function(a,b){fa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+Fa[d]+b]=f[d]||f[d-2]||f[0];return e}},Wa.test(a)||(fa.cssHooks[a+b].set=D)}),fa.fn.extend({css:function(a,b){return xa(this,function(a,b,c){var d,e,f={},g=0;if(fa.isArray(b)){for(d=Ya(a),e=b.length;g<e;g++)f[b[g]]=fa.css(a,b[g],!1,d);return f}return void 0!==c?fa.style(a,b,c):fa.css(a,b)},a,b,arguments.length>1)},show:function(){return G(this,!0)},hide:function(){return G(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ga(this)?fa(this).show():fa(this).hide()})}}),fa.Tween=H,H.prototype={constructor:H,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||fa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(fa.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];return this.options.duration?this.pos=b=fa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=fa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){fa.fx.step[a.prop]?fa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[fa.cssProps[a.prop]]&&!fa.cssHooks[a.prop]?a.elem[a.prop]=a.now:fa.style(a.elem,a.prop,a.now+a.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},fa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},fa.fx=H.prototype.init,fa.fx.step={};var eb,fb,gb=/^(?:toggle|show|hide)$/,hb=/queueHooks$/;fa.Animation=fa.extend(N,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return j(c.elem,a,Ea.exec(b),c),c}]},tweener:function(a,b){fa.isFunction(a)?(b=a,a=["*"]):a=a.match(va);for(var c,d=0,e=a.length;d<e;d++)c=a[d],N.tweeners[c]=N.tweeners[c]||[],N.tweeners[c].unshift(b)},prefilters:[L],prefilter:function(a,b){b?N.prefilters.unshift(a):N.prefilters.push(a)}}),fa.speed=function(a,b,c){var d=a&&"object"===(void 0===a?"undefined":_typeof(a))?fa.extend({},a):{complete:c||!c&&b||fa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fa.isFunction(b)&&b};return d.duration=fa.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in fa.fx.speeds?fa.fx.speeds[d.duration]:fa.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){fa.isFunction(d.old)&&d.old.call(this),d.queue&&fa.dequeue(this,d.queue)},d},fa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ga).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fa.isEmptyObject(a),f=fa.speed(b,c,d),g=function(){var b=N(this,fa.extend({},a),f);(e||za.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=fa.timers,g=za.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&hb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||fa.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=za.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fa.timers,g=d?d.length:0;for(c.finish=!0,fa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),fa.each(["toggle","show","hide"],function(a,b){var c=fa.fn[b];fa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(J(b,!0),a,d,e)}}),fa.each({slideDown:J("show"),slideUp:J("hide"),slideToggle:J("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){fa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),fa.timers=[],fa.fx.tick=function(){var a,b=0,c=fa.timers;for(eb=fa.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||fa.fx.stop(),eb=void 0},fa.fx.timer=function(a){fa.timers.push(a),a()?fa.fx.start():fa.timers.pop()},fa.fx.interval=13,fa.fx.start=function(){fb||(fb=a.setInterval(fa.fx.tick,fa.fx.interval))},fa.fx.stop=function(){a.clearInterval(fb),fb=null},fa.fx.speeds={slow:600,fast:200,_default:400},fa.fn.delay=function(b,c){return b=fa.fx?fa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=X.createElement("input"),b=X.createElement("select"),c=b.appendChild(X.createElement("option"));a.type="checkbox",da.checkOn=""!==a.value,da.optSelected=c.selected,b.disabled=!0,da.optDisabled=!c.disabled,a=X.createElement("input"),a.value="t",a.type="radio",da.radioValue="t"===a.value}();var ib,jb=fa.expr.attrHandle;fa.fn.extend({attr:function(a,b){return xa(this,fa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fa.removeAttr(this,a)})}}),fa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?fa.prop(a,b,c):(1===f&&fa.isXMLDoc(a)||(b=b.toLowerCase(),e=fa.attrHooks[b]||(fa.expr.match.bool.test(b)?ib:void 0)),void 0!==c?null===c?void fa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=fa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!da.radioValue&&"radio"===b&&fa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(va);if(f&&1===a.nodeType)for(;c=f[e++];)d=fa.propFix[c]||c,fa.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ib={set:function(a,b,c){return!1===b?fa.removeAttr(a,c):a.setAttribute(c,c),c}},fa.each(fa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||fa.find.attr;jb[b]=function(a,b,d){var e,f;return d||(f=jb[b],jb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,jb[b]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;fa.fn.extend({prop:function(a,b){return xa(this,fa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fa.propFix[a]||a]})}}),fa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&fa.isXMLDoc(a)||(b=fa.propFix[b]||b,e=fa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=fa.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),da.optSelected||(fa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),fa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fa.propFix[this.toLowerCase()]=this});var mb=/[\t\r\n\f]/g;fa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).addClass(a.call(this,b,O(this)))});if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(fa.isFunction(a))return this.each(function(b){fa(this).removeClass(a.call(this,b,O(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(va)||[];c=this[i++];)if(e=O(c),d=1===c.nodeType&&(" "+e+" ").replace(mb," ")){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=fa.trim(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=void 0===a?"undefined":_typeof(a);return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):fa.isFunction(a)?this.each(function(c){fa(this).toggleClass(a.call(this,c,O(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=fa(this),f=a.match(va)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||(b=O(this),b&&za.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":za.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+O(c)+" ").replace(mb," ").indexOf(b)>-1)return!0;return!1}});var nb=/\r/g,ob=/[\x20\t\r\n\f]+/g;fa.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=fa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,fa(this).val()):a,null==e?e="":"number"==typeof e?e+="":fa.isArray(e)&&(e=fa.map(e,function(a){return null==a?"":a+""})),(b=fa.valHooks[this.type]||fa.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=fa.valHooks[e.type]||fa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(nb,""):null==c?"":c)):void 0}}),fa.extend({valHooks:{option:{get:function(a){var b=fa.find.attr(a,"value");return null!=b?b:fa.trim(fa.text(a)).replace(ob," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(da.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!fa.nodeName(c.parentNode,"optgroup"))){if(b=fa(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=fa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=fa.inArray(fa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),fa.each(["radio","checkbox"],function(){fa.valHooks[this]={set:function(a,b){if(fa.isArray(b))return a.checked=fa.inArray(fa(a).val(),b)>-1}},da.checkOn||(fa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;fa.extend(fa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||X],n=ca.call(b,"type")?b.type:b,o=ca.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||X,3!==d.nodeType&&8!==d.nodeType&&!pb.test(n+fa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[fa.expando]?b:new fa.Event(n,"object"===(void 0===b?"undefined":_typeof(b))&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:fa.makeArray(c,[b]),l=fa.event.special[n]||{},e||!l.trigger||!1!==l.trigger.apply(d,c))){if(!e&&!l.noBubble&&!fa.isWindow(d)){for(i=l.delegateType||n,pb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||X)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(za.get(g,"events")||{})[b.type]&&za.get(g,"handle"),k&&k.apply(g,c),(k=j&&g[j])&&k.apply&&ya(g)&&(b.result=k.apply(g,c),!1===b.result&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&!1!==l._default.apply(m.pop(),c)||!ya(d)||j&&fa.isFunction(d[n])&&!fa.isWindow(d)&&(h=d[j],h&&(d[j]=null),fa.event.triggered=n,d[n](),fa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=fa.extend(new fa.Event,c,{type:a,isSimulated:!0});fa.event.trigger(d,null,b)}}),fa.fn.extend({trigger:function(a,b){return this.each(function(){fa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return fa.event.trigger(a,b,c,!0)}}),fa.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),fa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),da.focusin="onfocusin"in a,da.focusin||fa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){fa.event.simulate(b,a.target,fa.event.fix(a))};fa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=za.access(d,b);e||d.addEventListener(a,c,!0),za.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=za.access(d,b)-1;e?za.access(d,b,e):(d.removeEventListener(a,c,!0),za.remove(d,b))}}});var qb=a.location,rb=fa.now(),sb=/\?/;fa.parseJSON=function(a){return JSON.parse(a+"")},fa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(a){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||fa.error("Invalid XML: "+b),c};var tb=/#.*$/,ub=/([?&])_=[^&]*/,vb=/^(.*?):[ \t]*([^\r\n]*)$/gm,wb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xb=/^(?:GET|HEAD)$/,yb=/^\/\//,zb={},Ab={},Bb="*/".concat("*"),Cb=X.createElement("a");Cb.href=qb.href,fa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:wb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fa.parseJSON,"text xml":fa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?R(R(a,fa.ajaxSettings),b):R(fa.ajaxSettings,a)},ajaxPrefilter:P(zb),ajaxTransport:P(Ab),ajax:function(b,c){function d(b,c,d,h){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&a.clearTimeout(i),e=void 0,g=h||"",w.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(t=S(m,w,d)),t=T(m,t,w,j),j?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(fa.lastModified[f]=v),(v=w.getResponseHeader("etag"))&&(fa.etag[f]=v)),204===b||"HEAD"===m.type?x="nocontent":304===b?x="notmodified":(x=t.state,l=t.data,s=t.error,j=!s)):(s=x,!b&&x||(x="error",b<0&&(b=0))),w.status=b,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=void 0,k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--fa.active||fa.event.trigger("ajaxStop")))}"object"===(void 0===b?"undefined":_typeof(b))&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=fa.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fa(n):fa.event,p=fa.Deferred(),q=fa.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!h)for(h={};b=vb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return e&&e.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((b||m.url||qb.href)+"").replace(tb,"").replace(yb,qb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=fa.trim(m.dataType||"*").toLowerCase().match(va)||[""],null==m.crossDomain){j=X.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=Cb.protocol+"//"+Cb.host!=j.protocol+"//"+j.host}catch(a){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fa.param(m.data,m.traditional)),Q(zb,m,c,w),2===u)return w;k=fa.event&&m.global,k&&0==fa.active++&&fa.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!xb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(sb.test(f)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=ub.test(f)?f.replace(ub,"$1_="+rb++):f+(sb.test(f)?"&":"?")+"_="+rb++)),m.ifModified&&(fa.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fa.lastModified[f]),fa.etag[f]&&w.setRequestHeader("If-None-Match",fa.etag[f])),(m.data&&m.hasContent&&!1!==m.contentType||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Bb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(!1===m.beforeSend.call(n,w,m)||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(e=Q(Ab,m,c,w)){if(w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),2===u)return w;m.async&&m.timeout>0&&(i=a.setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,e.send(s,d)}catch(a){if(!(u<2))throw a;d(-1,a)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return fa.get(a,b,c,"json")},getScript:function(a,b){return fa.get(a,void 0,b,"script")}}),fa.each(["get","post"],function(a,b){fa[b]=function(a,c,d,e){return fa.isFunction(c)&&(e=e||d,d=c,c=void 0),fa.ajax(fa.extend({url:a,type:b,dataType:e,data:c,success:d},fa.isPlainObject(a)&&a))}}),fa._evalUrl=function(a){return fa.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},fa.fn.extend({wrapAll:function(a){var b;return fa.isFunction(a)?this.each(function(b){fa(this).wrapAll(a.call(this,b))}):(this[0]&&(b=fa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return fa.isFunction(a)?this.each(function(b){fa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fa.isFunction(a);return this.each(function(c){fa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fa.nodeName(this,"body")||fa(this).replaceWith(this.childNodes)}).end()}}),fa.expr.filters.hidden=function(a){return!fa.expr.filters.visible(a)},fa.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Db=/%20/g,Eb=/\[\]$/,Fb=/\r?\n/g,Gb=/^(?:submit|button|image|reset|file)$/i,Hb=/^(?:input|select|textarea|keygen)/i;fa.param=function(a,b){var c,d=[],e=function(a,b){b=fa.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=fa.ajaxSettings&&fa.ajaxSettings.traditional),fa.isArray(a)||a.jquery&&!fa.isPlainObject(a))fa.each(a,function(){e(this.name,this.value)});else for(c in a)U(c,a[c],b,e);return d.join("&").replace(Db,"+")},fa.fn.extend({serialize:function(){return fa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fa.prop(this,"elements");return a?fa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fa(this).is(":disabled")&&Hb.test(this.nodeName)&&!Gb.test(a)&&(this.checked||!Ha.test(a))}).map(function(a,b){var c=fa(this).val();return null==c?null:fa.isArray(c)?fa.map(c,function(a){return{name:b.name,value:a.replace(Fb,"\r\n")}}):{name:b.name,value:c.replace(Fb,"\r\n")}}).get()}}),fa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(a){}};var Ib={0:200,1223:204},Jb=fa.ajaxSettings.xhr();da.cors=!!Jb&&"withCredentials"in Jb,da.ajax=Jb=!!Jb,fa.ajaxTransport(function(b){var c,d;if(da.cors||Jb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ib[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(a){if(c)throw a}},abort:function(){c&&c()}}}),fa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return fa.globalEval(a),a}}}),fa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),fa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),X.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Kb=[],Lb=/(=)\?(?=&|$)|\?\?/;fa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Kb.pop()||fa.expando+"_"+rb++;return this[a]=!0,a}}),fa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Lb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=fa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Lb,"$1"+e):!1!==b.jsonp&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||fa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?fa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Kb.push(e)),g&&fa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),fa.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||X;var d=oa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m([a],b,e),e&&e.length&&fa(e).remove(),fa.merge([],d.childNodes))};var Mb=fa.fn.load;fa.fn.load=function(a,b,c){if("string"!=typeof a&&Mb)return Mb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=fa.trim(a.slice(h)),a=a.slice(0,h)),fa.isFunction(b)?(c=b,b=void 0):b&&"object"===(void 0===b?"undefined":_typeof(b))&&(e="POST"),g.length>0&&fa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?fa("<div>").append(fa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},fa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fa.fn[b]=function(a){return this.on(b,a)}}),fa.expr.filters.animated=function(a){return fa.grep(fa.timers,function(b){return a===b.elem}).length},fa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fa.css(a,"position"),l=fa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=fa.css(a,"top"),i=fa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),fa.isFunction(b)&&(b=b.call(a,c,fa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},fa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){fa.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,fa.contains(b,d)?(e=d.getBoundingClientRect(),c=V(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===fa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),fa.nodeName(a[0],"html")||(d=a.offset()),d.top+=fa.css(a[0],"borderTopWidth",!0),d.left+=fa.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-fa.css(c,"marginTop",!0),left:b.left-d.left-fa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===fa.css(a,"position");)a=a.offsetParent;return a||$a})}}),fa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;fa.fn[a]=function(d){return xa(this,function(a,d,e){var f=V(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),fa.each(["top","left"],function(a,b){fa.cssHooks[b]=B(da.pixelPosition,function(a,c){if(c)return c=A(a,b),Xa.test(c)?fa(a).position()[b]+"px":c})}),fa.each({Height:"height",Width:"width"},function(a,b){fa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){fa.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return xa(this,function(b,c,d){var e;return fa.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?fa.css(b,c,g):fa.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),fa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),fa.fn.andSelf=fa.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return fa});var Nb=a.jQuery,Ob=a.$;return fa.noConflict=function(b){return a.$===fa&&(a.$=Ob),b&&a.jQuery===fa&&(a.jQuery=Nb),fa},b||(a.jQuery=a.$=fa),fa}),window.whatInput=function(){function a(){d(),e(event),p=!0,v=window.setTimeout(function(){p=!1},650)}function b(a){p||e(a)}function c(a){d(),e(a)}function d(){window.clearTimeout(v)}function e(a){var b=g(a),c=u[a.type];if("pointer"===c&&(c=i(a)),q!==c){var d=h(a),e=d.nodeName.toLowerCase(),k="input"===e?d.getAttribute("type"):null;!n.hasAttribute("data-whatinput-formtyping")&&q&&"keyboard"===c&&"tab"!==x[b]&&("textarea"===e||"select"===e||"input"===e&&r.indexOf(k)<0)||t.indexOf(b)>-1||f(c)}"keyboard"===c&&j(b)}function f(a){q=a,n.setAttribute("data-whatinput",q),-1===w.indexOf(q)&&w.push(q)}function g(a){return a.keyCode?a.keyCode:a.which}function h(a){return a.target||a.srcElement}function i(a){return"number"==typeof a.pointerType?y[a.pointerType]:"pen"===a.pointerType?"touch":a.pointerType}function j(a){-1===o.indexOf(x[a])&&x[a]&&o.push(x[a])}function k(a){var b=g(a),c=o.indexOf(x[b]);-1!==c&&o.splice(c,1)}function l(){n=document.body,window.PointerEvent?(n.addEventListener("pointerdown",b),n.addEventListener("pointermove",b)):window.MSPointerEvent?(n.addEventListener("MSPointerDown",b),n.addEventListener("MSPointerMove",b)):(n.addEventListener("mousedown",b),n.addEventListener("mousemove",b),"ontouchstart"in window&&n.addEventListener("touchstart",a)),n.addEventListener(s,b),n.addEventListener("keydown",c),n.addEventListener("keyup",c),document.addEventListener("keyup",k)}function m(){return s="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var n,o=[],p=!1,q=null,r=["button","checkbox","file","image","radio","reset","submit"],s=m(),t=[16,17,18,91,93],u={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};u[m()]="mouse";var v,w=[],x={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},y={2:"touch",3:"touch",4:"mouse"};return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?l():document.addEventListener("DOMContentLoaded",l)),{ask:function(){return q},keys:function(){return o},types:function(){return w},set:f}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){function b(a){if(void 0===Function.prototype.name){var b=/function\s([^(]{1,})\(/,c=b.exec(a.toString());return c&&c.length>1?c[1].trim():""}return void 0===a.prototype?a.constructor.name:a.prototype.constructor.name}function c(a){return!!/true/.test(a)||!/false/.test(a)&&(isNaN(1*a)?a:parseFloat(a))}function d(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var e="6.2.2",f={version:e,_plugins:{},_uuids:[],rtl:function(){return"rtl"===a("html").attr("dir")},plugin:function(a,c){var e=c||b(a),f=d(e);this._plugins[f]=this[e]=a},registerPlugin:function(a,c){var e=c?d(c):b(a.constructor).toLowerCase();a.uuid=this.GetYoDigits(6,e),a.$element.attr("data-"+e)||a.$element.attr("data-"+e,a.uuid),a.$element.data("zfPlugin")||a.$element.data("zfPlugin",a),a.$element.trigger("init.zf."+e),this._uuids.push(a.uuid)},unregisterPlugin:function(a){var c=d(b(a.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(a.uuid),1),a.$element.removeAttr("data-"+c).removeData("zfPlugin").trigger("destroyed.zf."+c);for(var e in a)a[e]=null},reInit:function(b){var c=b instanceof a;try{if(c)b.each(function(){a(this).data("zfPlugin")._init()});else{var e=void 0===b?"undefined":_typeof(b),f=this;({object:function(b){b.forEach(function(b){b=d(b),a("[data-"+b+"]").foundation("_init")})},string:function(){b=d(b),a("[data-"+b+"]").foundation("_init")},undefined:function(){this.object(Object.keys(f._plugins))}})[e](b)}}catch(a){console.error(a)}finally{return b}},GetYoDigits:function(a,b){return a=a||6,Math.round(Math.pow(36,a+1)-Math.random()*Math.pow(36,a)).toString(36).slice(1)+(b?"-"+b:"")},reflow:function(b,d){void 0===d?d=Object.keys(this._plugins):"string"==typeof d&&(d=[d]);var e=this;a.each(d,function(d,f){var g=e._plugins[f];a(b).find("[data-"+f+"]").addBack("[data-"+f+"]").each(function(){var b=a(this),d={};if(b.data("zfPlugin"))return void console.warn("Tried to initialize "+f+" on an element that already has a Foundation plugin.");b.attr("data-options")&&b.attr("data-options").split(";").forEach(function(a,b){var e=a.split(":").map(function(a){return a.trim()});e[0]&&(d[e[0]]=c(e[1]))});try{b.data("zfPlugin",new g(a(this),d))}catch(a){console.error(a)}finally{return}})})},getFnName:b,transitionend:function(a){var b,c={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},d=document.createElement("div");for(var e in c)void 0!==d.style[e]&&(b=c[e]);return b||(b=setTimeout(function(){a.triggerHandler("transitionend",[a])},1),"transitionend")}};f.util={throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;null===c&&(c=setTimeout(function(){a.apply(d,e),c=null},b))}}};var g=function(c){var d=void 0===c?"undefined":_typeof(c),e=a("meta.foundation-mq"),g=a(".no-js");if(e.length||a('<meta class="foundation-mq">').appendTo(document.head),g.length&&g.removeClass("no-js"),"undefined"===d)f.MediaQuery._init(),f.reflow(this);else{if("string"!==d)throw new TypeError("We're sorry, "+d+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var h=Array.prototype.slice.call(arguments,1),i=this.data("zfPlugin");if(void 0===i||void 0===i[c])throw new ReferenceError("We're sorry, '"+c+"' is not an available method for "+(i?b(i):"this element")+".");1===this.length?i[c].apply(i,h):this.each(function(b,d){i[c].apply(a(d).data("zfPlugin"),h)})}return this};window.Foundation=f,a.fn.foundation=g,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var a=["webkit","moz"],b=0;b<a.length&&!window.requestAnimationFrame;++b){var c=a[b];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var d=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(d.prototype=this.prototype),e.prototype=new d,e})}(jQuery),function(a){function b(a,b,d,e){var f,g,h,i,j=c(a);if(b){var k=c(b);g=j.offset.top+j.height<=k.height+k.offset.top,f=j.offset.top>=k.offset.top,h=j.offset.left>=k.offset.left,i=j.offset.left+j.width<=k.width+k.offset.left}else g=j.offset.top+j.height<=j.windowDims.height+j.windowDims.offset.top,f=j.offset.top>=j.windowDims.offset.top,h=j.offset.left>=j.windowDims.offset.left,i=j.offset.left+j.width<=j.windowDims.width;var l=[g,f,h,i];return d?h===i==1:e?f===g==1:-1===l.indexOf(!1)}function c(a,b){if((a=a.length?a[0]:a)===window||a===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var c=a.getBoundingClientRect(),d=a.parentNode.getBoundingClientRect(),e=document.body.getBoundingClientRect(),f=window.pageYOffset,g=window.pageXOffset;return{width:c.width,height:c.height,offset:{top:c.top+f,left:c.left+g},parentDims:{width:d.width,height:d.height,offset:{top:d.top+f,left:d.left+g}},windowDims:{width:e.width,height:e.height,offset:{top:f,left:g}}}}function d(a,b,d,e,f,g){var h=c(a),i=b?c(b):null;switch(d){case"top":return{left:Foundation.rtl()?i.offset.left-h.width+i.width:i.offset.left,top:i.offset.top-(h.height+e)};case"left":return{left:i.offset.left-(h.width+f),top:i.offset.top};case"right":return{left:i.offset.left+i.width+f,top:i.offset.top};case"center top":return{left:i.offset.left+i.width/2-h.width/2,top:i.offset.top-(h.height+e)};case"center bottom":return{left:g?f:i.offset.left+i.width/2-h.width/2,top:i.offset.top+i.height+e};case"center left":return{left:i.offset.left-(h.width+f),top:i.offset.top+i.height/2-h.height/2};case"center right":return{left:i.offset.left+i.width+f+1,top:i.offset.top+i.height/2-h.height/2};case"center":return{left:h.windowDims.offset.left+h.windowDims.width/2-h.width/2,top:h.windowDims.offset.top+h.windowDims.height/2-h.height/2};case"reveal":return{left:(h.windowDims.width-h.width)/2,top:h.windowDims.offset.top+e};case"reveal full":return{left:h.windowDims.offset.left,top:h.windowDims.offset.top};case"left bottom":return{left:i.offset.left-(h.width+f),top:i.offset.top+i.height};case"right bottom":return{left:i.offset.left+i.width+f-h.width,top:i.offset.top+i.height};default:return{left:Foundation.rtl()?i.offset.left-h.width+i.width:i.offset.left,top:i.offset.top+i.height+e}}}Foundation.Box={ImNotTouchingYou:b,GetDimensions:c,GetOffsets:d}}(jQuery),function(a){function b(a){var b={};for(var c in a)b[a[c]]=a[c];return b}var c={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},d={},e={keys:b(c),parseKey:function(a){var b=c[a.which||a.keyCode]||String.fromCharCode(a.which).toUpperCase();return a.shiftKey&&(b="SHIFT_"+b),a.ctrlKey&&(b="CTRL_"+b),a.altKey&&(b="ALT_"+b),b},handleKey:function(b,c,e){var f,g,h,i=d[c],j=this.parseKey(b);if(!i)return console.warn("Component not defined!");if(f=void 0===i.ltr?i:Foundation.rtl()?a.extend({},i.ltr,i.rtl):a.extend({},i.rtl,i.ltr),g=f[j],(h=e[g])&&"function"==typeof h){var k=h.apply();(e.handled||"function"==typeof e.handled)&&e.handled(k)}else(e.unhandled||"function"==typeof e.unhandled)&&e.unhandled()},findFocusable:function(b){return b.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!(!a(this).is(":visible")||a(this).attr("tabindex")<0)})},register:function(a,b){d[a]=b}};Foundation.Keyboard=e}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){function b(a){var b={};return"string"!=typeof a?b:(a=a.trim().slice(1,-1))?b=a.split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];return d=decodeURIComponent(d),e=void 0===e?null:decodeURIComponent(e),a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):b}var c={queries:[],current:"",_init:function(){var c,d=this;c=b(a(".foundation-mq").css("font-family"));for(var f in c)c.hasOwnProperty(f)&&d.queries.push({name:f,value:"only screen and (min-width: "+c[f]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(a){var b=this.get(a);return!!b&&window.matchMedia(b).matches},get:function(a){for(var b in this.queries)if(this.queries.hasOwnProperty(b)){var c=this.queries[b];if(a===c.name)return c.value}return null},_getCurrentSize:function(){for(var a,b=0;b<this.queries.length;b++){var c=this.queries[b];window.matchMedia(c.value).matches&&(a=c)}return"object"===(void 0===a?"undefined":_typeof(a))?a.name:a},_watcher:function(){var b=this;a(window).on("resize.zf.mediaquery",function(){var c=b._getCurrentSize(),d=b.current;c!==d&&(b.current=c,a(window).trigger("changed.zf.mediaquery",[c,d]))})}};Foundation.MediaQuery=c,window.matchMedia||(window.matchMedia=function(){var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),Foundation.MediaQuery=c}(jQuery),function(a){function b(a,b,c){function d(h){g||(g=window.performance.now()),f=h-g,c.apply(b),f<a?e=window.requestAnimationFrame(d,b):(window.cancelAnimationFrame(e),b.trigger("finished.zf.animate",[b]).triggerHandler("finished.zf.animate",[b]))}var e,f,g=null;e=window.requestAnimationFrame(d)}function c(b,c,f,g){function h(){b||c.hide(),i(),g&&g.apply(c)}function i(){c[0].style.transitionDuration=0,c.removeClass(j+" "+k+" "+f)}if(c=a(c).eq(0),c.length){var j=b?d[0]:d[1],k=b?e[0]:e[1];i(),c.addClass(f).css("transition","none"),requestAnimationFrame(function(){c.addClass(j),b&&c.show()}),requestAnimationFrame(function(){c[0].offsetWidth,c.css("transition","").addClass(k)}),c.one(Foundation.transitionend(c),h)}}var d=["mui-enter","mui-leave"],e=["mui-enter-active","mui-leave-active"],f={animateIn:function(a,b,d){c(!0,a,b,d)},animateOut:function(a,b,d){c(!1,a,b,d)}};Foundation.Move=b,Foundation.Motion=f}(jQuery),function(a){var b={Feather:function(b){var c=arguments.length<=1||void 0===arguments[1]?"zf":arguments[1];b.attr("role","menubar");var d=b.find("li").attr({role:"menuitem"}),e="is-"+c+"-submenu",f=e+"-item",g="is-"+c+"-submenu-parent";b.find("a:first").attr("tabindex",0),d.each(function(){var b=a(this),c=b.children("ul");c.length&&(b.addClass(g).attr({"aria-haspopup":!0,"aria-expanded":!1,"aria-label":b.children("a:first").text()}),c.addClass("submenu "+e).attr({"data-submenu":"","aria-hidden":!0,role:"menu"})),b.parent("[data-submenu]").length&&b.addClass("is-submenu-item "+f)})},Burn:function(a,b){var c=(a.find("li").removeAttr("tabindex"),"is-"+b+"-submenu"),d=c+"-item",e="is-"+b+"-submenu-parent";a.find("*").removeClass(c+" "+d+" "+e+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=b}(jQuery),function(a){function b(a,b,c){var d,e,f=this,g=b.duration,h=Object.keys(a.data())[0]||"timer",i=-1;this.isPaused=!1,this.restart=function(){i=-1,clearTimeout(e),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(e),i=i<=0?g:i,a.data("paused",!1),d=Date.now(),e=setTimeout(function(){b.infinite&&f.restart(),c()},i),a.trigger("timerstart.zf."+h)},this.pause=function(){this.isPaused=!0,clearTimeout(e),a.data("paused",!0);var b=Date.now();i-=b-d,a.trigger("timerpaused.zf."+h)}}function c(b,c){function d(){0===--e&&c()}var e=b.length;0===e&&c(),b.each(function(){this.complete?d():void 0!==this.naturalWidth&&this.naturalWidth>0?d():a(this).one("load",function(){d()})})}Foundation.Timer=b,Foundation.onImagesLoaded=c}(jQuery),function(a){function b(){this.removeEventListener("touchmove",c),this.removeEventListener("touchend",b),j=!1}function c(c){if(a.spotSwipe.preventDefault&&c.preventDefault(),j){var d,e=c.touches[0].pageX,g=(c.touches[0].pageY,f-e);i=(new Date).getTime()-h,Math.abs(g)>=a.spotSwipe.moveThreshold&&i<=a.spotSwipe.timeThreshold&&(d=g>0?"left":"right"),d&&(c.preventDefault(),b.call(this),a(this).trigger("swipe",d).trigger("swipe"+d))}}function d(a){1==a.touches.length&&(f=a.touches[0].pageX,g=a.touches[0].pageY,j=!0,h=(new Date).getTime(),this.addEventListener("touchmove",c,!1),this.addEventListener("touchend",b,!1))}function e(){this.addEventListener&&this.addEventListener("touchstart",d,!1)}a.spotSwipe={version:"1.0.0",enabled:"ontouchstart"in document.documentElement,preventDefault:!1,moveThreshold:75,timeThreshold:200};var f,g,h,i,j=!1;a.event.special.swipe={setup:e},a.each(["left","up","down","right"],function(){a.event.special["swipe"+this]={setup:function(){a(this).on("swipe",a.noop)}}})}(jQuery),function(a){a.fn.addTouch=function(){this.each(function(c,d){a(d).bind("touchstart touchmove touchend touchcancel",function(){b(event)})});var b=function(a){var b,c=a.changedTouches,d=c[0],e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},f=e[a.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?b=new window.MouseEvent(f,{bubbles:!0,cancelable:!0,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY}):(b=document.createEvent("MouseEvent"),b.initMouseEvent(f,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null)),d.target.dispatchEvent(b)}}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){function b(){f(),d(),e(),c()}function c(b){var c=a("[data-yeti-box]"),d=["dropdown","tooltip","reveal"];if(b&&("string"==typeof b?d.push(b):"object"===(void 0===b?"undefined":_typeof(b))&&"string"==typeof b[0]?d.concat(b):console.error("Plugin names must be strings")),c.length){var e=d.map(function(a){return"closeme.zf."+a}).join(" ");a(window).off(e).on(e,function(b,c){var d=b.namespace.split(".")[0];a("[data-"+d+"]").not('[data-yeti-box="'+c+'"]').each(function(){var b=a(this);b.triggerHandler("close.zf.trigger",[b])})})}}function d(b){var c=void 0,d=a("[data-resize]");d.length&&a(window).off("resize.zf.trigger").on("resize.zf.trigger",function(e){c&&clearTimeout(c),c=setTimeout(function(){g||d.each(function(){a(this).triggerHandler("resizeme.zf.trigger")}),d.attr("data-events","resize")},b||10)})}function e(b){var c=void 0,d=a("[data-scroll]");d.length&&a(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(e){c&&clearTimeout(c),c=setTimeout(function(){g||d.each(function(){a(this).triggerHandler("scrollme.zf.trigger")}),d.attr("data-events","scroll")},b||10)})}function f(){if(!g)return!1;var b=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),c=function(b){var c=a(b[0].target);switch(c.attr("data-events")){case"resize":c.triggerHandler("resizeme.zf.trigger",[c]);break;case"scroll":c.triggerHandler("scrollme.zf.trigger",[c,window.pageYOffset]);break;default:return!1}};if(b.length)for(var d=0;d<=b.length-1;d++){var e=new g(c);e.observe(b[d],{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["data-events"]})}}var g=function(){for(var a=["WebKit","Moz","O","Ms",""],b=0;b<a.length;b++)if(a[b]+"MutationObserver"in window)return window[a[b]+"MutationObserver"];return!1}(),h=function(b,c){b.data(c).split(" ").forEach(function(d){a("#"+d)["close"===c?"trigger":"triggerHandler"](c+".zf.trigger",[b])})};a(document).on("click.zf.trigger","[data-open]",function(){h(a(this),"open")}),a(document).on("click.zf.trigger","[data-close]",function(){a(this).data("close")?h(a(this),"close"):a(this).trigger("close.zf.trigger")}),a(document).on("click.zf.trigger","[data-toggle]",function(){h(a(this),"toggle")}),a(document).on("close.zf.trigger","[data-closable]",function(b){b.stopPropagation();var c=a(this).data("closable");""!==c?Foundation.Motion.animateOut(a(this),c,function(){a(this).trigger("closed.zf")}):a(this).fadeOut().trigger("closed.zf")}),a(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var b=a(this).data("toggle-focus");a("#"+b).triggerHandler("toggle.zf.trigger",[a(this)])}),a(window).load(function(){b()}),Foundation.IHearYou=b}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function b(c,d){_classCallCheck(this,b),this.$element=c,this.options=a.extend({},b.defaults,this.$element.data(),d),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return _createClass(b,[{key:"_init",value:function(){var b=this;if(this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=a('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each(function(){var c=a(this),d=c.find("a"),e=c.hasClass("is-active"),f=d[0].hash.slice(1),g=d[0].id?d[0].id:f+"-label",h=a("#"+f);c.attr({role:"presentation"}),d.attr({role:"tab","aria-controls":f,"aria-selected":e,id:g}),h.attr({role:"tabpanel","aria-hidden":!e,"aria-labelledby":g}),e&&b.options.autoFocus&&d.focus()}),this.options.matchHeight){var c=this.$tabContent.find("img");c.length?Foundation.onImagesLoaded(c,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),a(window).on("changed.zf.mediaquery",this._setHeightMqHandler))}},{key:"_addClickHandler",value:function(){var b=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,function(c){c.preventDefault(),c.stopPropagation(),a(this).hasClass("is-active")||b._handleTabChange(a(this))})}},{key:"_addKeyHandler",value:function(){var b=this;b.$element.find("li:first-of-type"),b.$element.find("li:last-of-type"),this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",function(c){if(9!==c.which){var d,e,f=a(this),g=f.parent("ul").children("li");g.each(function(c){if(a(this).is(f))return void(b.options.wrapOnKeys?(d=0===c?g.last():g.eq(c-1),e=c===g.length-1?g.first():g.eq(c+1)):(d=g.eq(Math.max(0,c-1)),e=g.eq(Math.min(c+1,g.length-1))))}),Foundation.Keyboard.handleKey(c,"Tabs",{open:function(){f.find('[role="tab"]').focus(),b._handleTabChange(f)},previous:function(){d.find('[role="tab"]').focus(),b._handleTabChange(d)},next:function(){e.find('[role="tab"]').focus(),b._handleTabChange(e)},handled:function(){c.stopPropagation(),c.preventDefault()}})}})}},{key:"_handleTabChange",value:function(b){var c=b.find('[role="tab"]'),d=c[0].hash,e=this.$tabContent.find(d),f=this.$element.find("."+this.options.linkClass+".is-active").removeClass("is-active").find('[role="tab"]').attr({"aria-selected":"false"});a("#"+f.attr("aria-controls")).removeClass("is-active").attr({"aria-hidden":"true"}),b.addClass("is-active"),c.attr({"aria-selected":"true"}),e.addClass("is-active").attr({"aria-hidden":"false"}),this.$element.trigger("change.zf.tabs",[b])}},{key:"selectTab",value:function(a){var b;b="object"===(void 0===a?"undefined":_typeof(a))?a[0].id:a,b.indexOf("#")<0&&(b="#"+b);var c=this.$tabTitles.find('[href="'+b+'"]').parent("."+this.options.linkClass);this._handleTabChange(c)}},{key:"_setHeight",value:function(){var b=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each(function(){var c=a(this),d=c.hasClass("is-active");d||c.css({visibility:"hidden",display:"block"});var e=this.getBoundingClientRect().height;d||c.css({visibility:"",display:""}),b=e>b?e:b}).css("height",b+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&a(window).off("changed.zf.mediaquery",this._setHeightMqHandler),Foundation.unregisterPlugin(this)}}]),b}();b.defaults={autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,linkClass:"tabs-title",panelClass:"tabs-panel"},Foundation.plugin(b,"Tabs")}(jQuery);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(a){var b=function(){function b(c,d){_classCallCheck(this,b),this.$element=c,this.options=a.extend({},b.defaults,c.data(),d),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(b,[{key:"_init",value:function(){var b;this.options.animate?(b=this.options.animate.split(" "),this.animationIn=b[0],this.animationOut=b[1]||null):(b=this.$element.data("toggler"),this.className="."===b[0]?b.slice(1):b);var c=this.$element[0].id;a('[data-open="'+c+'"], [data-close="'+c+'"], [data-toggle="'+c+'"]').attr("aria-controls",c),this.$element.attr("aria-expanded",!this.$element.is(":hidden"))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var a=this.$element.hasClass(this.className);a?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(a)}},{key:"_toggleAnimate",value:function(){var a=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){a._updateARIA(!0),this.trigger("on.zf.toggler")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){a._updateARIA(!1),this.trigger("off.zf.toggler")})}},{key:"_updateARIA",value:function(a){this.$element.attr("aria-expanded",!!a)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),b}();b.defaults={animate:!1},Foundation.plugin(b,"Toggler")}(jQuery),$(document).foundation();var addressToggle=function(){$('#billingAddressOptions input[type="radio"]').on("change",function(a){$("#newAddress").toggleClass("hide","new"!==this.value)})},deliveryAddressShow=function(){$("#showDeliveryAddress").on("click",function(a){a.preventDefault(),$(this).attr("aria-selected",!0),$("#newDeliveryAddress").removeClass("hide")})},deliveryAddressHide=function(){$("#hideDeliveryAddress").on("click",function(a){a.preventDefault(),$("#showDeliveryAddress").attr("aria-selected",!1),$("#newDeliveryAddress").addClass("hide")})},voucherSubmit=function(){$("#voucherSubmit").on("click",function(a){a.preventDefault(),$(this).parents("fieldset").addClass("hide"),$("#voucherSuccess").removeClass("hide")})};$(function(){$("#billingAddressOptions")&&addressToggle(),$("#newDeliveryAddressBtn")&&(deliveryAddressShow(),deliveryAddressHide()),$("#voucherSubmit")&&voucherSubmit(),$(".js-print").on("click",function(a){a.preventDefault(),window.print()})}),window.Wg=window.Wg||{},Wg.b2b=Wg.b2b||function(){function h(a){var b=$.map($(".productCode input.referenceProductCode"),function(a){return a.value||""}).join("|"),c=$.map($(".productCode input.webAccount"),function(a){return a.value||""}).join("|"),f=($.map($(".productCode input.searchTerm"),function(a){return a.value||""}).join("|"),$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='C']").hasClass("selected")?"1":""}).join("|")),g=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='S']").hasClass("selected")?"1":""}).join("|"),h=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='L']").hasClass("selected")?"1":""}).join("|"),j=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='R']").hasClass("selected")?"1":""}).join("|"),k=$("#OrderReference").val(),l=$("#SpecialInstructions").val();m(d+"/redant/quickbuyorder.aspx",function(a){var b=a.split("\n")[0];if(b&&b.length>2&&b.toLowerCase().indexOf("<order")>=0){b=b.substring(1,b.length-1);var c=$(b).find("order");i("Thank you for your order","medium","","<h2>Customer "+window.selectedCustomerRef+"</h2><h2>Your order was successful</h2><h3>Thank you for your order "+c.attr("number")+"</h3><p><strong>"+c.attr("type")+"</strong> order<br /><strong>Brand</strong> "+c.attr("brand")+'</p><p>Your order has been received and is being processed.  Please feel free to <a href="/contact-us/" title="contact us">contact us</a> if you have any questions.</p><p>Your order is accepted at the discretion of the Seller. Payment does not indicate order acceptance and your payment will be refunded if your offer is refused.</p>'),$(".quickPurchase tbody tr").not(".autoCompleteRow").remove()}else i("There was a problem placing your order","medium","","<h2>Customer "+window.selectedCustomerRef+'</h2><h2>There was a problem placing your order</h2><p>Your order was unsuccessful.  Please feel free to <a href="/contact-us/" title="Contact Us">contact us</a> if you have any questions.</p>')},"productCodes="+b+"&cuttings="+f+"&shorts="+g+"&longs="+h+"&returnables="+j+"&accounts="+c+"&OrderReference="+k+"&SpecialInstructions="+l)}function i(a,b,c,d){""===b&&(b="medium");var e=$('<div id="popup" class="reveal-modal '+b+" "+c+'"><header class="header-reveal-modal"><h2>'+a+'</h2><a class="close-reveal-modal icon-remove"><span>Close</span></a></header><div class="bd-reveal-modal"></div>');e.children("div.bd-reveal-modal").append(d),$("body #popup").remove(),$("body").append(e),$("#popup").foundation("reveal","open",{close:function(){g=!1,k()}}),g=!0}function k(){$(".ui-widget-content").hover(function(){$(this).hide()})}function l(){window.location.href.toLowerCase().indexOf("/trade-members/login")<0&&(window.location="/trade-members/login/?returnUrl=%2Fb2b-members%2Fwebtex%2F")}function m(a,b,c,d,e,f){""!==d&&null!==d&&void 0!==d||(d="POST"),""!==e&&null!==e&&void 0!==e||(e="json"),void 0===c&&(c=null),void 0===f&&(f=!0),$.support.cors=!0,$.ajax({url:a,method:d,cache:!1,crossDomain:!0,data:c,dataType:e,async:f,xhrFields:{withCredentials:!0},success:b})}function n(){window.$zopim||function(a,b){var c=$zopim=function(a){c._.push(a)},d=c.s=a.createElement(b),e=a.getElementsByTagName(b)[0];c.set=function(a){c.set._.push(a)},c._=[],c.set._=[],d.async=!0,d.setAttribute("charset","utf-8"),d.src="//v2.zopim.com/?28GknwDR6q7FM6sMVnnptC2GKCIupEhr",c.t=+new Date,d.type="text/javascript",e.parentNode.insertBefore(d,e)}(document,"script")}function o(a){var b;b=a.length>10?a.substring(0,10)+"...":a,$("#customerName a span.global-util-label").html(b+'<span class="hide"> (Change Customer)</span>').attr("title",a+" (Change Customer)"),$("#customerNameModal a span.global-util-label").html(a+'<span class="hide"> (Change Customer)</span>').attr("title",a+" (Change Customer)")}function p(){m(d+"/redant/getassignedcustomer.aspx",function(a){"C"===a.UserType?($("#customer a").remove(),o(a.CustomerName),window.selectedCustomerRef=a.CustomerRef):!0===a.Valid&&""!==a.CustomerRef&&a.CustomerRef.indexOf(",")<1?(window.selectedCustomerRef=a.CustomerRef,o(a.CustomerName)):(""===a.CustomerRef||a.CustomerRef.indexOf(",")>0)&&v()})}function q(){m(d+"/redant/ssologout.aspx",function(a){},null,"POST","json",!1),m("/b2b-members/logout/",function(a){l()})}function r(){m(d+"/redant/ping.aspx",function(a){!0!==a.Valid&&q()})}function s(){$(document.body).off("click",".addToBasket"),$(document.body).off("click","a.addToBasket").off("click","a.b2baddtobasket").off("click","a.b2baddsampletobasket").on("click","a.b2bdisabled",function(a){return a.preventDefault(),!1}).on("click",'.b2baddtobasket:not(".b2bdisabled")',function(e){if(e.preventDefault(),""===window.selectedCustomerRef)p();else{var f=$(this).parents(".productDetails, .details").attr("data-productcode")||$(this).parent().attr("data-productcode");"wg"===sitekey.toLowerCase()&&(f=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).parent().attr("data-productcode")),c=f.indexOf("UZGC")>-1?b:a;i("Add to Basket","large","",'<iframe src="'+(d+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&ITEM_ID="+f+"&CAIF_ACCOUNT="+c+"&LINE_NO=*&RELOAD=Y&ORDER_TYPE=N&FRMWRK=N&CUSREF="+window.selectedCustomerRef+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1}).on("click",'.b2baddsampletobasket:not(".b2bdisabled")',function(e){if(e.preventDefault(),""===window.selectedCustomerRef)p();else{var f=$(this).parents(".productDetails, .details").attr("data-productcode")||$(this).parent().attr("data-productcode");"wg"===sitekey.toLowerCase()&&(f=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).parent().attr("data-productcode")),c=f.indexOf("UZGC")>-1?b:a;i("Add Sample to Basket","large","",'<iframe src="'+(d+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&ITEM_ID="+f+"&CAIF_ACCOUNT="+c+"&LINE_NO=*&RELOAD=Y&ORDER_TYPE=Y&FRMWRK=N&CUSREF="+window.selectedCustomerRef+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1}).on("click",'.b2beditbasket:not(".b2bdisabled")',function(e){if(e.preventDefault(),""===window.selectedCustomerRef)p();else{var f=$(this).attr("data-productcode");"wg"===sitekey.toLowerCase()&&(f=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).attr("data-productcode")),c=f.indexOf("UZGC")>-1?b:a;var g=$(this).attr("data-linenumber"),h=$(this).attr("data-customerref")||window.selectedCustomerRef;i("Edit Item","large","",'<iframe src="'+(d+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&CAIF_ACCOUNT="+c+"&LINE_NO="+g+"&RELOAD=Y&ORDER_TYPE=N&FRMWRK=N&CUSREF="+h+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1}).on("click",'.b2beditsamplebasket:not(".b2bdisabled")',function(e){if(e.preventDefault(),""===window.selectedCustomerRef)p();else{var f=$(this).attr("data-productcode");c=f.indexOf("UZGC")>-1?b:a;var g=$(this).attr("data-linenumber"),h=$(this).attr("data-customerref")||window.selectedCustomerRef;i("Edit Sample","large","",'<iframe src="'+(d+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&CAIF_ACCOUNT="+c+"&LINE_NO="+g+"&RELOAD=Y&ORDER_TYPE=Y&FRMWRK=N&CUSREF="+h+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1})}function t(){var a=$("*[data-productcode][data-b2bfetch='true']"),b=$("#ProductCodes"),c="";a.length>0&&(c+=a.map(function(){return $(this).attr("data-productcode")}).get().join(",")),b.length>0&&(c+=b.val()),c.length>0&&(a.find(".b2baddtobasket, .b2baddsampletobasket, .b2beditbasket, .b2beditsamplebasket").addClass("b2bdisabled"),m(d+"/redant/pricelist.aspx",function(a){if(a&&a.Items.length>0)for(var b=a.Currency||"GBP",c=0;c<a.Items.length;c++){if(null!=a.Items[c].Price&&void 0!=a.Items[c].Price&&"-.--"!=a.Items[c].Price){var d=b+" "+a.Items[c].Price;$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .price').not('[data-noprice="true"]').length>0&&0==$("#webcontractuser").length?$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .price').not('[data-noprice="true"]').text(d):0==$("#webcontractuser").length&&$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"]').not('[data-noprice="true"]').append('<div class="detailPriceContainer"><p class="priceValue">*Your Trade Price:</p><p class="priceValue"><span class="price">'+d+"</span></p></div>"),$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .stock')&&0==$("#webcontractuser").length&&(a.Items[c].StockLevel>0?$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .stock').not('[data-noprice="true"]').length>0&&0==$("#webcontractuser").length?$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .stock').text("Stock Level: "+a.Items[c].StockLevel+a.Items[c].StockLevelUnitOfMeasurement):0==$("#webcontractuser").length&&$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"]').not('[data-noprice="true"]').append('<div class="detailPriceContainer"><p class="priceValue"></p><p class="priceValue"><span class="stock">'+a.Items[c].StockLevel+a.Items[c].StockLevelUnitOfMeasurement+"</span></p></div>"):$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"] .stock').html("Stock Level: "+a.Items[c].StockLevel+a.Items[c].StockLevelUnitOfMeasurement+"<br/>Stock Due: "+a.Items[c].DueIn)),$('*[data-productcode="'+a.Items[c].Product_Code+'"]').find(".b2baddtobasket, .b2baddsampletobasket, .b2beditbasket, .b2beditsamplebasket").removeClass("b2bdisabled")}$('*[data-productcode="'+a.Items[c].Product_Code+'"][data-b2bfetch="true"]').attr("data-b2bfetch","complete")}$('*[data-productcode][data-b2bfetch="true"] .accessMessage').show()},"ProductCodes="+c))}function u(a,b){m(d+"/redant/GetCustomers.aspx?term="+a.term,function(a){var c=$.map(a,function(a){return{label:a.CUSName+" ("+a.CUSREF+" - "+a.SELLCO+")",value:a.CUSREF,name:a.CUSName}});b(c)})}function v(){var a=$('<div class="contentForm"><div class="field text autocomplete"><label for="b2bcustomerselection">Start typing a customer name and select an option from the list</label><input type="text" id="b2bcustomerselection" name="b2bcustomerselection" placeholder="Start typing a customer name..." /></div></div>');a.find("input").autocomplete({source:u,minLength:3,select:function(a,b){b.item&&m(d+"/redant/setcustomer.aspx?CUSREF="+b.item.value+"&CUSName="+b.item.name,function(a){window.selectedCustomerRef=b.item.value,o(b.item.name.trim()),closeIframeWindow(),$(document).trigger("priceupdate")})},create:function(a,b){setTimeout(function(){$("#b2bcustomerselection").focus()},500)}}),i("Select Customer","small","",a)}function w(a){var b=$.Deferred();return m(d+"/redant/minibasket.aspx",function(a){$("li.basket .miniBasket").remove(),$.get("/_js/template/b2b-minibasket.html").done(function(c){$("li.basket").append(_.template(c,a,{variable:"basket"}));var e=a.AvailableBaskets.length;$("li.basket > a > span.global-util-count").text("("+e+")"),$("div.topNavItem > a").text("BASKET ("+e+")"),$("li.basket input#switch").autocomplete({source:u,minLength:3,select:function(a,b){b.item&&($.support.cors=!0,$.ajax({url:d+"/redant/setcustomer.aspx?CUSREF="+b.item.value+"&CUSName="+encodeURIComponent(b.item.label),crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(a){}}))}}),b.resolve(a)})},null,"POST","json"),b.promise()}function x(a){return $(this).find(".alertInfo").remove(),0!=$(this).find("input[type='checkbox']:checked").length||($(this).prepend('<div class="alertInfo error"><span>You must select a basket to continue to the secure checkout</span></div>'),!1)}function y(){window.location.href.toLowerCase().indexOf("b2bcheckout/payment")>0&&$("html, body").animate({scrollTop:$("#b2bPaymentSection").position().top-$("#header").outerHeight()},1e3)}var a="WG01.WEB",b="WG09.WEB",c="WG01.WEB",d="https://online.walkergreenbank.com/raintegration",a="WG01.WEB",b="WG09.WEB",c="WG01.WEB";window.location.href.indexOf("uat")||window.location.href.indexOf("staging")||window.location.href.indexOf("colonynext");var e=Redant.util.browser.isMobile()||Redant.util.browser.isTablet()?"touchstart":"click";window.getMiniBasket=w,Wg.QuickPurchase&&($("table.quickPurchase").addClass("b2b"),Wg.QuickPurchase.orderHandlerDelegate=h),window.selectedCustomerRef="";var g=!1;return{init:function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),$(window).load(function(){n(),$("*[data-productcode]").find("a.b2baddtobasket, a.b2baddsampletobasket, a.b2beditbasket, a.b2beditsamplebasket").addClass("b2bdisabled"),r(),setInterval(r,3e4),p(),t(),$(document).on("quickview:expanded productdragstop",function(){$(document).trigger("priceupdate")}),s()}),$(document).ready(function(){y(),w(),$(".scrapControls .sample").remove(),$(document).on("keydown",".field.orderreference input",function(a){var b=a.which||a.keyCode;return!a.shiftKey&&!a.altKey&&!a.ctrlKey&&b>=48&&b<=57||b>=96&&b<=105||189==b||109==b||b>=65&&b<=90||8==b||9==b||13==b||35==b||36==b||37==b||39==b||45==b}),$(document).on(e,"#b2bLogout,.b2bLogout",function(a){return q(),!1}),$(document).on(e,"#b2bChangeCustomer,#customer a",function(a){return v(),!1}),$(document).on(e,"#b2bGoToBasket",function(a){return a.preventDefault(),window.location="/b2b-members/webtex/basketsummary/",!1}),$("#siteLinks ul li.basket a").attr("href","/b2b-members/webtex/basketsummary/"),_.each($("select.savedAddresses"),function(a){$(a).children("option:selected").val().length>0?$(a).parents("fieldset").children(".addressDetails").hide():$(a).parents("fieldset").children(".addressDetails").show()}),$("select.savedAddresses").change(function(a){$(this).children("option:selected").val().length>0?$(this).parents("fieldset").children(".addressDetails").hide():$(this).parents("fieldset").children(".addressDetails").show()}),$(".b2bDelivery .addNewAddress").on("click",function(a){a.preventDefault();var b=this,c=$(b).data("custref"),d=$(b).data("custname"),e=$(b).data("iscfa")||!1,f=$("#addressDetails");return $.get("/b2b-members/b2bcheckout/AddDeliveryAddress?CustomerReference="+c+"&CustomerName="+d+"&isCfaAddress="+e,function(a){f.empty().html(a).append("").foundation("reveal","open"),_.each($("select.savedAddresses"),function(a){$(a).children("option:selected").val().length>0?$(a).parents("fieldset").children(".addressDetails").hide():$(a).parents("fieldset").children(".addressDetails").show()}),$("select.savedAddresses").change(function(a){$(this).children("option:selected").val().length>0?$(this).parents("fieldset").children(".addressDetails").hide():$(this).parents("fieldset").children(".addressDetails").show()}),$("#addressDetails form").on("submit",function(a){a.preventDefault();var b=$(this);return $.validator.unobtrusive.parse(b),$(b).valid()&&$.ajax({type:"POST",url:b.attr("action"),data:b.serialize(),success:function(a){var b=e?".cfa ":" ",d=e?".deliveryAddress.cfa ul":".deliveryAddress:not(.cfa) ul";if(a.success&&!0===a.success){var g=a.address.split("|"),h=$("#"+c).find(d);0==h.length&&(h=$("<ul>").prependTo("#"+c+" "+d)),h.empty().append("<li><strong>"+g[0]+"</strong></li>");for(var i=1;i<g.length;i++)"Y"!==g[i]&&"D"!==g[i]&&"T"!==g[i]&&h.append("<li>"+g[i]+"</li>");$("#"+c+" .b2bDeliveryAddressHeader"+b).text("Selected"+(e?" CFA ":" ")+" Delivery Address"),f.foundation("reveal","close")}}}),!1})}),!1}),$("form.basketTotals").submit(x),$("#b2bAcceptTermsAndConditions").on("change",function(){$(this).prop("checked")?$("#termsAndConditionsError").hide():$("#termsAndConditionsError").show()}),$("form#b2bMakePayment").submit(function(a){var b=$("#b2bAcceptTermsAndConditions").prop("checked");return b?$("#termsAndConditionsError").hide():$("#termsAndConditionsError").show(),b}),$('input[type="radio"][name="paymentType"]').on("change",function(){var a=$(this).val();$("#billingAddress").hide(),"card"==a&&$("#billingAddress").show()}),$(document).on("priceupdate",function(){t()})})},b2bNavigation:function(){m(d+"/redant/clientinfo.aspx",function(a){var b=a.nav.Nav.menu.menuitem,c=$('<header class="pageHeader"><nav class="top-bar" role="navigation"><ul class="title-area"><li class="name"><a href="#"><h1>B2B Menu</h1></a></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul><li><a href="/b2b-members/webtex/?webtexUrl=%2F">Home</a></li></ul></section></nav></header>'),d='<li><a href="/b2b-members/webtex/?webtexUrl=<%=item.link%>"><%=(item.title || "")%></a></li>',e=c.find(".top-bar-section ul");_.each(b,function(a){var b=$(_.template(d,a,{variable:"item"}));if(a.menu&&a.menu.menuitem.length>0){b.addClass("has-dropdown");var c=$('<ul class="dropdown"></ul>');_.each(a.menu.menuitem,function(a){c.append(_.template(d,a,{variable:"item"}))}),b.append(c),e.append(b)}}),e.append('<li><a href="/shop/quick-order/">Quick Order</a></li><li><a href="/trade/">Trade Area</a><li><a class="b2bLogout" href="#">Log Off</a></li>'),Redant.util.browser.isMobile()||("wg"===sitekey.toLowerCase()?$(".pageContainerInner").prepend(c):$("#container").prepend(c)),$(document).foundation("off").foundation()})}}}(),Wg.b2b.init(),window.Wg=window.Wg||{},Wg.b2b=Wg.b2b||function(){function a(){var a=$.map($(".productCode input.referenceProductCode"),function(a){return a.value||""}).join("|"),c=$.map($(".productCode input.webAccount"),function(a){return a.value||""}).join("|"),f=($.map($(".productCode input.searchTerm"),function(a){return a.value||""}).join("|"),$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='C']").hasClass("selected")?"1":""}).join("|")),g=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='S']").hasClass("selected")?"1":""}).join("|"),h=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='L']").hasClass("selected")?"1":""}).join("|"),i=$.map($(".cuttingType"),function(a){return $(a).find("label").has("input[value='R']").hasClass("selected")?"1":""}).join("|"),j=$("#OrderReference").val(),k=$("#SpecialInstructions").val();e(u+"/redant/quickbuyorder.aspx",function(a){var d,c=a.split("\n")[0];c&&c.length>2&&c.toLowerCase().indexOf("<order")>=0?(c=c.substring(1,c.length-1),d=$(c).find("order"),b("Thank you for your order","medium","","<h2>Customer "+window.selectedCustomerRef+"</h2><h2>Your order was successful</h2><h3>Thank you for your order "+d.attr("number")+"</h3><p><strong>"+d.attr("type")+"</strong> order<br /><strong>Brand</strong> "+d.attr("brand")+'</p><p>Your order has been received and is being processed.  Please feel free to <a href="/contact-us/" title="contact us">contact us</a> if you have any questions.</p><p>Your order is accepted at the discretion of the Seller. Payment does not indicate order acceptance and your payment will be refunded if your offer is refused.</p>'),$(".quickPurchase tbody tr").not(".autoCompleteRow").remove()):b("There was a problem placing your order","medium","","<h2>Customer "+window.selectedCustomerRef+'</h2><h2>There was a problem placing your order</h2><p>Your order was unsuccessful.  Please feel free to <a href="/contact-us/" title="Contact Us">contact us</a> if you have any questions.</p>')},"productCodes="+a+"&cuttings="+f+"&shorts="+g+"&longs="+h+"&returnables="+i+"&accounts="+c+"&OrderReference="+j+"&SpecialInstructions="+k)}function b(a,b,d,e){""===b&&(b="medium");var f=$('<div id="popup" class="reveal-modal '+b+" "+d+'"><header class="header-reveal-modal"><h2>'+a+'</h2><a class="close-reveal-modal icon-remove"><span>Close</span></a></header><div class="bd-reveal-modal"></div>');f.children("div.bd-reveal-modal").append(e),$("body #popup").remove(),$("body").append(f),$("#popup").foundation("reveal","open",{close:function(){x=!1,c()}}),showWidget(),x=!0}function c(){$(".ui-widget-content").hover(function(){$(this).hide()})}function d(){window.location.href.toLowerCase().indexOf("/trade-members/login")<0&&(window.location="/trade-members/login/?returnUrl=%2Fb2b-members%2Fwebtex%2F")}function e(a,b,c,d,e,f){(""===d||null===d||void 0===d)&&(d="POST"),(""===e||null===e||void 0===e)&&(e="json"),void 0===c&&(c=null),void 0===f&&(f=!0),$.support.cors=!0,$.ajax({url:a,method:d,cache:!1,crossDomain:!0,data:c,dataType:e,async:f,xhrFields:{withCredentials:!0},success:b})}function f(){window.$zopim||function(a,b){var c=$zopim=function(a){c._.push(a)},d=c.s=a.createElement(b),e=a.getElementsByTagName(b)[0];c.set=function(a){c.set._.push(a)},c._=[],c.set._=[],d.async=!0,d.setAttribute("charset","utf-8"),d.src="//v2.zopim.com/?28GknwDR6q7FM6sMVnnptC2GKCIupEhr",c.t=+new Date,d.type="text/javascript",e.parentNode.insertBefore(d,e)}(document,"script")}function g(a){var b;b=a.length>10?a.substring(0,10)+"...":a,$("#customerName a span.global-util-label").html(b+'<span class="hide"> (Change Customer)</span>').attr("title",a+" (Change Customer)"),$("#customerNameModal a span.global-util-label").html(a+'<span class="hide"> (Change Customer)</span>').attr("title",a+" (Change Customer)")}function h(){e(u+"/redant/getassignedcustomer.aspx",function(a){"C"===a.UserType?($("#customer a").remove(),window.selectedCustomerRef=a.CustomerRef):!0===a.Valid&&""!==a.CustomerRef&&a.CustomerRef.indexOf(",")<1?(window.selectedCustomerRef=a.CustomerRef,g(a.CustomerName)):(""===a.CustomerRef||a.CustomerRef.indexOf(",")>0)&&n()})}function i(){e(u+"/redant/ssologout.aspx",function(){},null,"POST","json",!1),e("/b2b-members/logout/",function(){d()})}function j(){e(u+"/redant/ping.aspx",function(a){!0!==a.Valid&&i()})}function k(){$(document.body).off("click",".addToBasket"),$(document.body).off("click","a.addToBasket").off("click","a.b2baddtobasket").off("click","a.b2baddsampletobasket").on("click","a.b2bdisabled",function(a){return a.preventDefault(),!1}).on("click",'.b2baddtobasket:not(".b2bdisabled")',function(a){var c,d;return a.preventDefault(),""===window.selectedCustomerRef?h():(c=$(this).parents(".productDetails, .details").attr("data-productcode")||$(this).parent().attr("data-productcode"),"wg"===sitekey.toLowerCase()&&(c=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).parent().attr("data-productcode")),t=c.indexOf("UZGC")>-1?s:r,d=u+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&ITEM_ID="+c+"&CAIF_ACCOUNT="+t+"&LINE_NO=*&RELOAD=Y&ORDER_TYPE=N&FRMWRK=N&CUSREF="+window.selectedCustomerRef+"&THEME="+sitekey.toUpperCase(),b("Add to Basket","large","",'<iframe src="'+d+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')),!1}).on("click",'.b2baddsampletobasket:not(".b2bdisabled")',function(a){var c,d;return a.preventDefault(),""===window.selectedCustomerRef?h():(c=$(this).parents(".productDetails, .details").attr("data-productcode")||$(this).parent().attr("data-productcode"),"wg"===sitekey.toLowerCase()&&(c=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).parent().attr("data-productcode")),t=c.indexOf("UZGC")>-1?s:r,d=u+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&ITEM_ID="+c+"&CAIF_ACCOUNT="+t+"&LINE_NO=*&RELOAD=Y&ORDER_TYPE=Y&FRMWRK=N&CUSREF="+window.selectedCustomerRef+"&THEME="+sitekey.toUpperCase(),b("Add Sample to Basket","large","",'<iframe src="'+d+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')),!1}).on("click",'.b2beditbasket:not(".b2bdisabled")',function(a){var c;if(a.preventDefault(),""===window.selectedCustomerRef)h();else{c=$(this).parents(".productDetails, .details").attr("data-productcode"),"wg"===sitekey.toLowerCase()&&(c=$(this).parents(".b2bhelper").attr("data-productcode")||$(this).parent().attr("data-productcode")),t=c.indexOf("UZGC")>-1?s:r;var d=$(this).attr("data-linenumber"),e=$(this).attr("data-customerref")||window.selectedCustomerRef;b("Edit Item","large","",'<iframe src="'+(u+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&CAIF_ACCOUNT="+t+"&LINE_NO="+d+"&RELOAD=Y&ORDER_TYPE=N&FRMWRK=N&CUSREF="+e+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1}).on("click",'.b2beditsamplebasket:not(".b2bdisabled")',function(a){var c;if(a.preventDefault(),""===window.selectedCustomerRef)h();else{c=$(this).parents(".productDetails, .details").attr("data-productcode"),t=c.indexOf("UZGC")>-1?s:r;var d=$(this).attr("data-linenumber"),e=$(this).attr("data-customerref")||window.selectedCustomerRef;b("Edit Sample","large","",'<iframe src="'+(u+"/Content/OrderEntryLineExt/Default.aspx?RETURN_URL="+window.location.origin+"/closepopup.html&CAIF_ACCOUNT="+t+"&LINE_NO="+d+"&RELOAD=Y&ORDER_TYPE=Y&FRMWRK=N&CUSREF="+e+"&THEME="+sitekey.toUpperCase())+'" style="border: none; width: 625px!important;height: 470px!important;"></iframe>')}return!1})}function l(){var a=$("*[data-productcode]"),b=$("#ProductCodes"),c="";a.length>0&&(c+=a.map(function(){return $(this).attr("data-productcode")}).get().join(",")),b.length>0&&(c+=b.val()),c.length>0&&(a.find(".b2baddtobasket, .b2baddsampletobasket, .b2beditbasket, .b2beditsamplebasket").addClass("b2bdisabled"),e(u+"/redant/pricelist.aspx",function(a){var b,c,d;if(a&&a.Items.length>0)for(b=a.Currency||"GBP",c=0;c<a.Items.length;c++)null!=a.Items[c].Price&&void 0!=a.Items[c].Price&&"-.--"!=a.Items[c].Price&&(d=b+" "+a.Items[c].Price,$('*[data-productcode="'+a.Items[c].Product_Code+'"] .price').not('[data-noprice="true"]').length>0&&0==$("#webcontractuser").length?$('*[data-productcode="'+a.Items[c].Product_Code+'"] .price').not('[data-noprice="true"]').text(d):0==$("#webcontractuser").length&&$('*[data-productcode="'+a.Items[c].Product_Code+'"]').not('[data-noprice="true"]').append('<span class="price">'+d+"</span>"),$('*[data-productcode="'+a.Items[c].Product_Code+'"] .stock')&&0==$("#webcontractuser").length&&(a.Items[c].StockLevel>0?$('*[data-productcode="'+a.Items[c].Product_Code+'"] .stock').text("Stock Level: "+a.Items[c].StockLevel+a.Items[c].StockLevelUnitOfMeasurement):$('*[data-productcode="'+a.Items[c].Product_Code+'"] .stock').html("Stock Level: "+a.Items[c].StockLevel+a.Items[c].StockLevelUnitOfMeasurement+"<br/>Stock Due: "+a.Items[c].DueIn)),$('*[data-productcode="'+a.Items[c].Product_Code+'"]').find(".b2baddtobasket, .b2baddsampletobasket, .b2beditbasket, .b2beditsamplebasket").removeClass("b2bdisabled"))},"ProductCodes="+c))}function m(a,b){e(u+"/redant/GetCustomers.aspx?term="+a.term,function(a){var c=$.map(a,function(a){return{label:a.CUSName+" ("+a.CUSREF+" - "+a.SELLCO+")",value:a.CUSREF,name:a.CUSName}});b(c)})}function n(){var a=$('<div class="contentForm"><div class="field text autocomplete"><label for="b2bcustomerselection">Start typing a customer name and select an option from the list</label><input type="text" id="b2bcustomerselection" name="b2bcustomerselection" placeholder="Start typing a customer name..." /></div></div>');a.find("input").autocomplete({source:m,minLength:3,select:function(a,b){b.item&&e(u+"/redant/setcustomer.aspx?CUSREF="+b.item.value+"&CUSName="+b.item.name,function(){window.selectedCustomerRef=b.item.value,g(b.item.name.trim()),closeIframeWindow(),$(document).trigger("priceupdate")})},create:function(){setTimeout(function(){$("#b2bcustomerselection").focus()},500)}}),b("Select Customer","small","",a)}function o(){var a=$.Deferred();return e(u+"/redant/minibasket.aspx",function(b){$("li.basket .miniBasket").remove(),$.get("/_js/template/b2b-minibasket.html").done(function(c){$("li.basket").append(_.template(c,b,{variable:"basket"}));var d=b.AvailableBaskets.length;$("li.basket > a > span.global-util-count").text("("+d+")"),$("li.basket input#switch").autocomplete({source:m,minLength:3,select:function(a,b){b.item&&($.support.cors=!0,$.ajax({url:u+"/redant/setcustomer.aspx?CUSREF="+b.item.value+"&CUSName="+encodeURIComponent(b.item.label),crossDomain:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(){}}))}}),a.resolve(b)})},null,"POST","json"),a.promise()}function p(){return $(this).find(".alertInfo").remove(),0!=$(this).find("input[type='checkbox']:checked").length||($(this).prepend('<div class="alertInfo error"><span>You must select a basket to continue to the secure checkout</span></div>'),!1)}function q(){window.location.href.toLowerCase().indexOf("b2bcheckout/payment")>0&&$("html, body").animate({scrollTop:$("#b2bPaymentSection").position().top-$("#header").outerHeight()},1e3)}var v,x,r="WG01.WEB",s="WG09.WEB",t="WG01.WEB",u="https://online.walkergreenbank.com/raintegration",r="WG01.WEB",s="WG09.WEB",t="WG01.WEB";return(window.location.href.indexOf("uat")||window.location.href.indexOf("staging")||window.location.href.indexOf("colonynext"))&&(u="https://online.walkergreenbank.com/raintegrationtrial",r="TRIAL2WG01.WEB",s="TRIAL2WG09.WEB",t="TRIAL2WG01.WEB"),v=Redant.util.browser.isMobile()||Redant.util.browser.isTablet()?"touchstart":"click",window.getMiniBasket=o,Wg.QuickPurchase&&($("table.quickPurchase").addClass("b2b"),Wg.QuickPurchase.orderHandlerDelegate=a),window.selectedCustomerRef="",{returnValue:""},x=!1,{init:function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),$(window).load(function(){f(),$("*[data-productcode]").find("a.b2baddtobasket, a.b2baddsampletobasket, a.b2beditbasket, a.b2beditsamplebasket").addClass("b2bdisabled"),j(),setInterval(j,3e4),h(),l(),$(document).on("quickview:expanded productdragstop",function(){$(document).trigger("priceupdate")}),k()}),$(document).ready(function(){q(),o(),$(".scrapControls .sample").remove(),$(document).on("keydown",".field.orderreference input",function(a){var b=a.which||a.keyCode;return!a.shiftKey&&!a.altKey&&!a.ctrlKey&&b>=48&&b<=57||b>=96&&b<=105||189==b||109==b||b>=65&&b<=90||8==b||9==b||13==b||35==b||36==b||37==b||39==b||45==b}),$(document).on(v,"#b2bLogout,.b2bLogout",function(){return i(),!1}),$(document).on(v,"#b2bChangeCustomer,#customer a",function(){return n(),!1}),$(document).on(v,"#b2bGoToBasket",function(a){return a.preventDefault(),window.location="/b2b-members/webtex/basketsummary/",!1}),$("#siteLinks ul li.basket a").attr("href","/b2b-members/webtex/basketsummary/"),_.each($("select.savedAddresses"),function(a){$(a).children("option:selected").val().length>0?$(a).parents("fieldset").children(".addressDetails").hide():$(a).parents("fieldset").children(".addressDetails").show()}),$("select.savedAddresses").change(function(){$(this).children("option:selected").val().length>0?$(this).parents("fieldset").children(".addressDetails").hide():$(this).parents("fieldset").children(".addressDetails").show()}),$(".b2bDelivery .addNewAddress").on("click",function(a){a.preventDefault();var b=this,c=$(b).data("custref"),d=$(b).data("custname"),e=$(b).data("iscfa")||!1,f=$("#addressDetails");return $.get("/b2b-members/b2bcheckout/AddDeliveryAddress?CustomerReference="+c+"&CustomerName="+d+"&isCfaAddress="+e,function(a){f.empty().html(a).append("").foundation("reveal","open"),_.each($("select.savedAddresses"),function(a){$(a).children("option:selected").val().length>0?$(a).parents("fieldset").children(".addressDetails").hide():$(a).parents("fieldset").children(".addressDetails").show()}),$("select.savedAddresses").change(function(){$(this).children("option:selected").val().length>0?$(this).parents("fieldset").children(".addressDetails").hide():$(this).parents("fieldset").children(".addressDetails").show()}),$("#addressDetails form").on("submit",function(a){a.preventDefault();var b=$(this);return $.validator.unobtrusive.parse(b),$(b).valid()&&$.ajax({type:"POST",url:b.attr("action"),data:b.serialize(),success:function(a){var g,h,i,b=e?".cfa ":" ",d=e?".deliveryAddress.cfa ul":".deliveryAddress:not(.cfa) ul";if(a.success&&!0===a.success){for(g=a.address.split("|"),h=$("#"+c).find(d),0==h.length&&(h=$("<ul>").prependTo("#"+c+" "+d)),h.empty().append("<li><strong>"+g[0]+"</strong></li>"),i=1;i<g.length;i++)"Y"!==g[i]&&"D"!==g[i]&&"T"!==g[i]&&h.append("<li>"+g[i]+"</li>");$("#"+c+" .b2bDeliveryAddressHeader"+b).text("Selected"+(e?" CFA ":" ")+" Delivery Address"),f.foundation("reveal","close")}}}),!1})}),!1}),$("form.basketTotals").submit(p),$("#b2bAcceptTermsAndConditions").on("change",function(){$(this).prop("checked")?$("#termsAndConditionsError").hide():$("#termsAndConditionsError").show()}),$("form#b2bMakePayment").submit(function(){var a=$("#b2bAcceptTermsAndConditions").prop("checked");return a?$("#termsAndConditionsError").hide():$("#termsAndConditionsError").show(),a}),$('input[type="radio"][name="paymentType"]').on("change",function(){var a=$(this).val();$("#billingAddress").hide(),"card"==a&&$("#billingAddress").show()}),$(document).on("priceupdate",function(){l()})})},b2bNavigation:function(){e(u+"/redant/clientinfo.aspx",function(a){var b=a.nav.Nav.menu.menuitem,c=$('<header class="pageHeader"><nav class="top-bar" role="navigation"><ul class="title-area"><li class="name"><a href="#"><h1>B2B Menu</h1></a></li><li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li></ul><section class="top-bar-section"><ul><li><a href="/b2b-members/webtex/?webtexUrl=%2F">Home</a></li></ul></section></nav></header>'),d='<li><a href="/b2b-members/webtex/?webtexUrl=<%=item.link%>"><%=(item.title || "")%></a></li>',e=c.find(".top-bar-section ul");_.each(b,function(a){var c,b=$(_.template(d,a,{variable:"item"}));a.menu&&a.menu.menuitem.length>0&&(b.addClass("has-dropdown"),c=$('<ul class="dropdown"></ul>'),_.each(a.menu.menuitem,function(a){c.append(_.template(d,a,{variable:"item"}))}),b.append(c),e.append(b))}),e.append('<li><a href="/shop/quick-order/">Quick Order</a></li><li><a href="/trade/">Trade Area</a><li><a class="b2bLogout" href="#">Log Off</a></li>'),Redant.util.browser.isMobile()||("wg"===sitekey.toLowerCase()?$(".pageContainerInner").prepend(c):$("#container").prepend(c)),$(document).foundation("off").foundation()})}}}(),Wg.b2b.init(),$(document).ready(function(){$(document).bind("touchmove",!1),"true"===Redant.util.getQuerystring("newScrapbook")?$("#scrapbookName").focus():$("#scrapbookName").val("SCRAPBOOK NAME"),$("#scrapbookName").keydown(function(){setTimeout(function(){saveScrapbook()},400)}),$(document.body).on("mousedown","#scrapBook .scrap",function(a){$("#scrapBook .scrap").removeClass("selected"),$(this).addClass("selected")}),$("#scraps .scrap").draggable({revert:!0,stop:function(){}});var a=$("#scrapBook .added"),c=($("#scrapBook .added .scrapInner"),$("#scrapBook .added .scrapInner img"));c.resizable({aspectRatio:!0,handles:"ne, nw, se, sw",stop:function(a,b){saveScrapbook()}}),a.draggable({revert:!1,containment:$("#scrapBook"),stop:function(a,b){saveScrapbook()}}),c.parent().rotatable({stop:function(){}}),$("#scrapBook").droppable({accept:function(a){if(a.hasClass("scrapAdd")||"bar"==a.attr("id"))return!0},drop:function(a,b){b.draggable.removeClass("scrapAdd");var c=$(scrapBook).find(".scrap").length;$(scrapBook).append('<div id="1" class="scrap added" style="z-index:'+c+"; width: 100px; height: 100px; left: "+(b.draggable.position().left-70)+"px; top: "+(b.draggable.offset().top-164)+'px; position: absolute;">        \t\t\t\t\t\t\t<div class="scrapInner">'+b.draggable.html()+"</div>\t\t\t\t\t\t\t    </div>"),$(b.draggable.remove());var d=$("#scrapBook .added:last-child"),f=($("#scrapBook .added:last-child .scrapInner"),$("#scrapBook .added:last-child .scrapInner img"));f.resizable({aspectRatio:!0,handles:"ne, nw, se, sw",stop:function(a,b){saveScrapbook()}}),d.draggable({revert:!1,containment:$("#scrapBook"),stop:function(a,b){saveScrapbook()}}),f.parent().rotatable({stop:function(){}}),$("#scrapControls").fadeIn(300),$("#scrapBook .added").removeClass("selected"),$("#scrapBook .added:last-child").addClass("selected"),saveScrapbook()}}),$("#scrapControls .button").click(function(a){var b=$(".selected"),c=b.siblings(),e=(c.map(function(){return $(a.currentTarget).css("z-index")}),parseInt(b.css("z-index")));switch(a.currentTarget.id){case"top":e=$("#scrapBook .scrap").length+1,saveScrapbook();break;case"zup":e+=1,saveScrapbook();break;case"zdown":e-=1,saveScrapbook();break;case"bottom":e=0,saveScrapbook();break;case"remove":$(".selected").fadeOut(300,function(){$(".selected").remove()}),saveScrapbook()}return-1===e&&(e=0,c.each(function(){var a=parseInt($(this).css("z-index"))+1;$(this).css("z-index",a),$(this).find(".zIndex").text(a)})),b.css({zIndex:e}),a.stopPropagation(),!1})});var CategorySearch={isNewSearch:!1,ajaxReference:null,previousScrollX:0,previousScrollY:0,disableScroll:!1,disable:!1,page:1,scrollTrigger:.7,query:"",delay:null,noResultsTemplate:$('<p id="noCollectionFoundMessage">No collections found</p>'),form:$("#formSearch"),isloadingPage:!1,render:function(a){var b=this,c=$(a).find("#subCategories"),d=c.find("div.item"),e=$("#subCategories");b.isNewSearch?($("#noCollectionFoundMessage").remove(),0==d.length?(e.empty(),e.after(b.noResultsTemplate)):e.empty().append(d)):d.length>0&&e.append(d);for(var f=c.find("img"),g=0;g<f.length;g++)f[g].complete||Redant.util.placeholderStart(f[g]);b.isloadingPage=!1},execute:function(a){var b=this;if(!b.isloadingPage){b.isloadingPage=!0;var c=$(".loading-bar");b.isNewSearch=a,b.isNewSearch?(b.ajaxReference&&(b.ajaxReference.abort(),$(".actionLoader").remove()),b.disable=!1,b.page=1,b.getSearchQuery()):(b.page++,c.show());var c=Redant.util.ajaxLoader();$("body").append(c),c.css({"z-index":"9999",bottom:"40px"}),c.show();var d=window.location.href.split("?")[0];d=d.split("#")[0],d+="?page="+b.page,b.ajaxReference=$.ajax({url:d,type:"POST",data:b.query,responseType:"html",success:function(a){c.fadeOut(),c.remove(),b.ajaxReference=null,null!=a&&void 0!=a&&""!=a.replace(/ +?/g,"")?b.disable=!1:b.disable=!0,b.render(a)}})}},arrayHasValues:function(a){for(var b=!1,c=0;c<a.length;c++)if(null!==a[c]||void 0!==a[c]&&""!==a[c]){b=!0;break}return b},getSearchQuery:function(){var a=this;a.query=a.form.serialize()},deserialize:function(a){for(var b=this,c=b.form,d={},e=a.split("&"),f=0;f<e.length;f++){var g=e[f].split("="),h=decodeURIComponent(g[0]),i=g.length>1?decodeURIComponent(g[1].replace(/\+/g,"%20")):null;h in d||(d[h]=[]),d[h].push(i)}for(var f=0;f<Object.keys(d).length;f++)c.find("[name='"+Object.keys(d)[f]+"']").val(d[Object.keys(d)[f]])},init:function(){var a=this;$("nav.pagination").remove();var b=window.location.hash.substring(1);return null!=b&&void 0!=b&&""!=b?a.deserialize(b):a.getSearchQuery(),$(document).on("submit","#formSearch",function(b){return b.preventDefault(),a.execute(!0),!1}),$(window).on("scroll",function(b){"down"!==a.getScrollDirection(this).Y||a.disableScroll||a.disable||null!=a.ajaxReference||$(window).scrollTop()/($(document).height()-$(window).height())>a.scrollTrigger&&(a.disableScroll=!0,a.execute(!1),a.disableScroll=!1)}),a},getScrollDirection:function(a){var e,f,b=this,c=$(a).scrollTop(),d=$(a).scrollLeft();return c>b.previousScrollY?f="down":c<b.previousScrollY&&(f="up"),d>b.previousScrollX?b.scrollDirectionX="right":d<b.previousScrollX&&(e="left"),b.previousScrollY=c,b.previousScrollX=d,{X:e,Y:f}}};$(".input-postfix-reset").click(function(a){return $("#filterKeyword").val("").focus(),$("#formSearch").submit(),!1}),$("#selectStandard").change(function(a){return $("#formSearch").submit(),!1}),$("#formSearch input").keypress(function(a){if(a.which&&13==a.which||a.keyCode&&13==a.keyCode)return $("#formSearch").submit(),!1}),$(window).load(function(){for(var a=$("#subCategories").find("img"),b=0;b<a.length;b++)a[b].complete||Redant.util.placeholderStart(a[b])}),$(document).ready(function(){var a=CategorySearch.init();""!=window.location.hash&&a.execute(!0)}),$(document).ready(function(){function a(a){return null==a||""===a}function b(){var a=$("#addAddressForm");$("#addAddressForm");null!=a&&a.submit()}$("#Address_Postcode").keydown(function(a){if(13===a.keyCode)return $("#findAddress").trigger("click"),!1}),$("#findAddress").on("click",function(a){a.preventDefault();var b=$(this).attr("href");$.ajax(b,{data:{postcode:$("input[id$=Postcode]").val()},success:function(a){$("#selectAddress").find("option").remove().end(),a.Success?($("#findAddressError").hide(),$("#selectAddress").append($("<option></option>").attr("value","").text("Please Choose")),a.Addresses.length>0?($.each(a.Addresses,function(a,b){$("#selectAddress").append($("<option></option>").attr("value",b.Id).text(b.StreetAddress))}),$("#addressSelection").addClass("highlighted").show()):($("#findAddressError").show(),$("#addressSelection").hide().removeClass("highlighted"))):$("#findAddressError").show()}})}),$("#selectAddress").bind("change",function(c){$.ajax({url:$(this).attr("data-callbackUrl"),data:{id:$("#selectAddress").val()},success:function(c){if(c.Success)if(null!=c.SelectedAddress){if(console.log(c.SelectedAddress),a(c.SelectedAddress.BuildingName)&&a(c.SelectedAddress.BuildingNumber)&&!a(c.SelectedAddress.Company))$("input[id$=Line1]").val(c.SelectedAddress.Company+", "+c.SelectedAddress.Line1);else{$("input[id$=Line1]").val(c.SelectedAddress.Line1),$("input[id$=Town]").val(c.SelectedAddress.PostTown);var d="London"===c.SelectedAddress.PostTown?"London":c.SelectedAddress.County;$("input[id$=County]").val(d),$("input[id$=Postcode]").val(c.SelectedAddress.Postcode),$("input[id$=CountryISO2]").val(c.SelectedAddress.CountryISO2),$("#addressSelection").hide()}b()}else $("#addressSelection").show()}})})});