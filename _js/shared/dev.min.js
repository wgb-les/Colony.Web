function initializeDraggables(){0==$("#draggables").length&&$("body").prepend('<div id="draggables"></div>'),Redant.util.browser.isMobile()||$("*[data-productcode], *[data-imageassetid], *[data-imageurl]").not(".no-drag, .scrapAdd").draggable({cursor:"move",revert:"invalid",helper:function(){return $copy=$(this).clone(),$copy},appendTo:"#draggables",scroll:!1,distance:30,zIndex:999999,start:function(e,t){t.helper.css("width","123px"),t.helper.css("height","123px")}}).disableSelection()}function initializeShareDialog(){$("#share").detach().appendTo($("#content"))}function megaDropdown(){var e=$(".has-mega-dropdown"),t=0;e.each(function(){var o=this,a=$(this),n=$("body");$(".mega-dropdown",a);activeClass="mega-dropdown-active",o.toggleOverlay=function(e){"show"===e?$(".mega-dropdown-overlay").addClass(activeClass):"hide"===e&&$(".mega-dropdown-overlay").removeClass(activeClass)},o.addOverlay=function(){0===$(".mega-dropdown-overlay").length&&n.append('<div class="mega-dropdown-overlay"></div>')},o.bindUI=function(){function n(){0!=t&&clearTimeout(t)}if(Modernizr.touch){$("a",a).first().on("click",function(t){if(!$(this).parent().hasClass(activeClass))return t.preventDefault(),e.removeClass(activeClass),$(this).parent().addClass(activeClass),o.toggleOverlay("show"),!1});var i=function(e){var t=$(".mega-dropdown-active .mega-dropdown");t.is(e.target)||0!==t.has(e.target).length||(t.parent().removeClass(activeClass),o.toggleOverlay("hide"))};$("body").on("click",i),$(".mega-dropdown-overlay").on("click",i)}else a.on("mouseenter",function(){var a=$(this);n(),t=setTimeout(function(){e.removeClass(activeClass),a.addClass(activeClass),o.toggleOverlay("show")},150)}),a.on("mouseleave",function(){n(),t=setTimeout(function(){t=0,e.removeClass(activeClass),o.toggleOverlay("hide")},350)})},o.init=function(){o.bindUI(),o.addOverlay()},o.init()})}_.templateSettings.variable="rc",window.Wg=window.Wg||{},Wg.Common=Wg.Common||function(){var e=!1,t=function(e){e.draggable=!1,e.onmousedown=function(e){return e.preventDefault(),!1},e.ondragstart=function(e){return e.preventDefault(),!1}},o=function(){if(window.location.href.toLowerCase().indexOf("checkout")>0&&-1==window.location.href.toLowerCase().indexOf("b2bcheckout"))if($(".alertInfo.error:visible").length>0)$("html, body").animate({scrollTop:$(".alertInfo.error").first().position().top-$("#header").outerHeight()},1e3);else{var e=Redant.util.getQuerystring("edit");if(null!==e&&""!==e&&void 0!==e||(e=$(".loginRegister").length>0?"loginRegister":"aboutYou"),void 0!==$("#"+e).position()&&$("html, body").animate({scrollTop:$("#"+e).position().top-$("#header").outerHeight()},1e3),"delivery"==e){var t=$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio:checked");2==$(t).val()&&setTimeout(toggleStockists(),1e3)}}},a=function(){window.location.href.toLowerCase().indexOf("shop")>0&&window.location.href.toLowerCase().indexOf("?show")>0&&$("html, body").stop(!0,!0).animate({scrollTop:$("#productsViewTab").position().top-$("#header").outerHeight()},1e3)},n=function(){var e=$("body .notification");e.remove(),(e=$('<div class="notification"><h2>Item Added to Scrapbook</h2></div>').prependTo("body")).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){e.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20},i=function(){return $(document).width()<=768&&$(".scrapBookAdd").css("left","20%"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn("fast",function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},r=function(e){return $(".scrapBookAdd").css("margin-top",$(e).offset().top-120+"px"),$(".scrapBookAdd").css("left",$(e).offset().left-60+"px"),$(".fader").fadeTo("fast",.5,function(){$(".scrapBookAdd").fadeIn(300,function(){$(".scrapBookAdd").css("overflow","visible")})}),!1},s=null,d=null,c=window.getMiniBasket=function(t){var o=$("#SiteKey").val();if(e&&(!t||!t.force))return d;if(s)return s;var a=function(t){$("li.basket .miniBasket").remove(),$("li.basket").append(t);new FormElement({type:"Spinner",elements:$("li.basket .spinner")});e=!0,$(".miniBasket .items").niceScroll({}),$(".more-info").toggleText("More Information","Less Information")},n=$.ajax({url:"/actionuri/ShopPurchase/Basket/MiniBasket/",cache:!1,success:function(e){d=e,s===n&&(s=null),"Wg"!==o&&a(e)}});return s=n,n},l=function(){var e="";"Zoffany"===$("#SiteKey").val()&&(e+=" dark");new QuickView($(document.body).not(".shopPaint").find(".productCollections:not(.no-quick-view)"),"collection",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader()),new QuickView($(document.body).not(".searchTemplate, .productPage, .scrapBook").find(".productList:not(.no-quick-view)"),"product",$("#header").outerHeight()+20+"px",function(){initializeDraggables(),initializeShareDialog()},Redant.util.ajaxLoader())},u=function(e,o){e.stopPropagation();var a=o.draggable.data("productcode"),i=(o.draggable.data("skuid"),o.draggable.data("imageassetid")),r=o.draggable.data("productname"),s=$("#studio ul");o.draggable.draggable("option","revert",!1);var d=o.draggable.offset(),c=s.find("li div.details").not("*[data-productcode], *[data-imageassetid]").first(),l=o.draggable.offset(),u=null,p=null;return u=d.left>l.left?d.left-l.left:-(l.left-d.left),p=d.top>l.top?d.top-l.top:-(l.top-d.top),o.draggable.animate({left:"+="+u,top:"+="+p},0),o.draggable.draggable("option","revert",!0),$.post("/scrapbook/scraps/savescrap",{productCode:a,imageAssetId:i,name:r},function(e){c.replaceWith(e),n(),$(".scroller img, .scroller .scrapItem a").each(function(e,o){t(this)}),$(document).trigger("productdragstop")}),!1},p=function(){$(document.body).on("click touchstart",".fader,.scrapBookAdd .close-reveal-modal",function(e){return e.preventDefault(),$(".scrapBookAdd").fadeOut("fast",function(){$(".fader").fadeOut()}),!1}),$(document.body).on("click",".addToScrapbookPopup",function(e){return i()}),$(document.body).on("click",".addToScrapbookPopupPaint",function(e){return r($(this))}),$(document.body).on("click",".scrapBookAdd .inner ul li a",function(e){if($(this).not(".block")){e.preventDefault();return f($("a.scrapbook"),$(this).data("scrapbook-id"),function(e){$(".scrapBookAdd .inner").fadeOut(200,function(){e.success?$(".scrapBookAdd").append("<p style='display:none;'>Added to your moodboard</p>"):$(".scrapBookAdd").append("<p style='display:none;'>Sorry, we have been unable to add this item to your moodboard</p>"),$(".scrapBookAdd p").fadeIn(),setTimeout(function(){$(".scrapBookAdd p").fadeOut(200,function(){$(".scrapBookAdd p").remove(),$(".scrapBookAdd .inner").fadeIn()})},1e3)})}),!1}}),$(".addSrapbookButton").click(function(e){e.preventDefault();var t=$(".scrapBookAdd .inner #Name").val().trim();$(".scrapBookAdd .inner .error").remove(),null!=t&&""!=t?$.post("/scrapbook/moodboards/addscrapbook",{scrapbookName:t},function(e){e.success&&($(".scrapBookAdd .inner #Name").val(""),$('<li><a href="#" data-scrapbook-id="'+e.id+'">'+e.name+"</a></li>").prependTo($(".scrapBookAdd .inner ul")))}):$('<div class="alertInfo error">Please enter a name.</div>').prependTo(".scrapBookAdd .inner").fadeIn()}),$(".scrapBookAdd .inner #Name").on("keydown",function(){$(".scrapBookAdd .inner .alertInfo").fadeOut().remove()})},f=function(e,t,o){var a=e,n=$(a).data("productcode"),i=($(a).data("skuid"),$(a).data("productimage"),$(a).data("productname")),r=$(a).data("imageassetid"),s=$("#studio ul").find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();$.post("/scrapbook/moodboards/savetoscrapbook",{productCodes:n,scrapbookId:t,imageAssetId:r,name:i},function(e){e.success&&0!=e.studioItemId&&$.get("/scrapbook/scraps/getstudioitem",{studioItemId:e.studioItemId},function(e){s.replaceWith(e)}),o&&o(e)})},h=function(){if(!Redant.util.browser.isMobile()&&!Redant.util.browser.isTablet()){var t=$("#SiteKey").val();window.location.href.indexOf("checkout")<0&&$(".basket").hoverIntent({over:function(o){if(e)$(".miniBasket").stop().fadeIn("fast");else{var a="";"Zoffany"===t&&(a+=" dark"),$('<div class="miniBasket b2c"><div class="ajaxLoader'+a+'"></div></div>').appendTo($("li.basket")),getMiniBasket().then(function(){$(".miniBasket").stop().fadeIn("fast"),$(".field.spinner").forceNumeric()})}},timeout:500,out:function(t){var o=$(".miniBasket");o.stop().fadeOut("fast",function(){e||o.remove()})}})}},m=function(){$.ajax({url:"/basket/minibasketparital",cache:!1,success:function(e){$(".wgBasket-count").replaceWith(e),"Wg"!==$("#SiteKey").val()&&h()}})};return{init:function(){if($(window).load(function(){$(document).on("quickview:expanded productdragstop",function(){setTimeout(function(){var e=$(".selectedItemContainer .selectedItem").outerHeight();$(".selectedItemContainer").css("height",e)},1e3)}),Wg.Menus.init()}),$(document).ready(function(){if($("#paintSurface").length>0){var i=$("#paintFinish").children();$("#paintSurface").on("change",function(e){var t=$(this).val(),o=$(".paintFinishWrapper"),a=$("#paintFinish");if(a.val(""),o.addClass("hide"),resetProductOptions(),$(".product-option").hide(),""!=t){a.children().remove();var n=t.split("-");$.each(i,function(){var e=$(this).attr("value");(""==e||$.inArray(e,n)>-1)&&a.append(this)}),a.val(""),o.removeClass("hide")}calculateProductOptionTotals()}),$("#paintFinish").on("change",function(){$(".product-option").hide();var e=$(this).val();if(resetProductOptions(),""!=e){var t=$(".product-option[data-product-option="+e+"]"),o=$(".product-summary");t.length>0?(1==t.length&&($(t[0]).find(".js-spinner-split").val("1"),$(".products-summary-action .button").removeClass("disabled")),t.show(),o.removeClass("hide")):$(".product-option.no-products").show()}calculateProductOptionTotals()})}$(".product-option").length>0&&($(".ui-spinner-button").on("click",function(){var e=$(this).parent();$spinner=$(".ui-spinner-input",e),inputValue=$spinner.val(),calculateProductOptionTotals(inputValue),toggleActiveState($spinner[0])}),toggleActiveState=function(e){var t=e.value,o=$(e);t>0?o.parents(".product-option").addClass("active"):o.parents(".product-option").removeClass("active"),0===$(".product-option.active").length?$(".products-summary-action .button").addClass("disabled"):$(".products-summary-action .button").removeClass("disabled")},resetProductOptions=function(){$(".js-spinner-split").spinner("value",1),$(".products-summary-action .button").addClass("disabled"),$(".product-option").removeClass("active"),$(".product-summary").addClass("hide")},calculateProductOptionTotals=function(){var e=0,t=0,o=$('.product-option:visible:not(".product-option-heading")'),a="/basket/action/?command=addmultiple&redirectUrl="+escape(window.location.href),n="";$.each(o,function(){var o=$(this),a=o.data("producti-option-skuid"),i=parseFloat(o.data("product-option-price")||0),r=parseFloat($(".js-spinner-split",o).val()||0);r>0&&(n=n+a+":"+r+","),t+=r,e+=r*i}),n=n.substring(0,n.length-1),a=Redant.util.setQuerystring(a,"itemsToAdd",n);var i=t+(1==t?" item":" items");$(".product-totals-count").text(i),$("#totalProductOptionsCost").text(e.toFixed(2)),$(".products-summary-action .button").attr("href",a)}),classToggle.toggleOnEvent("click",".js-mobile-nav-toggle","href","mobile-nav-open",!0,!0),globalBrands.init(),$(".has-mega-dropdown").length&&megaDropdown(),$("#RememberMe").on("click",function(){var e=$(this).prop("checked");$(this).siblings('input[type="hidden"]').val(e)}),$.validator.methods.date=function(e,t){return!0},$(".lazy").showImageInViewport(),$("#timeTravelNotice").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),$("#timeTravelNoticeClose").click(function(){$("#timeTravelNotice").animate({right:"-320px",avoidCSSTransitions:!0},500,function(){})}),$(".field.spinner input").forceNumeric(),jQuery.fx.interval=20,l(),"Wg"!==$("#SiteKey").val()&&h(),$(document.body).on("click","#miniBasketUpdate, #miniBasketCheckout",function(t){var o=this,a=$(".miniBasket.b2c form"),n=0;if($(".items .spinner",a).each(function(){var e=$("input",$(this)),t=$('input[type="hidden"]',$(this)),o=parseInt(e.val());t.val(o),n+=o}),$(".global-util-count").text("("+n+")"),a.length>0){var i=$(a)[0].action;i+="&command="+$(o).val(),$.post(i,$(a).serialize(),function(t){if(window.location.href.indexOf("basket")>-1)location.reload();else{$("nav#siteLinks li.basket a").html("<span>Basket ("+t.basketQuantity+")</span>"),e=!1;var a=$("#basketMessage");a.removeClass("confirmation"),a.removeClass("error"),$(".miniBasket").fadeIn("fast",function(){if(1==t.success){if(a.addClass("confirmation"),a.text("Your basket has been updated"),"GoToCheckout"==$(o).val())return void window.location.replace(t.url)}else{a.addClass("error");var e=[];$.each(t.errors,function(t,o){e.push(o.Message)}),a.html(e.join("<br/><br/>"))}a.fadeIn("slow",function(){setTimeout(function(){a.fadeOut("slow")},5e3)})})}})}return!1}),$(".furnitureItemImages").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}}),$(".collectionCategory > .item a.furnitureType").click(function(e){e.preventDefault(),$(".collectionCategory > .item a.furnitureType").parent().removeClass("selected"),$(this).parent().addClass("selected");var t=$(this).data("furniture-type");return $.get("/furniture/furniture/collections/?type="+t,function(e){$("#collectionListWrapper").html(e),$("#collectionListWrapper .greyOut a").attr("href","javascript:void(0)")}),!1}),$("#footer, .bottomMenu#studio").droppable({accept:"*[data-productcode], *[data-imageassetid], *[data-imageurl]",hoverClass:"add-to-scrapbook-hover",drop:u,tolerance:"touch",greedy:!0}),$("a[data-attribute-name]").on("click",function(e){e.preventDefault();var t=$(this),o=t.attr("data-attribute-name"),a=t.attr("data-attribute-id"),n=t.attr("data-attribute-option-id");return $("#"+o+"_"+n).val(a+"-"+n),!1}),$("a[data-colour-code]").on("click",function(e){e.preventDefault();var t=[];return $("a[data-colour-code]").each(function(e,o){var a=$(o);a.hasClass("selected")&&t.push(a.attr("data-colour-code"))}),$("#SelectedColours").val(t.join(",")),!1}),$(document.body).on("click",".addToBasket",function(e){if(e.preventDefault(),e.stopPropagation(),$(this).hasClass("disabled"))return!1;var t=Redant.util.ajaxLoader();$("body").append(t),t.css({"z-index":"9999",bottom:"40px"}),t.show();var o=$(this).parents(".scroller");return o.length>0&&o.click(),$.ajax({url:$(this).attr("href").replace(/quantity=[0-9]*/,"quantity="+$(".ui-spinner-input",".product-option").val()),method:"GET",cache:!1,success:function(e){if(window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)location.reload();else{var o=$("body .notification");if(o.remove(),t.fadeOut(),t.remove(),"Successful"===e.Status){var a="";e.BasketWarnings.length>0&&(a="<p>",$.each(e.BasketWarnings,function(e,t){a+=t.Message+"<br><br>"}),a+="</p>"),o=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Basket</h2>'+a+"</div>").prependTo("body"),m()}else{var n=[];$.each(e.BasketErrors,function(e,t){n.push(t.Message)}),o=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;'+n.join("<br/><br/>")+"</h2></div>").prependTo("body")}o.animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){o.animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}),!1}),$(document.body).on("click",".miniBasket.b2c a.remove",function(t){t.preventDefault();var o=$(this).parent(),a=o.children("legend").text();if(!o.hasClass("delete-inprogress")){var n=1*o.find("input.ui-spinner-input").val(),i=$(".global-util-count").text();i=1*i.substring(1,i.length-1),(i-=n)<0&&(i=0),$(".global-util-count").text("("+i+")"),o.addClass("delete-inprogress"),$.get(this.href,function(t){window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1?location.reload():(e=!1,c().then(function(){$(".miniBasket").fadeIn("fast",function(){"Successful"==t.Status&&($("#basketMessage").addClass("confirmation"),$("#basketMessage").text(a+" has been removed from the basket."))})}))})}}),$(document.body).on("click",".deleteScrap",function(e){e.preventDefault();var t=$(this),o=t.parent();return $.post(t.attr("href"),function(e){e.Success&&o.closest(".scrapItem").fadeOut(300)}),!1}),$("a[data-tab-content-id]").on("click",function(e){e.preventDefault();var t=$("a[data-tab-content-id].selected"),o=t.data("tab-content-id"),a=$("#"+o);t.removeClass("selected"),a.removeClass("active");var n=$(this),i=n.data("tab-content-id"),r=$("#"+i);return n.addClass("selected"),r.addClass("active"),!1}),$("#postNewComment").submit(function(e){e.preventDefault();var t=this;return $("#postCommentError, #postCommentSuccess").hide(),$("#recaptchaError").remove(),$.post(this.action,$(this).serialize(),function(e){!0===e.success?($(t).find("input[type=text], textarea").val(""),$("#postCommentSuccess").fadeIn(1e3),setTimeout(function(){$("#postCommentSuccess").fadeOut(400)},6e3)):(e.modelState[""]&&"incorrect-captcha-sol"===e.modelState[""][0]&&$("#recaptcha_area").before('<div id="recaptchaError" class="alertInfo error"> Please ensure you enter the characters exactly as they appear in the box below</div>'),$("#postCommentError").fadeIn(1e3),Recaptcha.reload())}),!1}),$(document.body).on("click","#comments .pagination .pageNumbers li a",function(e){e.preventDefault();var t=this;return $.get(this.href,function(e){$(t).find("input[type=text], textarea").val(""),$("#articleComments").replaceWith(e)}),!1}),$("#enquiryForm form").submit(function(e){if($.validator.unobtrusive.parse($(this)),e.preventDefault(),$(this).valid()){$(this).serialize();$(this).parent().slideUp("fast",function(){$("html, body").animate({scrollTop:$(".ajaxLoader").position().top-$("#header").outerHeight()},1e3),$(".ajaxLoader").parent().slideDown("fast")});var t=this;return $.post(this.action,$(this).serialize(),function(e){$(t).find("input[type=text], textarea").val(""),$(t).find("select").find("option:first-child").prop("selectedIndex",0),$("#enquiryFormThankYou").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(t).parent().show()},1e3)}).error(function(){setTimeout(function(){$(".ajaxLoader").parent().hide(),$(t).parent().show()},1e3)}),!1}}),$(document.body).on("submit","#sendToAFriend",function(e){if($.validator.unobtrusive.parse($("#sendToAFriend")),e.preventDefault(),$(this).valid()){var t=$(this).serialize();$(this).parent().slideUp("fast",function(){$(".ajaxLoader").parent().slideDown("fast")}),$("#sendToAFriend *").attr("disabled","disabled"),$("#sendToAFriend").css("opacity","0.2");var o=this;return $.post(this.action,t,function(e){$("body #sendToAFriendSubmitted").remove();$('<section id="sendToAFriendSubmitted" class="reveal-modal medium">\t\t\t\t\t\t\t\t <div class="bd-reveal-modal">\t\t\t\t\t\t\t\t\t<h2>Thank you</h2>\t\t\t\t\t\t\t\t\t<p>Your email has been sent.</p>\t\t\t\t\t\t\t\t\t<a class="close-reveal-modal icon-remove"><span>Close</span></a>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</section>').prependTo("body")}).done(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),$(o).find("input[type=text], textarea").val(""),$("#sendToAFriendSubmitted").foundation("reveal","open"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(o).parent().show()},1e3)}).error(function(){$("#sendToAFriend").css("opacity",""),$("#sendToAFriend *").removeAttr("disabled"),setTimeout(function(){$(".ajaxLoader").parent().hide(),$(o).parent().show()},1e3)}),!1}}),$(document.body).on("click","#asSeenInSamples .productList .item, #inspirationSamples .productList .item",function(e){return e.preventDefault(),$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide()),!1}),$(document.body).on("click","#asSeenInSamples #selectAllProducts",function(e){$("#asSeenInSamples .productList .item").each(function(e){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#basketErrors").hide())})}),$("#asSeenInSamples .productList .item.selected").each(function(e){skus.push($(this).data("skuid"))}),$(document.body).on("click","#asSeenInSamples .AddToBasket",function(e){var t=[];if(0==$("#asSeenInSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#asSeenInSamples .productList .item.selected").each(function(e){t.push($(this).data("skuid"))}),t.length>0){var o="/basket/action/?command=add&skuid="+t.join(",");$.get(o,function(e){if($("body .notification").remove(),"Successful"===e.Status){var t="";e.BasketWarnings.length>0&&(t="<p>",$.each(e.BasketWarnings,function(e,o){t+=o.Message+"<br><br>"}),t+="</p>"),$("#asSeenInSamples").foundation("reveal","close"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+t+"</div>").prependTo("body"),$.get("/asseenin/asseenin/relatedproducts/",{itemId:$("#AsSeenInItemId").val()},function(e){$("#productsListContainer").html(e)})}else{var o=[];$.each(e.BasketErrors,function(e,t){o.push(t.Message)}),$("#basketErrors").html(o.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),$(document.body).on("click","a.button.sample",function(e){e.preventDefault(),$("#inspirationSamples").foundation("reveal","open")}),$(document.body).on("click","#inspirationSamples #selectAllProducts",function(e){$("#inspirationSamples .productList .item").each(function(e){$(this).hasClass("selected")?$(this).removeClass("selected"):($(this).addClass("selected"),$("#noItemsSelected").hide())})}),$(document.body).on("click","#inspirationSamples .AddToBasket",function(e){var t=[];if($("#basketErrors").hide(),0==$("#inspirationSamples .productList .item.selected").length&&($("#basketErrors").text("Please select 1 or more products to add to the basket."),$("#basketErrors").show()),$("#inspirationSamples .productList .item.selected").each(function(e){t.push($(this).data("skuid"))}),t.length>0){var o="/basket/action/?command=add&sample=True&skuid="+t.join(",");$.get(o,function(e){if($("body .notification").remove(),"Successful"===e.Status){var t="";e.BasketWarnings.length>0&&(t="<p>",$.each(e.BasketWarnings,function(e,o){t+=o.Message+"<br><br>"}),t+="</p>"),$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Item(s) Added to Baskets</h2>'+t+"</div>").prependTo("body"),$("#inspirationSamples").foundation("reveal","close"),$.get("/inspirations/relatedproducts/",{inspirationId:$("#InspirationID").val()},function(e){$("#productsListContainer").html(e)})}else{var o=[];$.each(e.BasketErrors,function(e,t){o.push(t.Message)}),$("#basketErrors").html(o.join("<br/><br/>")),$("#basketErrors").show()}$(".notification").animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){$(".notification").animate({right:"-1000px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20})}return!1}),p(),$(document.body).on("click",".print",function(e){$(".reveal-modal").foundation("reveal","close"),e.preventDefault(),window.print()}),$("#delivery fieldset.optionList input[name=DeliveryMethod]:radio").click(function(e){var t=$(this).val();1==t?$("#delivery fieldset#stockist").fadeOut(300,function(){$("#whereToBuy").is(":visible")&&toggleStockists(),$("#delivery fieldset#address").fadeIn(300)}):2==t&&$("#delivery fieldset#address").fadeOut(300,function(){$("#delivery fieldset#stockist").fadeIn(300),""==$("#SelectedStockistId").val()&&toggleStockists()})}),$("#orderHistorySearch").submit(function(e){var t="";"Zoffany"==$("#SiteKey").val()&&(t+=" dark");var o=$('<div class="loading-container"><h2>Searching, please wait...</h2><div class="ajaxLoader'+t+'"></div></div>').html();return $("#orderListWrapper").html(o),$.get("/account/manage/orderlist",$(this).serialize(),function(e){$("#orderListWrapper").html(e)}),!1}),o(),a(),$(".scroller img, .scroller .scrapItem a, .scroller img, .scroller .details a").each(function(e,o){t(this)}),$("#PerPage").on("change",function(e){var t=window.location.href;t=Redant.util.setQuerystring(t,"page","1"),t=Redant.util.setQuerystring(t,"perpage",$(this).val()),window.location.replace(t)}),$("#loginRegister form, #aboutYouForm, #deliveryForm, form#checkoutpayment").on("submit",function(e){var t=$("#AboutYou_AcceptTermsAndConditions").prop("checked");$("<input />").attr("type","hidden").attr("name","AboutYou_AcceptTermsAndConditions").attr("value",t).appendTo($(this))}),$(document.body).on("click",".button.pinterest, a.pinterest",function(e){if($("#pinterestImages").length>0)return $("#pinterestImages img").each(function(){$(this).attr("src",$(this).data("src")),$(this).fadeIn("fast")}),$("#pinterestImages").foundation("reveal","open"),!1}).on("click",".button.scrapbook",function(e){e.preventDefault(),e.stopPropagation();var o=$(this),a=o.data("productcode"),i=(o.data("skuid"),o.data("imageassetid")),r=o.data("productname"),s=$("#studio ul").find("li div.details").not("*[data-productcode], *[data-imageassetid]").first();return $.post("/scrapbook/scraps/savescrap",{productCode:a,imageAssetId:i,name:r},function(e){s.replaceWith(e),$(".scroller img, .scroller .scrapItem a").each(function(e,o){t(this)}),$(document).trigger("productdragstop"),n()}),!1}),$(document.body).on("click","#selectCountry .country-list a",function(e){var t=$(this);$.ajax({cache:!1,url:t.attr("href"),success:function(e){if(window.location.href.indexOf("shop")>-1||window.location.href.indexOf("basket")>-1||window.location.href.indexOf("checkout")>-1)$cookie.set("changedCountry",JSON.stringify(e)),window.location.href=e.returnUrl;else if(e.currencyRegion){$("a[data-reveal-id=selectCountry] img").attr("src",e.currencyRegion.FlagImageUrl).attr("alt",e.currencyRegion.Name);var t=$("body .notification");t.remove(),(t="United Kingdom"!=e.currencyRegion.Name?$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+e.currencyRegion.Name+" will be billed in "+e.currencyRegion.Currency.Name+"</p><p>We currently do not deliver to this region.</p></div>").prependTo("body"):$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+e.currencyRegion.Name+" will be billed in "+e.currencyRegion.Currency.Name+"</p></div>").prependTo("body")).stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){t.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}$("#selectCountry").foundation("reveal","close")}});return!1})}),$cookie.get("changedCountry")){var i=JSON.parse($cookie.get("changedCountry"));$cookie.remove("changedCountry");var r=$("body .notification");r.remove(),"GBR"!=Model.RegionInfo.ThreeLetterISORegionName&&(r=$('<div class="notification"><h2 class="icon-shopping-cart">&#160;Country changed</h2><p>All deliveries to '+i.currencyRegion.Name+" will be billed in "+i.currencyRegion.Currency.Name+"</p></div>").prependTo("body")),r.stop(!0,!0).animate({right:"0px",avoidCSSTransitions:!0},500,function(){}),setTimeout(function(){r.stop(!0,!0).animate({right:"-520px",avoidCSSTransitions:!0},500,function(){})},1e4),jQuery.fx.interval=20}}}}(),Wg.Common.init();var classToggle={};classToggle={toggleOnEvent:function(e,t,o,a,n,i){if($(t).length>0){var r,s={};$(t).on(e,function(d){d.preventDefault(),(r="href"===o?$($(this).attr("href")):$(o)).toggleClass(a),n&&$(this).toggleClass(a),"click"===e&&1==i&&(s={trigger:t,targetEl:r,newclass:a},$(document).on("click",s,classToggle.offTriggerListener))})}},offTriggerListener:function(e){if(!$(e.target).closest(e.data.trigger).length&&!$(e.target).closest(e.data.targetEl).length){var t=e.data.newclass;$(e.data.trigger).removeClass(t),$(e.data.targetEl).removeClass(t),$(document).off("click",classToggle.offTriggerListener)}}},function(e,t){e(function(){if(t.touch){e("body").on("click",".has-dropdown>a",function(t){var o=e(this).parent();o.hasClass("touch-hover")?(o.removeClass("touch-hover"),e(".global-nav-dropdown",o).hide(),t.stopImmediatePropagation()):(o.addClass("touch-hover"),e(".global-nav-dropdown",o).show(),t.preventDefault(),t.stopImmediatePropagation())});var o=function(t){var o=e(".global-nav-dropdown"),a=e(".has-dropdown > a");(!o.is(t.target)&&0===o.has(t.target).length||!a.is(t.target)&&0===a.has(t.target).length)&&(o.parent().removeClass("touch-hover"),o.hide())};e("body").on("click",o)}})}(jQuery,Modernizr);var globalBrands={el:{container:$(".global-brands"),showBrands:$(".js-global-brands-show"),hideBrands:$(".js-global-brands-hide"),items:$("li",".global-brands-list"),openClass:"brands-open"},toggleState:function(e){var t=this.el;$(t.items).not(".active").stop().animate({width:"toggle",opacity:"toggle",avoidCSSTransitions:!0},{duration:500}),"hide"===e?(t.showBrands.show(),t.hideBrands.hide(),t.container.removeClass(t.openClass)):"show"===e&&(t.showBrands.hide(),t.hideBrands.show(),t.container.addClass(t.openClass))},bindUI:function(){var e=this,t=e.el;t.showBrands.on("click",function(t){t.preventDefault(),e.toggleState("show")}),t.hideBrands.on("click",function(t){t.preventDefault(),e.toggleState("hide")})},init:function(){this.bindUI()}};$.ui.autocomplete.prototype._renderItem=function(e,t){var o=this.term.split(" ").join("|"),a=new RegExp("("+o+")","gi"),n=t.label.replace(a,"<strong>$1</strong>");return $("<li></li>").data("item.autocomplete",t).append("<a>"+n+"</a>").appendTo(e)},jQuery.validator.unobtrusive.adapters.add("brequired",function(e){"INPUT"==e.element.tagName.toUpperCase()&&"CHECKBOX"==e.element.type.toUpperCase()&&(e.rules.required=!0,e.message&&(e.messages.required=e.message))}),jQuery.validator.addMethod("mustbetrue",function(e,t,o){return t.checked}),jQuery.validator.unobtrusive.adapters.addBool("mustbetrue"),$(document).ready(function(){});